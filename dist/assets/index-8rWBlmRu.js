function Ow(t,e){for(var h=0;h<e.length;h++){const x=e[h];if(typeof x!="string"&&!Array.isArray(x)){for(const v in x)if(v!=="default"&&!(v in t)){const S=Object.getOwnPropertyDescriptor(x,v);S&&Object.defineProperty(t,v,S.get?S:{enumerable:!0,get:()=>x[v]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))x(v);new MutationObserver(v=>{for(const S of v)if(S.type==="childList")for(const _ of S.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&x(_)}).observe(document,{childList:!0,subtree:!0});function h(v){const S={};return v.integrity&&(S.integrity=v.integrity),v.referrerPolicy&&(S.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?S.credentials="include":v.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function x(v){if(v.ep)return;v.ep=!0;const S=h(v);fetch(v.href,S)}})();var Qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Nw(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var h=function x(){var v=!1;try{v=this instanceof x}catch{}return v?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};h.prototype=e.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(t).forEach(function(x){var v=Object.getOwnPropertyDescriptor(t,x);Object.defineProperty(h,x,v.get?v:{enumerable:!0,get:function(){return t[x]}})}),h}var rg={exports:{}},Zu={},ig={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm;function Lw(){if(Jm)return pt;Jm=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),_=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),r=Symbol.for("react.lazy"),c=Symbol.iterator;function l(R){return R===null||typeof R!="object"?null:(R=c&&R[c]||R["@@iterator"],typeof R=="function"?R:null)}var i={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s=Object.assign,o={};function a(R,V,W){this.props=R,this.context=V,this.refs=o,this.updater=W||i}a.prototype.isReactComponent={},a.prototype.setState=function(R,V){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,V,"setState")},a.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function m(){}m.prototype=a.prototype;function f(R,V,W){this.props=R,this.context=V,this.refs=o,this.updater=W||i}var g=f.prototype=new m;g.constructor=f,s(g,a.prototype),g.isPureReactComponent=!0;var w=Array.isArray,C=Object.prototype.hasOwnProperty,P={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function L(R,V,W){var q,oe={},Y=null,I=null;if(V!=null)for(q in V.ref!==void 0&&(I=V.ref),V.key!==void 0&&(Y=""+V.key),V)C.call(V,q)&&!M.hasOwnProperty(q)&&(oe[q]=V[q]);var K=arguments.length-2;if(K===1)oe.children=W;else if(1<K){for(var ne=Array(K),le=0;le<K;le++)ne[le]=arguments[le+2];oe.children=ne}if(R&&R.defaultProps)for(q in K=R.defaultProps,K)oe[q]===void 0&&(oe[q]=K[q]);return{$$typeof:t,type:R,key:Y,ref:I,props:oe,_owner:P.current}}function B(R,V){return{$$typeof:t,type:R.type,key:V,ref:R.ref,props:R.props,_owner:R._owner}}function D(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function H(R){var V={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(W){return V[W]})}var Q=/\/+/g;function ee(R,V){return typeof R=="object"&&R!==null&&R.key!=null?H(""+R.key):V.toString(36)}function se(R,V,W,q,oe){var Y=typeof R;(Y==="undefined"||Y==="boolean")&&(R=null);var I=!1;if(R===null)I=!0;else switch(Y){case"string":case"number":I=!0;break;case"object":switch(R.$$typeof){case t:case e:I=!0}}if(I)return I=R,oe=oe(I),R=q===""?"."+ee(I,0):q,w(oe)?(W="",R!=null&&(W=R.replace(Q,"$&/")+"/"),se(oe,V,W,"",function(le){return le})):oe!=null&&(D(oe)&&(oe=B(oe,W+(!oe.key||I&&I.key===oe.key?"":(""+oe.key).replace(Q,"$&/")+"/")+R)),V.push(oe)),1;if(I=0,q=q===""?".":q+":",w(R))for(var K=0;K<R.length;K++){Y=R[K];var ne=q+ee(Y,K);I+=se(Y,V,W,ne,oe)}else if(ne=l(R),typeof ne=="function")for(R=ne.call(R),K=0;!(Y=R.next()).done;)Y=Y.value,ne=q+ee(Y,K++),I+=se(Y,V,W,ne,oe);else if(Y==="object")throw V=String(R),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return I}function ie(R,V,W){if(R==null)return R;var q=[],oe=0;return se(R,q,"","",function(Y){return V.call(W,Y,oe++)}),q}function ue(R){if(R._status===-1){var V=R._result;V=V(),V.then(function(W){(R._status===0||R._status===-1)&&(R._status=1,R._result=W)},function(W){(R._status===0||R._status===-1)&&(R._status=2,R._result=W)}),R._status===-1&&(R._status=0,R._result=V)}if(R._status===1)return R._result.default;throw R._result}var U={current:null},X={transition:null},Z={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:X,ReactCurrentOwner:P};function $(){throw Error("act(...) is not supported in production builds of React.")}return pt.Children={map:ie,forEach:function(R,V,W){ie(R,function(){V.apply(this,arguments)},W)},count:function(R){var V=0;return ie(R,function(){V++}),V},toArray:function(R){return ie(R,function(V){return V})||[]},only:function(R){if(!D(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},pt.Component=a,pt.Fragment=h,pt.Profiler=v,pt.PureComponent=f,pt.StrictMode=x,pt.Suspense=E,pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,pt.act=$,pt.cloneElement=function(R,V,W){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var q=s({},R.props),oe=R.key,Y=R.ref,I=R._owner;if(V!=null){if(V.ref!==void 0&&(Y=V.ref,I=P.current),V.key!==void 0&&(oe=""+V.key),R.type&&R.type.defaultProps)var K=R.type.defaultProps;for(ne in V)C.call(V,ne)&&!M.hasOwnProperty(ne)&&(q[ne]=V[ne]===void 0&&K!==void 0?K[ne]:V[ne])}var ne=arguments.length-2;if(ne===1)q.children=W;else if(1<ne){K=Array(ne);for(var le=0;le<ne;le++)K[le]=arguments[le+2];q.children=K}return{$$typeof:t,type:R.type,key:oe,ref:Y,props:q,_owner:I}},pt.createContext=function(R){return R={$$typeof:_,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:S,_context:R},R.Consumer=R},pt.createElement=L,pt.createFactory=function(R){var V=L.bind(null,R);return V.type=R,V},pt.createRef=function(){return{current:null}},pt.forwardRef=function(R){return{$$typeof:T,render:R}},pt.isValidElement=D,pt.lazy=function(R){return{$$typeof:r,_payload:{_status:-1,_result:R},_init:ue}},pt.memo=function(R,V){return{$$typeof:d,type:R,compare:V===void 0?null:V}},pt.startTransition=function(R){var V=X.transition;X.transition={};try{R()}finally{X.transition=V}},pt.unstable_act=$,pt.useCallback=function(R,V){return U.current.useCallback(R,V)},pt.useContext=function(R){return U.current.useContext(R)},pt.useDebugValue=function(){},pt.useDeferredValue=function(R){return U.current.useDeferredValue(R)},pt.useEffect=function(R,V){return U.current.useEffect(R,V)},pt.useId=function(){return U.current.useId()},pt.useImperativeHandle=function(R,V,W){return U.current.useImperativeHandle(R,V,W)},pt.useInsertionEffect=function(R,V){return U.current.useInsertionEffect(R,V)},pt.useLayoutEffect=function(R,V){return U.current.useLayoutEffect(R,V)},pt.useMemo=function(R,V){return U.current.useMemo(R,V)},pt.useReducer=function(R,V,W){return U.current.useReducer(R,V,W)},pt.useRef=function(R){return U.current.useRef(R)},pt.useState=function(R){return U.current.useState(R)},pt.useSyncExternalStore=function(R,V,W){return U.current.useSyncExternalStore(R,V,W)},pt.useTransition=function(){return U.current.useTransition()},pt.version="18.3.1",pt}var Zm;function fh(){return Zm||(Zm=1,ig.exports=Lw()),ig.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function Mw(){if(e0)return Zu;e0=1;var t=fh(),e=Symbol.for("react.element"),h=Symbol.for("react.fragment"),x=Object.prototype.hasOwnProperty,v=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function _(T,E,d){var r,c={},l=null,i=null;d!==void 0&&(l=""+d),E.key!==void 0&&(l=""+E.key),E.ref!==void 0&&(i=E.ref);for(r in E)x.call(E,r)&&!S.hasOwnProperty(r)&&(c[r]=E[r]);if(T&&T.defaultProps)for(r in E=T.defaultProps,E)c[r]===void 0&&(c[r]=E[r]);return{$$typeof:e,type:T,key:l,ref:i,props:c,_owner:v.current}}return Zu.Fragment=h,Zu.jsx=_,Zu.jsxs=_,Zu}var t0;function Aw(){return t0||(t0=1,rg.exports=Mw()),rg.exports}var k=Aw(),ae=fh();const Fn=dh(ae),Rw=Ow({__proto__:null,default:Fn},[ae]);var Od={},sg={exports:{}},Pr={},ag={exports:{}},og={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function Dw(){return n0||(n0=1,(function(t){function e(X,Z){var $=X.length;X.push(Z);e:for(;0<$;){var R=$-1>>>1,V=X[R];if(0<v(V,Z))X[R]=Z,X[$]=V,$=R;else break e}}function h(X){return X.length===0?null:X[0]}function x(X){if(X.length===0)return null;var Z=X[0],$=X.pop();if($!==Z){X[0]=$;e:for(var R=0,V=X.length,W=V>>>1;R<W;){var q=2*(R+1)-1,oe=X[q],Y=q+1,I=X[Y];if(0>v(oe,$))Y<V&&0>v(I,oe)?(X[R]=I,X[Y]=$,R=Y):(X[R]=oe,X[q]=$,R=q);else if(Y<V&&0>v(I,$))X[R]=I,X[Y]=$,R=Y;else break e}}return Z}function v(X,Z){var $=X.sortIndex-Z.sortIndex;return $!==0?$:X.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;t.unstable_now=function(){return S.now()}}else{var _=Date,T=_.now();t.unstable_now=function(){return _.now()-T}}var E=[],d=[],r=1,c=null,l=3,i=!1,s=!1,o=!1,a=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(X){for(var Z=h(d);Z!==null;){if(Z.callback===null)x(d);else if(Z.startTime<=X)x(d),Z.sortIndex=Z.expirationTime,e(E,Z);else break;Z=h(d)}}function w(X){if(o=!1,g(X),!s)if(h(E)!==null)s=!0,ue(C);else{var Z=h(d);Z!==null&&U(w,Z.startTime-X)}}function C(X,Z){s=!1,o&&(o=!1,m(L),L=-1),i=!0;var $=l;try{for(g(Z),c=h(E);c!==null&&(!(c.expirationTime>Z)||X&&!H());){var R=c.callback;if(typeof R=="function"){c.callback=null,l=c.priorityLevel;var V=R(c.expirationTime<=Z);Z=t.unstable_now(),typeof V=="function"?c.callback=V:c===h(E)&&x(E),g(Z)}else x(E);c=h(E)}if(c!==null)var W=!0;else{var q=h(d);q!==null&&U(w,q.startTime-Z),W=!1}return W}finally{c=null,l=$,i=!1}}var P=!1,M=null,L=-1,B=5,D=-1;function H(){return!(t.unstable_now()-D<B)}function Q(){if(M!==null){var X=t.unstable_now();D=X;var Z=!0;try{Z=M(!0,X)}finally{Z?ee():(P=!1,M=null)}}else P=!1}var ee;if(typeof f=="function")ee=function(){f(Q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ie=se.port2;se.port1.onmessage=Q,ee=function(){ie.postMessage(null)}}else ee=function(){a(Q,0)};function ue(X){M=X,P||(P=!0,ee())}function U(X,Z){L=a(function(){X(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){s||i||(s=!0,ue(C))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return l},t.unstable_getFirstCallbackNode=function(){return h(E)},t.unstable_next=function(X){switch(l){case 1:case 2:case 3:var Z=3;break;default:Z=l}var $=l;l=Z;try{return X()}finally{l=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,Z){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var $=l;l=X;try{return Z()}finally{l=$}},t.unstable_scheduleCallback=function(X,Z,$){var R=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?R+$:R):$=R,X){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=$+V,X={id:r++,callback:Z,priorityLevel:X,startTime:$,expirationTime:V,sortIndex:-1},$>R?(X.sortIndex=$,e(d,X),h(E)===null&&X===h(d)&&(o?(m(L),L=-1):o=!0,U(w,$-R))):(X.sortIndex=V,e(E,X),s||i||(s=!0,ue(C))),X},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(X){var Z=l;return function(){var $=l;l=Z;try{return X.apply(this,arguments)}finally{l=$}}}})(og)),og}var r0;function Ep(){return r0||(r0=1,ag.exports=Dw()),ag.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function Fw(){if(i0)return Pr;i0=1;var t=fh(),e=Ep();function h(n){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+n,b=1;b<arguments.length;b++)u+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+n+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x=new Set,v={};function S(n,u){_(n,u),_(n+"Capture",u)}function _(n,u){for(v[n]=u,n=0;n<u.length;n++)x.add(u[n])}var T=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,r={},c={};function l(n){return E.call(c,n)?!0:E.call(r,n)?!1:d.test(n)?c[n]=!0:(r[n]=!0,!1)}function i(n,u,b,O){if(b!==null&&b.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return O?!1:b!==null?!b.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function s(n,u,b,O){if(u===null||typeof u>"u"||i(n,u,b,O))return!0;if(O)return!1;if(b!==null)switch(b.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function o(n,u,b,O,A,z,J){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=O,this.attributeNamespace=A,this.mustUseProperty=b,this.propertyName=n,this.type=u,this.sanitizeURL=z,this.removeEmptyString=J}var a={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){a[n]=new o(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var u=n[0];a[u]=new o(u,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){a[n]=new o(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){a[n]=new o(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){a[n]=new o(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){a[n]=new o(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){a[n]=new o(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){a[n]=new o(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){a[n]=new o(n,5,!1,n.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function f(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var u=n.replace(m,f);a[u]=new o(u,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var u=n.replace(m,f);a[u]=new o(u,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var u=n.replace(m,f);a[u]=new o(u,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){a[n]=new o(n,1,!1,n.toLowerCase(),null,!1,!1)}),a.xlinkHref=new o("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){a[n]=new o(n,1,!1,n.toLowerCase(),null,!0,!0)});function g(n,u,b,O){var A=a.hasOwnProperty(u)?a[u]:null;(A!==null?A.type!==0:O||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(s(u,b,A,O)&&(b=null),O||A===null?l(u)&&(b===null?n.removeAttribute(u):n.setAttribute(u,""+b)):A.mustUseProperty?n[A.propertyName]=b===null?A.type===3?!1:"":b:(u=A.attributeName,O=A.attributeNamespace,b===null?n.removeAttribute(u):(A=A.type,b=A===3||A===4&&b===!0?"":""+b,O?n.setAttributeNS(O,u,b):n.setAttribute(u,b))))}var w=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),P=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),H=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),X=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var $=Object.assign,R;function V(n){if(R===void 0)try{throw Error()}catch(b){var u=b.stack.trim().match(/\n( *(at )?)/);R=u&&u[1]||""}return`
`+R+n}var W=!1;function q(n,u){if(!n||W)return"";W=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Pe){var O=Pe}Reflect.construct(n,[],u)}else{try{u.call()}catch(Pe){O=Pe}n.call(u.prototype)}else{try{throw Error()}catch(Pe){O=Pe}n()}}catch(Pe){if(Pe&&O&&typeof Pe.stack=="string"){for(var A=Pe.stack.split(`
`),z=O.stack.split(`
`),J=A.length-1,ce=z.length-1;1<=J&&0<=ce&&A[J]!==z[ce];)ce--;for(;1<=J&&0<=ce;J--,ce--)if(A[J]!==z[ce]){if(J!==1||ce!==1)do if(J--,ce--,0>ce||A[J]!==z[ce]){var ge=`
`+A[J].replace(" at new "," at ");return n.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",n.displayName)),ge}while(1<=J&&0<=ce);break}}}finally{W=!1,Error.prepareStackTrace=b}return(n=n?n.displayName||n.name:"")?V(n):""}function oe(n){switch(n.tag){case 5:return V(n.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return n=q(n.type,!1),n;case 11:return n=q(n.type.render,!1),n;case 1:return n=q(n.type,!0),n;default:return""}}function Y(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case P:return"Portal";case B:return"Profiler";case L:return"StrictMode";case ee:return"Suspense";case se:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case H:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case Q:var u=n.render;return n=n.displayName,n||(n=u.displayName||u.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ie:return u=n.displayName||null,u!==null?u:Y(n.type)||"Memo";case ue:u=n._payload,n=n._init;try{return Y(n(u))}catch{}}return null}function I(n){var u=n.type;switch(n.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=u.render,n=n.displayName||n.name||"",u.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y(u);case 8:return u===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function K(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ne(n){var u=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function le(n){var u=ne(n)?"checked":"value",b=Object.getOwnPropertyDescriptor(n.constructor.prototype,u),O=""+n[u];if(!n.hasOwnProperty(u)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var A=b.get,z=b.set;return Object.defineProperty(n,u,{configurable:!0,get:function(){return A.call(this)},set:function(J){O=""+J,z.call(this,J)}}),Object.defineProperty(n,u,{enumerable:b.enumerable}),{getValue:function(){return O},setValue:function(J){O=""+J},stopTracking:function(){n._valueTracker=null,delete n[u]}}}}function he(n){n._valueTracker||(n._valueTracker=le(n))}function ve(n){if(!n)return!1;var u=n._valueTracker;if(!u)return!0;var b=u.getValue(),O="";return n&&(O=ne(n)?n.checked?"true":"false":n.value),n=O,n!==b?(u.setValue(n),!0):!1}function ye(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Oe(n,u){var b=u.checked;return $({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??n._wrapperState.initialChecked})}function pe(n,u){var b=u.defaultValue==null?"":u.defaultValue,O=u.checked!=null?u.checked:u.defaultChecked;b=K(u.value!=null?u.value:b),n._wrapperState={initialChecked:O,initialValue:b,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function de(n,u){u=u.checked,u!=null&&g(n,"checked",u,!1)}function Ce(n,u){de(n,u);var b=K(u.value),O=u.type;if(b!=null)O==="number"?(b===0&&n.value===""||n.value!=b)&&(n.value=""+b):n.value!==""+b&&(n.value=""+b);else if(O==="submit"||O==="reset"){n.removeAttribute("value");return}u.hasOwnProperty("value")?fe(n,u.type,b):u.hasOwnProperty("defaultValue")&&fe(n,u.type,K(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(n.defaultChecked=!!u.defaultChecked)}function te(n,u,b){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var O=u.type;if(!(O!=="submit"&&O!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+n._wrapperState.initialValue,b||u===n.value||(n.value=u),n.defaultValue=u}b=n.name,b!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,b!==""&&(n.name=b)}function fe(n,u,b){(u!=="number"||ye(n.ownerDocument)!==n)&&(b==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+b&&(n.defaultValue=""+b))}var Se=Array.isArray;function je(n,u,b,O){if(n=n.options,u){u={};for(var A=0;A<b.length;A++)u["$"+b[A]]=!0;for(b=0;b<n.length;b++)A=u.hasOwnProperty("$"+n[b].value),n[b].selected!==A&&(n[b].selected=A),A&&O&&(n[b].defaultSelected=!0)}else{for(b=""+K(b),u=null,A=0;A<n.length;A++){if(n[A].value===b){n[A].selected=!0,O&&(n[A].defaultSelected=!0);return}u!==null||n[A].disabled||(u=n[A])}u!==null&&(u.selected=!0)}}function Me(n,u){if(u.dangerouslySetInnerHTML!=null)throw Error(h(91));return $({},u,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Le(n,u){var b=u.value;if(b==null){if(b=u.children,u=u.defaultValue,b!=null){if(u!=null)throw Error(h(92));if(Se(b)){if(1<b.length)throw Error(h(93));b=b[0]}u=b}u==null&&(u=""),b=u}n._wrapperState={initialValue:K(b)}}function _e(n,u){var b=K(u.value),O=K(u.defaultValue);b!=null&&(b=""+b,b!==n.value&&(n.value=b),u.defaultValue==null&&n.defaultValue!==b&&(n.defaultValue=b)),O!=null&&(n.defaultValue=""+O)}function Ie(n){var u=n.textContent;u===n._wrapperState.initialValue&&u!==""&&u!==null&&(n.value=u)}function He(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Je(n,u){return n==null||n==="http://www.w3.org/1999/xhtml"?He(u):n==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var nt,ot=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,b,O,A){MSApp.execUnsafeLocalFunction(function(){return n(u,b,O,A)})}:n})(function(n,u){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=u;else{for(nt=nt||document.createElement("div"),nt.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=nt.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;u.firstChild;)n.appendChild(u.firstChild)}});function dt(n,u){if(u){var b=n.firstChild;if(b&&b===n.lastChild&&b.nodeType===3){b.nodeValue=u;return}}n.textContent=u}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bn=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(n){Bn.forEach(function(u){u=u+n.charAt(0).toUpperCase()+n.substring(1),ut[u]=ut[n]})});function Nr(n,u,b){return u==null||typeof u=="boolean"||u===""?"":b||typeof u!="number"||u===0||ut.hasOwnProperty(n)&&ut[n]?(""+u).trim():u+"px"}function dn(n,u){n=n.style;for(var b in u)if(u.hasOwnProperty(b)){var O=b.indexOf("--")===0,A=Nr(b,u[b],O);b==="float"&&(b="cssFloat"),O?n.setProperty(b,A):n[b]=A}}var Da=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Si(n,u){if(u){if(Da[n]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(h(137,n));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(h(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(h(61))}if(u.style!=null&&typeof u.style!="object")throw Error(h(62))}}function Ms(n,u){if(n.indexOf("-")===-1)return typeof u.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fa=null;function tu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var nu=null,As=null,Rs=null;function xh(n){if(n=no(n)){if(typeof nu!="function")throw Error(h(280));var u=n.stateNode;u&&(u=mn(u),nu(n.stateNode,n.type,u))}}function ru(n){As?Rs?Rs.push(n):Rs=[n]:As=n}function iu(){if(As){var n=As,u=Rs;if(Rs=As=null,xh(n),u)for(n=0;n<u.length;n++)xh(u[n])}}function wh(n,u){return n(u)}function jo(){}var Oo=!1;function su(n,u,b){if(Oo)return n(u,b);Oo=!0;try{return wh(n,u,b)}finally{Oo=!1,(As!==null||Rs!==null)&&(jo(),iu())}}function Ia(n,u){var b=n.stateNode;if(b===null)return null;var O=mn(b);if(O===null)return null;b=O[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(n=n.type,O=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!O;break e;default:n=!1}if(n)return null;if(b&&typeof b!="function")throw Error(h(231,u,typeof b));return b}var au=!1;if(T)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){au=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{au=!1}function _h(n,u,b,O,A,z,J,ce,ge){var Pe=Array.prototype.slice.call(arguments,3);try{u.apply(b,Pe)}catch(Re){this.onError(Re)}}var $i=!1,No=null,Lo=!1,Ds=null,xf={onError:function(n){$i=!0,No=n}};function wf(n,u,b,O,A,z,J,ce,ge){$i=!1,No=null,_h.apply(xf,arguments)}function _f(n,u,b,O,A,z,J,ce,ge){if(wf.apply(this,arguments),$i){if($i){var Pe=No;$i=!1,No=null}else throw Error(h(198));Lo||(Lo=!0,Ds=Pe)}}function Qi(n){var u=n,b=n;if(n.alternate)for(;u.return;)u=u.return;else{n=u;do u=n,(u.flags&4098)!==0&&(b=u.return),n=u.return;while(n)}return u.tag===3?b:null}function bh(n){if(n.tag===13){var u=n.memoizedState;if(u===null&&(n=n.alternate,n!==null&&(u=n.memoizedState)),u!==null)return u.dehydrated}return null}function Sh(n){if(Qi(n)!==n)throw Error(h(188))}function bf(n){var u=n.alternate;if(!u){if(u=Qi(n),u===null)throw Error(h(188));return u!==n?null:n}for(var b=n,O=u;;){var A=b.return;if(A===null)break;var z=A.alternate;if(z===null){if(O=A.return,O!==null){b=O;continue}break}if(A.child===z.child){for(z=A.child;z;){if(z===b)return Sh(A),n;if(z===O)return Sh(A),u;z=z.sibling}throw Error(h(188))}if(b.return!==O.return)b=A,O=z;else{for(var J=!1,ce=A.child;ce;){if(ce===b){J=!0,b=A,O=z;break}if(ce===O){J=!0,O=A,b=z;break}ce=ce.sibling}if(!J){for(ce=z.child;ce;){if(ce===b){J=!0,b=z,O=A;break}if(ce===O){J=!0,O=z,b=A;break}ce=ce.sibling}if(!J)throw Error(h(189))}}if(b.alternate!==O)throw Error(h(190))}if(b.tag!==3)throw Error(h(188));return b.stateNode.current===b?n:u}function Ch(n){return n=bf(n),n!==null?kh(n):null}function kh(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var u=kh(n);if(u!==null)return u;n=n.sibling}return null}var Th=e.unstable_scheduleCallback,Ph=e.unstable_cancelCallback,Sf=e.unstable_shouldYield,Cf=e.unstable_requestPaint,Wt=e.unstable_now,ou=e.unstable_getCurrentPriorityLevel,Ji=e.unstable_ImmediatePriority,Mo=e.unstable_UserBlockingPriority,Fs=e.unstable_NormalPriority,kf=e.unstable_LowPriority,Ao=e.unstable_IdlePriority,ii=null,_n=null;function Lt(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(ii,n,void 0,(n.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:Qn,Ci=Math.log,En=Math.LN2;function Qn(n){return n>>>=0,n===0?32:31-(Ci(n)/En|0)|0}var zr=64,si=4194304;function fn(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Zi(n,u){var b=n.pendingLanes;if(b===0)return 0;var O=0,A=n.suspendedLanes,z=n.pingedLanes,J=b&268435455;if(J!==0){var ce=J&~A;ce!==0?O=fn(ce):(z&=J,z!==0&&(O=fn(z)))}else J=b&~A,J!==0?O=fn(J):z!==0&&(O=fn(z));if(O===0)return 0;if(u!==0&&u!==O&&(u&A)===0&&(A=O&-O,z=u&-u,A>=z||A===16&&(z&4194240)!==0))return u;if((O&4)!==0&&(O|=b&16),u=n.entangledLanes,u!==0)for(n=n.entanglements,u&=O;0<u;)b=31-ft(u),A=1<<b,O|=n[b],u&=~A;return O}function Eh(n,u){switch(n){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jh(n,u){for(var b=n.suspendedLanes,O=n.pingedLanes,A=n.expirationTimes,z=n.pendingLanes;0<z;){var J=31-ft(z),ce=1<<J,ge=A[J];ge===-1?((ce&b)===0||(ce&O)!==0)&&(A[J]=Eh(ce,u)):ge<=u&&(n.expiredLanes|=ce),z&=~ce}}function Is(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function lu(){var n=zr;return zr<<=1,(zr&4194240)===0&&(zr=64),n}function sr(n){for(var u=[],b=0;31>b;b++)u.push(n);return u}function za(n,u,b){n.pendingLanes|=u,u!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,u=31-ft(u),n[u]=b}function Tf(n,u){var b=n.pendingLanes&~u;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=u,n.mutableReadLanes&=u,n.entangledLanes&=u,u=n.entanglements;var O=n.eventTimes;for(n=n.expirationTimes;0<b;){var A=31-ft(b),z=1<<A;u[A]=0,O[A]=-1,n[A]=-1,b&=~z}}function uu(n,u){var b=n.entangledLanes|=u;for(n=n.entanglements;b;){var O=31-ft(b),A=1<<O;A&u|n[O]&u&&(n[O]|=u),b&=~A}}var wt=0;function Ua(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Bs,zs,Oh,Nh,Ro,Do=!1,Us=[],xr=null,ki=null,Ur=null,gt=new Map,Vs=new Map,Vr=[],Lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mh(n,u){switch(n){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":gt.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vs.delete(u.pointerId)}}function Va(n,u,b,O,A,z){return n===null||n.nativeEvent!==z?(n={blockedOn:u,domEventName:b,eventSystemFlags:O,nativeEvent:z,targetContainers:[A]},u!==null&&(u=no(u),u!==null&&zs(u)),n):(n.eventSystemFlags|=O,u=n.targetContainers,A!==null&&u.indexOf(A)===-1&&u.push(A),n)}function gn(n,u,b,O,A){switch(u){case"focusin":return xr=Va(xr,n,u,b,O,A),!0;case"dragenter":return ki=Va(ki,n,u,b,O,A),!0;case"mouseover":return Ur=Va(Ur,n,u,b,O,A),!0;case"pointerover":var z=A.pointerId;return gt.set(z,Va(gt.get(z)||null,n,u,b,O,A)),!0;case"gotpointercapture":return z=A.pointerId,Vs.set(z,Va(Vs.get(z)||null,n,u,b,O,A)),!0}return!1}function Fo(n){var u=Ri(n.target);if(u!==null){var b=Qi(u);if(b!==null){if(u=b.tag,u===13){if(u=bh(b),u!==null){n.blockedOn=u,Ro(n.priority,function(){Oh(b)});return}}else if(u===3&&b.stateNode.current.memoizedState.isDehydrated){n.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Io(n){if(n.blockedOn!==null)return!1;for(var u=n.targetContainers;0<u.length;){var b=Uo(n.domEventName,n.eventSystemFlags,u[0],n.nativeEvent);if(b===null){b=n.nativeEvent;var O=new b.constructor(b.type,b);Fa=O,b.target.dispatchEvent(O),Fa=null}else return u=no(b),u!==null&&zs(u),n.blockedOn=b,!1;u.shift()}return!0}function Bo(n,u,b){Io(n)&&b.delete(u)}function Pf(){Do=!1,xr!==null&&Io(xr)&&(xr=null),ki!==null&&Io(ki)&&(ki=null),Ur!==null&&Io(Ur)&&(Ur=null),gt.forEach(Bo),Vs.forEach(Bo)}function Ti(n,u){n.blockedOn===u&&(n.blockedOn=null,Do||(Do=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pf)))}function Jn(n){function u(A){return Ti(A,n)}if(0<Us.length){Ti(Us[0],n);for(var b=1;b<Us.length;b++){var O=Us[b];O.blockedOn===n&&(O.blockedOn=null)}}for(xr!==null&&Ti(xr,n),ki!==null&&Ti(ki,n),Ur!==null&&Ti(Ur,n),gt.forEach(u),Vs.forEach(u),b=0;b<Vr.length;b++)O=Vr[b],O.blockedOn===n&&(O.blockedOn=null);for(;0<Vr.length&&(b=Vr[0],b.blockedOn===null);)Fo(b),b.blockedOn===null&&Vr.shift()}var Gs=w.ReactCurrentBatchConfig,zo=!0;function Lr(n,u,b,O){var A=wt,z=Gs.transition;Gs.transition=null;try{wt=1,Hs(n,u,b,O)}finally{wt=A,Gs.transition=z}}function ai(n,u,b,O){var A=wt,z=Gs.transition;Gs.transition=null;try{wt=4,Hs(n,u,b,O)}finally{wt=A,Gs.transition=z}}function Hs(n,u,b,O){if(zo){var A=Uo(n,u,b,O);if(A===null)rl(n,u,O,Ws,b),Mh(n,O);else if(gn(A,n,u,b,O))O.stopPropagation();else if(Mh(n,O),u&4&&-1<Lh.indexOf(n)){for(;A!==null;){var z=no(A);if(z!==null&&Bs(z),z=Uo(n,u,b,O),z===null&&rl(n,u,O,Ws,b),z===A)break;A=z}A!==null&&O.stopPropagation()}else rl(n,u,O,null,b)}}var Ws=null;function Uo(n,u,b,O){if(Ws=null,n=tu(O),n=Ri(n),n!==null)if(u=Qi(n),u===null)n=null;else if(b=u.tag,b===13){if(n=bh(u),n!==null)return n;n=null}else if(b===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;n=null}else u!==n&&(n=null);return Ws=n,null}function Ah(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ou()){case Ji:return 1;case Mo:return 4;case Fs:case kf:return 16;case Ao:return 536870912;default:return 16}default:return 16}}var bn=null,Pi=null,oi=null;function Ga(){if(oi)return oi;var n,u=Pi,b=u.length,O,A="value"in bn?bn.value:bn.textContent,z=A.length;for(n=0;n<b&&u[n]===A[n];n++);var J=b-n;for(O=1;O<=J&&u[b-O]===A[z-O];O++);return oi=A.slice(n,1<O?1-O:void 0)}function es(n){var u=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&u===13&&(n=13)):n=u,n===10&&(n=13),32<=n||n===13?n:0}function zn(){return!0}function ar(){return!1}function tn(n){function u(b,O,A,z,J){this._reactName=b,this._targetInst=A,this.type=O,this.nativeEvent=z,this.target=J,this.currentTarget=null;for(var ce in n)n.hasOwnProperty(ce)&&(b=n[ce],this[ce]=b?b(z):z[ce]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?zn:ar,this.isPropagationStopped=ar,this}return $(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),u}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mr=tn(Zn),Ar=$({},Zn,{view:0,detail:0}),Rh=tn(Ar),Ha,Wa,Sn,Un=$({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ns,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Sn&&(Sn&&n.type==="mousemove"?(Ha=n.screenX-Sn.screenX,Wa=n.screenY-Sn.screenY):Wa=Ha=0,Sn=n),Ha)},movementY:function(n){return"movementY"in n?n.movementY:Wa}}),Mt=tn(Un),Xa=$({},Un,{dataTransfer:0}),Rr=tn(Xa),Dh=$({},Ar,{relatedTarget:0}),Vo=tn(Dh),cu=$({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),hu=tn(cu),Fh=$({},Zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Go=tn(Fh),Ih=$({},Zn,{data:0}),ts=tn(Ih),du={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ef={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ho={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jf(n){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(n):(n=Ho[n])?!!u[n]:!1}function ns(){return jf}var Wo=$({},Ar,{key:function(n){if(n.key){var u=du[n.key]||n.key;if(u!=="Unidentified")return u}return n.type==="keypress"?(n=es(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ef[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ns,charCode:function(n){return n.type==="keypress"?es(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?es(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Bh=tn(Wo),zh=$({},Un,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rs=tn(zh),Uh=$({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ns}),Xo=tn(Uh),Yo=$({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xs=tn(Yo),fu=$({},Un,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),gu=tn(fu),Vh=[9,13,27,32],Ya=T&&"CompositionEvent"in window,is=null;T&&"documentMode"in document&&(is=document.documentMode);var Ys=T&&"TextEvent"in window&&!is,or=T&&(!Ya||is&&8<is&&11>=is),Ei=" ",qo=!1;function pu(n,u){switch(n){case"keyup":return Vh.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dr(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var lr=!1;function mu(n,u){switch(n){case"compositionend":return Dr(u);case"keypress":return u.which!==32?null:(qo=!0,Ei);case"textInput":return n=u.data,n===Ei&&qo?null:n;default:return null}}function Gh(n,u){if(lr)return n==="compositionend"||!Ya&&pu(n,u)?(n=Ga(),oi=Pi=bn=null,lr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return or&&u.locale!=="ko"?null:u.data;default:return null}}var li={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ui(n){var u=n&&n.nodeName&&n.nodeName.toLowerCase();return u==="input"?!!li[n.type]:u==="textarea"}function qa(n,u,b,O){ru(O),u=il(u,"onChange"),0<u.length&&(b=new Mr("onChange","change",null,b,O),n.push({event:b,listeners:u}))}var qs=null,ji=null;function Hh(n){Pu(n,0)}function Oi(n){var u=rn(n);if(ve(u))return n}function wr(n,u){if(n==="change")return u}var Ks=!1;if(T){var Ni;if(T){var _r="oninput"in document;if(!_r){var Ko=document.createElement("div");Ko.setAttribute("oninput","return;"),_r=typeof Ko.oninput=="function"}Ni=_r}else Ni=!1;Ks=Ni&&(!document.documentMode||9<document.documentMode)}function ss(){qs&&(qs.detachEvent("onpropertychange",vu),ji=qs=null)}function vu(n){if(n.propertyName==="value"&&Oi(ji)){var u=[];qa(u,ji,n,tu(n)),su(Hh,u)}}function yu(n,u,b){n==="focusin"?(ss(),qs=u,ji=b,qs.attachEvent("onpropertychange",vu)):n==="focusout"&&ss()}function zt(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Oi(ji)}function $o(n,u){if(n==="click")return Oi(u)}function xu(n,u){if(n==="input"||n==="change")return Oi(u)}function wu(n,u){return n===u&&(n!==0||1/n===1/u)||n!==n&&u!==u}var er=typeof Object.is=="function"?Object.is:wu;function as(n,u){if(er(n,u))return!0;if(typeof n!="object"||n===null||typeof u!="object"||u===null)return!1;var b=Object.keys(n),O=Object.keys(u);if(b.length!==O.length)return!1;for(O=0;O<b.length;O++){var A=b[O];if(!E.call(u,A)||!er(n[A],u[A]))return!1}return!0}function Li(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Dt(n,u){var b=Li(n);n=0;for(var O;b;){if(b.nodeType===3){if(O=n+b.textContent.length,n<=u&&O>=u)return{node:b,offset:u-n};n=O}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Li(b)}}function Kt(n,u){return n&&u?n===u?!0:n&&n.nodeType===3?!1:u&&u.nodeType===3?Kt(n,u.parentNode):"contains"in n?n.contains(u):n.compareDocumentPosition?!!(n.compareDocumentPosition(u)&16):!1:!1}function nn(){for(var n=window,u=ye();u instanceof n.HTMLIFrameElement;){try{var b=typeof u.contentWindow.location.href=="string"}catch{b=!1}if(b)n=u.contentWindow;else break;u=ye(n.document)}return u}function $s(n){var u=n&&n.nodeName&&n.nodeName.toLowerCase();return u&&(u==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||u==="textarea"||n.contentEditable==="true")}function Ka(n){var u=nn(),b=n.focusedElem,O=n.selectionRange;if(u!==b&&b&&b.ownerDocument&&Kt(b.ownerDocument.documentElement,b)){if(O!==null&&$s(b)){if(u=O.start,n=O.end,n===void 0&&(n=u),"selectionStart"in b)b.selectionStart=u,b.selectionEnd=Math.min(n,b.value.length);else if(n=(u=b.ownerDocument||document)&&u.defaultView||window,n.getSelection){n=n.getSelection();var A=b.textContent.length,z=Math.min(O.start,A);O=O.end===void 0?z:Math.min(O.end,A),!n.extend&&z>O&&(A=O,O=z,z=A),A=Dt(b,z);var J=Dt(b,O);A&&J&&(n.rangeCount!==1||n.anchorNode!==A.node||n.anchorOffset!==A.offset||n.focusNode!==J.node||n.focusOffset!==J.offset)&&(u=u.createRange(),u.setStart(A.node,A.offset),n.removeAllRanges(),z>O?(n.addRange(u),n.extend(J.node,J.offset)):(u.setEnd(J.node,J.offset),n.addRange(u)))}}for(u=[],n=b;n=n.parentNode;)n.nodeType===1&&u.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<u.length;b++)n=u[b],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var $a=T&&"documentMode"in document&&11>=document.documentMode,Qs=null,pn=null,os=null,Qa=!1;function Qo(n,u,b){var O=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Qa||Qs==null||Qs!==ye(O)||(O=Qs,"selectionStart"in O&&$s(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),os&&as(os,O)||(os=O,O=il(pn,"onSelect"),0<O.length&&(u=new Mr("onSelect","select",null,u,b),n.push({event:u,listeners:O}),u.target=Qs)))}function ur(n,u){var b={};return b[n.toLowerCase()]=u.toLowerCase(),b["Webkit"+n]="webkit"+u,b["Moz"+n]="moz"+u,b}var Cn={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionend:ur("Transition","TransitionEnd")},ls={},Jo={};T&&(Jo=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);function Js(n){if(ls[n])return ls[n];if(!Cn[n])return n;var u=Cn[n],b;for(b in u)if(u.hasOwnProperty(b)&&b in Jo)return ls[n]=u[b];return n}var _u=Js("animationend"),bu=Js("animationiteration"),Su=Js("animationstart"),Cu=Js("transitionend"),ku=new Map,Tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(n,u){ku.set(n,u),S(u,[n])}for(var Zo=0;Zo<Tu.length;Zo++){var us=Tu[Zo],Wh=us.toLowerCase(),el=us[0].toUpperCase()+us.slice(1);ci(Wh,"on"+el)}ci(_u,"onAnimationEnd"),ci(bu,"onAnimationIteration"),ci(Su,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(Cu,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),S("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),S("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),S("onBeforeInput",["compositionend","keypress","textInput","paste"]),S("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),S("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mi));function tl(n,u,b){var O=n.type||"unknown-event";n.currentTarget=b,_f(O,u,void 0,n),n.currentTarget=null}function Pu(n,u){u=(u&4)!==0;for(var b=0;b<n.length;b++){var O=n[b],A=O.event;O=O.listeners;e:{var z=void 0;if(u)for(var J=O.length-1;0<=J;J--){var ce=O[J],ge=ce.instance,Pe=ce.currentTarget;if(ce=ce.listener,ge!==z&&A.isPropagationStopped())break e;tl(A,ce,Pe),z=ge}else for(J=0;J<O.length;J++){if(ce=O[J],ge=ce.instance,Pe=ce.currentTarget,ce=ce.listener,ge!==z&&A.isPropagationStopped())break e;tl(A,ce,Pe),z=ge}}}if(Lo)throw n=Ds,Lo=!1,Ds=null,n}function Et(n,u){var b=u[al];b===void 0&&(b=u[al]=new Set);var O=n+"__bubble";b.has(O)||(Eu(u,n,2,!1),b.add(O))}function nl(n,u,b){var O=0;u&&(O|=4),Eu(b,n,O,u)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function cs(n){if(!n[Ja]){n[Ja]=!0,x.forEach(function(b){b!=="selectionchange"&&(Xh.has(b)||nl(b,!1,n),nl(b,!0,n))});var u=n.nodeType===9?n:n.ownerDocument;u===null||u[Ja]||(u[Ja]=!0,nl("selectionchange",!1,u))}}function Eu(n,u,b,O){switch(Ah(u)){case 1:var A=Lr;break;case 4:A=ai;break;default:A=Hs}b=A.bind(null,u,b,n),A=void 0,!au||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(A=!0),O?A!==void 0?n.addEventListener(u,b,{capture:!0,passive:A}):n.addEventListener(u,b,!0):A!==void 0?n.addEventListener(u,b,{passive:A}):n.addEventListener(u,b,!1)}function rl(n,u,b,O,A){var z=O;if((u&1)===0&&(u&2)===0&&O!==null)e:for(;;){if(O===null)return;var J=O.tag;if(J===3||J===4){var ce=O.stateNode.containerInfo;if(ce===A||ce.nodeType===8&&ce.parentNode===A)break;if(J===4)for(J=O.return;J!==null;){var ge=J.tag;if((ge===3||ge===4)&&(ge=J.stateNode.containerInfo,ge===A||ge.nodeType===8&&ge.parentNode===A))return;J=J.return}for(;ce!==null;){if(J=Ri(ce),J===null)return;if(ge=J.tag,ge===5||ge===6){O=z=J;continue e}ce=ce.parentNode}}O=O.return}su(function(){var Pe=z,Re=tu(b),De=[];e:{var Ae=ku.get(n);if(Ae!==void 0){var Ge=Mr,Ye=n;switch(n){case"keypress":if(es(b)===0)break e;case"keydown":case"keyup":Ge=Bh;break;case"focusin":Ye="focus",Ge=Vo;break;case"focusout":Ye="blur",Ge=Vo;break;case"beforeblur":case"afterblur":Ge=Vo;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=Mt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=Rr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=Xo;break;case _u:case bu:case Su:Ge=hu;break;case Cu:Ge=Xs;break;case"scroll":Ge=Rh;break;case"wheel":Ge=gu;break;case"copy":case"cut":case"paste":Ge=Go;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=rs}var qe=(u&4)!==0,ln=!qe&&n==="scroll",be=qe?Ae!==null?Ae+"Capture":null:Ae;qe=[];for(var me=Pe,ke;me!==null;){ke=me;var Be=ke.stateNode;if(ke.tag===5&&Be!==null&&(ke=Be,be!==null&&(Be=Ia(me,be),Be!=null&&qe.push(Zs(me,Be,ke)))),ln)break;me=me.return}0<qe.length&&(Ae=new Ge(Ae,Ye,null,b,Re),De.push({event:Ae,listeners:qe}))}}if((u&7)===0){e:{if(Ae=n==="mouseover"||n==="pointerover",Ge=n==="mouseout"||n==="pointerout",Ae&&b!==Fa&&(Ye=b.relatedTarget||b.fromElement)&&(Ri(Ye)||Ye[Hr]))break e;if((Ge||Ae)&&(Ae=Re.window===Re?Re:(Ae=Re.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Ge?(Ye=b.relatedTarget||b.toElement,Ge=Pe,Ye=Ye?Ri(Ye):null,Ye!==null&&(ln=Qi(Ye),Ye!==ln||Ye.tag!==5&&Ye.tag!==6)&&(Ye=null)):(Ge=null,Ye=Pe),Ge!==Ye)){if(qe=Mt,Be="onMouseLeave",be="onMouseEnter",me="mouse",(n==="pointerout"||n==="pointerover")&&(qe=rs,Be="onPointerLeave",be="onPointerEnter",me="pointer"),ln=Ge==null?Ae:rn(Ge),ke=Ye==null?Ae:rn(Ye),Ae=new qe(Be,me+"leave",Ge,b,Re),Ae.target=ln,Ae.relatedTarget=ke,Be=null,Ri(Re)===Pe&&(qe=new qe(be,me+"enter",Ye,b,Re),qe.target=ke,qe.relatedTarget=ln,Be=qe),ln=Be,Ge&&Ye)t:{for(qe=Ge,be=Ye,me=0,ke=qe;ke;ke=hs(ke))me++;for(ke=0,Be=be;Be;Be=hs(Be))ke++;for(;0<me-ke;)qe=hs(qe),me--;for(;0<ke-me;)be=hs(be),ke--;for(;me--;){if(qe===be||be!==null&&qe===be.alternate)break t;qe=hs(qe),be=hs(be)}qe=null}else qe=null;Ge!==null&&Yh(De,Ae,Ge,qe,!1),Ye!==null&&ln!==null&&Yh(De,ln,Ye,qe,!0)}}e:{if(Ae=Pe?rn(Pe):window,Ge=Ae.nodeName&&Ae.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Ae.type==="file")var Ke=wr;else if(ui(Ae))if(Ks)Ke=xu;else{Ke=zt;var Ze=yu}else(Ge=Ae.nodeName)&&Ge.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(Ke=$o);if(Ke&&(Ke=Ke(n,Pe))){qa(De,Ke,b,Re);break e}Ze&&Ze(n,Ae,Pe),n==="focusout"&&(Ze=Ae._wrapperState)&&Ze.controlled&&Ae.type==="number"&&fe(Ae,"number",Ae.value)}switch(Ze=Pe?rn(Pe):window,n){case"focusin":(ui(Ze)||Ze.contentEditable==="true")&&(Qs=Ze,pn=Pe,os=null);break;case"focusout":os=pn=Qs=null;break;case"mousedown":Qa=!0;break;case"contextmenu":case"mouseup":case"dragend":Qa=!1,Qo(De,b,Re);break;case"selectionchange":if($a)break;case"keydown":case"keyup":Qo(De,b,Re)}var et;if(Ya)e:{switch(n){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else lr?pu(n,b)&&(rt="onCompositionEnd"):n==="keydown"&&b.keyCode===229&&(rt="onCompositionStart");rt&&(or&&b.locale!=="ko"&&(lr||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&lr&&(et=Ga()):(bn=Re,Pi="value"in bn?bn.value:bn.textContent,lr=!0)),Ze=il(Pe,rt),0<Ze.length&&(rt=new ts(rt,n,null,b,Re),De.push({event:rt,listeners:Ze}),et?rt.data=et:(et=Dr(b),et!==null&&(rt.data=et)))),(et=Ys?mu(n,b):Gh(n,b))&&(Pe=il(Pe,"onBeforeInput"),0<Pe.length&&(Re=new ts("onBeforeInput","beforeinput",null,b,Re),De.push({event:Re,listeners:Pe}),Re.data=et))}Pu(De,u)})}function Zs(n,u,b){return{instance:n,listener:u,currentTarget:b}}function il(n,u){for(var b=u+"Capture",O=[];n!==null;){var A=n,z=A.stateNode;A.tag===5&&z!==null&&(A=z,z=Ia(n,b),z!=null&&O.unshift(Zs(n,z,A)),z=Ia(n,u),z!=null&&O.push(Zs(n,z,A))),n=n.return}return O}function hs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Yh(n,u,b,O,A){for(var z=u._reactName,J=[];b!==null&&b!==O;){var ce=b,ge=ce.alternate,Pe=ce.stateNode;if(ge!==null&&ge===O)break;ce.tag===5&&Pe!==null&&(ce=Pe,A?(ge=Ia(b,z),ge!=null&&J.unshift(Zs(b,ge,ce))):A||(ge=Ia(b,z),ge!=null&&J.push(Zs(b,ge,ce)))),b=b.return}J.length!==0&&n.push({event:u,listeners:J})}var Of=/\r\n?/g,qh=/\u0000|\uFFFD/g;function ju(n){return(typeof n=="string"?n:""+n).replace(Of,`
`).replace(qh,"")}function Za(n,u,b){if(u=ju(u),ju(n)!==u&&b)throw Error(h(425))}function ds(){}var Ou=null,Nu=null;function Lu(n,u){return n==="textarea"||n==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var cr=typeof setTimeout=="function"?setTimeout:void 0,Mu=typeof clearTimeout=="function"?clearTimeout:void 0,eo=typeof Promise=="function"?Promise:void 0,Kh=typeof queueMicrotask=="function"?queueMicrotask:typeof eo<"u"?function(n){return eo.resolve(null).then(n).catch($h)}:cr;function $h(n){setTimeout(function(){throw n})}function sl(n,u){var b=u,O=0;do{var A=b.nextSibling;if(n.removeChild(b),A&&A.nodeType===8)if(b=A.data,b==="/$"){if(O===0){n.removeChild(A),Jn(u);return}O--}else b!=="$"&&b!=="$?"&&b!=="$!"||O++;b=A}while(b);Jn(u)}function Gr(n){for(;n!=null;n=n.nextSibling){var u=n.nodeType;if(u===1||u===3)break;if(u===8){if(u=n.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return n}function fs(n){n=n.previousSibling;for(var u=0;n;){if(n.nodeType===8){var b=n.data;if(b==="$"||b==="$!"||b==="$?"){if(u===0)return n;u--}else b==="/$"&&u++}n=n.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),br="__reactFiber$"+Ai,to="__reactProps$"+Ai,Hr="__reactContainer$"+Ai,al="__reactEvents$"+Ai,Qh="__reactListeners$"+Ai,Jh="__reactHandles$"+Ai;function Ri(n){var u=n[br];if(u)return u;for(var b=n.parentNode;b;){if(u=b[Hr]||b[br]){if(b=u.alternate,u.child!==null||b!==null&&b.child!==null)for(n=fs(n);n!==null;){if(b=n[br])return b;n=fs(n)}return u}n=b,b=n.parentNode}return null}function no(n){return n=n[br]||n[Hr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function rn(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(h(33))}function mn(n){return n[to]||null}var ol=[],gs=-1;function hi(n){return{current:n}}function jt(n){0>gs||(n.current=ol[gs],ol[gs]=null,gs--)}function Tt(n,u){gs++,ol[gs]=n.current,n.current=u}var Wr={},kn=hi(Wr),jn=hi(!1),Di=Wr;function ps(n,u){var b=n.type.contextTypes;if(!b)return Wr;var O=n.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===u)return O.__reactInternalMemoizedMaskedChildContext;var A={},z;for(z in b)A[z]=u[z];return O&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=u,n.__reactInternalMemoizedMaskedChildContext=A),A}function On(n){return n=n.childContextTypes,n!=null}function ea(){jt(jn),jt(kn)}function Au(n,u,b){if(kn.current!==Wr)throw Error(h(168));Tt(kn,u),Tt(jn,b)}function ll(n,u,b){var O=n.stateNode;if(u=u.childContextTypes,typeof O.getChildContext!="function")return b;O=O.getChildContext();for(var A in O)if(!(A in u))throw Error(h(108,I(n)||"Unknown",A));return $({},b,O)}function ms(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Wr,Di=kn.current,Tt(kn,n),Tt(jn,jn.current),!0}function Zh(n,u,b){var O=n.stateNode;if(!O)throw Error(h(169));b?(n=ll(n,u,Di),O.__reactInternalMemoizedMergedChildContext=n,jt(jn),jt(kn),Tt(kn,n)):jt(jn),Tt(jn,b)}var Xr=null,ta=!1,ul=!1;function ro(n){Xr===null?Xr=[n]:Xr.push(n)}function di(n){ta=!0,ro(n)}function Fi(){if(!ul&&Xr!==null){ul=!0;var n=0,u=wt;try{var b=Xr;for(wt=1;n<b.length;n++){var O=b[n];do O=O(!0);while(O!==null)}Xr=null,ta=!1}catch(A){throw Xr!==null&&(Xr=Xr.slice(n+1)),Th(Ji,Fi),A}finally{wt=u,ul=!1}}return null}var Vn=[],vs=0,Ii=null,Bi=0,Gn=[],Hn=0,zi=null,hr=1,Ft="";function ys(n,u){Vn[vs++]=Bi,Vn[vs++]=Ii,Ii=n,Bi=u}function ed(n,u,b){Gn[Hn++]=hr,Gn[Hn++]=Ft,Gn[Hn++]=zi,zi=n;var O=hr;n=Ft;var A=32-ft(O)-1;O&=~(1<<A),b+=1;var z=32-ft(u)+A;if(30<z){var J=A-A%5;z=(O&(1<<J)-1).toString(32),O>>=J,A-=J,hr=1<<32-ft(u)+A|b<<A|O,Ft=z+n}else hr=1<<z|b<<A|O,Ft=n}function na(n){n.return!==null&&(ys(n,1),ed(n,1,0))}function vn(n){for(;n===Ii;)Ii=Vn[--vs],Vn[vs]=null,Bi=Vn[--vs],Vn[vs]=null;for(;n===zi;)zi=Gn[--Hn],Gn[Hn]=null,Ft=Gn[--Hn],Gn[Hn]=null,hr=Gn[--Hn],Gn[Hn]=null}var dr=null,ze=null,St=!1,fr=null;function Ru(n,u){var b=Zr(5,null,null,0);b.elementType="DELETED",b.stateNode=u,b.return=n,u=n.deletions,u===null?(n.deletions=[b],n.flags|=16):u.push(b)}function td(n,u){switch(n.tag){case 5:var b=n.type;return u=u.nodeType!==1||b.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(n.stateNode=u,dr=n,ze=Gr(u.firstChild),!0):!1;case 6:return u=n.pendingProps===""||u.nodeType!==3?null:u,u!==null?(n.stateNode=u,dr=n,ze=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(b=zi!==null?{id:hr,overflow:Ft}:null,n.memoizedState={dehydrated:u,treeContext:b,retryLane:1073741824},b=Zr(18,null,null,0),b.stateNode=u,b.return=n,n.child=b,dr=n,ze=null,!0):!1;default:return!1}}function xs(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ra(n){if(St){var u=ze;if(u){var b=u;if(!td(n,u)){if(xs(n))throw Error(h(418));u=Gr(b.nextSibling);var O=dr;u&&td(n,u)?Ru(O,b):(n.flags=n.flags&-4097|2,St=!1,dr=n)}}else{if(xs(n))throw Error(h(418));n.flags=n.flags&-4097|2,St=!1,dr=n}}}function cl(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;dr=n}function io(n){if(n!==dr)return!1;if(!St)return cl(n),St=!0,!1;var u;if((u=n.tag!==3)&&!(u=n.tag!==5)&&(u=n.type,u=u!=="head"&&u!=="body"&&!Lu(n.type,n.memoizedProps)),u&&(u=ze)){if(xs(n))throw Du(),Error(h(418));for(;u;)Ru(n,u),u=Gr(u.nextSibling)}if(cl(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(h(317));e:{for(n=n.nextSibling,u=0;n;){if(n.nodeType===8){var b=n.data;if(b==="/$"){if(u===0){ze=Gr(n.nextSibling);break e}u--}else b!=="$"&&b!=="$!"&&b!=="$?"||u++}n=n.nextSibling}ze=null}}else ze=dr?Gr(n.stateNode.nextSibling):null;return!0}function Du(){for(var n=ze;n;)n=Gr(n.nextSibling)}function ws(){ze=dr=null,St=!1}function so(n){fr===null?fr=[n]:fr.push(n)}var Fu=w.ReactCurrentBatchConfig;function Xt(n,u,b){if(n=b.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(h(309));var O=b.stateNode}if(!O)throw Error(h(147,n));var A=O,z=""+n;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===z?u.ref:(u=function(J){var ce=A.refs;J===null?delete ce[z]:ce[z]=J},u._stringRef=z,u)}if(typeof n!="string")throw Error(h(284));if(!b._owner)throw Error(h(290,n))}return n}function tr(n,u){throw n=Object.prototype.toString.call(u),Error(h(31,n==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":n))}function Fr(n){var u=n._init;return u(n._payload)}function hl(n){function u(be,me){if(n){var ke=be.deletions;ke===null?(be.deletions=[me],be.flags|=16):ke.push(me)}}function b(be,me){if(!n)return null;for(;me!==null;)u(be,me),me=me.sibling;return null}function O(be,me){for(be=new Map;me!==null;)me.key!==null?be.set(me.key,me):be.set(me.index,me),me=me.sibling;return be}function A(be,me){return be=Sa(be,me),be.index=0,be.sibling=null,be}function z(be,me,ke){return be.index=ke,n?(ke=be.alternate,ke!==null?(ke=ke.index,ke<me?(be.flags|=2,me):ke):(be.flags|=2,me)):(be.flags|=1048576,me)}function J(be){return n&&be.alternate===null&&(be.flags|=2),be}function ce(be,me,ke,Be){return me===null||me.tag!==6?(me=Qf(ke,be.mode,Be),me.return=be,me):(me=A(me,ke),me.return=be,me)}function ge(be,me,ke,Be){var Ke=ke.type;return Ke===M?Re(be,me,ke.props.children,Be,ke.key):me!==null&&(me.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ue&&Fr(Ke)===me.type)?(Be=A(me,ke.props),Be.ref=Xt(be,me,ke),Be.return=be,Be):(Be=bd(ke.type,ke.key,ke.props,null,be.mode,Be),Be.ref=Xt(be,me,ke),Be.return=be,Be)}function Pe(be,me,ke,Be){return me===null||me.tag!==4||me.stateNode.containerInfo!==ke.containerInfo||me.stateNode.implementation!==ke.implementation?(me=Jf(ke,be.mode,Be),me.return=be,me):(me=A(me,ke.children||[]),me.return=be,me)}function Re(be,me,ke,Be,Ke){return me===null||me.tag!==7?(me=vo(ke,be.mode,Be,Ke),me.return=be,me):(me=A(me,ke),me.return=be,me)}function De(be,me,ke){if(typeof me=="string"&&me!==""||typeof me=="number")return me=Qf(""+me,be.mode,ke),me.return=be,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case C:return ke=bd(me.type,me.key,me.props,null,be.mode,ke),ke.ref=Xt(be,null,me),ke.return=be,ke;case P:return me=Jf(me,be.mode,ke),me.return=be,me;case ue:var Be=me._init;return De(be,Be(me._payload),ke)}if(Se(me)||Z(me))return me=vo(me,be.mode,ke,null),me.return=be,me;tr(be,me)}return null}function Ae(be,me,ke,Be){var Ke=me!==null?me.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return Ke!==null?null:ce(be,me,""+ke,Be);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case C:return ke.key===Ke?ge(be,me,ke,Be):null;case P:return ke.key===Ke?Pe(be,me,ke,Be):null;case ue:return Ke=ke._init,Ae(be,me,Ke(ke._payload),Be)}if(Se(ke)||Z(ke))return Ke!==null?null:Re(be,me,ke,Be,null);tr(be,ke)}return null}function Ge(be,me,ke,Be,Ke){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return be=be.get(ke)||null,ce(me,be,""+Be,Ke);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case C:return be=be.get(Be.key===null?ke:Be.key)||null,ge(me,be,Be,Ke);case P:return be=be.get(Be.key===null?ke:Be.key)||null,Pe(me,be,Be,Ke);case ue:var Ze=Be._init;return Ge(be,me,ke,Ze(Be._payload),Ke)}if(Se(Be)||Z(Be))return be=be.get(ke)||null,Re(me,be,Be,Ke,null);tr(me,Be)}return null}function Ye(be,me,ke,Be){for(var Ke=null,Ze=null,et=me,rt=me=0,Dn=null;et!==null&&rt<ke.length;rt++){et.index>rt?(Dn=et,et=null):Dn=et.sibling;var bt=Ae(be,et,ke[rt],Be);if(bt===null){et===null&&(et=Dn);break}n&&et&&bt.alternate===null&&u(be,et),me=z(bt,me,rt),Ze===null?Ke=bt:Ze.sibling=bt,Ze=bt,et=Dn}if(rt===ke.length)return b(be,et),St&&ys(be,rt),Ke;if(et===null){for(;rt<ke.length;rt++)et=De(be,ke[rt],Be),et!==null&&(me=z(et,me,rt),Ze===null?Ke=et:Ze.sibling=et,Ze=et);return St&&ys(be,rt),Ke}for(et=O(be,et);rt<ke.length;rt++)Dn=Ge(et,be,rt,ke[rt],Be),Dn!==null&&(n&&Dn.alternate!==null&&et.delete(Dn.key===null?rt:Dn.key),me=z(Dn,me,rt),Ze===null?Ke=Dn:Ze.sibling=Dn,Ze=Dn);return n&&et.forEach(function(Ca){return u(be,Ca)}),St&&ys(be,rt),Ke}function qe(be,me,ke,Be){var Ke=Z(ke);if(typeof Ke!="function")throw Error(h(150));if(ke=Ke.call(ke),ke==null)throw Error(h(151));for(var Ze=Ke=null,et=me,rt=me=0,Dn=null,bt=ke.next();et!==null&&!bt.done;rt++,bt=ke.next()){et.index>rt?(Dn=et,et=null):Dn=et.sibling;var Ca=Ae(be,et,bt.value,Be);if(Ca===null){et===null&&(et=Dn);break}n&&et&&Ca.alternate===null&&u(be,et),me=z(Ca,me,rt),Ze===null?Ke=Ca:Ze.sibling=Ca,Ze=Ca,et=Dn}if(bt.done)return b(be,et),St&&ys(be,rt),Ke;if(et===null){for(;!bt.done;rt++,bt=ke.next())bt=De(be,bt.value,Be),bt!==null&&(me=z(bt,me,rt),Ze===null?Ke=bt:Ze.sibling=bt,Ze=bt);return St&&ys(be,rt),Ke}for(et=O(be,et);!bt.done;rt++,bt=ke.next())bt=Ge(et,be,rt,bt.value,Be),bt!==null&&(n&&bt.alternate!==null&&et.delete(bt.key===null?rt:bt.key),me=z(bt,me,rt),Ze===null?Ke=bt:Ze.sibling=bt,Ze=bt);return n&&et.forEach(function(jw){return u(be,jw)}),St&&ys(be,rt),Ke}function ln(be,me,ke,Be){if(typeof ke=="object"&&ke!==null&&ke.type===M&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case C:e:{for(var Ke=ke.key,Ze=me;Ze!==null;){if(Ze.key===Ke){if(Ke=ke.type,Ke===M){if(Ze.tag===7){b(be,Ze.sibling),me=A(Ze,ke.props.children),me.return=be,be=me;break e}}else if(Ze.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ue&&Fr(Ke)===Ze.type){b(be,Ze.sibling),me=A(Ze,ke.props),me.ref=Xt(be,Ze,ke),me.return=be,be=me;break e}b(be,Ze);break}else u(be,Ze);Ze=Ze.sibling}ke.type===M?(me=vo(ke.props.children,be.mode,Be,ke.key),me.return=be,be=me):(Be=bd(ke.type,ke.key,ke.props,null,be.mode,Be),Be.ref=Xt(be,me,ke),Be.return=be,be=Be)}return J(be);case P:e:{for(Ze=ke.key;me!==null;){if(me.key===Ze)if(me.tag===4&&me.stateNode.containerInfo===ke.containerInfo&&me.stateNode.implementation===ke.implementation){b(be,me.sibling),me=A(me,ke.children||[]),me.return=be,be=me;break e}else{b(be,me);break}else u(be,me);me=me.sibling}me=Jf(ke,be.mode,Be),me.return=be,be=me}return J(be);case ue:return Ze=ke._init,ln(be,me,Ze(ke._payload),Be)}if(Se(ke))return Ye(be,me,ke,Be);if(Z(ke))return qe(be,me,ke,Be);tr(be,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"?(ke=""+ke,me!==null&&me.tag===6?(b(be,me.sibling),me=A(me,ke),me.return=be,be=me):(b(be,me),me=Qf(ke,be.mode,Be),me.return=be,be=me),J(be)):b(be,me)}return ln}var _s=hl(!0),Sr=hl(!1),ao=hi(null),gr=null,ia=null,dl=null;function fl(){dl=ia=gr=null}function gl(n){var u=ao.current;jt(ao),n._currentValue=u}function pl(n,u,b){for(;n!==null;){var O=n.alternate;if((n.childLanes&u)!==u?(n.childLanes|=u,O!==null&&(O.childLanes|=u)):O!==null&&(O.childLanes&u)!==u&&(O.childLanes|=u),n===b)break;n=n.return}}function fi(n,u){gr=n,dl=ia=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&u)!==0&&(G=!0),n.firstContext=null)}function Wn(n){var u=n._currentValue;if(dl!==n)if(n={context:n,memoizedValue:u,next:null},ia===null){if(gr===null)throw Error(h(308));ia=n,gr.dependencies={lanes:0,firstContext:n}}else ia=ia.next=n;return u}var Yr=null;function sa(n){Yr===null?Yr=[n]:Yr.push(n)}function oo(n,u,b,O){var A=u.interleaved;return A===null?(b.next=b,sa(u)):(b.next=A.next,A.next=b),u.interleaved=b,pr(n,O)}function pr(n,u){n.lanes|=u;var b=n.alternate;for(b!==null&&(b.lanes|=u),b=n,n=n.return;n!==null;)n.childLanes|=u,b=n.alternate,b!==null&&(b.childLanes|=u),b=n,n=n.return;return b.tag===3?b.stateNode:null}var qr=!1;function lo(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ml(n,u){n=n.updateQueue,u.updateQueue===n&&(u.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Kr(n,u){return{eventTime:n,lane:u,tag:0,payload:null,callback:null,next:null}}function $r(n,u,b){var O=n.updateQueue;if(O===null)return null;if(O=O.shared,(_t&2)!==0){var A=O.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),O.pending=u,pr(n,b)}return A=O.interleaved,A===null?(u.next=u,sa(O)):(u.next=A.next,A.next=u),O.interleaved=u,pr(n,b)}function vl(n,u,b){if(u=u.updateQueue,u!==null&&(u=u.shared,(b&4194240)!==0)){var O=u.lanes;O&=n.pendingLanes,b|=O,u.lanes=b,uu(n,b)}}function uo(n,u){var b=n.updateQueue,O=n.alternate;if(O!==null&&(O=O.updateQueue,b===O)){var A=null,z=null;if(b=b.firstBaseUpdate,b!==null){do{var J={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};z===null?A=z=J:z=z.next=J,b=b.next}while(b!==null);z===null?A=z=u:z=z.next=u}else A=z=u;b={baseState:O.baseState,firstBaseUpdate:A,lastBaseUpdate:z,shared:O.shared,effects:O.effects},n.updateQueue=b;return}n=b.lastBaseUpdate,n===null?b.firstBaseUpdate=u:n.next=u,b.lastBaseUpdate=u}function aa(n,u,b,O){var A=n.updateQueue;qr=!1;var z=A.firstBaseUpdate,J=A.lastBaseUpdate,ce=A.shared.pending;if(ce!==null){A.shared.pending=null;var ge=ce,Pe=ge.next;ge.next=null,J===null?z=Pe:J.next=Pe,J=ge;var Re=n.alternate;Re!==null&&(Re=Re.updateQueue,ce=Re.lastBaseUpdate,ce!==J&&(ce===null?Re.firstBaseUpdate=Pe:ce.next=Pe,Re.lastBaseUpdate=ge))}if(z!==null){var De=A.baseState;J=0,Re=Pe=ge=null,ce=z;do{var Ae=ce.lane,Ge=ce.eventTime;if((O&Ae)===Ae){Re!==null&&(Re=Re.next={eventTime:Ge,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Ye=n,qe=ce;switch(Ae=u,Ge=b,qe.tag){case 1:if(Ye=qe.payload,typeof Ye=="function"){De=Ye.call(Ge,De,Ae);break e}De=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=qe.payload,Ae=typeof Ye=="function"?Ye.call(Ge,De,Ae):Ye,Ae==null)break e;De=$({},De,Ae);break e;case 2:qr=!0}}ce.callback!==null&&ce.lane!==0&&(n.flags|=64,Ae=A.effects,Ae===null?A.effects=[ce]:Ae.push(ce))}else Ge={eventTime:Ge,lane:Ae,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Re===null?(Pe=Re=Ge,ge=De):Re=Re.next=Ge,J|=Ae;if(ce=ce.next,ce===null){if(ce=A.shared.pending,ce===null)break;Ae=ce,ce=Ae.next,Ae.next=null,A.lastBaseUpdate=Ae,A.shared.pending=null}}while(!0);if(Re===null&&(ge=De),A.baseState=ge,A.firstBaseUpdate=Pe,A.lastBaseUpdate=Re,u=A.shared.interleaved,u!==null){A=u;do J|=A.lane,A=A.next;while(A!==u)}else z===null&&(A.shared.lanes=0);fo|=J,n.lanes=J,n.memoizedState=De}}function Ut(n,u,b){if(n=u.effects,u.effects=null,n!==null)for(u=0;u<n.length;u++){var O=n[u],A=O.callback;if(A!==null){if(O.callback=null,O=b,typeof A!="function")throw Error(h(191,A));A.call(O)}}}var lt={},Pt=hi(lt),It=hi(lt),Yt=hi(lt);function sn(n){if(n===lt)throw Error(h(174));return n}function Ui(n,u){switch(Tt(Yt,u),Tt(It,n),Tt(Pt,lt),n=u.nodeType,n){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Je(null,"");break;default:n=n===8?u.parentNode:u,u=n.namespaceURI||null,n=n.tagName,u=Je(u,n)}jt(Pt),Tt(Pt,u)}function Bt(){jt(Pt),jt(It),jt(Yt)}function oa(n){sn(Yt.current);var u=sn(Pt.current),b=Je(u,n.type);u!==b&&(Tt(It,n),Tt(Pt,b))}function gi(n){It.current===n&&(jt(Pt),jt(It))}var Ot=hi(0);function la(n){for(var u=n;u!==null;){if(u.tag===13){var b=u.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break;for(;u.sibling===null;){if(u.return===null||u.return===n)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var bs=[];function Nn(){for(var n=0;n<bs.length;n++)bs[n]._workInProgressVersionPrimary=null;bs.length=0}var ua=w.ReactCurrentDispatcher,co=w.ReactCurrentBatchConfig,Xn=0,kt=null,Vt=null,$t=null,Ir=!1,Vi=!1,Cr=0,yl=0;function Qt(){throw Error(h(321))}function ho(n,u){if(u===null)return!1;for(var b=0;b<u.length&&b<n.length;b++)if(!er(n[b],u[b]))return!1;return!0}function ca(n,u,b,O,A,z){if(Xn=z,kt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ua.current=n===null||n.memoizedState===null?Lf:Wi,n=b(O,A),Vi){z=0;do{if(Vi=!1,Cr=0,25<=z)throw Error(h(301));z+=1,$t=Vt=null,u.updateQueue=null,ua.current=Sl,n=b(O,A)}while(Vi)}if(ua.current=ga,u=Vt!==null&&Vt.next!==null,Xn=0,$t=Vt=kt=null,Ir=!1,u)throw Error(h(300));return n}function ha(){var n=Cr!==0;return Cr=0,n}function At(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?kt.memoizedState=$t=n:$t=$t.next=n,$t}function an(){if(Vt===null){var n=kt.alternate;n=n!==null?n.memoizedState:null}else n=Vt.next;var u=$t===null?kt.memoizedState:$t.next;if(u!==null)$t=u,Vt=n;else{if(n===null)throw Error(h(310));Vt=n,n={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},$t===null?kt.memoizedState=$t=n:$t=$t.next=n}return $t}function Ln(n,u){return typeof u=="function"?u(n):u}function Mn(n){var u=an(),b=u.queue;if(b===null)throw Error(h(311));b.lastRenderedReducer=n;var O=Vt,A=O.baseQueue,z=b.pending;if(z!==null){if(A!==null){var J=A.next;A.next=z.next,z.next=J}O.baseQueue=A=z,b.pending=null}if(A!==null){z=A.next,O=O.baseState;var ce=J=null,ge=null,Pe=z;do{var Re=Pe.lane;if((Xn&Re)===Re)ge!==null&&(ge=ge.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),O=Pe.hasEagerState?Pe.eagerState:n(O,Pe.action);else{var De={lane:Re,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};ge===null?(ce=ge=De,J=O):ge=ge.next=De,kt.lanes|=Re,fo|=Re}Pe=Pe.next}while(Pe!==null&&Pe!==z);ge===null?J=O:ge.next=ce,er(O,u.memoizedState)||(G=!0),u.memoizedState=O,u.baseState=J,u.baseQueue=ge,b.lastRenderedState=O}if(n=b.interleaved,n!==null){A=n;do z=A.lane,kt.lanes|=z,fo|=z,A=A.next;while(A!==n)}else A===null&&(b.lanes=0);return[u.memoizedState,b.dispatch]}function xl(n){var u=an(),b=u.queue;if(b===null)throw Error(h(311));b.lastRenderedReducer=n;var O=b.dispatch,A=b.pending,z=u.memoizedState;if(A!==null){b.pending=null;var J=A=A.next;do z=n(z,J.action),J=J.next;while(J!==A);er(z,u.memoizedState)||(G=!0),u.memoizedState=z,u.baseQueue===null&&(u.baseState=z),b.lastRenderedState=z}return[z,O]}function wl(){}function _l(n,u){var b=kt,O=an(),A=u(),z=!er(O.memoizedState,A);if(z&&(O.memoizedState=A,G=!0),O=O.queue,Uu(Iu.bind(null,b,O,n),[n]),O.getSnapshot!==u||z||$t!==null&&$t.memoizedState.tag&1){if(b.flags|=2048,da(9,pi.bind(null,b,O,A,u),void 0,null),Rn===null)throw Error(h(349));(Xn&30)!==0||nd(b,u,A)}return A}function nd(n,u,b){n.flags|=16384,n={getSnapshot:u,value:b},u=kt.updateQueue,u===null?(u={lastEffect:null,stores:null},kt.updateQueue=u,u.stores=[n]):(b=u.stores,b===null?u.stores=[n]:b.push(n))}function pi(n,u,b,O){u.value=b,u.getSnapshot=O,Bu(u)&&bl(n)}function Iu(n,u,b){return b(function(){Bu(u)&&bl(n)})}function Bu(n){var u=n.getSnapshot;n=n.value;try{var b=u();return!er(n,b)}catch{return!0}}function bl(n){var u=pr(n,1);u!==null&&xi(u,n,1,-1)}function Gi(n){var u=At();return typeof n=="function"&&(n=n()),u.memoizedState=u.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:n},u.queue=n,n=n.dispatch=ld.bind(null,kt,n),[u.memoizedState,n]}function da(n,u,b,O){return n={tag:n,create:u,destroy:b,deps:O,next:null},u=kt.updateQueue,u===null?(u={lastEffect:null,stores:null},kt.updateQueue=u,u.lastEffect=n.next=n):(b=u.lastEffect,b===null?u.lastEffect=n.next=n:(O=b.next,b.next=n,n.next=O,u.lastEffect=n)),n}function zu(){return an().memoizedState}function fa(n,u,b,O){var A=At();kt.flags|=n,A.memoizedState=da(1|u,b,void 0,O===void 0?null:O)}function Ss(n,u,b,O){var A=an();O=O===void 0?null:O;var z=void 0;if(Vt!==null){var J=Vt.memoizedState;if(z=J.destroy,O!==null&&ho(O,J.deps)){A.memoizedState=da(u,b,z,O);return}}kt.flags|=n,A.memoizedState=da(1|u,b,z,O)}function rd(n,u){return fa(8390656,8,n,u)}function Uu(n,u){return Ss(2048,8,n,u)}function Vu(n,u){return Ss(4,2,n,u)}function Gu(n,u){return Ss(4,4,n,u)}function Hi(n,u){if(typeof u=="function")return n=n(),u(n),function(){u(null)};if(u!=null)return n=n(),u.current=n,function(){u.current=null}}function id(n,u,b){return b=b!=null?b.concat([n]):null,Ss(4,4,Hi.bind(null,u,n),b)}function mi(){}function Hu(n,u){var b=an();u=u===void 0?null:u;var O=b.memoizedState;return O!==null&&u!==null&&ho(u,O[1])?O[0]:(b.memoizedState=[n,u],n)}function Rt(n,u){var b=an();u=u===void 0?null:u;var O=b.memoizedState;return O!==null&&u!==null&&ho(u,O[1])?O[0]:(n=n(),b.memoizedState=[n,u],n)}function sd(n,u,b){return(Xn&21)===0?(n.baseState&&(n.baseState=!1,G=!0),n.memoizedState=b):(er(b,u)||(b=lu(),kt.lanes|=b,fo|=b,n.baseState=!0),u)}function ad(n,u){var b=wt;wt=b!==0&&4>b?b:4,n(!0);var O=co.transition;co.transition={};try{n(!1),u()}finally{wt=b,co.transition=O}}function od(){return an().memoizedState}function Nf(n,u,b){var O=_a(n);if(b={lane:O,action:b,hasEagerState:!1,eagerState:null,next:null},Wu(n))ud(u,b);else if(b=oo(n,u,b,O),b!==null){var A=vr();xi(b,n,O,A),mr(b,u,O)}}function ld(n,u,b){var O=_a(n),A={lane:O,action:b,hasEagerState:!1,eagerState:null,next:null};if(Wu(n))ud(u,A);else{var z=n.alternate;if(n.lanes===0&&(z===null||z.lanes===0)&&(z=u.lastRenderedReducer,z!==null))try{var J=u.lastRenderedState,ce=z(J,b);if(A.hasEagerState=!0,A.eagerState=ce,er(ce,J)){var ge=u.interleaved;ge===null?(A.next=A,sa(u)):(A.next=ge.next,ge.next=A),u.interleaved=A;return}}catch{}finally{}b=oo(n,u,A,O),b!==null&&(A=vr(),xi(b,n,O,A),mr(b,u,O))}}function Wu(n){var u=n.alternate;return n===kt||u!==null&&u===kt}function ud(n,u){Vi=Ir=!0;var b=n.pending;b===null?u.next=u:(u.next=b.next,b.next=u),n.pending=u}function mr(n,u,b){if((b&4194240)!==0){var O=u.lanes;O&=n.pendingLanes,b|=O,u.lanes=b,uu(n,b)}}var ga={readContext:Wn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},Lf={readContext:Wn,useCallback:function(n,u){return At().memoizedState=[n,u===void 0?null:u],n},useContext:Wn,useEffect:rd,useImperativeHandle:function(n,u,b){return b=b!=null?b.concat([n]):null,fa(4194308,4,Hi.bind(null,u,n),b)},useLayoutEffect:function(n,u){return fa(4194308,4,n,u)},useInsertionEffect:function(n,u){return fa(4,2,n,u)},useMemo:function(n,u){var b=At();return u=u===void 0?null:u,n=n(),b.memoizedState=[n,u],n},useReducer:function(n,u,b){var O=At();return u=b!==void 0?b(u):u,O.memoizedState=O.baseState=u,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:u},O.queue=n,n=n.dispatch=Nf.bind(null,kt,n),[O.memoizedState,n]},useRef:function(n){var u=At();return n={current:n},u.memoizedState=n},useState:Gi,useDebugValue:mi,useDeferredValue:function(n){return At().memoizedState=n},useTransition:function(){var n=Gi(!1),u=n[0];return n=ad.bind(null,n[1]),At().memoizedState=n,[u,n]},useMutableSource:function(){},useSyncExternalStore:function(n,u,b){var O=kt,A=At();if(St){if(b===void 0)throw Error(h(407));b=b()}else{if(b=u(),Rn===null)throw Error(h(349));(Xn&30)!==0||nd(O,u,b)}A.memoizedState=b;var z={value:b,getSnapshot:u};return A.queue=z,rd(Iu.bind(null,O,z,n),[n]),O.flags|=2048,da(9,pi.bind(null,O,z,b,u),void 0,null),b},useId:function(){var n=At(),u=Rn.identifierPrefix;if(St){var b=Ft,O=hr;b=(O&~(1<<32-ft(O)-1)).toString(32)+b,u=":"+u+"R"+b,b=Cr++,0<b&&(u+="H"+b.toString(32)),u+=":"}else b=yl++,u=":"+u+"r"+b.toString(32)+":";return n.memoizedState=u},unstable_isNewReconciler:!1},Wi={readContext:Wn,useCallback:Hu,useContext:Wn,useEffect:Uu,useImperativeHandle:id,useInsertionEffect:Vu,useLayoutEffect:Gu,useMemo:Rt,useReducer:Mn,useRef:zu,useState:function(){return Mn(Ln)},useDebugValue:mi,useDeferredValue:function(n){var u=an();return sd(u,Vt.memoizedState,n)},useTransition:function(){var n=Mn(Ln)[0],u=an().memoizedState;return[n,u]},useMutableSource:wl,useSyncExternalStore:_l,useId:od,unstable_isNewReconciler:!1},Sl={readContext:Wn,useCallback:Hu,useContext:Wn,useEffect:Uu,useImperativeHandle:id,useInsertionEffect:Vu,useLayoutEffect:Gu,useMemo:Rt,useReducer:xl,useRef:zu,useState:function(){return xl(Ln)},useDebugValue:mi,useDeferredValue:function(n){var u=an();return Vt===null?u.memoizedState=n:sd(u,Vt.memoizedState,n)},useTransition:function(){var n=xl(Ln)[0],u=an().memoizedState;return[n,u]},useMutableSource:wl,useSyncExternalStore:_l,useId:od,unstable_isNewReconciler:!1};function Tn(n,u){if(n&&n.defaultProps){u=$({},u),n=n.defaultProps;for(var b in n)u[b]===void 0&&(u[b]=n[b]);return u}return u}function pa(n,u,b,O){u=n.memoizedState,b=b(O,u),b=b==null?u:$({},u,b),n.memoizedState=b,n.lanes===0&&(n.updateQueue.baseState=b)}var ma={isMounted:function(n){return(n=n._reactInternals)?Qi(n)===n:!1},enqueueSetState:function(n,u,b){n=n._reactInternals;var O=vr(),A=_a(n),z=Kr(O,A);z.payload=u,b!=null&&(z.callback=b),u=$r(n,z,A),u!==null&&(xi(u,n,A,O),vl(u,n,A))},enqueueReplaceState:function(n,u,b){n=n._reactInternals;var O=vr(),A=_a(n),z=Kr(O,A);z.tag=1,z.payload=u,b!=null&&(z.callback=b),u=$r(n,z,A),u!==null&&(xi(u,n,A,O),vl(u,n,A))},enqueueForceUpdate:function(n,u){n=n._reactInternals;var b=vr(),O=_a(n),A=Kr(b,O);A.tag=2,u!=null&&(A.callback=u),u=$r(n,A,O),u!==null&&(xi(u,n,O,b),vl(u,n,O))}};function Cl(n,u,b,O,A,z,J){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(O,z,J):u.prototype&&u.prototype.isPureReactComponent?!as(b,O)||!as(A,z):!0}function cd(n,u,b){var O=!1,A=Wr,z=u.contextType;return typeof z=="object"&&z!==null?z=Wn(z):(A=On(u)?Di:kn.current,O=u.contextTypes,z=(O=O!=null)?ps(n,A):Wr),u=new u(b,z),n.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=ma,n.stateNode=u,u._reactInternals=n,O&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=A,n.__reactInternalMemoizedMaskedChildContext=z),u}function Xu(n,u,b,O){n=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(b,O),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(b,O),u.state!==n&&ma.enqueueReplaceState(u,u.state,null)}function kl(n,u,b,O){var A=n.stateNode;A.props=b,A.state=n.memoizedState,A.refs={},lo(n);var z=u.contextType;typeof z=="object"&&z!==null?A.context=Wn(z):(z=On(u)?Di:kn.current,A.context=ps(n,z)),A.state=n.memoizedState,z=u.getDerivedStateFromProps,typeof z=="function"&&(pa(n,u,z,b),A.state=n.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(u=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),u!==A.state&&ma.enqueueReplaceState(A,A.state,null),aa(n,b,A,O),A.state=n.memoizedState),typeof A.componentDidMount=="function"&&(n.flags|=4194308)}function Cs(n,u){try{var b="",O=u;do b+=oe(O),O=O.return;while(O);var A=b}catch(z){A=`
Error generating stack: `+z.message+`
`+z.stack}return{value:n,source:u,stack:A,digest:null}}function Tl(n,u,b){return{value:n,source:null,stack:b??null,digest:u??null}}function va(n,u){try{console.error(u.value)}catch(b){setTimeout(function(){throw b})}}var Mf=typeof WeakMap=="function"?WeakMap:Map;function hd(n,u,b){b=Kr(-1,b),b.tag=3,b.payload={element:null};var O=u.value;return b.callback=function(){md||(md=!0,Gf=O),va(n,u)},b}function p(n,u,b){b=Kr(-1,b),b.tag=3;var O=n.type.getDerivedStateFromError;if(typeof O=="function"){var A=u.value;b.payload=function(){return O(A)},b.callback=function(){va(n,u)}}var z=n.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(b.callback=function(){va(n,u),typeof O!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var J=u.stack;this.componentDidCatch(u.value,{componentStack:J!==null?J:""})}),b}function y(n,u,b){var O=n.pingCache;if(O===null){O=n.pingCache=new Mf;var A=new Set;O.set(u,A)}else A=O.get(u),A===void 0&&(A=new Set,O.set(u,A));A.has(b)||(A.add(b),n=yw.bind(null,n,u,b),u.then(n,n))}function j(n){do{var u;if((u=n.tag===13)&&(u=n.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return n;n=n.return}while(n!==null);return null}function N(n,u,b,O,A){return(n.mode&1)===0?(n===u?n.flags|=65536:(n.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(u=Kr(-1,1),u.tag=2,$r(b,u,1))),b.lanes|=1),n):(n.flags|=65536,n.lanes=A,n)}var F=w.ReactCurrentOwner,G=!1;function re(n,u,b,O){u.child=n===null?Sr(u,null,b,O):_s(u,n.child,b,O)}function xe(n,u,b,O,A){b=b.render;var z=u.ref;return fi(u,A),O=ca(n,u,b,O,z,A),b=ha(),n!==null&&!G?(u.updateQueue=n.updateQueue,u.flags&=-2053,n.lanes&=~A,An(n,u,A)):(St&&b&&na(u),u.flags|=1,re(n,u,O,A),u.child)}function Ee(n,u,b,O,A){if(n===null){var z=b.type;return typeof z=="function"&&!$f(z)&&z.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(u.tag=15,u.type=z,Fe(n,u,z,O,A)):(n=bd(b.type,null,O,u,u.mode,A),n.ref=u.ref,n.return=u,u.child=n)}if(z=n.child,(n.lanes&A)===0){var J=z.memoizedProps;if(b=b.compare,b=b!==null?b:as,b(J,O)&&n.ref===u.ref)return An(n,u,A)}return u.flags|=1,n=Sa(z,O),n.ref=u.ref,n.return=u,u.child=n}function Fe(n,u,b,O,A){if(n!==null){var z=n.memoizedProps;if(as(z,O)&&n.ref===u.ref)if(G=!1,u.pendingProps=O=z,(n.lanes&A)!==0)(n.flags&131072)!==0&&(G=!0);else return u.lanes=n.lanes,An(n,u,A)}return Ue(n,u,b,O,A)}function We(n,u,b){var O=u.pendingProps,A=O.children,z=n!==null?n.memoizedState:null;if(O.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(El,Br),Br|=b;else{if((b&1073741824)===0)return n=z!==null?z.baseLanes|b:b,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:n,cachePool:null,transitions:null},u.updateQueue=null,Tt(El,Br),Br|=n,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},O=z!==null?z.baseLanes:b,Tt(El,Br),Br|=O}else z!==null?(O=z.baseLanes|b,u.memoizedState=null):O=b,Tt(El,Br),Br|=O;return re(n,u,A,b),u.child}function it(n,u){var b=u.ref;(n===null&&b!==null||n!==null&&n.ref!==b)&&(u.flags|=512,u.flags|=2097152)}function Ue(n,u,b,O,A){var z=On(b)?Di:kn.current;return z=ps(u,z),fi(u,A),b=ca(n,u,b,O,z,A),O=ha(),n!==null&&!G?(u.updateQueue=n.updateQueue,u.flags&=-2053,n.lanes&=~A,An(n,u,A)):(St&&O&&na(u),u.flags|=1,re(n,u,b,A),u.child)}function Nt(n,u,b,O,A){if(On(b)){var z=!0;ms(u)}else z=!1;if(fi(u,A),u.stateNode===null)mt(n,u),cd(u,b,O),kl(u,b,O,A),O=!0;else if(n===null){var J=u.stateNode,ce=u.memoizedProps;J.props=ce;var ge=J.context,Pe=b.contextType;typeof Pe=="object"&&Pe!==null?Pe=Wn(Pe):(Pe=On(b)?Di:kn.current,Pe=ps(u,Pe));var Re=b.getDerivedStateFromProps,De=typeof Re=="function"||typeof J.getSnapshotBeforeUpdate=="function";De||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(ce!==O||ge!==Pe)&&Xu(u,J,O,Pe),qr=!1;var Ae=u.memoizedState;J.state=Ae,aa(u,O,J,A),ge=u.memoizedState,ce!==O||Ae!==ge||jn.current||qr?(typeof Re=="function"&&(pa(u,b,Re,O),ge=u.memoizedState),(ce=qr||Cl(u,b,ce,O,Ae,ge,Pe))?(De||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(u.flags|=4194308)):(typeof J.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=O,u.memoizedState=ge),J.props=O,J.state=ge,J.context=Pe,O=ce):(typeof J.componentDidMount=="function"&&(u.flags|=4194308),O=!1)}else{J=u.stateNode,ml(n,u),ce=u.memoizedProps,Pe=u.type===u.elementType?ce:Tn(u.type,ce),J.props=Pe,De=u.pendingProps,Ae=J.context,ge=b.contextType,typeof ge=="object"&&ge!==null?ge=Wn(ge):(ge=On(b)?Di:kn.current,ge=ps(u,ge));var Ge=b.getDerivedStateFromProps;(Re=typeof Ge=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(ce!==De||Ae!==ge)&&Xu(u,J,O,ge),qr=!1,Ae=u.memoizedState,J.state=Ae,aa(u,O,J,A);var Ye=u.memoizedState;ce!==De||Ae!==Ye||jn.current||qr?(typeof Ge=="function"&&(pa(u,b,Ge,O),Ye=u.memoizedState),(Pe=qr||Cl(u,b,Pe,O,Ae,Ye,ge)||!1)?(Re||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(O,Ye,ge),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(O,Ye,ge)),typeof J.componentDidUpdate=="function"&&(u.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof J.componentDidUpdate!="function"||ce===n.memoizedProps&&Ae===n.memoizedState||(u.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||ce===n.memoizedProps&&Ae===n.memoizedState||(u.flags|=1024),u.memoizedProps=O,u.memoizedState=Ye),J.props=O,J.state=Ye,J.context=ge,O=Pe):(typeof J.componentDidUpdate!="function"||ce===n.memoizedProps&&Ae===n.memoizedState||(u.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||ce===n.memoizedProps&&Ae===n.memoizedState||(u.flags|=1024),O=!1)}return Ct(n,u,b,O,z,A)}function Ct(n,u,b,O,A,z){it(n,u);var J=(u.flags&128)!==0;if(!O&&!J)return A&&Zh(u,b,!1),An(n,u,z);O=u.stateNode,F.current=u;var ce=J&&typeof b.getDerivedStateFromError!="function"?null:O.render();return u.flags|=1,n!==null&&J?(u.child=_s(u,n.child,null,z),u.child=_s(u,null,ce,z)):re(n,u,ce,z),u.memoizedState=O.state,A&&Zh(u,b,!0),u.child}function Yn(n){var u=n.stateNode;u.pendingContext?Au(n,u.pendingContext,u.pendingContext!==u.context):u.context&&Au(n,u.context,!1),Ui(n,u.containerInfo)}function Qr(n,u,b,O,A){return ws(),so(A),u.flags|=256,re(n,u,b,O),u.child}var Te={dehydrated:null,treeContext:null,retryLane:0};function we(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ne(n,u,b){var O=u.pendingProps,A=Ot.current,z=!1,J=(u.flags&128)!==0,ce;if((ce=J)||(ce=n!==null&&n.memoizedState===null?!1:(A&2)!==0),ce?(z=!0,u.flags&=-129):(n===null||n.memoizedState!==null)&&(A|=1),Tt(Ot,A&1),n===null)return ra(u),n=u.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((u.mode&1)===0?u.lanes=1:n.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(J=O.children,n=O.fallback,z?(O=u.mode,z=u.child,J={mode:"hidden",children:J},(O&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=J):z=Sd(J,O,0,null),n=vo(n,O,b,null),z.return=u,n.return=u,z.sibling=n,u.child=z,u.child.memoizedState=we(b),u.memoizedState=Te,n):Ve(u,J));if(A=n.memoizedState,A!==null&&(ce=A.dehydrated,ce!==null))return ct(n,u,J,O,ce,A,b);if(z){z=O.fallback,J=u.mode,A=n.child,ce=A.sibling;var ge={mode:"hidden",children:O.children};return(J&1)===0&&u.child!==A?(O=u.child,O.childLanes=0,O.pendingProps=ge,u.deletions=null):(O=Sa(A,ge),O.subtreeFlags=A.subtreeFlags&14680064),ce!==null?z=Sa(ce,z):(z=vo(z,J,b,null),z.flags|=2),z.return=u,O.return=u,O.sibling=z,u.child=O,O=z,z=u.child,J=n.child.memoizedState,J=J===null?we(b):{baseLanes:J.baseLanes|b,cachePool:null,transitions:J.transitions},z.memoizedState=J,z.childLanes=n.childLanes&~b,u.memoizedState=Te,O}return z=n.child,n=z.sibling,O=Sa(z,{mode:"visible",children:O.children}),(u.mode&1)===0&&(O.lanes=b),O.return=u,O.sibling=null,n!==null&&(b=u.deletions,b===null?(u.deletions=[n],u.flags|=16):b.push(n)),u.child=O,u.memoizedState=null,O}function Ve(n,u){return u=Sd({mode:"visible",children:u},n.mode,0,null),u.return=n,n.child=u}function Qe(n,u,b,O){return O!==null&&so(O),_s(u,n.child,null,b),n=Ve(u,u.pendingProps.children),n.flags|=2,u.memoizedState=null,n}function ct(n,u,b,O,A,z,J){if(b)return u.flags&256?(u.flags&=-257,O=Tl(Error(h(422))),Qe(n,u,J,O)):u.memoizedState!==null?(u.child=n.child,u.flags|=128,null):(z=O.fallback,A=u.mode,O=Sd({mode:"visible",children:O.children},A,0,null),z=vo(z,A,J,null),z.flags|=2,O.return=u,z.return=u,O.sibling=z,u.child=O,(u.mode&1)!==0&&_s(u,n.child,null,J),u.child.memoizedState=we(J),u.memoizedState=Te,z);if((u.mode&1)===0)return Qe(n,u,J,null);if(A.data==="$!"){if(O=A.nextSibling&&A.nextSibling.dataset,O)var ce=O.dgst;return O=ce,z=Error(h(419)),O=Tl(z,O,void 0),Qe(n,u,J,O)}if(ce=(J&n.childLanes)!==0,G||ce){if(O=Rn,O!==null){switch(J&-J){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(O.suspendedLanes|J))!==0?0:A,A!==0&&A!==z.retryLane&&(z.retryLane=A,pr(n,A),xi(O,n,A,-1))}return Kf(),O=Tl(Error(h(421))),Qe(n,u,J,O)}return A.data==="$?"?(u.flags|=128,u.child=n.child,u=xw.bind(null,n),A._reactRetry=u,null):(n=z.treeContext,ze=Gr(A.nextSibling),dr=u,St=!0,fr=null,n!==null&&(Gn[Hn++]=hr,Gn[Hn++]=Ft,Gn[Hn++]=zi,hr=n.id,Ft=n.overflow,zi=u),u=Ve(u,O.children),u.flags|=4096,u)}function st(n,u,b){n.lanes|=u;var O=n.alternate;O!==null&&(O.lanes|=u),pl(n.return,u,b)}function yt(n,u,b,O,A){var z=n.memoizedState;z===null?n.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:O,tail:b,tailMode:A}:(z.isBackwards=u,z.rendering=null,z.renderingStartTime=0,z.last=O,z.tail=b,z.tailMode=A)}function on(n,u,b){var O=u.pendingProps,A=O.revealOrder,z=O.tail;if(re(n,u,O.children,b),O=Ot.current,(O&2)!==0)O=O&1|2,u.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=u.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&st(n,b,u);else if(n.tag===19)st(n,b,u);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===u)break e;for(;n.sibling===null;){if(n.return===null||n.return===u)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}O&=1}if(Tt(Ot,O),(u.mode&1)===0)u.memoizedState=null;else switch(A){case"forwards":for(b=u.child,A=null;b!==null;)n=b.alternate,n!==null&&la(n)===null&&(A=b),b=b.sibling;b=A,b===null?(A=u.child,u.child=null):(A=b.sibling,b.sibling=null),yt(u,!1,A,b,z);break;case"backwards":for(b=null,A=u.child,u.child=null;A!==null;){if(n=A.alternate,n!==null&&la(n)===null){u.child=A;break}n=A.sibling,A.sibling=b,b=A,A=n}yt(u,!0,b,null,z);break;case"together":yt(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function mt(n,u){(u.mode&1)===0&&n!==null&&(n.alternate=null,u.alternate=null,u.flags|=2)}function An(n,u,b){if(n!==null&&(u.dependencies=n.dependencies),fo|=u.lanes,(b&u.childLanes)===0)return null;if(n!==null&&u.child!==n.child)throw Error(h(153));if(u.child!==null){for(n=u.child,b=Sa(n,n.pendingProps),u.child=b,b.return=u;n.sibling!==null;)n=n.sibling,b=b.sibling=Sa(n,n.pendingProps),b.return=u;b.sibling=null}return u.child}function Af(n,u,b){switch(u.tag){case 3:Yn(u),ws();break;case 5:oa(u);break;case 1:On(u.type)&&ms(u);break;case 4:Ui(u,u.stateNode.containerInfo);break;case 10:var O=u.type._context,A=u.memoizedProps.value;Tt(ao,O._currentValue),O._currentValue=A;break;case 13:if(O=u.memoizedState,O!==null)return O.dehydrated!==null?(Tt(Ot,Ot.current&1),u.flags|=128,null):(b&u.child.childLanes)!==0?Ne(n,u,b):(Tt(Ot,Ot.current&1),n=An(n,u,b),n!==null?n.sibling:null);Tt(Ot,Ot.current&1);break;case 19:if(O=(b&u.childLanes)!==0,(n.flags&128)!==0){if(O)return on(n,u,b);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Tt(Ot,Ot.current),O)break;return null;case 22:case 23:return u.lanes=0,We(n,u,b)}return An(n,u,b)}var bm,Rf,Sm,Cm;bm=function(n,u){for(var b=u.child;b!==null;){if(b.tag===5||b.tag===6)n.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===u)break;for(;b.sibling===null;){if(b.return===null||b.return===u)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Rf=function(){},Sm=function(n,u,b,O){var A=n.memoizedProps;if(A!==O){n=u.stateNode,sn(Pt.current);var z=null;switch(b){case"input":A=Oe(n,A),O=Oe(n,O),z=[];break;case"select":A=$({},A,{value:void 0}),O=$({},O,{value:void 0}),z=[];break;case"textarea":A=Me(n,A),O=Me(n,O),z=[];break;default:typeof A.onClick!="function"&&typeof O.onClick=="function"&&(n.onclick=ds)}Si(b,O);var J;b=null;for(Pe in A)if(!O.hasOwnProperty(Pe)&&A.hasOwnProperty(Pe)&&A[Pe]!=null)if(Pe==="style"){var ce=A[Pe];for(J in ce)ce.hasOwnProperty(J)&&(b||(b={}),b[J]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(v.hasOwnProperty(Pe)?z||(z=[]):(z=z||[]).push(Pe,null));for(Pe in O){var ge=O[Pe];if(ce=A?.[Pe],O.hasOwnProperty(Pe)&&ge!==ce&&(ge!=null||ce!=null))if(Pe==="style")if(ce){for(J in ce)!ce.hasOwnProperty(J)||ge&&ge.hasOwnProperty(J)||(b||(b={}),b[J]="");for(J in ge)ge.hasOwnProperty(J)&&ce[J]!==ge[J]&&(b||(b={}),b[J]=ge[J])}else b||(z||(z=[]),z.push(Pe,b)),b=ge;else Pe==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ce=ce?ce.__html:void 0,ge!=null&&ce!==ge&&(z=z||[]).push(Pe,ge)):Pe==="children"?typeof ge!="string"&&typeof ge!="number"||(z=z||[]).push(Pe,""+ge):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(v.hasOwnProperty(Pe)?(ge!=null&&Pe==="onScroll"&&Et("scroll",n),z||ce===ge||(z=[])):(z=z||[]).push(Pe,ge))}b&&(z=z||[]).push("style",b);var Pe=z;(u.updateQueue=Pe)&&(u.flags|=4)}},Cm=function(n,u,b,O){b!==O&&(u.flags|=4)};function Yu(n,u){if(!St)switch(n.tailMode){case"hidden":u=n.tail;for(var b=null;u!==null;)u.alternate!==null&&(b=u),u=u.sibling;b===null?n.tail=null:b.sibling=null;break;case"collapsed":b=n.tail;for(var O=null;b!==null;)b.alternate!==null&&(O=b),b=b.sibling;O===null?u||n.tail===null?n.tail=null:n.tail.sibling=null:O.sibling=null}}function nr(n){var u=n.alternate!==null&&n.alternate.child===n.child,b=0,O=0;if(u)for(var A=n.child;A!==null;)b|=A.lanes|A.childLanes,O|=A.subtreeFlags&14680064,O|=A.flags&14680064,A.return=n,A=A.sibling;else for(A=n.child;A!==null;)b|=A.lanes|A.childLanes,O|=A.subtreeFlags,O|=A.flags,A.return=n,A=A.sibling;return n.subtreeFlags|=O,n.childLanes=b,u}function lw(n,u,b){var O=u.pendingProps;switch(vn(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(u),null;case 1:return On(u.type)&&ea(),nr(u),null;case 3:return O=u.stateNode,Bt(),jt(jn),jt(kn),Nn(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(n===null||n.child===null)&&(io(u)?u.flags|=4:n===null||n.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,fr!==null&&(Xf(fr),fr=null))),Rf(n,u),nr(u),null;case 5:gi(u);var A=sn(Yt.current);if(b=u.type,n!==null&&u.stateNode!=null)Sm(n,u,b,O,A),n.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!O){if(u.stateNode===null)throw Error(h(166));return nr(u),null}if(n=sn(Pt.current),io(u)){O=u.stateNode,b=u.type;var z=u.memoizedProps;switch(O[br]=u,O[to]=z,n=(u.mode&1)!==0,b){case"dialog":Et("cancel",O),Et("close",O);break;case"iframe":case"object":case"embed":Et("load",O);break;case"video":case"audio":for(A=0;A<Mi.length;A++)Et(Mi[A],O);break;case"source":Et("error",O);break;case"img":case"image":case"link":Et("error",O),Et("load",O);break;case"details":Et("toggle",O);break;case"input":pe(O,z),Et("invalid",O);break;case"select":O._wrapperState={wasMultiple:!!z.multiple},Et("invalid",O);break;case"textarea":Le(O,z),Et("invalid",O)}Si(b,z),A=null;for(var J in z)if(z.hasOwnProperty(J)){var ce=z[J];J==="children"?typeof ce=="string"?O.textContent!==ce&&(z.suppressHydrationWarning!==!0&&Za(O.textContent,ce,n),A=["children",ce]):typeof ce=="number"&&O.textContent!==""+ce&&(z.suppressHydrationWarning!==!0&&Za(O.textContent,ce,n),A=["children",""+ce]):v.hasOwnProperty(J)&&ce!=null&&J==="onScroll"&&Et("scroll",O)}switch(b){case"input":he(O),te(O,z,!0);break;case"textarea":he(O),Ie(O);break;case"select":case"option":break;default:typeof z.onClick=="function"&&(O.onclick=ds)}O=A,u.updateQueue=O,O!==null&&(u.flags|=4)}else{J=A.nodeType===9?A:A.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=He(b)),n==="http://www.w3.org/1999/xhtml"?b==="script"?(n=J.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof O.is=="string"?n=J.createElement(b,{is:O.is}):(n=J.createElement(b),b==="select"&&(J=n,O.multiple?J.multiple=!0:O.size&&(J.size=O.size))):n=J.createElementNS(n,b),n[br]=u,n[to]=O,bm(n,u,!1,!1),u.stateNode=n;e:{switch(J=Ms(b,O),b){case"dialog":Et("cancel",n),Et("close",n),A=O;break;case"iframe":case"object":case"embed":Et("load",n),A=O;break;case"video":case"audio":for(A=0;A<Mi.length;A++)Et(Mi[A],n);A=O;break;case"source":Et("error",n),A=O;break;case"img":case"image":case"link":Et("error",n),Et("load",n),A=O;break;case"details":Et("toggle",n),A=O;break;case"input":pe(n,O),A=Oe(n,O),Et("invalid",n);break;case"option":A=O;break;case"select":n._wrapperState={wasMultiple:!!O.multiple},A=$({},O,{value:void 0}),Et("invalid",n);break;case"textarea":Le(n,O),A=Me(n,O),Et("invalid",n);break;default:A=O}Si(b,A),ce=A;for(z in ce)if(ce.hasOwnProperty(z)){var ge=ce[z];z==="style"?dn(n,ge):z==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ge!=null&&ot(n,ge)):z==="children"?typeof ge=="string"?(b!=="textarea"||ge!=="")&&dt(n,ge):typeof ge=="number"&&dt(n,""+ge):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(v.hasOwnProperty(z)?ge!=null&&z==="onScroll"&&Et("scroll",n):ge!=null&&g(n,z,ge,J))}switch(b){case"input":he(n),te(n,O,!1);break;case"textarea":he(n),Ie(n);break;case"option":O.value!=null&&n.setAttribute("value",""+K(O.value));break;case"select":n.multiple=!!O.multiple,z=O.value,z!=null?je(n,!!O.multiple,z,!1):O.defaultValue!=null&&je(n,!!O.multiple,O.defaultValue,!0);break;default:typeof A.onClick=="function"&&(n.onclick=ds)}switch(b){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}}O&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return nr(u),null;case 6:if(n&&u.stateNode!=null)Cm(n,u,n.memoizedProps,O);else{if(typeof O!="string"&&u.stateNode===null)throw Error(h(166));if(b=sn(Yt.current),sn(Pt.current),io(u)){if(O=u.stateNode,b=u.memoizedProps,O[br]=u,(z=O.nodeValue!==b)&&(n=dr,n!==null))switch(n.tag){case 3:Za(O.nodeValue,b,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Za(O.nodeValue,b,(n.mode&1)!==0)}z&&(u.flags|=4)}else O=(b.nodeType===9?b:b.ownerDocument).createTextNode(O),O[br]=u,u.stateNode=O}return nr(u),null;case 13:if(jt(Ot),O=u.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(St&&ze!==null&&(u.mode&1)!==0&&(u.flags&128)===0)Du(),ws(),u.flags|=98560,z=!1;else if(z=io(u),O!==null&&O.dehydrated!==null){if(n===null){if(!z)throw Error(h(318));if(z=u.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(h(317));z[br]=u}else ws(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;nr(u),z=!1}else fr!==null&&(Xf(fr),fr=null),z=!0;if(!z)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=b,u):(O=O!==null,O!==(n!==null&&n.memoizedState!==null)&&O&&(u.child.flags|=8192,(u.mode&1)!==0&&(n===null||(Ot.current&1)!==0?Pn===0&&(Pn=3):Kf())),u.updateQueue!==null&&(u.flags|=4),nr(u),null);case 4:return Bt(),Rf(n,u),n===null&&cs(u.stateNode.containerInfo),nr(u),null;case 10:return gl(u.type._context),nr(u),null;case 17:return On(u.type)&&ea(),nr(u),null;case 19:if(jt(Ot),z=u.memoizedState,z===null)return nr(u),null;if(O=(u.flags&128)!==0,J=z.rendering,J===null)if(O)Yu(z,!1);else{if(Pn!==0||n!==null&&(n.flags&128)!==0)for(n=u.child;n!==null;){if(J=la(n),J!==null){for(u.flags|=128,Yu(z,!1),O=J.updateQueue,O!==null&&(u.updateQueue=O,u.flags|=4),u.subtreeFlags=0,O=b,b=u.child;b!==null;)z=b,n=O,z.flags&=14680066,J=z.alternate,J===null?(z.childLanes=0,z.lanes=n,z.child=null,z.subtreeFlags=0,z.memoizedProps=null,z.memoizedState=null,z.updateQueue=null,z.dependencies=null,z.stateNode=null):(z.childLanes=J.childLanes,z.lanes=J.lanes,z.child=J.child,z.subtreeFlags=0,z.deletions=null,z.memoizedProps=J.memoizedProps,z.memoizedState=J.memoizedState,z.updateQueue=J.updateQueue,z.type=J.type,n=J.dependencies,z.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),b=b.sibling;return Tt(Ot,Ot.current&1|2),u.child}n=n.sibling}z.tail!==null&&Wt()>jl&&(u.flags|=128,O=!0,Yu(z,!1),u.lanes=4194304)}else{if(!O)if(n=la(J),n!==null){if(u.flags|=128,O=!0,b=n.updateQueue,b!==null&&(u.updateQueue=b,u.flags|=4),Yu(z,!0),z.tail===null&&z.tailMode==="hidden"&&!J.alternate&&!St)return nr(u),null}else 2*Wt()-z.renderingStartTime>jl&&b!==1073741824&&(u.flags|=128,O=!0,Yu(z,!1),u.lanes=4194304);z.isBackwards?(J.sibling=u.child,u.child=J):(b=z.last,b!==null?b.sibling=J:u.child=J,z.last=J)}return z.tail!==null?(u=z.tail,z.rendering=u,z.tail=u.sibling,z.renderingStartTime=Wt(),u.sibling=null,b=Ot.current,Tt(Ot,O?b&1|2:b&1),u):(nr(u),null);case 22:case 23:return qf(),O=u.memoizedState!==null,n!==null&&n.memoizedState!==null!==O&&(u.flags|=8192),O&&(u.mode&1)!==0?(Br&1073741824)!==0&&(nr(u),u.subtreeFlags&6&&(u.flags|=8192)):nr(u),null;case 24:return null;case 25:return null}throw Error(h(156,u.tag))}function uw(n,u){switch(vn(u),u.tag){case 1:return On(u.type)&&ea(),n=u.flags,n&65536?(u.flags=n&-65537|128,u):null;case 3:return Bt(),jt(jn),jt(kn),Nn(),n=u.flags,(n&65536)!==0&&(n&128)===0?(u.flags=n&-65537|128,u):null;case 5:return gi(u),null;case 13:if(jt(Ot),n=u.memoizedState,n!==null&&n.dehydrated!==null){if(u.alternate===null)throw Error(h(340));ws()}return n=u.flags,n&65536?(u.flags=n&-65537|128,u):null;case 19:return jt(Ot),null;case 4:return Bt(),null;case 10:return gl(u.type._context),null;case 22:case 23:return qf(),null;case 24:return null;default:return null}}var dd=!1,rr=!1,cw=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Pl(n,u){var b=n.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(O){Jt(n,u,O)}else b.current=null}function Df(n,u,b){try{b()}catch(O){Jt(n,u,O)}}var km=!1;function hw(n,u){if(Ou=zo,n=nn(),$s(n)){if("selectionStart"in n)var b={start:n.selectionStart,end:n.selectionEnd};else e:{b=(b=n.ownerDocument)&&b.defaultView||window;var O=b.getSelection&&b.getSelection();if(O&&O.rangeCount!==0){b=O.anchorNode;var A=O.anchorOffset,z=O.focusNode;O=O.focusOffset;try{b.nodeType,z.nodeType}catch{b=null;break e}var J=0,ce=-1,ge=-1,Pe=0,Re=0,De=n,Ae=null;t:for(;;){for(var Ge;De!==b||A!==0&&De.nodeType!==3||(ce=J+A),De!==z||O!==0&&De.nodeType!==3||(ge=J+O),De.nodeType===3&&(J+=De.nodeValue.length),(Ge=De.firstChild)!==null;)Ae=De,De=Ge;for(;;){if(De===n)break t;if(Ae===b&&++Pe===A&&(ce=J),Ae===z&&++Re===O&&(ge=J),(Ge=De.nextSibling)!==null)break;De=Ae,Ae=De.parentNode}De=Ge}b=ce===-1||ge===-1?null:{start:ce,end:ge}}else b=null}b=b||{start:0,end:0}}else b=null;for(Nu={focusedElem:n,selectionRange:b},zo=!1,Xe=u;Xe!==null;)if(u=Xe,n=u.child,(u.subtreeFlags&1028)!==0&&n!==null)n.return=u,Xe=n;else for(;Xe!==null;){u=Xe;try{var Ye=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Ye!==null){var qe=Ye.memoizedProps,ln=Ye.memoizedState,be=u.stateNode,me=be.getSnapshotBeforeUpdate(u.elementType===u.type?qe:Tn(u.type,qe),ln);be.__reactInternalSnapshotBeforeUpdate=me}break;case 3:var ke=u.stateNode.containerInfo;ke.nodeType===1?ke.textContent="":ke.nodeType===9&&ke.documentElement&&ke.removeChild(ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(h(163))}}catch(Be){Jt(u,u.return,Be)}if(n=u.sibling,n!==null){n.return=u.return,Xe=n;break}Xe=u.return}return Ye=km,km=!1,Ye}function qu(n,u,b){var O=u.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var A=O=O.next;do{if((A.tag&n)===n){var z=A.destroy;A.destroy=void 0,z!==void 0&&Df(u,b,z)}A=A.next}while(A!==O)}}function fd(n,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var b=u=u.next;do{if((b.tag&n)===n){var O=b.create;b.destroy=O()}b=b.next}while(b!==u)}}function Ff(n){var u=n.ref;if(u!==null){var b=n.stateNode;switch(n.tag){case 5:n=b;break;default:n=b}typeof u=="function"?u(n):u.current=n}}function Tm(n){var u=n.alternate;u!==null&&(n.alternate=null,Tm(u)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(u=n.stateNode,u!==null&&(delete u[br],delete u[to],delete u[al],delete u[Qh],delete u[Jh])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Pm(n){return n.tag===5||n.tag===3||n.tag===4}function Em(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Pm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function If(n,u,b){var O=n.tag;if(O===5||O===6)n=n.stateNode,u?b.nodeType===8?b.parentNode.insertBefore(n,u):b.insertBefore(n,u):(b.nodeType===8?(u=b.parentNode,u.insertBefore(n,b)):(u=b,u.appendChild(n)),b=b._reactRootContainer,b!=null||u.onclick!==null||(u.onclick=ds));else if(O!==4&&(n=n.child,n!==null))for(If(n,u,b),n=n.sibling;n!==null;)If(n,u,b),n=n.sibling}function Bf(n,u,b){var O=n.tag;if(O===5||O===6)n=n.stateNode,u?b.insertBefore(n,u):b.appendChild(n);else if(O!==4&&(n=n.child,n!==null))for(Bf(n,u,b),n=n.sibling;n!==null;)Bf(n,u,b),n=n.sibling}var qn=null,vi=!1;function ya(n,u,b){for(b=b.child;b!==null;)jm(n,u,b),b=b.sibling}function jm(n,u,b){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(ii,b)}catch{}switch(b.tag){case 5:rr||Pl(b,u);case 6:var O=qn,A=vi;qn=null,ya(n,u,b),qn=O,vi=A,qn!==null&&(vi?(n=qn,b=b.stateNode,n.nodeType===8?n.parentNode.removeChild(b):n.removeChild(b)):qn.removeChild(b.stateNode));break;case 18:qn!==null&&(vi?(n=qn,b=b.stateNode,n.nodeType===8?sl(n.parentNode,b):n.nodeType===1&&sl(n,b),Jn(n)):sl(qn,b.stateNode));break;case 4:O=qn,A=vi,qn=b.stateNode.containerInfo,vi=!0,ya(n,u,b),qn=O,vi=A;break;case 0:case 11:case 14:case 15:if(!rr&&(O=b.updateQueue,O!==null&&(O=O.lastEffect,O!==null))){A=O=O.next;do{var z=A,J=z.destroy;z=z.tag,J!==void 0&&((z&2)!==0||(z&4)!==0)&&Df(b,u,J),A=A.next}while(A!==O)}ya(n,u,b);break;case 1:if(!rr&&(Pl(b,u),O=b.stateNode,typeof O.componentWillUnmount=="function"))try{O.props=b.memoizedProps,O.state=b.memoizedState,O.componentWillUnmount()}catch(ce){Jt(b,u,ce)}ya(n,u,b);break;case 21:ya(n,u,b);break;case 22:b.mode&1?(rr=(O=rr)||b.memoizedState!==null,ya(n,u,b),rr=O):ya(n,u,b);break;default:ya(n,u,b)}}function Om(n){var u=n.updateQueue;if(u!==null){n.updateQueue=null;var b=n.stateNode;b===null&&(b=n.stateNode=new cw),u.forEach(function(O){var A=ww.bind(null,n,O);b.has(O)||(b.add(O),O.then(A,A))})}}function yi(n,u){var b=u.deletions;if(b!==null)for(var O=0;O<b.length;O++){var A=b[O];try{var z=n,J=u,ce=J;e:for(;ce!==null;){switch(ce.tag){case 5:qn=ce.stateNode,vi=!1;break e;case 3:qn=ce.stateNode.containerInfo,vi=!0;break e;case 4:qn=ce.stateNode.containerInfo,vi=!0;break e}ce=ce.return}if(qn===null)throw Error(h(160));jm(z,J,A),qn=null,vi=!1;var ge=A.alternate;ge!==null&&(ge.return=null),A.return=null}catch(Pe){Jt(A,u,Pe)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)Nm(u,n),u=u.sibling}function Nm(n,u){var b=n.alternate,O=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(yi(u,n),Xi(n),O&4){try{qu(3,n,n.return),fd(3,n)}catch(qe){Jt(n,n.return,qe)}try{qu(5,n,n.return)}catch(qe){Jt(n,n.return,qe)}}break;case 1:yi(u,n),Xi(n),O&512&&b!==null&&Pl(b,b.return);break;case 5:if(yi(u,n),Xi(n),O&512&&b!==null&&Pl(b,b.return),n.flags&32){var A=n.stateNode;try{dt(A,"")}catch(qe){Jt(n,n.return,qe)}}if(O&4&&(A=n.stateNode,A!=null)){var z=n.memoizedProps,J=b!==null?b.memoizedProps:z,ce=n.type,ge=n.updateQueue;if(n.updateQueue=null,ge!==null)try{ce==="input"&&z.type==="radio"&&z.name!=null&&de(A,z),Ms(ce,J);var Pe=Ms(ce,z);for(J=0;J<ge.length;J+=2){var Re=ge[J],De=ge[J+1];Re==="style"?dn(A,De):Re==="dangerouslySetInnerHTML"?ot(A,De):Re==="children"?dt(A,De):g(A,Re,De,Pe)}switch(ce){case"input":Ce(A,z);break;case"textarea":_e(A,z);break;case"select":var Ae=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!z.multiple;var Ge=z.value;Ge!=null?je(A,!!z.multiple,Ge,!1):Ae!==!!z.multiple&&(z.defaultValue!=null?je(A,!!z.multiple,z.defaultValue,!0):je(A,!!z.multiple,z.multiple?[]:"",!1))}A[to]=z}catch(qe){Jt(n,n.return,qe)}}break;case 6:if(yi(u,n),Xi(n),O&4){if(n.stateNode===null)throw Error(h(162));A=n.stateNode,z=n.memoizedProps;try{A.nodeValue=z}catch(qe){Jt(n,n.return,qe)}}break;case 3:if(yi(u,n),Xi(n),O&4&&b!==null&&b.memoizedState.isDehydrated)try{Jn(u.containerInfo)}catch(qe){Jt(n,n.return,qe)}break;case 4:yi(u,n),Xi(n);break;case 13:yi(u,n),Xi(n),A=n.child,A.flags&8192&&(z=A.memoizedState!==null,A.stateNode.isHidden=z,!z||A.alternate!==null&&A.alternate.memoizedState!==null||(Vf=Wt())),O&4&&Om(n);break;case 22:if(Re=b!==null&&b.memoizedState!==null,n.mode&1?(rr=(Pe=rr)||Re,yi(u,n),rr=Pe):yi(u,n),Xi(n),O&8192){if(Pe=n.memoizedState!==null,(n.stateNode.isHidden=Pe)&&!Re&&(n.mode&1)!==0)for(Xe=n,Re=n.child;Re!==null;){for(De=Xe=Re;Xe!==null;){switch(Ae=Xe,Ge=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:qu(4,Ae,Ae.return);break;case 1:Pl(Ae,Ae.return);var Ye=Ae.stateNode;if(typeof Ye.componentWillUnmount=="function"){O=Ae,b=Ae.return;try{u=O,Ye.props=u.memoizedProps,Ye.state=u.memoizedState,Ye.componentWillUnmount()}catch(qe){Jt(O,b,qe)}}break;case 5:Pl(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){Am(De);continue}}Ge!==null?(Ge.return=Ae,Xe=Ge):Am(De)}Re=Re.sibling}e:for(Re=null,De=n;;){if(De.tag===5){if(Re===null){Re=De;try{A=De.stateNode,Pe?(z=A.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none"):(ce=De.stateNode,ge=De.memoizedProps.style,J=ge!=null&&ge.hasOwnProperty("display")?ge.display:null,ce.style.display=Nr("display",J))}catch(qe){Jt(n,n.return,qe)}}}else if(De.tag===6){if(Re===null)try{De.stateNode.nodeValue=Pe?"":De.memoizedProps}catch(qe){Jt(n,n.return,qe)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===n)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===n)break e;for(;De.sibling===null;){if(De.return===null||De.return===n)break e;Re===De&&(Re=null),De=De.return}Re===De&&(Re=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:yi(u,n),Xi(n),O&4&&Om(n);break;case 21:break;default:yi(u,n),Xi(n)}}function Xi(n){var u=n.flags;if(u&2){try{e:{for(var b=n.return;b!==null;){if(Pm(b)){var O=b;break e}b=b.return}throw Error(h(160))}switch(O.tag){case 5:var A=O.stateNode;O.flags&32&&(dt(A,""),O.flags&=-33);var z=Em(n);Bf(n,z,A);break;case 3:case 4:var J=O.stateNode.containerInfo,ce=Em(n);If(n,ce,J);break;default:throw Error(h(161))}}catch(ge){Jt(n,n.return,ge)}n.flags&=-3}u&4096&&(n.flags&=-4097)}function dw(n,u,b){Xe=n,Lm(n)}function Lm(n,u,b){for(var O=(n.mode&1)!==0;Xe!==null;){var A=Xe,z=A.child;if(A.tag===22&&O){var J=A.memoizedState!==null||dd;if(!J){var ce=A.alternate,ge=ce!==null&&ce.memoizedState!==null||rr;ce=dd;var Pe=rr;if(dd=J,(rr=ge)&&!Pe)for(Xe=A;Xe!==null;)J=Xe,ge=J.child,J.tag===22&&J.memoizedState!==null?Rm(A):ge!==null?(ge.return=J,Xe=ge):Rm(A);for(;z!==null;)Xe=z,Lm(z),z=z.sibling;Xe=A,dd=ce,rr=Pe}Mm(n)}else(A.subtreeFlags&8772)!==0&&z!==null?(z.return=A,Xe=z):Mm(n)}}function Mm(n){for(;Xe!==null;){var u=Xe;if((u.flags&8772)!==0){var b=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:rr||fd(5,u);break;case 1:var O=u.stateNode;if(u.flags&4&&!rr)if(b===null)O.componentDidMount();else{var A=u.elementType===u.type?b.memoizedProps:Tn(u.type,b.memoizedProps);O.componentDidUpdate(A,b.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var z=u.updateQueue;z!==null&&Ut(u,z,O);break;case 3:var J=u.updateQueue;if(J!==null){if(b=null,u.child!==null)switch(u.child.tag){case 5:b=u.child.stateNode;break;case 1:b=u.child.stateNode}Ut(u,J,b)}break;case 5:var ce=u.stateNode;if(b===null&&u.flags&4){b=ce;var ge=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":ge.autoFocus&&b.focus();break;case"img":ge.src&&(b.src=ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Pe=u.alternate;if(Pe!==null){var Re=Pe.memoizedState;if(Re!==null){var De=Re.dehydrated;De!==null&&Jn(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(h(163))}rr||u.flags&512&&Ff(u)}catch(Ae){Jt(u,u.return,Ae)}}if(u===n){Xe=null;break}if(b=u.sibling,b!==null){b.return=u.return,Xe=b;break}Xe=u.return}}function Am(n){for(;Xe!==null;){var u=Xe;if(u===n){Xe=null;break}var b=u.sibling;if(b!==null){b.return=u.return,Xe=b;break}Xe=u.return}}function Rm(n){for(;Xe!==null;){var u=Xe;try{switch(u.tag){case 0:case 11:case 15:var b=u.return;try{fd(4,u)}catch(ge){Jt(u,b,ge)}break;case 1:var O=u.stateNode;if(typeof O.componentDidMount=="function"){var A=u.return;try{O.componentDidMount()}catch(ge){Jt(u,A,ge)}}var z=u.return;try{Ff(u)}catch(ge){Jt(u,z,ge)}break;case 5:var J=u.return;try{Ff(u)}catch(ge){Jt(u,J,ge)}}}catch(ge){Jt(u,u.return,ge)}if(u===n){Xe=null;break}var ce=u.sibling;if(ce!==null){ce.return=u.return,Xe=ce;break}Xe=u.return}}var fw=Math.ceil,gd=w.ReactCurrentDispatcher,zf=w.ReactCurrentOwner,Jr=w.ReactCurrentBatchConfig,_t=0,Rn=null,yn=null,Kn=0,Br=0,El=hi(0),Pn=0,Ku=null,fo=0,pd=0,Uf=0,$u=null,kr=null,Vf=0,jl=1/0,ks=null,md=!1,Gf=null,xa=null,vd=!1,wa=null,yd=0,Qu=0,Hf=null,xd=-1,wd=0;function vr(){return(_t&6)!==0?Wt():xd!==-1?xd:xd=Wt()}function _a(n){return(n.mode&1)===0?1:(_t&2)!==0&&Kn!==0?Kn&-Kn:Fu.transition!==null?(wd===0&&(wd=lu()),wd):(n=wt,n!==0||(n=window.event,n=n===void 0?16:Ah(n.type)),n)}function xi(n,u,b,O){if(50<Qu)throw Qu=0,Hf=null,Error(h(185));za(n,b,O),((_t&2)===0||n!==Rn)&&(n===Rn&&((_t&2)===0&&(pd|=b),Pn===4&&ba(n,Kn)),Tr(n,O),b===1&&_t===0&&(u.mode&1)===0&&(jl=Wt()+500,ta&&Fi()))}function Tr(n,u){var b=n.callbackNode;jh(n,u);var O=Zi(n,n===Rn?Kn:0);if(O===0)b!==null&&Ph(b),n.callbackNode=null,n.callbackPriority=0;else if(u=O&-O,n.callbackPriority!==u){if(b!=null&&Ph(b),u===1)n.tag===0?di(Fm.bind(null,n)):ro(Fm.bind(null,n)),Kh(function(){(_t&6)===0&&Fi()}),b=null;else{switch(Ua(O)){case 1:b=Ji;break;case 4:b=Mo;break;case 16:b=Fs;break;case 536870912:b=Ao;break;default:b=Fs}b=Wm(b,Dm.bind(null,n))}n.callbackPriority=u,n.callbackNode=b}}function Dm(n,u){if(xd=-1,wd=0,(_t&6)!==0)throw Error(h(327));var b=n.callbackNode;if(Ol()&&n.callbackNode!==b)return null;var O=Zi(n,n===Rn?Kn:0);if(O===0)return null;if((O&30)!==0||(O&n.expiredLanes)!==0||u)u=_d(n,O);else{u=O;var A=_t;_t|=2;var z=Bm();(Rn!==n||Kn!==u)&&(ks=null,jl=Wt()+500,po(n,u));do try{mw();break}catch(ce){Im(n,ce)}while(!0);fl(),gd.current=z,_t=A,yn!==null?u=0:(Rn=null,Kn=0,u=Pn)}if(u!==0){if(u===2&&(A=Is(n),A!==0&&(O=A,u=Wf(n,A))),u===1)throw b=Ku,po(n,0),ba(n,O),Tr(n,Wt()),b;if(u===6)ba(n,O);else{if(A=n.current.alternate,(O&30)===0&&!gw(A)&&(u=_d(n,O),u===2&&(z=Is(n),z!==0&&(O=z,u=Wf(n,z))),u===1))throw b=Ku,po(n,0),ba(n,O),Tr(n,Wt()),b;switch(n.finishedWork=A,n.finishedLanes=O,u){case 0:case 1:throw Error(h(345));case 2:mo(n,kr,ks);break;case 3:if(ba(n,O),(O&130023424)===O&&(u=Vf+500-Wt(),10<u)){if(Zi(n,0)!==0)break;if(A=n.suspendedLanes,(A&O)!==O){vr(),n.pingedLanes|=n.suspendedLanes&A;break}n.timeoutHandle=cr(mo.bind(null,n,kr,ks),u);break}mo(n,kr,ks);break;case 4:if(ba(n,O),(O&4194240)===O)break;for(u=n.eventTimes,A=-1;0<O;){var J=31-ft(O);z=1<<J,J=u[J],J>A&&(A=J),O&=~z}if(O=A,O=Wt()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*fw(O/1960))-O,10<O){n.timeoutHandle=cr(mo.bind(null,n,kr,ks),O);break}mo(n,kr,ks);break;case 5:mo(n,kr,ks);break;default:throw Error(h(329))}}}return Tr(n,Wt()),n.callbackNode===b?Dm.bind(null,n):null}function Wf(n,u){var b=$u;return n.current.memoizedState.isDehydrated&&(po(n,u).flags|=256),n=_d(n,u),n!==2&&(u=kr,kr=b,u!==null&&Xf(u)),n}function Xf(n){kr===null?kr=n:kr.push.apply(kr,n)}function gw(n){for(var u=n;;){if(u.flags&16384){var b=u.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var O=0;O<b.length;O++){var A=b[O],z=A.getSnapshot;A=A.value;try{if(!er(z(),A))return!1}catch{return!1}}}if(b=u.child,u.subtreeFlags&16384&&b!==null)b.return=u,u=b;else{if(u===n)break;for(;u.sibling===null;){if(u.return===null||u.return===n)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ba(n,u){for(u&=~Uf,u&=~pd,n.suspendedLanes|=u,n.pingedLanes&=~u,n=n.expirationTimes;0<u;){var b=31-ft(u),O=1<<b;n[b]=-1,u&=~O}}function Fm(n){if((_t&6)!==0)throw Error(h(327));Ol();var u=Zi(n,0);if((u&1)===0)return Tr(n,Wt()),null;var b=_d(n,u);if(n.tag!==0&&b===2){var O=Is(n);O!==0&&(u=O,b=Wf(n,O))}if(b===1)throw b=Ku,po(n,0),ba(n,u),Tr(n,Wt()),b;if(b===6)throw Error(h(345));return n.finishedWork=n.current.alternate,n.finishedLanes=u,mo(n,kr,ks),Tr(n,Wt()),null}function Yf(n,u){var b=_t;_t|=1;try{return n(u)}finally{_t=b,_t===0&&(jl=Wt()+500,ta&&Fi())}}function go(n){wa!==null&&wa.tag===0&&(_t&6)===0&&Ol();var u=_t;_t|=1;var b=Jr.transition,O=wt;try{if(Jr.transition=null,wt=1,n)return n()}finally{wt=O,Jr.transition=b,_t=u,(_t&6)===0&&Fi()}}function qf(){Br=El.current,jt(El)}function po(n,u){n.finishedWork=null,n.finishedLanes=0;var b=n.timeoutHandle;if(b!==-1&&(n.timeoutHandle=-1,Mu(b)),yn!==null)for(b=yn.return;b!==null;){var O=b;switch(vn(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&ea();break;case 3:Bt(),jt(jn),jt(kn),Nn();break;case 5:gi(O);break;case 4:Bt();break;case 13:jt(Ot);break;case 19:jt(Ot);break;case 10:gl(O.type._context);break;case 22:case 23:qf()}b=b.return}if(Rn=n,yn=n=Sa(n.current,null),Kn=Br=u,Pn=0,Ku=null,Uf=pd=fo=0,kr=$u=null,Yr!==null){for(u=0;u<Yr.length;u++)if(b=Yr[u],O=b.interleaved,O!==null){b.interleaved=null;var A=O.next,z=b.pending;if(z!==null){var J=z.next;z.next=A,O.next=J}b.pending=O}Yr=null}return n}function Im(n,u){do{var b=yn;try{if(fl(),ua.current=ga,Ir){for(var O=kt.memoizedState;O!==null;){var A=O.queue;A!==null&&(A.pending=null),O=O.next}Ir=!1}if(Xn=0,$t=Vt=kt=null,Vi=!1,Cr=0,zf.current=null,b===null||b.return===null){Pn=1,Ku=u,yn=null;break}e:{var z=n,J=b.return,ce=b,ge=u;if(u=Kn,ce.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Pe=ge,Re=ce,De=Re.tag;if((Re.mode&1)===0&&(De===0||De===11||De===15)){var Ae=Re.alternate;Ae?(Re.updateQueue=Ae.updateQueue,Re.memoizedState=Ae.memoizedState,Re.lanes=Ae.lanes):(Re.updateQueue=null,Re.memoizedState=null)}var Ge=j(J);if(Ge!==null){Ge.flags&=-257,N(Ge,J,ce,z,u),Ge.mode&1&&y(z,Pe,u),u=Ge,ge=Pe;var Ye=u.updateQueue;if(Ye===null){var qe=new Set;qe.add(ge),u.updateQueue=qe}else Ye.add(ge);break e}else{if((u&1)===0){y(z,Pe,u),Kf();break e}ge=Error(h(426))}}else if(St&&ce.mode&1){var ln=j(J);if(ln!==null){(ln.flags&65536)===0&&(ln.flags|=256),N(ln,J,ce,z,u),so(Cs(ge,ce));break e}}z=ge=Cs(ge,ce),Pn!==4&&(Pn=2),$u===null?$u=[z]:$u.push(z),z=J;do{switch(z.tag){case 3:z.flags|=65536,u&=-u,z.lanes|=u;var be=hd(z,ge,u);uo(z,be);break e;case 1:ce=ge;var me=z.type,ke=z.stateNode;if((z.flags&128)===0&&(typeof me.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(xa===null||!xa.has(ke)))){z.flags|=65536,u&=-u,z.lanes|=u;var Be=p(z,ce,u);uo(z,Be);break e}}z=z.return}while(z!==null)}Um(b)}catch(Ke){u=Ke,yn===b&&b!==null&&(yn=b=b.return);continue}break}while(!0)}function Bm(){var n=gd.current;return gd.current=ga,n===null?ga:n}function Kf(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),Rn===null||(fo&268435455)===0&&(pd&268435455)===0||ba(Rn,Kn)}function _d(n,u){var b=_t;_t|=2;var O=Bm();(Rn!==n||Kn!==u)&&(ks=null,po(n,u));do try{pw();break}catch(A){Im(n,A)}while(!0);if(fl(),_t=b,gd.current=O,yn!==null)throw Error(h(261));return Rn=null,Kn=0,Pn}function pw(){for(;yn!==null;)zm(yn)}function mw(){for(;yn!==null&&!Sf();)zm(yn)}function zm(n){var u=Hm(n.alternate,n,Br);n.memoizedProps=n.pendingProps,u===null?Um(n):yn=u,zf.current=null}function Um(n){var u=n;do{var b=u.alternate;if(n=u.return,(u.flags&32768)===0){if(b=lw(b,u,Br),b!==null){yn=b;return}}else{if(b=uw(b,u),b!==null){b.flags&=32767,yn=b;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Pn=6,yn=null;return}}if(u=u.sibling,u!==null){yn=u;return}yn=u=n}while(u!==null);Pn===0&&(Pn=5)}function mo(n,u,b){var O=wt,A=Jr.transition;try{Jr.transition=null,wt=1,vw(n,u,b,O)}finally{Jr.transition=A,wt=O}return null}function vw(n,u,b,O){do Ol();while(wa!==null);if((_t&6)!==0)throw Error(h(327));b=n.finishedWork;var A=n.finishedLanes;if(b===null)return null;if(n.finishedWork=null,n.finishedLanes=0,b===n.current)throw Error(h(177));n.callbackNode=null,n.callbackPriority=0;var z=b.lanes|b.childLanes;if(Tf(n,z),n===Rn&&(yn=Rn=null,Kn=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||vd||(vd=!0,Wm(Fs,function(){return Ol(),null})),z=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||z){z=Jr.transition,Jr.transition=null;var J=wt;wt=1;var ce=_t;_t|=4,zf.current=null,hw(n,b),Nm(b,n),Ka(Nu),zo=!!Ou,Nu=Ou=null,n.current=b,dw(b),Cf(),_t=ce,wt=J,Jr.transition=z}else n.current=b;if(vd&&(vd=!1,wa=n,yd=A),z=n.pendingLanes,z===0&&(xa=null),Lt(b.stateNode),Tr(n,Wt()),u!==null)for(O=n.onRecoverableError,b=0;b<u.length;b++)A=u[b],O(A.value,{componentStack:A.stack,digest:A.digest});if(md)throw md=!1,n=Gf,Gf=null,n;return(yd&1)!==0&&n.tag!==0&&Ol(),z=n.pendingLanes,(z&1)!==0?n===Hf?Qu++:(Qu=0,Hf=n):Qu=0,Fi(),null}function Ol(){if(wa!==null){var n=Ua(yd),u=Jr.transition,b=wt;try{if(Jr.transition=null,wt=16>n?16:n,wa===null)var O=!1;else{if(n=wa,wa=null,yd=0,(_t&6)!==0)throw Error(h(331));var A=_t;for(_t|=4,Xe=n.current;Xe!==null;){var z=Xe,J=z.child;if((Xe.flags&16)!==0){var ce=z.deletions;if(ce!==null){for(var ge=0;ge<ce.length;ge++){var Pe=ce[ge];for(Xe=Pe;Xe!==null;){var Re=Xe;switch(Re.tag){case 0:case 11:case 15:qu(8,Re,z)}var De=Re.child;if(De!==null)De.return=Re,Xe=De;else for(;Xe!==null;){Re=Xe;var Ae=Re.sibling,Ge=Re.return;if(Tm(Re),Re===Pe){Xe=null;break}if(Ae!==null){Ae.return=Ge,Xe=Ae;break}Xe=Ge}}}var Ye=z.alternate;if(Ye!==null){var qe=Ye.child;if(qe!==null){Ye.child=null;do{var ln=qe.sibling;qe.sibling=null,qe=ln}while(qe!==null)}}Xe=z}}if((z.subtreeFlags&2064)!==0&&J!==null)J.return=z,Xe=J;else e:for(;Xe!==null;){if(z=Xe,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:qu(9,z,z.return)}var be=z.sibling;if(be!==null){be.return=z.return,Xe=be;break e}Xe=z.return}}var me=n.current;for(Xe=me;Xe!==null;){J=Xe;var ke=J.child;if((J.subtreeFlags&2064)!==0&&ke!==null)ke.return=J,Xe=ke;else e:for(J=me;Xe!==null;){if(ce=Xe,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:fd(9,ce)}}catch(Ke){Jt(ce,ce.return,Ke)}if(ce===J){Xe=null;break e}var Be=ce.sibling;if(Be!==null){Be.return=ce.return,Xe=Be;break e}Xe=ce.return}}if(_t=A,Fi(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(ii,n)}catch{}O=!0}return O}finally{wt=b,Jr.transition=u}}return!1}function Vm(n,u,b){u=Cs(b,u),u=hd(n,u,1),n=$r(n,u,1),u=vr(),n!==null&&(za(n,1,u),Tr(n,u))}function Jt(n,u,b){if(n.tag===3)Vm(n,n,b);else for(;u!==null;){if(u.tag===3){Vm(u,n,b);break}else if(u.tag===1){var O=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(xa===null||!xa.has(O))){n=Cs(b,n),n=p(u,n,1),u=$r(u,n,1),n=vr(),u!==null&&(za(u,1,n),Tr(u,n));break}}u=u.return}}function yw(n,u,b){var O=n.pingCache;O!==null&&O.delete(u),u=vr(),n.pingedLanes|=n.suspendedLanes&b,Rn===n&&(Kn&b)===b&&(Pn===4||Pn===3&&(Kn&130023424)===Kn&&500>Wt()-Vf?po(n,0):Uf|=b),Tr(n,u)}function Gm(n,u){u===0&&((n.mode&1)===0?u=1:(u=si,si<<=1,(si&130023424)===0&&(si=4194304)));var b=vr();n=pr(n,u),n!==null&&(za(n,u,b),Tr(n,b))}function xw(n){var u=n.memoizedState,b=0;u!==null&&(b=u.retryLane),Gm(n,b)}function ww(n,u){var b=0;switch(n.tag){case 13:var O=n.stateNode,A=n.memoizedState;A!==null&&(b=A.retryLane);break;case 19:O=n.stateNode;break;default:throw Error(h(314))}O!==null&&O.delete(u),Gm(n,b)}var Hm;Hm=function(n,u,b){if(n!==null)if(n.memoizedProps!==u.pendingProps||jn.current)G=!0;else{if((n.lanes&b)===0&&(u.flags&128)===0)return G=!1,Af(n,u,b);G=(n.flags&131072)!==0}else G=!1,St&&(u.flags&1048576)!==0&&ed(u,Bi,u.index);switch(u.lanes=0,u.tag){case 2:var O=u.type;mt(n,u),n=u.pendingProps;var A=ps(u,kn.current);fi(u,b),A=ca(null,u,O,n,A,b);var z=ha();return u.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,On(O)?(z=!0,ms(u)):z=!1,u.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,lo(u),A.updater=ma,u.stateNode=A,A._reactInternals=u,kl(u,O,n,b),u=Ct(null,u,O,!0,z,b)):(u.tag=0,St&&z&&na(u),re(null,u,A,b),u=u.child),u;case 16:O=u.elementType;e:{switch(mt(n,u),n=u.pendingProps,A=O._init,O=A(O._payload),u.type=O,A=u.tag=bw(O),n=Tn(O,n),A){case 0:u=Ue(null,u,O,n,b);break e;case 1:u=Nt(null,u,O,n,b);break e;case 11:u=xe(null,u,O,n,b);break e;case 14:u=Ee(null,u,O,Tn(O.type,n),b);break e}throw Error(h(306,O,""))}return u;case 0:return O=u.type,A=u.pendingProps,A=u.elementType===O?A:Tn(O,A),Ue(n,u,O,A,b);case 1:return O=u.type,A=u.pendingProps,A=u.elementType===O?A:Tn(O,A),Nt(n,u,O,A,b);case 3:e:{if(Yn(u),n===null)throw Error(h(387));O=u.pendingProps,z=u.memoizedState,A=z.element,ml(n,u),aa(u,O,null,b);var J=u.memoizedState;if(O=J.element,z.isDehydrated)if(z={element:O,isDehydrated:!1,cache:J.cache,pendingSuspenseBoundaries:J.pendingSuspenseBoundaries,transitions:J.transitions},u.updateQueue.baseState=z,u.memoizedState=z,u.flags&256){A=Cs(Error(h(423)),u),u=Qr(n,u,O,b,A);break e}else if(O!==A){A=Cs(Error(h(424)),u),u=Qr(n,u,O,b,A);break e}else for(ze=Gr(u.stateNode.containerInfo.firstChild),dr=u,St=!0,fr=null,b=Sr(u,null,O,b),u.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(ws(),O===A){u=An(n,u,b);break e}re(n,u,O,b)}u=u.child}return u;case 5:return oa(u),n===null&&ra(u),O=u.type,A=u.pendingProps,z=n!==null?n.memoizedProps:null,J=A.children,Lu(O,A)?J=null:z!==null&&Lu(O,z)&&(u.flags|=32),it(n,u),re(n,u,J,b),u.child;case 6:return n===null&&ra(u),null;case 13:return Ne(n,u,b);case 4:return Ui(u,u.stateNode.containerInfo),O=u.pendingProps,n===null?u.child=_s(u,null,O,b):re(n,u,O,b),u.child;case 11:return O=u.type,A=u.pendingProps,A=u.elementType===O?A:Tn(O,A),xe(n,u,O,A,b);case 7:return re(n,u,u.pendingProps,b),u.child;case 8:return re(n,u,u.pendingProps.children,b),u.child;case 12:return re(n,u,u.pendingProps.children,b),u.child;case 10:e:{if(O=u.type._context,A=u.pendingProps,z=u.memoizedProps,J=A.value,Tt(ao,O._currentValue),O._currentValue=J,z!==null)if(er(z.value,J)){if(z.children===A.children&&!jn.current){u=An(n,u,b);break e}}else for(z=u.child,z!==null&&(z.return=u);z!==null;){var ce=z.dependencies;if(ce!==null){J=z.child;for(var ge=ce.firstContext;ge!==null;){if(ge.context===O){if(z.tag===1){ge=Kr(-1,b&-b),ge.tag=2;var Pe=z.updateQueue;if(Pe!==null){Pe=Pe.shared;var Re=Pe.pending;Re===null?ge.next=ge:(ge.next=Re.next,Re.next=ge),Pe.pending=ge}}z.lanes|=b,ge=z.alternate,ge!==null&&(ge.lanes|=b),pl(z.return,b,u),ce.lanes|=b;break}ge=ge.next}}else if(z.tag===10)J=z.type===u.type?null:z.child;else if(z.tag===18){if(J=z.return,J===null)throw Error(h(341));J.lanes|=b,ce=J.alternate,ce!==null&&(ce.lanes|=b),pl(J,b,u),J=z.sibling}else J=z.child;if(J!==null)J.return=z;else for(J=z;J!==null;){if(J===u){J=null;break}if(z=J.sibling,z!==null){z.return=J.return,J=z;break}J=J.return}z=J}re(n,u,A.children,b),u=u.child}return u;case 9:return A=u.type,O=u.pendingProps.children,fi(u,b),A=Wn(A),O=O(A),u.flags|=1,re(n,u,O,b),u.child;case 14:return O=u.type,A=Tn(O,u.pendingProps),A=Tn(O.type,A),Ee(n,u,O,A,b);case 15:return Fe(n,u,u.type,u.pendingProps,b);case 17:return O=u.type,A=u.pendingProps,A=u.elementType===O?A:Tn(O,A),mt(n,u),u.tag=1,On(O)?(n=!0,ms(u)):n=!1,fi(u,b),cd(u,O,A),kl(u,O,A,b),Ct(null,u,O,!0,n,b);case 19:return on(n,u,b);case 22:return We(n,u,b)}throw Error(h(156,u.tag))};function Wm(n,u){return Th(n,u)}function _w(n,u,b,O){this.tag=n,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(n,u,b,O){return new _w(n,u,b,O)}function $f(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bw(n){if(typeof n=="function")return $f(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Q)return 11;if(n===ie)return 14}return 2}function Sa(n,u){var b=n.alternate;return b===null?(b=Zr(n.tag,u,n.key,n.mode),b.elementType=n.elementType,b.type=n.type,b.stateNode=n.stateNode,b.alternate=n,n.alternate=b):(b.pendingProps=u,b.type=n.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=n.flags&14680064,b.childLanes=n.childLanes,b.lanes=n.lanes,b.child=n.child,b.memoizedProps=n.memoizedProps,b.memoizedState=n.memoizedState,b.updateQueue=n.updateQueue,u=n.dependencies,b.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},b.sibling=n.sibling,b.index=n.index,b.ref=n.ref,b}function bd(n,u,b,O,A,z){var J=2;if(O=n,typeof n=="function")$f(n)&&(J=1);else if(typeof n=="string")J=5;else e:switch(n){case M:return vo(b.children,A,z,u);case L:J=8,A|=8;break;case B:return n=Zr(12,b,u,A|2),n.elementType=B,n.lanes=z,n;case ee:return n=Zr(13,b,u,A),n.elementType=ee,n.lanes=z,n;case se:return n=Zr(19,b,u,A),n.elementType=se,n.lanes=z,n;case U:return Sd(b,A,z,u);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:J=10;break e;case H:J=9;break e;case Q:J=11;break e;case ie:J=14;break e;case ue:J=16,O=null;break e}throw Error(h(130,n==null?n:typeof n,""))}return u=Zr(J,b,u,A),u.elementType=n,u.type=O,u.lanes=z,u}function vo(n,u,b,O){return n=Zr(7,n,O,u),n.lanes=b,n}function Sd(n,u,b,O){return n=Zr(22,n,O,u),n.elementType=U,n.lanes=b,n.stateNode={isHidden:!1},n}function Qf(n,u,b){return n=Zr(6,n,null,u),n.lanes=b,n}function Jf(n,u,b){return u=Zr(4,n.children!==null?n.children:[],n.key,u),u.lanes=b,u.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},u}function Sw(n,u,b,O,A){this.tag=u,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sr(0),this.expirationTimes=sr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sr(0),this.identifierPrefix=O,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function Zf(n,u,b,O,A,z,J,ce,ge){return n=new Sw(n,u,b,ce,ge),u===1?(u=1,z===!0&&(u|=8)):u=0,z=Zr(3,null,null,u),n.current=z,z.stateNode=n,z.memoizedState={element:O,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},lo(z),n}function Cw(n,u,b){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:O==null?null:""+O,children:n,containerInfo:u,implementation:b}}function Xm(n){if(!n)return Wr;n=n._reactInternals;e:{if(Qi(n)!==n||n.tag!==1)throw Error(h(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(On(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(h(171))}if(n.tag===1){var b=n.type;if(On(b))return ll(n,b,u)}return u}function Ym(n,u,b,O,A,z,J,ce,ge){return n=Zf(b,O,!0,n,A,z,J,ce,ge),n.context=Xm(null),b=n.current,O=vr(),A=_a(b),z=Kr(O,A),z.callback=u??null,$r(b,z,A),n.current.lanes=A,za(n,A,O),Tr(n,O),n}function Cd(n,u,b,O){var A=u.current,z=vr(),J=_a(A);return b=Xm(b),u.context===null?u.context=b:u.pendingContext=b,u=Kr(z,J),u.payload={element:n},O=O===void 0?null:O,O!==null&&(u.callback=O),n=$r(A,u,J),n!==null&&(xi(n,A,J,z),vl(n,A,J)),J}function kd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function qm(n,u){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var b=n.retryLane;n.retryLane=b!==0&&b<u?b:u}}function eg(n,u){qm(n,u),(n=n.alternate)&&qm(n,u)}function kw(){return null}var Km=typeof reportError=="function"?reportError:function(n){console.error(n)};function tg(n){this._internalRoot=n}Td.prototype.render=tg.prototype.render=function(n){var u=this._internalRoot;if(u===null)throw Error(h(409));Cd(n,u,null,null)},Td.prototype.unmount=tg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var u=n.containerInfo;go(function(){Cd(null,n,null,null)}),u[Hr]=null}};function Td(n){this._internalRoot=n}Td.prototype.unstable_scheduleHydration=function(n){if(n){var u=Nh();n={blockedOn:null,target:n,priority:u};for(var b=0;b<Vr.length&&u!==0&&u<Vr[b].priority;b++);Vr.splice(b,0,n),b===0&&Fo(n)}};function ng(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Pd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $m(){}function Tw(n,u,b,O,A){if(A){if(typeof O=="function"){var z=O;O=function(){var Pe=kd(J);z.call(Pe)}}var J=Ym(u,O,n,0,null,!1,!1,"",$m);return n._reactRootContainer=J,n[Hr]=J.current,cs(n.nodeType===8?n.parentNode:n),go(),J}for(;A=n.lastChild;)n.removeChild(A);if(typeof O=="function"){var ce=O;O=function(){var Pe=kd(ge);ce.call(Pe)}}var ge=Zf(n,0,!1,null,null,!1,!1,"",$m);return n._reactRootContainer=ge,n[Hr]=ge.current,cs(n.nodeType===8?n.parentNode:n),go(function(){Cd(u,ge,b,O)}),ge}function Ed(n,u,b,O,A){var z=b._reactRootContainer;if(z){var J=z;if(typeof A=="function"){var ce=A;A=function(){var ge=kd(J);ce.call(ge)}}Cd(u,J,n,A)}else J=Tw(b,u,n,A,O);return kd(J)}Bs=function(n){switch(n.tag){case 3:var u=n.stateNode;if(u.current.memoizedState.isDehydrated){var b=fn(u.pendingLanes);b!==0&&(uu(u,b|1),Tr(u,Wt()),(_t&6)===0&&(jl=Wt()+500,Fi()))}break;case 13:go(function(){var O=pr(n,1);if(O!==null){var A=vr();xi(O,n,1,A)}}),eg(n,1)}},zs=function(n){if(n.tag===13){var u=pr(n,134217728);if(u!==null){var b=vr();xi(u,n,134217728,b)}eg(n,134217728)}},Oh=function(n){if(n.tag===13){var u=_a(n),b=pr(n,u);if(b!==null){var O=vr();xi(b,n,u,O)}eg(n,u)}},Nh=function(){return wt},Ro=function(n,u){var b=wt;try{return wt=n,u()}finally{wt=b}},nu=function(n,u,b){switch(u){case"input":if(Ce(n,b),u=b.name,b.type==="radio"&&u!=null){for(b=n;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<b.length;u++){var O=b[u];if(O!==n&&O.form===n.form){var A=mn(O);if(!A)throw Error(h(90));ve(O),Ce(O,A)}}}break;case"textarea":_e(n,b);break;case"select":u=b.value,u!=null&&je(n,!!b.multiple,u,!1)}},wh=Yf,jo=go;var Pw={usingClientEntryPoint:!1,Events:[no,rn,mn,ru,iu,Yf]},Ju={findFiberByHostInstance:Ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ew={bundleType:Ju.bundleType,version:Ju.version,rendererPackageName:Ju.rendererPackageName,rendererConfig:Ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ch(n),n===null?null:n.stateNode},findFiberByHostInstance:Ju.findFiberByHostInstance||kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{ii=jd.inject(Ew),_n=jd}catch{}}return Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pw,Pr.createPortal=function(n,u){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ng(u))throw Error(h(200));return Cw(n,u,null,b)},Pr.createRoot=function(n,u){if(!ng(n))throw Error(h(299));var b=!1,O="",A=Km;return u!=null&&(u.unstable_strictMode===!0&&(b=!0),u.identifierPrefix!==void 0&&(O=u.identifierPrefix),u.onRecoverableError!==void 0&&(A=u.onRecoverableError)),u=Zf(n,1,!1,null,null,b,!1,O,A),n[Hr]=u.current,cs(n.nodeType===8?n.parentNode:n),new tg(u)},Pr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var u=n._reactInternals;if(u===void 0)throw typeof n.render=="function"?Error(h(188)):(n=Object.keys(n).join(","),Error(h(268,n)));return n=Ch(u),n=n===null?null:n.stateNode,n},Pr.flushSync=function(n){return go(n)},Pr.hydrate=function(n,u,b){if(!Pd(u))throw Error(h(200));return Ed(null,n,u,!0,b)},Pr.hydrateRoot=function(n,u,b){if(!ng(n))throw Error(h(405));var O=b!=null&&b.hydratedSources||null,A=!1,z="",J=Km;if(b!=null&&(b.unstable_strictMode===!0&&(A=!0),b.identifierPrefix!==void 0&&(z=b.identifierPrefix),b.onRecoverableError!==void 0&&(J=b.onRecoverableError)),u=Ym(u,null,n,1,b??null,A,!1,z,J),n[Hr]=u.current,cs(n),O)for(n=0;n<O.length;n++)b=O[n],A=b._getVersion,A=A(b._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[b,A]:u.mutableSourceEagerHydrationData.push(b,A);return new Td(u)},Pr.render=function(n,u,b){if(!Pd(u))throw Error(h(200));return Ed(null,n,u,!1,b)},Pr.unmountComponentAtNode=function(n){if(!Pd(n))throw Error(h(40));return n._reactRootContainer?(go(function(){Ed(null,null,n,!1,function(){n._reactRootContainer=null,n[Hr]=null})}),!0):!1},Pr.unstable_batchedUpdates=Yf,Pr.unstable_renderSubtreeIntoContainer=function(n,u,b,O){if(!Pd(b))throw Error(h(200));if(n==null||n._reactInternals===void 0)throw Error(h(38));return Ed(n,u,b,!1,O)},Pr.version="18.3.1-next-f1338f8080-20240426",Pr}var s0;function R1(){if(s0)return sg.exports;s0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sg.exports=Fw(),sg.exports}var a0;function Iw(){if(a0)return Od;a0=1;var t=R1();return Od.createRoot=t.createRoot,Od.hydrateRoot=t.hydrateRoot,Od}var Bw=Iw();const zw=dh(Bw),at=t=>typeof t=="string",ec=()=>{let t,e;const h=new Promise((x,v)=>{t=x,e=v});return h.resolve=t,h.reject=e,h},o0=t=>t==null?"":""+t,Uw=(t,e,h)=>{t.forEach(x=>{e[x]&&(h[x]=e[x])})},Vw=/###/g,l0=t=>t&&t.indexOf("###")>-1?t.replace(Vw,"."):t,u0=t=>!t||at(t),Xc=(t,e,h)=>{const x=at(e)?e.split("."):e;let v=0;for(;v<x.length-1;){if(u0(t))return{};const S=l0(x[v]);!t[S]&&h&&(t[S]=new h),Object.prototype.hasOwnProperty.call(t,S)?t=t[S]:t={},++v}return u0(t)?{}:{obj:t,k:l0(x[v])}},c0=(t,e,h)=>{const{obj:x,k:v}=Xc(t,e,Object);if(x!==void 0||e.length===1){x[v]=h;return}let S=e[e.length-1],_=e.slice(0,e.length-1),T=Xc(t,_,Object);for(;T.obj===void 0&&_.length;)S=`${_[_.length-1]}.${S}`,_=_.slice(0,_.length-1),T=Xc(t,_,Object),T?.obj&&typeof T.obj[`${T.k}.${S}`]<"u"&&(T.obj=void 0);T.obj[`${T.k}.${S}`]=h},Gw=(t,e,h,x)=>{const{obj:v,k:S}=Xc(t,e,Object);v[S]=v[S]||[],v[S].push(h)},Yd=(t,e)=>{const{obj:h,k:x}=Xc(t,e);if(h&&Object.prototype.hasOwnProperty.call(h,x))return h[x]},Hw=(t,e,h)=>{const x=Yd(t,h);return x!==void 0?x:Yd(e,h)},D1=(t,e,h)=>{for(const x in e)x!=="__proto__"&&x!=="constructor"&&(x in t?at(t[x])||t[x]instanceof String||at(e[x])||e[x]instanceof String?h&&(t[x]=e[x]):D1(t[x],e[x],h):t[x]=e[x]);return t},Nl=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ww={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Xw=t=>at(t)?t.replace(/[&<>"'\/]/g,e=>Ww[e]):t;class Yw{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const h=this.regExpMap.get(e);if(h!==void 0)return h;const x=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,x),this.regExpQueue.push(e),x}}const qw=[" ",",","?","!",";"],Kw=new Yw(20),$w=(t,e,h)=>{e=e||"",h=h||"";const x=qw.filter(_=>e.indexOf(_)<0&&h.indexOf(_)<0);if(x.length===0)return!0;const v=Kw.getRegExp(`(${x.map(_=>_==="?"?"\\?":_).join("|")})`);let S=!v.test(t);if(!S){const _=t.indexOf(h);_>0&&!v.test(t.substring(0,_))&&(S=!0)}return S},Wg=(t,e,h=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const x=e.split(h);let v=t;for(let S=0;S<x.length;){if(!v||typeof v!="object")return;let _,T="";for(let E=S;E<x.length;++E)if(E!==S&&(T+=h),T+=x[E],_=v[T],_!==void 0){if(["string","number","boolean"].indexOf(typeof _)>-1&&E<x.length-1)continue;S+=E-S+1;break}v=_}return v},Jc=t=>t?.replace("_","-"),Qw={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class qd{constructor(e,h={}){this.init(e,h)}init(e,h={}){this.prefix=h.prefix||"i18next:",this.logger=e||Qw,this.options=h,this.debug=h.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,h,x,v){return v&&!this.debug?null:(at(e[0])&&(e[0]=`${x}${this.prefix} ${e[0]}`),this.logger[h](e))}create(e){return new qd(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new qd(this.logger,e)}}var Yi=new qd;class uf{constructor(){this.observers={}}on(e,h){return e.split(" ").forEach(x=>{this.observers[x]||(this.observers[x]=new Map);const v=this.observers[x].get(h)||0;this.observers[x].set(h,v+1)}),this}off(e,h){if(this.observers[e]){if(!h){delete this.observers[e];return}this.observers[e].delete(h)}}emit(e,...h){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([v,S])=>{for(let _=0;_<S;_++)v(...h)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([v,S])=>{for(let _=0;_<S;_++)v.apply(v,[e,...h])})}}class h0 extends uf{constructor(e,h={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=h,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const h=this.options.ns.indexOf(e);h>-1&&this.options.ns.splice(h,1)}getResource(e,h,x,v={}){const S=v.keySeparator!==void 0?v.keySeparator:this.options.keySeparator,_=v.ignoreJSONStructure!==void 0?v.ignoreJSONStructure:this.options.ignoreJSONStructure;let T;e.indexOf(".")>-1?T=e.split("."):(T=[e,h],x&&(Array.isArray(x)?T.push(...x):at(x)&&S?T.push(...x.split(S)):T.push(x)));const E=Yd(this.data,T);return!E&&!h&&!x&&e.indexOf(".")>-1&&(e=T[0],h=T[1],x=T.slice(2).join(".")),E||!_||!at(x)?E:Wg(this.data?.[e]?.[h],x,S)}addResource(e,h,x,v,S={silent:!1}){const _=S.keySeparator!==void 0?S.keySeparator:this.options.keySeparator;let T=[e,h];x&&(T=T.concat(_?x.split(_):x)),e.indexOf(".")>-1&&(T=e.split("."),v=h,h=T[1]),this.addNamespaces(h),c0(this.data,T,v),S.silent||this.emit("added",e,h,x,v)}addResources(e,h,x,v={silent:!1}){for(const S in x)(at(x[S])||Array.isArray(x[S]))&&this.addResource(e,h,S,x[S],{silent:!0});v.silent||this.emit("added",e,h,x)}addResourceBundle(e,h,x,v,S,_={silent:!1,skipCopy:!1}){let T=[e,h];e.indexOf(".")>-1&&(T=e.split("."),v=x,x=h,h=T[1]),this.addNamespaces(h);let E=Yd(this.data,T)||{};_.skipCopy||(x=JSON.parse(JSON.stringify(x))),v?D1(E,x,S):E={...E,...x},c0(this.data,T,E),_.silent||this.emit("added",e,h,x)}removeResourceBundle(e,h){this.hasResourceBundle(e,h)&&delete this.data[e][h],this.removeNamespaces(h),this.emit("removed",e,h)}hasResourceBundle(e,h){return this.getResource(e,h)!==void 0}getResourceBundle(e,h){return h||(h=this.options.defaultNS),this.getResource(e,h)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const h=this.getDataByLanguage(e);return!!(h&&Object.keys(h)||[]).find(v=>h[v]&&Object.keys(h[v]).length>0)}toJSON(){return this.data}}var F1={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,h,x,v){return t.forEach(S=>{e=this.processors[S]?.process(e,h,x,v)??e}),e}};const I1=Symbol("i18next/PATH_KEY");function Jw(){const t=[],e=Object.create(null);let h;return e.get=(x,v)=>(h?.revoke?.(),v===I1?t:(t.push(v),h=Proxy.revocable(x,e),h.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Xg(t,e){const{[I1]:h}=t(Jw());return h.join(e?.keySeparator??".")}const d0={},f0=t=>!at(t)&&typeof t!="boolean"&&typeof t!="number";class Kd extends uf{constructor(e,h={}){super(),Uw(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=h,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Yi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,h={interpolation:{}}){const x={...h};return e==null?!1:this.resolve(e,x)?.res!==void 0}extractFromKey(e,h){let x=h.nsSeparator!==void 0?h.nsSeparator:this.options.nsSeparator;x===void 0&&(x=":");const v=h.keySeparator!==void 0?h.keySeparator:this.options.keySeparator;let S=h.ns||this.options.defaultNS||[];const _=x&&e.indexOf(x)>-1,T=!this.options.userDefinedKeySeparator&&!h.keySeparator&&!this.options.userDefinedNsSeparator&&!h.nsSeparator&&!$w(e,x,v);if(_&&!T){const E=e.match(this.interpolator.nestingRegexp);if(E&&E.length>0)return{key:e,namespaces:at(S)?[S]:S};const d=e.split(x);(x!==v||x===v&&this.options.ns.indexOf(d[0])>-1)&&(S=d.shift()),e=d.join(v)}return{key:e,namespaces:at(S)?[S]:S}}translate(e,h,x){let v=typeof h=="object"?{...h}:h;if(typeof v!="object"&&this.options.overloadTranslationOptionHandler&&(v=this.options.overloadTranslationOptionHandler(arguments)),typeof v=="object"&&(v={...v}),v||(v={}),e==null)return"";typeof e=="function"&&(e=Xg(e,{...this.options,...v})),Array.isArray(e)||(e=[String(e)]);const S=v.returnDetails!==void 0?v.returnDetails:this.options.returnDetails,_=v.keySeparator!==void 0?v.keySeparator:this.options.keySeparator,{key:T,namespaces:E}=this.extractFromKey(e[e.length-1],v),d=E[E.length-1];let r=v.nsSeparator!==void 0?v.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const c=v.lng||this.language,l=v.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c?.toLowerCase()==="cimode")return l?S?{res:`${d}${r}${T}`,usedKey:T,exactUsedKey:T,usedLng:c,usedNS:d,usedParams:this.getUsedParamsDetails(v)}:`${d}${r}${T}`:S?{res:T,usedKey:T,exactUsedKey:T,usedLng:c,usedNS:d,usedParams:this.getUsedParamsDetails(v)}:T;const i=this.resolve(e,v);let s=i?.res;const o=i?.usedKey||T,a=i?.exactUsedKey||T,m=["[object Number]","[object Function]","[object RegExp]"],f=v.joinArrays!==void 0?v.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,w=v.count!==void 0&&!at(v.count),C=Kd.hasDefaultValue(v),P=w?this.pluralResolver.getSuffix(c,v.count,v):"",M=v.ordinal&&w?this.pluralResolver.getSuffix(c,v.count,{ordinal:!1}):"",L=w&&!v.ordinal&&v.count===0,B=L&&v[`defaultValue${this.options.pluralSeparator}zero`]||v[`defaultValue${P}`]||v[`defaultValue${M}`]||v.defaultValue;let D=s;g&&!s&&C&&(D=B);const H=f0(D),Q=Object.prototype.toString.apply(D);if(g&&D&&H&&m.indexOf(Q)<0&&!(at(f)&&Array.isArray(D))){if(!v.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(o,D,{...v,ns:E}):`key '${T} (${this.language})' returned an object instead of string.`;return S?(i.res=ee,i.usedParams=this.getUsedParamsDetails(v),i):ee}if(_){const ee=Array.isArray(D),se=ee?[]:{},ie=ee?a:o;for(const ue in D)if(Object.prototype.hasOwnProperty.call(D,ue)){const U=`${ie}${_}${ue}`;C&&!s?se[ue]=this.translate(U,{...v,defaultValue:f0(B)?B[ue]:void 0,joinArrays:!1,ns:E}):se[ue]=this.translate(U,{...v,joinArrays:!1,ns:E}),se[ue]===U&&(se[ue]=D[ue])}s=se}}else if(g&&at(f)&&Array.isArray(s))s=s.join(f),s&&(s=this.extendTranslation(s,e,v,x));else{let ee=!1,se=!1;!this.isValidLookup(s)&&C&&(ee=!0,s=B),this.isValidLookup(s)||(se=!0,s=T);const ue=(v.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&se?void 0:s,U=C&&B!==s&&this.options.updateMissing;if(se||ee||U){if(this.logger.log(U?"updateKey":"missingKey",c,d,T,U?B:s),_){const R=this.resolve(T,{...v,keySeparator:!1});R&&R.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let X=[];const Z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,v.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Z&&Z[0])for(let R=0;R<Z.length;R++)X.push(Z[R]);else this.options.saveMissingTo==="all"?X=this.languageUtils.toResolveHierarchy(v.lng||this.language):X.push(v.lng||this.language);const $=(R,V,W)=>{const q=C&&W!==s?W:ue;this.options.missingKeyHandler?this.options.missingKeyHandler(R,d,V,q,U,v):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(R,d,V,q,U,v),this.emit("missingKey",R,d,V,s)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?X.forEach(R=>{const V=this.pluralResolver.getSuffixes(R,v);L&&v[`defaultValue${this.options.pluralSeparator}zero`]&&V.indexOf(`${this.options.pluralSeparator}zero`)<0&&V.push(`${this.options.pluralSeparator}zero`),V.forEach(W=>{$([R],T+W,v[`defaultValue${W}`]||B)})}):$(X,T,B))}s=this.extendTranslation(s,e,v,i,x),se&&s===T&&this.options.appendNamespaceToMissingKey&&(s=`${d}${r}${T}`),(se||ee)&&this.options.parseMissingKeyHandler&&(s=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${r}${T}`:T,ee?s:void 0,v))}return S?(i.res=s,i.usedParams=this.getUsedParamsDetails(v),i):s}extendTranslation(e,h,x,v,S){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...x},x.lng||this.language||v.usedLng,v.usedNS,v.usedKey,{resolved:v});else if(!x.skipInterpolation){x.interpolation&&this.interpolator.init({...x,interpolation:{...this.options.interpolation,...x.interpolation}});const E=at(e)&&(x?.interpolation?.skipOnVariables!==void 0?x.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(E){const c=e.match(this.interpolator.nestingRegexp);d=c&&c.length}let r=x.replace&&!at(x.replace)?x.replace:x;if(this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),e=this.interpolator.interpolate(e,r,x.lng||this.language||v.usedLng,x),E){const c=e.match(this.interpolator.nestingRegexp),l=c&&c.length;d<l&&(x.nest=!1)}!x.lng&&v&&v.res&&(x.lng=this.language||v.usedLng),x.nest!==!1&&(e=this.interpolator.nest(e,(...c)=>S?.[0]===c[0]&&!x.context?(this.logger.warn(`It seems you are nesting recursively key: ${c[0]} in key: ${h[0]}`),null):this.translate(...c,h),x)),x.interpolation&&this.interpolator.reset()}const _=x.postProcess||this.options.postProcess,T=at(_)?[_]:_;return e!=null&&T?.length&&x.applyPostProcessor!==!1&&(e=F1.handle(T,e,h,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...v,usedParams:this.getUsedParamsDetails(x)},...x}:x,this)),e}resolve(e,h={}){let x,v,S,_,T;return at(e)&&(e=[e]),e.forEach(E=>{if(this.isValidLookup(x))return;const d=this.extractFromKey(E,h),r=d.key;v=r;let c=d.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const l=h.count!==void 0&&!at(h.count),i=l&&!h.ordinal&&h.count===0,s=h.context!==void 0&&(at(h.context)||typeof h.context=="number")&&h.context!=="",o=h.lngs?h.lngs:this.languageUtils.toResolveHierarchy(h.lng||this.language,h.fallbackLng);c.forEach(a=>{this.isValidLookup(x)||(T=a,!d0[`${o[0]}-${a}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(T)&&(d0[`${o[0]}-${a}`]=!0,this.logger.warn(`key "${v}" for languages "${o.join(", ")}" won't get resolved as namespace "${T}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),o.forEach(m=>{if(this.isValidLookup(x))return;_=m;const f=[r];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(f,r,m,a,h);else{let w;l&&(w=this.pluralResolver.getSuffix(m,h.count,h));const C=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(l&&(h.ordinal&&w.indexOf(P)===0&&f.push(r+w.replace(P,this.options.pluralSeparator)),f.push(r+w),i&&f.push(r+C)),s){const M=`${r}${this.options.contextSeparator||"_"}${h.context}`;f.push(M),l&&(h.ordinal&&w.indexOf(P)===0&&f.push(M+w.replace(P,this.options.pluralSeparator)),f.push(M+w),i&&f.push(M+C))}}let g;for(;g=f.pop();)this.isValidLookup(x)||(S=g,x=this.getResource(m,a,g,h))}))})}),{res:x,usedKey:v,exactUsedKey:S,usedLng:_,usedNS:T}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,h,x,v={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,h,x,v):this.resourceStore.getResource(e,h,x,v)}getUsedParamsDetails(e={}){const h=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],x=e.replace&&!at(e.replace);let v=x?e.replace:e;if(x&&typeof e.count<"u"&&(v.count=e.count),this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),!x){v={...v};for(const S of h)delete v[S]}return v}static hasDefaultValue(e){const h="defaultValue";for(const x in e)if(Object.prototype.hasOwnProperty.call(e,x)&&h===x.substring(0,h.length)&&e[x]!==void 0)return!0;return!1}}class g0{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Yi.create("languageUtils")}getScriptPartFromCode(e){if(e=Jc(e),!e||e.indexOf("-")<0)return null;const h=e.split("-");return h.length===2||(h.pop(),h[h.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(h.join("-"))}getLanguagePartFromCode(e){if(e=Jc(e),!e||e.indexOf("-")<0)return e;const h=e.split("-");return this.formatLanguageCode(h[0])}formatLanguageCode(e){if(at(e)&&e.indexOf("-")>-1){let h;try{h=Intl.getCanonicalLocales(e)[0]}catch{}return h&&this.options.lowerCaseLng&&(h=h.toLowerCase()),h||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let h;return e.forEach(x=>{if(h)return;const v=this.formatLanguageCode(x);(!this.options.supportedLngs||this.isSupportedCode(v))&&(h=v)}),!h&&this.options.supportedLngs&&e.forEach(x=>{if(h)return;const v=this.getScriptPartFromCode(x);if(this.isSupportedCode(v))return h=v;const S=this.getLanguagePartFromCode(x);if(this.isSupportedCode(S))return h=S;h=this.options.supportedLngs.find(_=>{if(_===S)return _;if(!(_.indexOf("-")<0&&S.indexOf("-")<0)&&(_.indexOf("-")>0&&S.indexOf("-")<0&&_.substring(0,_.indexOf("-"))===S||_.indexOf(S)===0&&S.length>1))return _})}),h||(h=this.getFallbackCodes(this.options.fallbackLng)[0]),h}getFallbackCodes(e,h){if(!e)return[];if(typeof e=="function"&&(e=e(h)),at(e)&&(e=[e]),Array.isArray(e))return e;if(!h)return e.default||[];let x=e[h];return x||(x=e[this.getScriptPartFromCode(h)]),x||(x=e[this.formatLanguageCode(h)]),x||(x=e[this.getLanguagePartFromCode(h)]),x||(x=e.default),x||[]}toResolveHierarchy(e,h){const x=this.getFallbackCodes((h===!1?[]:h)||this.options.fallbackLng||[],e),v=[],S=_=>{_&&(this.isSupportedCode(_)?v.push(_):this.logger.warn(`rejecting language code not found in supportedLngs: ${_}`))};return at(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&S(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&S(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&S(this.getLanguagePartFromCode(e))):at(e)&&S(this.formatLanguageCode(e)),x.forEach(_=>{v.indexOf(_)<0&&S(this.formatLanguageCode(_))}),v}}const p0={zero:0,one:1,two:2,few:3,many:4,other:5},m0={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Zw{constructor(e,h={}){this.languageUtils=e,this.options=h,this.logger=Yi.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,h){this.rules[e]=h}clearCache(){this.pluralRulesCache={}}getRule(e,h={}){const x=Jc(e==="dev"?"en":e),v=h.ordinal?"ordinal":"cardinal",S=JSON.stringify({cleanedCode:x,type:v});if(S in this.pluralRulesCache)return this.pluralRulesCache[S];let _;try{_=new Intl.PluralRules(x,{type:v})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),m0;if(!e.match(/-|_/))return m0;const E=this.languageUtils.getLanguagePartFromCode(e);_=this.getRule(E,h)}return this.pluralRulesCache[S]=_,_}needsPlural(e,h={}){let x=this.getRule(e,h);return x||(x=this.getRule("dev",h)),x?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,h,x={}){return this.getSuffixes(e,x).map(v=>`${h}${v}`)}getSuffixes(e,h={}){let x=this.getRule(e,h);return x||(x=this.getRule("dev",h)),x?x.resolvedOptions().pluralCategories.sort((v,S)=>p0[v]-p0[S]).map(v=>`${this.options.prepend}${h.ordinal?`ordinal${this.options.prepend}`:""}${v}`):[]}getSuffix(e,h,x={}){const v=this.getRule(e,x);return v?`${this.options.prepend}${x.ordinal?`ordinal${this.options.prepend}`:""}${v.select(h)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",h,x))}}const v0=(t,e,h,x=".",v=!0)=>{let S=Hw(t,e,h);return!S&&v&&at(h)&&(S=Wg(t,h,x),S===void 0&&(S=Wg(e,h,x))),S},lg=t=>t.replace(/\$/g,"$$$$");class e_{constructor(e={}){this.logger=Yi.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(h=>h),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:h,escapeValue:x,useRawValueToEscape:v,prefix:S,prefixEscaped:_,suffix:T,suffixEscaped:E,formatSeparator:d,unescapeSuffix:r,unescapePrefix:c,nestingPrefix:l,nestingPrefixEscaped:i,nestingSuffix:s,nestingSuffixEscaped:o,nestingOptionsSeparator:a,maxReplaces:m,alwaysFormat:f}=e.interpolation;this.escape=h!==void 0?h:Xw,this.escapeValue=x!==void 0?x:!0,this.useRawValueToEscape=v!==void 0?v:!1,this.prefix=S?Nl(S):_||"{{",this.suffix=T?Nl(T):E||"}}",this.formatSeparator=d||",",this.unescapePrefix=r?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":r||"",this.nestingPrefix=l?Nl(l):i||Nl("$t("),this.nestingSuffix=s?Nl(s):o||Nl(")"),this.nestingOptionsSeparator=a||",",this.maxReplaces=m||1e3,this.alwaysFormat=f!==void 0?f:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(h,x)=>h?.source===x?(h.lastIndex=0,h):new RegExp(x,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,h,x,v){let S,_,T;const E=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=i=>{if(i.indexOf(this.formatSeparator)<0){const m=v0(h,E,i,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,x,{...v,...h,interpolationkey:i}):m}const s=i.split(this.formatSeparator),o=s.shift().trim(),a=s.join(this.formatSeparator).trim();return this.format(v0(h,E,o,this.options.keySeparator,this.options.ignoreJSONStructure),a,x,{...v,...h,interpolationkey:o})};this.resetRegExp();const r=v?.missingInterpolationHandler||this.options.missingInterpolationHandler,c=v?.interpolation?.skipOnVariables!==void 0?v.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:i=>lg(i)},{regex:this.regexp,safeValue:i=>this.escapeValue?lg(this.escape(i)):lg(i)}].forEach(i=>{for(T=0;S=i.regex.exec(e);){const s=S[1].trim();if(_=d(s),_===void 0)if(typeof r=="function"){const a=r(e,S,v);_=at(a)?a:""}else if(v&&Object.prototype.hasOwnProperty.call(v,s))_="";else if(c){_=S[0];continue}else this.logger.warn(`missed to pass in variable ${s} for interpolating ${e}`),_="";else!at(_)&&!this.useRawValueToEscape&&(_=o0(_));const o=i.safeValue(_);if(e=e.replace(S[0],o),c?(i.regex.lastIndex+=_.length,i.regex.lastIndex-=S[0].length):i.regex.lastIndex=0,T++,T>=this.maxReplaces)break}}),e}nest(e,h,x={}){let v,S,_;const T=(E,d)=>{const r=this.nestingOptionsSeparator;if(E.indexOf(r)<0)return E;const c=E.split(new RegExp(`${r}[ ]*{`));let l=`{${c[1]}`;E=c[0],l=this.interpolate(l,_);const i=l.match(/'/g),s=l.match(/"/g);((i?.length??0)%2===0&&!s||s.length%2!==0)&&(l=l.replace(/'/g,'"'));try{_=JSON.parse(l),d&&(_={...d,..._})}catch(o){return this.logger.warn(`failed parsing options string in nesting for key ${E}`,o),`${E}${r}${l}`}return _.defaultValue&&_.defaultValue.indexOf(this.prefix)>-1&&delete _.defaultValue,E};for(;v=this.nestingRegexp.exec(e);){let E=[];_={...x},_=_.replace&&!at(_.replace)?_.replace:_,_.applyPostProcessor=!1,delete _.defaultValue;const d=/{.*}/.test(v[1])?v[1].lastIndexOf("}")+1:v[1].indexOf(this.formatSeparator);if(d!==-1&&(E=v[1].slice(d).split(this.formatSeparator).map(r=>r.trim()).filter(Boolean),v[1]=v[1].slice(0,d)),S=h(T.call(this,v[1].trim(),_),_),S&&v[0]===e&&!at(S))return S;at(S)||(S=o0(S)),S||(this.logger.warn(`missed to resolve ${v[1]} for nesting ${e}`),S=""),E.length&&(S=E.reduce((r,c)=>this.format(r,c,x.lng,{...x,interpolationkey:v[1].trim()}),S.trim())),e=e.replace(v[0],S),this.regexp.lastIndex=0}return e}}const t_=t=>{let e=t.toLowerCase().trim();const h={};if(t.indexOf("(")>-1){const x=t.split("(");e=x[0].toLowerCase().trim();const v=x[1].substring(0,x[1].length-1);e==="currency"&&v.indexOf(":")<0?h.currency||(h.currency=v.trim()):e==="relativetime"&&v.indexOf(":")<0?h.range||(h.range=v.trim()):v.split(";").forEach(_=>{if(_){const[T,...E]=_.split(":"),d=E.join(":").trim().replace(/^'+|'+$/g,""),r=T.trim();h[r]||(h[r]=d),d==="false"&&(h[r]=!1),d==="true"&&(h[r]=!0),isNaN(d)||(h[r]=parseInt(d,10))}})}return{formatName:e,formatOptions:h}},y0=t=>{const e={};return(h,x,v)=>{let S=v;v&&v.interpolationkey&&v.formatParams&&v.formatParams[v.interpolationkey]&&v[v.interpolationkey]&&(S={...S,[v.interpolationkey]:void 0});const _=x+JSON.stringify(S);let T=e[_];return T||(T=t(Jc(x),v),e[_]=T),T(h)}},n_=t=>(e,h,x)=>t(Jc(h),x)(e);class r_{constructor(e={}){this.logger=Yi.create("formatter"),this.options=e,this.init(e)}init(e,h={interpolation:{}}){this.formatSeparator=h.interpolation.formatSeparator||",";const x=h.cacheInBuiltFormats?y0:n_;this.formats={number:x((v,S)=>{const _=new Intl.NumberFormat(v,{...S});return T=>_.format(T)}),currency:x((v,S)=>{const _=new Intl.NumberFormat(v,{...S,style:"currency"});return T=>_.format(T)}),datetime:x((v,S)=>{const _=new Intl.DateTimeFormat(v,{...S});return T=>_.format(T)}),relativetime:x((v,S)=>{const _=new Intl.RelativeTimeFormat(v,{...S});return T=>_.format(T,S.range||"day")}),list:x((v,S)=>{const _=new Intl.ListFormat(v,{...S});return T=>_.format(T)})}}add(e,h){this.formats[e.toLowerCase().trim()]=h}addCached(e,h){this.formats[e.toLowerCase().trim()]=y0(h)}format(e,h,x,v={}){const S=h.split(this.formatSeparator);if(S.length>1&&S[0].indexOf("(")>1&&S[0].indexOf(")")<0&&S.find(T=>T.indexOf(")")>-1)){const T=S.findIndex(E=>E.indexOf(")")>-1);S[0]=[S[0],...S.splice(1,T)].join(this.formatSeparator)}return S.reduce((T,E)=>{const{formatName:d,formatOptions:r}=t_(E);if(this.formats[d]){let c=T;try{const l=v?.formatParams?.[v.interpolationkey]||{},i=l.locale||l.lng||v.locale||v.lng||x;c=this.formats[d](T,i,{...r,...v,...l})}catch(l){this.logger.warn(l)}return c}else this.logger.warn(`there was no format function for ${d}`);return T},e)}}const i_=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class s_ extends uf{constructor(e,h,x,v={}){super(),this.backend=e,this.store=h,this.services=x,this.languageUtils=x.languageUtils,this.options=v,this.logger=Yi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=v.maxParallelReads||10,this.readingCalls=0,this.maxRetries=v.maxRetries>=0?v.maxRetries:5,this.retryTimeout=v.retryTimeout>=1?v.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(x,v.backend,v)}queueLoad(e,h,x,v){const S={},_={},T={},E={};return e.forEach(d=>{let r=!0;h.forEach(c=>{const l=`${d}|${c}`;!x.reload&&this.store.hasResourceBundle(d,c)?this.state[l]=2:this.state[l]<0||(this.state[l]===1?_[l]===void 0&&(_[l]=!0):(this.state[l]=1,r=!1,_[l]===void 0&&(_[l]=!0),S[l]===void 0&&(S[l]=!0),E[c]===void 0&&(E[c]=!0)))}),r||(T[d]=!0)}),(Object.keys(S).length||Object.keys(_).length)&&this.queue.push({pending:_,pendingCount:Object.keys(_).length,loaded:{},errors:[],callback:v}),{toLoad:Object.keys(S),pending:Object.keys(_),toLoadLanguages:Object.keys(T),toLoadNamespaces:Object.keys(E)}}loaded(e,h,x){const v=e.split("|"),S=v[0],_=v[1];h&&this.emit("failedLoading",S,_,h),!h&&x&&this.store.addResourceBundle(S,_,x,void 0,void 0,{skipCopy:!0}),this.state[e]=h?-1:2,h&&x&&(this.state[e]=0);const T={};this.queue.forEach(E=>{Gw(E.loaded,[S],_),i_(E,e),h&&E.errors.push(h),E.pendingCount===0&&!E.done&&(Object.keys(E.loaded).forEach(d=>{T[d]||(T[d]={});const r=E.loaded[d];r.length&&r.forEach(c=>{T[d][c]===void 0&&(T[d][c]=!0)})}),E.done=!0,E.errors.length?E.callback(E.errors):E.callback())}),this.emit("loaded",T),this.queue=this.queue.filter(E=>!E.done)}read(e,h,x,v=0,S=this.retryTimeout,_){if(!e.length)return _(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:h,fcName:x,tried:v,wait:S,callback:_});return}this.readingCalls++;const T=(d,r)=>{if(this.readingCalls--,this.waitingReads.length>0){const c=this.waitingReads.shift();this.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}if(d&&r&&v<this.maxRetries){setTimeout(()=>{this.read.call(this,e,h,x,v+1,S*2,_)},S);return}_(d,r)},E=this.backend[x].bind(this.backend);if(E.length===2){try{const d=E(e,h);d&&typeof d.then=="function"?d.then(r=>T(null,r)).catch(T):T(null,d)}catch(d){T(d)}return}return E(e,h,T)}prepareLoading(e,h,x={},v){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),v&&v();at(e)&&(e=this.languageUtils.toResolveHierarchy(e)),at(h)&&(h=[h]);const S=this.queueLoad(e,h,x,v);if(!S.toLoad.length)return S.pending.length||v(),null;S.toLoad.forEach(_=>{this.loadOne(_)})}load(e,h,x){this.prepareLoading(e,h,{},x)}reload(e,h,x){this.prepareLoading(e,h,{reload:!0},x)}loadOne(e,h=""){const x=e.split("|"),v=x[0],S=x[1];this.read(v,S,"read",void 0,void 0,(_,T)=>{_&&this.logger.warn(`${h}loading namespace ${S} for language ${v} failed`,_),!_&&T&&this.logger.log(`${h}loaded namespace ${S} for language ${v}`,T),this.loaded(e,_,T)})}saveMissing(e,h,x,v,S,_={},T=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(h)){this.logger.warn(`did not save key "${x}" as the namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(x==null||x==="")){if(this.backend?.create){const E={..._,isUpdate:S},d=this.backend.create.bind(this.backend);if(d.length<6)try{let r;d.length===5?r=d(e,h,x,v,E):r=d(e,h,x,v),r&&typeof r.then=="function"?r.then(c=>T(null,c)).catch(T):T(null,r)}catch(r){T(r)}else d(e,h,x,v,T,E)}!e||!e[0]||this.store.addResource(e[0],h,x,v)}}}const x0=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),at(t[1])&&(e.defaultValue=t[1]),at(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const h=t[3]||t[2];Object.keys(h).forEach(x=>{e[x]=h[x]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),w0=t=>(at(t.ns)&&(t.ns=[t.ns]),at(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),at(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),Nd=()=>{},a_=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(h=>{typeof t[h]=="function"&&(t[h]=t[h].bind(t))})};class Zc extends uf{constructor(e={},h){if(super(),this.options=w0(e),this.services={},this.logger=Yi,this.modules={external:[]},a_(this),h&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,h),this;setTimeout(()=>{this.init(e,h)},0)}}init(e={},h){this.isInitializing=!0,typeof e=="function"&&(h=e,e={}),e.defaultNS==null&&e.ns&&(at(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const x=x0();this.options={...x,...this.options,...w0(e)},this.options.interpolation={...x.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const v=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Yi.init(v(this.modules.logger),this.options):Yi.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=r_;const r=new g0(this.options);this.store=new h0(this.options.resources,this.options);const c=this.services;c.logger=Yi,c.resourceStore=this.store,c.languageUtils=r,c.pluralResolver=new Zw(r,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==x.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===x.interpolation.format)&&(c.formatter=v(d),c.formatter.init&&c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new e_(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new s_(v(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(i,...s)=>{this.emit(i,...s)}),this.modules.languageDetector&&(c.languageDetector=v(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=v(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new Kd(this.services,this.options),this.translator.on("*",(i,...s)=>{this.emit(i,...s)}),this.modules.external.forEach(i=>{i.init&&i.init(this)})}if(this.format=this.options.interpolation.format,h||(h=Nd),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...r)=>this.store[d](...r)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...r)=>(this.store[d](...r),this)});const T=ec(),E=()=>{const d=(r,c)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),T.resolve(c),h(r,c)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?E():setTimeout(E,0),T}loadResources(e,h=Nd){let x=h;const v=at(e)?e:this.language;if(typeof e=="function"&&(x=e),!this.options.resources||this.options.partialBundledLanguages){if(v?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return x();const S=[],_=T=>{if(!T||T==="cimode")return;this.services.languageUtils.toResolveHierarchy(T).forEach(d=>{d!=="cimode"&&S.indexOf(d)<0&&S.push(d)})};v?_(v):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(E=>_(E)),this.options.preload?.forEach?.(T=>_(T)),this.services.backendConnector.load(S,this.options.ns,T=>{!T&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),x(T)})}else x(null)}reloadResources(e,h,x){const v=ec();return typeof e=="function"&&(x=e,e=void 0),typeof h=="function"&&(x=h,h=void 0),e||(e=this.languages),h||(h=this.options.ns),x||(x=Nd),this.services.backendConnector.reload(e,h,S=>{v.resolve(),x(S)}),v}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&F1.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let h=0;h<this.languages.length;h++){const x=this.languages[h];if(!(["cimode","dev"].indexOf(x)>-1)&&this.store.hasLanguageSomeTranslations(x)){this.resolvedLanguage=x;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,h){this.isLanguageChangingTo=e;const x=ec();this.emit("languageChanging",e);const v=T=>{this.language=T,this.languages=this.services.languageUtils.toResolveHierarchy(T),this.resolvedLanguage=void 0,this.setResolvedLanguage(T)},S=(T,E)=>{E?this.isLanguageChangingTo===e&&(v(E),this.translator.changeLanguage(E),this.isLanguageChangingTo=void 0,this.emit("languageChanged",E),this.logger.log("languageChanged",E)):this.isLanguageChangingTo=void 0,x.resolve((...d)=>this.t(...d)),h&&h(T,(...d)=>this.t(...d))},_=T=>{!e&&!T&&this.services.languageDetector&&(T=[]);const E=at(T)?T:T&&T[0],d=this.store.hasLanguageSomeTranslations(E)?E:this.services.languageUtils.getBestMatchFromCodes(at(T)?[T]:T);d&&(this.language||v(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,r=>{S(r,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?_(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(_):this.services.languageDetector.detect(_):_(e),x}getFixedT(e,h,x){const v=(S,_,...T)=>{let E;typeof _!="object"?E=this.options.overloadTranslationOptionHandler([S,_].concat(T)):E={..._},E.lng=E.lng||v.lng,E.lngs=E.lngs||v.lngs,E.ns=E.ns||v.ns,E.keyPrefix!==""&&(E.keyPrefix=E.keyPrefix||x||v.keyPrefix);const d=this.options.keySeparator||".";let r;return E.keyPrefix&&Array.isArray(S)?r=S.map(c=>(typeof c=="function"&&(c=Xg(c,{...this.options,..._})),`${E.keyPrefix}${d}${c}`)):(typeof S=="function"&&(S=Xg(S,{...this.options,..._})),r=E.keyPrefix?`${E.keyPrefix}${d}${S}`:S),this.t(r,E)};return at(e)?v.lng=e:v.lngs=e,v.ns=h,v.keyPrefix=x,v}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,h={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const x=h.lng||this.resolvedLanguage||this.languages[0],v=this.options?this.options.fallbackLng:!1,S=this.languages[this.languages.length-1];if(x.toLowerCase()==="cimode")return!0;const _=(T,E)=>{const d=this.services.backendConnector.state[`${T}|${E}`];return d===-1||d===0||d===2};if(h.precheck){const T=h.precheck(this,_);if(T!==void 0)return T}return!!(this.hasResourceBundle(x,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||_(x,e)&&(!v||_(S,e)))}loadNamespaces(e,h){const x=ec();return this.options.ns?(at(e)&&(e=[e]),e.forEach(v=>{this.options.ns.indexOf(v)<0&&this.options.ns.push(v)}),this.loadResources(v=>{x.resolve(),h&&h(v)}),x):(h&&h(),Promise.resolve())}loadLanguages(e,h){const x=ec();at(e)&&(e=[e]);const v=this.options.preload||[],S=e.filter(_=>v.indexOf(_)<0&&this.services.languageUtils.isSupportedCode(_));return S.length?(this.options.preload=v.concat(S),this.loadResources(_=>{x.resolve(),h&&h(_)}),x):(h&&h(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const v=new Intl.Locale(e);if(v&&v.getTextInfo){const S=v.getTextInfo();if(S&&S.direction)return S.direction}}catch{}const h=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],x=this.services?.languageUtils||new g0(x0());return e.toLowerCase().indexOf("-latn")>1?"ltr":h.indexOf(x.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},h){return new Zc(e,h)}cloneInstance(e={},h=Nd){const x=e.forkResourceStore;x&&delete e.forkResourceStore;const v={...this.options,...e,isClone:!0},S=new Zc(v);if((e.debug!==void 0||e.prefix!==void 0)&&(S.logger=S.logger.clone(e)),["store","services","language"].forEach(T=>{S[T]=this[T]}),S.services={...this.services},S.services.utils={hasLoadedNamespace:S.hasLoadedNamespace.bind(S)},x){const T=Object.keys(this.store.data).reduce((E,d)=>(E[d]={...this.store.data[d]},E[d]=Object.keys(E[d]).reduce((r,c)=>(r[c]={...E[d][c]},r),E[d]),E),{});S.store=new h0(T,v),S.services.resourceStore=S.store}return S.translator=new Kd(S.services,v),S.translator.on("*",(T,...E)=>{S.emit(T,...E)}),S.init(v,h),S.translator.options=v,S.translator.backendConnector.services.utils={hasLoadedNamespace:S.hasLoadedNamespace.bind(S)},S}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Gt=Zc.createInstance();Gt.createInstance=Zc.createInstance;Gt.createInstance;Gt.dir;Gt.init;Gt.loadResources;Gt.reloadResources;Gt.use;Gt.changeLanguage;Gt.getFixedT;Gt.t;Gt.exists;Gt.setDefaultNamespace;Gt.hasLoadedNamespace;Gt.loadNamespaces;Gt.loadLanguages;const o_=(t,e,h,x)=>{const v=[h,{code:e,...x||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(v,"warn","react-i18next::",!0);So(v[0])&&(v[0]=`react-i18next:: ${v[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...v):console?.warn&&console.warn(...v)},_0={},Yg=(t,e,h,x)=>{So(h)&&_0[h]||(So(h)&&(_0[h]=new Date),o_(t,e,h,x))},B1=(t,e)=>()=>{if(t.isInitialized)e();else{const h=()=>{setTimeout(()=>{t.off("initialized",h)},0),e()};t.on("initialized",h)}},qg=(t,e,h)=>{t.loadNamespaces(e,B1(t,h))},b0=(t,e,h,x)=>{if(So(h)&&(h=[h]),t.options.preload&&t.options.preload.indexOf(e)>-1)return qg(t,h,x);h.forEach(v=>{t.options.ns.indexOf(v)<0&&t.options.ns.push(v)}),t.loadLanguages(e,B1(t,x))},l_=(t,e,h={})=>!e.languages||!e.languages.length?(Yg(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:h.lng,precheck:(x,v)=>{if(h.bindI18n&&h.bindI18n.indexOf("languageChanging")>-1&&x.services.backendConnector.backend&&x.isLanguageChangingTo&&!v(x.isLanguageChangingTo,t))return!1}}),So=t=>typeof t=="string",u_=t=>typeof t=="object"&&t!==null,c_=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,h_={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},d_=t=>h_[t],f_=t=>t.replace(c_,d_);let Kg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:f_};const g_=(t={})=>{Kg={...Kg,...t}},p_=()=>Kg;let z1;const m_=t=>{z1=t},v_=()=>z1,y_={type:"3rdParty",init(t){g_(t.options.react),m_(t)}},x_=ae.createContext();class w_{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(h=>{this.usedNamespaces[h]||(this.usedNamespaces[h]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const __=(t,e)=>{const h=ae.useRef();return ae.useEffect(()=>{h.current=t},[t,e]),h.current},U1=(t,e,h,x)=>t.getFixedT(e,h,x),b_=(t,e,h,x)=>ae.useCallback(U1(t,e,h,x),[t,e,h,x]),cn=(t,e={})=>{const{i18n:h}=e,{i18n:x,defaultNS:v}=ae.useContext(x_)||{},S=h||x||v_();if(S&&!S.reportNamespaces&&(S.reportNamespaces=new w_),!S){Yg(S,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const w=(P,M)=>So(M)?M:u_(M)&&So(M.defaultValue)?M.defaultValue:Array.isArray(P)?P[P.length-1]:P,C=[w,{},!1];return C.t=w,C.i18n={},C.ready=!1,C}S.options.react?.wait&&Yg(S,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const _={...p_(),...S.options.react,...e},{useSuspense:T,keyPrefix:E}=_;let d=v||S.options?.defaultNS;d=So(d)?[d]:d||["translation"],S.reportNamespaces.addUsedNamespaces?.(d);const r=(S.isInitialized||S.initializedStoreOnce)&&d.every(w=>l_(w,S,_)),c=b_(S,e.lng||null,_.nsMode==="fallback"?d:d[0],E),l=()=>c,i=()=>U1(S,e.lng||null,_.nsMode==="fallback"?d:d[0],E),[s,o]=ae.useState(l);let a=d.join();e.lng&&(a=`${e.lng}${a}`);const m=__(a),f=ae.useRef(!0);ae.useEffect(()=>{const{bindI18n:w,bindI18nStore:C}=_;f.current=!0,!r&&!T&&(e.lng?b0(S,e.lng,d,()=>{f.current&&o(i)}):qg(S,d,()=>{f.current&&o(i)})),r&&m&&m!==a&&f.current&&o(i);const P=()=>{f.current&&o(i)};return w&&S?.on(w,P),C&&S?.store.on(C,P),()=>{f.current=!1,S&&w&&w?.split(" ").forEach(M=>S.off(M,P)),C&&S&&C.split(" ").forEach(M=>S.store.off(M,P))}},[S,a]),ae.useEffect(()=>{f.current&&r&&o(l)},[S,E,r]);const g=[s,S,r];if(g.t=s,g.i18n=S,g.ready=r,r||!r&&!T)return g;throw new Promise(w=>{e.lng?b0(S,e.lng,d,()=>w()):qg(S,d,()=>w())})},{slice:S_,forEach:C_}=[];function k_(t){return C_.call(S_.call(arguments,1),e=>{if(e)for(const h in e)t[h]===void 0&&(t[h]=e[h])}),t}function T_(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(h=>h.test(t))}const S0=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,P_=function(t,e){const x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},v=encodeURIComponent(e);let S=`${t}=${v}`;if(x.maxAge>0){const _=x.maxAge-0;if(Number.isNaN(_))throw new Error("maxAge should be a Number");S+=`; Max-Age=${Math.floor(_)}`}if(x.domain){if(!S0.test(x.domain))throw new TypeError("option domain is invalid");S+=`; Domain=${x.domain}`}if(x.path){if(!S0.test(x.path))throw new TypeError("option path is invalid");S+=`; Path=${x.path}`}if(x.expires){if(typeof x.expires.toUTCString!="function")throw new TypeError("option expires is invalid");S+=`; Expires=${x.expires.toUTCString()}`}if(x.httpOnly&&(S+="; HttpOnly"),x.secure&&(S+="; Secure"),x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"strict":S+="; SameSite=Strict";break;case"none":S+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return x.partitioned&&(S+="; Partitioned"),S},C0={create(t,e,h,x){let v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};h&&(v.expires=new Date,v.expires.setTime(v.expires.getTime()+h*60*1e3)),x&&(v.domain=x),document.cookie=P_(t,e,v)},read(t){const e=`${t}=`,h=document.cookie.split(";");for(let x=0;x<h.length;x++){let v=h[x];for(;v.charAt(0)===" ";)v=v.substring(1,v.length);if(v.indexOf(e)===0)return v.substring(e.length,v.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var E_={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return C0.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:h,cookieMinutes:x,cookieDomain:v,cookieOptions:S}=e;h&&typeof document<"u"&&C0.create(h,t,x,v,S)}},j_={name:"querystring",lookup(t){let{lookupQuerystring:e}=t,h;if(typeof window<"u"){let{search:x}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(x=window.location.hash.substring(window.location.hash.indexOf("?")));const S=x.substring(1).split("&");for(let _=0;_<S.length;_++){const T=S[_].indexOf("=");T>0&&S[_].substring(0,T)===e&&(h=S[_].substring(T+1))}}return h}},O_={name:"hash",lookup(t){let{lookupHash:e,lookupFromHashIndex:h}=t,x;if(typeof window<"u"){const{hash:v}=window.location;if(v&&v.length>2){const S=v.substring(1);if(e){const _=S.split("&");for(let T=0;T<_.length;T++){const E=_[T].indexOf("=");E>0&&_[T].substring(0,E)===e&&(x=_[T].substring(E+1))}}if(x)return x;if(!x&&h>-1){const _=v.match(/\/([a-zA-Z-]*)/g);return Array.isArray(_)?_[typeof h=="number"?h:0]?.replace("/",""):void 0}}}return x}};let Ll=null;const k0=()=>{if(Ll!==null)return Ll;try{if(Ll=typeof window<"u"&&window.localStorage!==null,!Ll)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Ll=!1}return Ll};var N_={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&k0())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:h}=e;h&&k0()&&window.localStorage.setItem(h,t)}};let Ml=null;const T0=()=>{if(Ml!==null)return Ml;try{if(Ml=typeof window<"u"&&window.sessionStorage!==null,!Ml)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Ml=!1}return Ml};var L_={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&T0())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:h}=e;h&&T0()&&window.sessionStorage.setItem(h,t)}},M_={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:h,userLanguage:x,language:v}=navigator;if(h)for(let S=0;S<h.length;S++)e.push(h[S]);x&&e.push(x),v&&e.push(v)}return e.length>0?e:void 0}},A_={name:"htmlTag",lookup(t){let{htmlTag:e}=t,h;const x=e||(typeof document<"u"?document.documentElement:null);return x&&typeof x.getAttribute=="function"&&(h=x.getAttribute("lang")),h}},R_={name:"path",lookup(t){let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const h=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(h)?h[typeof e=="number"?e:0]?.replace("/",""):void 0}},D_={name:"subdomain",lookup(t){let{lookupFromSubdomainIndex:e}=t;const h=typeof e=="number"?e+1:1,x=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(x)return x[h]}};let V1=!1;try{document.cookie,V1=!0}catch{}const G1=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];V1||G1.splice(1,1);const F_=()=>({order:G1,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class H1{constructor(e){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,h)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=k_(h,this.options||{},F_()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=v=>v.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=x,this.addDetector(E_),this.addDetector(j_),this.addDetector(N_),this.addDetector(L_),this.addDetector(M_),this.addDetector(A_),this.addDetector(R_),this.addDetector(D_),this.addDetector(O_)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,h=[];return e.forEach(x=>{if(this.detectors[x]){let v=this.detectors[x].lookup(this.options);v&&typeof v=="string"&&(v=[v]),v&&(h=h.concat(v))}}),h=h.filter(x=>x!=null&&!T_(x)).map(x=>this.options.convertDetectedLanguage(x)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?h:h.length>0?h[0]:null}cacheUserLanguage(e){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;h&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||h.forEach(x=>{this.detectors[x]&&this.detectors[x].cacheUserLanguage(e,this.options)}))}}H1.type="languageDetector";function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function W1(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":$g(XMLHttpRequest))==="object"}function I_(t){return!!t&&typeof t.then=="function"}function B_(t){return I_(t)?t:Promise.resolve(t)}const z_="modulepreload",U_=function(t){return"/"+t},P0={},V_=function(e,h,x){let v=Promise.resolve();if(h&&h.length>0){let E=function(d){return Promise.all(d.map(r=>Promise.resolve(r).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),T=_?.nonce||_?.getAttribute("nonce");v=E(h.map(d=>{if(d=U_(d),d in P0)return;P0[d]=!0;const r=d.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${c}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":z_,r||(l.as="script"),l.crossOrigin="",l.href=d,T&&l.setAttribute("nonce",T),document.head.appendChild(l),r)return new Promise((i,s)=>{l.addEventListener("load",i),l.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${d}`)))})}))}function S(_){const T=new Event("vite:preloadError",{cancelable:!0});if(T.payload=_,window.dispatchEvent(T),!T.defaultPrevented)throw _}return v.then(_=>{for(const T of _||[])T.status==="rejected"&&S(T.reason);return e().catch(S)})};function E0(t,e){var h=Object.keys(t);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);e&&(x=x.filter(function(v){return Object.getOwnPropertyDescriptor(t,v).enumerable})),h.push.apply(h,x)}return h}function j0(t){for(var e=1;e<arguments.length;e++){var h=arguments[e]!=null?arguments[e]:{};e%2?E0(Object(h),!0).forEach(function(x){G_(t,x,h[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(h)):E0(Object(h)).forEach(function(x){Object.defineProperty(t,x,Object.getOwnPropertyDescriptor(h,x))})}return t}function G_(t,e,h){return(e=H_(e))in t?Object.defineProperty(t,e,{value:h,enumerable:!0,configurable:!0,writable:!0}):t[e]=h,t}function H_(t){var e=W_(t,"string");return To(e)=="symbol"?e:e+""}function W_(t,e){if(To(t)!="object"||!t)return t;var h=t[Symbol.toPrimitive];if(h!==void 0){var x=h.call(t,e);if(To(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function To(t){"@babel/helpers - typeof";return To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(t)}var Oa=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Oa=global.fetch:typeof window<"u"&&window.fetch&&(Oa=window.fetch);var eh;W1()&&(typeof global<"u"&&global.XMLHttpRequest?eh=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(eh=window.XMLHttpRequest));var $d;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?$d=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&($d=window.ActiveXObject));typeof Oa!="function"&&(Oa=void 0);if(!Oa&&!eh&&!$d)try{V_(()=>import("./browser-ponyfill-C8mnlFk4.js").then(t=>t.b),[]).then(function(t){Oa=t.default}).catch(function(){})}catch{}var Qg=function(e,h){if(h&&To(h)==="object"){var x="";for(var v in h)x+="&"+encodeURIComponent(v)+"="+encodeURIComponent(h[v]);if(!x)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+x.slice(1)}return e},O0=function(e,h,x,v){var S=function(E){if(!E.ok)return x(E.statusText||"Error",{status:E.status});E.text().then(function(d){x(null,{status:E.status,data:d})}).catch(x)};if(v){var _=v(e,h);if(_ instanceof Promise){_.then(S).catch(x);return}}typeof fetch=="function"?fetch(e,h).then(S).catch(x):Oa(e,h).then(S).catch(x)},N0=!1,X_=function(e,h,x,v){e.queryStringParams&&(h=Qg(h,e.queryStringParams));var S=j0({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(S["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),x&&(S["Content-Type"]="application/json");var _=typeof e.requestOptions=="function"?e.requestOptions(x):e.requestOptions,T=j0({method:x?"POST":"GET",body:x?e.stringify(x):void 0,headers:S},N0?{}:_),E=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{O0(h,T,v,E)}catch(d){if(!_||Object.keys(_).length===0||!d.message||d.message.indexOf("not implemented")<0)return v(d);try{Object.keys(_).forEach(function(r){delete T[r]}),O0(h,T,v,E),N0=!0}catch(r){v(r)}}},Y_=function(e,h,x,v){x&&To(x)==="object"&&(x=Qg("",x).slice(1)),e.queryStringParams&&(h=Qg(h,e.queryStringParams));try{var S=eh?new eh:new $d("MSXML2.XMLHTTP.3.0");S.open(x?"POST":"GET",h,1),e.crossDomain||S.setRequestHeader("X-Requested-With","XMLHttpRequest"),S.withCredentials=!!e.withCredentials,x&&S.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),S.overrideMimeType&&S.overrideMimeType("application/json");var _=e.customHeaders;if(_=typeof _=="function"?_():_,_)for(var T in _)S.setRequestHeader(T,_[T]);S.onreadystatechange=function(){S.readyState>3&&v(S.status>=400?S.statusText:null,{status:S.status,data:S.responseText})},S.send(x)}catch(E){console&&console.log(E)}},q_=function(e,h,x,v){if(typeof x=="function"&&(v=x,x=void 0),v=v||function(){},Oa&&h.indexOf("file:")!==0)return X_(e,h,x,v);if(W1()||typeof ActiveXObject=="function")return Y_(e,h,x,v);v(new Error("No fetch and no xhr implementation found!"))};function Wl(t){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wl(t)}function L0(t,e){var h=Object.keys(t);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);e&&(x=x.filter(function(v){return Object.getOwnPropertyDescriptor(t,v).enumerable})),h.push.apply(h,x)}return h}function ug(t){for(var e=1;e<arguments.length;e++){var h=arguments[e]!=null?arguments[e]:{};e%2?L0(Object(h),!0).forEach(function(x){X1(t,x,h[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(h)):L0(Object(h)).forEach(function(x){Object.defineProperty(t,x,Object.getOwnPropertyDescriptor(h,x))})}return t}function K_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $_(t,e){for(var h=0;h<e.length;h++){var x=e[h];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(t,Y1(x.key),x)}}function Q_(t,e,h){return e&&$_(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function X1(t,e,h){return(e=Y1(e))in t?Object.defineProperty(t,e,{value:h,enumerable:!0,configurable:!0,writable:!0}):t[e]=h,t}function Y1(t){var e=J_(t,"string");return Wl(e)=="symbol"?e:e+""}function J_(t,e){if(Wl(t)!="object"||!t)return t;var h=t[Symbol.toPrimitive];if(h!==void 0){var x=h.call(t,e);if(Wl(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Z_=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(h){return JSON.parse(h)},stringify:JSON.stringify,parsePayload:function(h,x,v){return X1({},x,v||"")},parseLoadPayload:function(h,x){},request:q_,reloadInterval:typeof window<"u"?!1:3600*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},q1=(function(){function t(e){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};K_(this,t),this.services=e,this.options=h,this.allOptions=x,this.type="backend",this.init(e,h,x)}return Q_(t,[{key:"init",value:function(h){var x=this,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=h,this.options=ug(ug(ug({},Z_()),this.options||{}),v),this.allOptions=S,this.services&&this.options.reloadInterval){var _=setInterval(function(){return x.reload()},this.options.reloadInterval);Wl(_)==="object"&&typeof _.unref=="function"&&_.unref()}}},{key:"readMulti",value:function(h,x,v){this._readAny(h,h,x,x,v)}},{key:"read",value:function(h,x,v){this._readAny([h],h,[x],x,v)}},{key:"_readAny",value:function(h,x,v,S,_){var T=this,E=this.options.loadPath;typeof this.options.loadPath=="function"&&(E=this.options.loadPath(h,v)),E=B_(E),E.then(function(d){if(!d)return _(null,{});var r=T.services.interpolator.interpolate(d,{lng:h.join("+"),ns:v.join("+")});T.loadUrl(r,_,x,S)})}},{key:"loadUrl",value:function(h,x,v,S){var _=this,T=typeof v=="string"?[v]:v,E=typeof S=="string"?[S]:S,d=this.options.parseLoadPayload(T,E);this.options.request(this.options,h,d,function(r,c){if(c&&(c.status>=500&&c.status<600||!c.status))return x("failed loading "+h+"; status code: "+c.status,!0);if(c&&c.status>=400&&c.status<500)return x("failed loading "+h+"; status code: "+c.status,!1);if(!c&&r&&r.message){var l=r.message.toLowerCase(),i=["failed","fetch","network","load"].find(function(a){return l.indexOf(a)>-1});if(i)return x("failed loading "+h+": "+r.message,!0)}if(r)return x(r,!1);var s,o;try{typeof c.data=="string"?s=_.options.parse(c.data,v,S):s=c.data}catch{o="failed parsing "+h+" to json"}if(o)return x(o,!1);x(null,s)})}},{key:"create",value:function(h,x,v,S,_){var T=this;if(this.options.addPath){typeof h=="string"&&(h=[h]);var E=this.options.parsePayload(x,v,S),d=0,r=[],c=[];h.forEach(function(l){var i=T.options.addPath;typeof T.options.addPath=="function"&&(i=T.options.addPath(l,x));var s=T.services.interpolator.interpolate(i,{lng:l,ns:x});T.options.request(T.options,s,E,function(o,a){d+=1,r.push(o),c.push(a),d===h.length&&typeof _=="function"&&_(r,c)})})}}},{key:"reload",value:function(){var h=this,x=this.services,v=x.backendConnector,S=x.languageUtils,_=x.logger,T=v.language;if(!(T&&T.toLowerCase()==="cimode")){var E=[],d=function(c){var l=S.toResolveHierarchy(c);l.forEach(function(i){E.indexOf(i)<0&&E.push(i)})};d(T),this.allOptions.preload&&this.allOptions.preload.forEach(function(r){return d(r)}),E.forEach(function(r){h.allOptions.ns.forEach(function(c){v.read(r,c,"read",null,null,function(l,i){l&&_.warn("loading namespace ".concat(c," for language ").concat(r," failed"),l),!l&&i&&_.log("loaded namespace ".concat(c," for language ").concat(r),i),v.loaded("".concat(r,"|").concat(c),l,i)})})})}}}])})();q1.type="backend";Gt.use(q1).use(H1).use(y_).init({fallbackLng:"en",supportedLngs:["ru","en","kk"],debug:!1,backend:{loadPath:"/locales/{{lng}}/translation.json"},detection:{order:["localStorage","cookie","querystring","navigator","htmlTag"],caches:["localStorage","cookie"],lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1},returnEmptyString:!1});Gt.on("initialized",()=>{Gt.services?.pluralResolver?(console.log(" pluralResolver     "),Gt.services.pluralResolver.addRule("ru",{numbers:[1,2,5],plurals:function(t){const e=t%10,h=t%100;return e===1&&h!==11?0:e>=2&&e<=4&&(h<10||h>=20)?1:2}}),Gt.services.pluralResolver.addRule("en",{numbers:[1,2],plurals:function(t){return t===1?0:1}}),Gt.services.pluralResolver.addRule("kk",{numbers:[1],plurals:function(){return 0}})):console.warn(" pluralResolver     ")});Gt.on("languageChanged",t=>{typeof document<"u"&&(document.documentElement.lang=t)});if(!localStorage.getItem("i18nextLng")){const t=navigator.language&&["ru","en","kk"].includes(navigator.language)?navigator.language:"en";Gt.changeLanguage(t)}var eb=R1();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function th(){return th=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var h=arguments[e];for(var x in h)Object.prototype.hasOwnProperty.call(h,x)&&(t[x]=h[x])}return t},th.apply(this,arguments)}var Ea;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ea||(Ea={}));const M0="popstate";function tb(t){t===void 0&&(t={});function e(x,v){let{pathname:S,search:_,hash:T}=x.location;return Jg("",{pathname:S,search:_,hash:T},v.state&&v.state.usr||null,v.state&&v.state.key||"default")}function h(x,v){return typeof v=="string"?v:Qd(v)}return rb(e,h,null,t)}function wn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function K1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nb(){return Math.random().toString(36).substr(2,8)}function A0(t,e){return{usr:t.state,key:t.key,idx:e}}function Jg(t,e,h,x){return h===void 0&&(h=null),th({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ql(e):e,{state:h,key:e&&e.key||x||nb()})}function Qd(t){let{pathname:e="/",search:h="",hash:x=""}=t;return h&&h!=="?"&&(e+=h.charAt(0)==="?"?h:"?"+h),x&&x!=="#"&&(e+=x.charAt(0)==="#"?x:"#"+x),e}function ql(t){let e={};if(t){let h=t.indexOf("#");h>=0&&(e.hash=t.substr(h),t=t.substr(0,h));let x=t.indexOf("?");x>=0&&(e.search=t.substr(x),t=t.substr(0,x)),t&&(e.pathname=t)}return e}function rb(t,e,h,x){x===void 0&&(x={});let{window:v=document.defaultView,v5Compat:S=!1}=x,_=v.history,T=Ea.Pop,E=null,d=r();d==null&&(d=0,_.replaceState(th({},_.state,{idx:d}),""));function r(){return(_.state||{idx:null}).idx}function c(){T=Ea.Pop;let a=r(),m=a==null?null:a-d;d=a,E&&E({action:T,location:o.location,delta:m})}function l(a,m){T=Ea.Push;let f=Jg(o.location,a,m);d=r()+1;let g=A0(f,d),w=o.createHref(f);try{_.pushState(g,"",w)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;v.location.assign(w)}S&&E&&E({action:T,location:o.location,delta:1})}function i(a,m){T=Ea.Replace;let f=Jg(o.location,a,m);d=r();let g=A0(f,d),w=o.createHref(f);_.replaceState(g,"",w),S&&E&&E({action:T,location:o.location,delta:0})}function s(a){let m=v.location.origin!=="null"?v.location.origin:v.location.href,f=typeof a=="string"?a:Qd(a);return f=f.replace(/ $/,"%20"),wn(m,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,m)}let o={get action(){return T},get location(){return t(v,_)},listen(a){if(E)throw new Error("A history only accepts one active listener");return v.addEventListener(M0,c),E=a,()=>{v.removeEventListener(M0,c),E=null}},createHref(a){return e(v,a)},createURL:s,encodeLocation(a){let m=s(a);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:l,replace:i,go(a){return _.go(a)}};return o}var R0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(R0||(R0={}));function ib(t,e,h){return h===void 0&&(h="/"),sb(t,e,h)}function sb(t,e,h,x){let v=typeof e=="string"?ql(e):e,S=jp(v.pathname||"/",h);if(S==null)return null;let _=$1(t);ab(_);let T=null;for(let E=0;T==null&&E<_.length;++E){let d=yb(S);T=pb(_[E],d)}return T}function $1(t,e,h,x){e===void 0&&(e=[]),h===void 0&&(h=[]),x===void 0&&(x="");let v=(S,_,T)=>{let E={relativePath:T===void 0?S.path||"":T,caseSensitive:S.caseSensitive===!0,childrenIndex:_,route:S};E.relativePath.startsWith("/")&&(wn(E.relativePath.startsWith(x),'Absolute route path "'+E.relativePath+'" nested under path '+('"'+x+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),E.relativePath=E.relativePath.slice(x.length));let d=ja([x,E.relativePath]),r=h.concat(E);S.children&&S.children.length>0&&(wn(S.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),$1(S.children,e,r,d)),!(S.path==null&&!S.index)&&e.push({path:d,score:fb(d,S.index),routesMeta:r})};return t.forEach((S,_)=>{var T;if(S.path===""||!((T=S.path)!=null&&T.includes("?")))v(S,_);else for(let E of Q1(S.path))v(S,_,E)}),e}function Q1(t){let e=t.split("/");if(e.length===0)return[];let[h,...x]=e,v=h.endsWith("?"),S=h.replace(/\?$/,"");if(x.length===0)return v?[S,""]:[S];let _=Q1(x.join("/")),T=[];return T.push(..._.map(E=>E===""?S:[S,E].join("/"))),v&&T.push(..._),T.map(E=>t.startsWith("/")&&E===""?"/":E)}function ab(t){t.sort((e,h)=>e.score!==h.score?h.score-e.score:gb(e.routesMeta.map(x=>x.childrenIndex),h.routesMeta.map(x=>x.childrenIndex)))}const ob=/^:[\w-]+$/,lb=3,ub=2,cb=1,hb=10,db=-2,D0=t=>t==="*";function fb(t,e){let h=t.split("/"),x=h.length;return h.some(D0)&&(x+=db),e&&(x+=ub),h.filter(v=>!D0(v)).reduce((v,S)=>v+(ob.test(S)?lb:S===""?cb:hb),x)}function gb(t,e){return t.length===e.length&&t.slice(0,-1).every((x,v)=>x===e[v])?t[t.length-1]-e[e.length-1]:0}function pb(t,e,h){let{routesMeta:x}=t,v={},S="/",_=[];for(let T=0;T<x.length;++T){let E=x[T],d=T===x.length-1,r=S==="/"?e:e.slice(S.length)||"/",c=mb({path:E.relativePath,caseSensitive:E.caseSensitive,end:d},r),l=E.route;if(!c)return null;Object.assign(v,c.params),_.push({params:v,pathname:ja([S,c.pathname]),pathnameBase:bb(ja([S,c.pathnameBase])),route:l}),c.pathnameBase!=="/"&&(S=ja([S,c.pathnameBase]))}return _}function mb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[h,x]=vb(t.path,t.caseSensitive,t.end),v=e.match(h);if(!v)return null;let S=v[0],_=S.replace(/(.)\/+$/,"$1"),T=v.slice(1);return{params:x.reduce((d,r,c)=>{let{paramName:l,isOptional:i}=r;if(l==="*"){let o=T[c]||"";_=S.slice(0,S.length-o.length).replace(/(.)\/+$/,"$1")}const s=T[c];return i&&!s?d[l]=void 0:d[l]=(s||"").replace(/%2F/g,"/"),d},{}),pathname:S,pathnameBase:_,pattern:t}}function vb(t,e,h){e===void 0&&(e=!1),h===void 0&&(h=!0),K1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let x=[],v="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_,T,E)=>(x.push({paramName:T,isOptional:E!=null}),E?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(x.push({paramName:"*"}),v+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):h?v+="\\/*$":t!==""&&t!=="/"&&(v+="(?:(?=\\/|$))"),[new RegExp(v,e?void 0:"i"),x]}function yb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return K1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let h=e.endsWith("/")?e.length-1:e.length,x=t.charAt(h);return x&&x!=="/"?null:t.slice(h)||"/"}function xb(t,e){e===void 0&&(e="/");let{pathname:h,search:x="",hash:v=""}=typeof t=="string"?ql(t):t;return{pathname:h?h.startsWith("/")?h:wb(h,e):e,search:Sb(x),hash:Cb(v)}}function wb(t,e){let h=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(v=>{v===".."?h.length>1&&h.pop():v!=="."&&h.push(v)}),h.length>1?h.join("/"):"/"}function cg(t,e,h,x){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(x)+"].  Please separate it out to the ")+("`to."+h+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _b(t){return t.filter((e,h)=>h===0||e.route.path&&e.route.path.length>0)}function J1(t,e){let h=_b(t);return e?h.map((x,v)=>v===h.length-1?x.pathname:x.pathnameBase):h.map(x=>x.pathnameBase)}function Z1(t,e,h,x){x===void 0&&(x=!1);let v;typeof t=="string"?v=ql(t):(v=th({},t),wn(!v.pathname||!v.pathname.includes("?"),cg("?","pathname","search",v)),wn(!v.pathname||!v.pathname.includes("#"),cg("#","pathname","hash",v)),wn(!v.search||!v.search.includes("#"),cg("#","search","hash",v)));let S=t===""||v.pathname==="",_=S?"/":v.pathname,T;if(_==null)T=h;else{let c=e.length-1;if(!x&&_.startsWith("..")){let l=_.split("/");for(;l[0]==="..";)l.shift(),c-=1;v.pathname=l.join("/")}T=c>=0?e[c]:"/"}let E=xb(v,T),d=_&&_!=="/"&&_.endsWith("/"),r=(S||_===".")&&h.endsWith("/");return!E.pathname.endsWith("/")&&(d||r)&&(E.pathname+="/"),E}const ja=t=>t.join("/").replace(/\/\/+/g,"/"),bb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ex=["post","put","patch","delete"];new Set(ex);const Tb=["get",...ex];new Set(Tb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nh(){return nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var h=arguments[e];for(var x in h)Object.prototype.hasOwnProperty.call(h,x)&&(t[x]=h[x])}return t},nh.apply(this,arguments)}const Op=ae.createContext(null),Pb=ae.createContext(null),Po=ae.createContext(null),cf=ae.createContext(null),Eo=ae.createContext({outlet:null,matches:[],isDataRoute:!1}),tx=ae.createContext(null);function Eb(t,e){let{relative:h}=e===void 0?{}:e;gh()||wn(!1);let{basename:x,navigator:v}=ae.useContext(Po),{hash:S,pathname:_,search:T}=rx(t,{relative:h}),E=_;return x!=="/"&&(E=_==="/"?x:ja([x,_])),v.createHref({pathname:E,search:T,hash:S})}function gh(){return ae.useContext(cf)!=null}function Ma(){return gh()||wn(!1),ae.useContext(cf).location}function nx(t){ae.useContext(Po).static||ae.useLayoutEffect(t)}function Ns(){let{isDataRoute:t}=ae.useContext(Eo);return t?Ub():jb()}function jb(){gh()||wn(!1);let t=ae.useContext(Op),{basename:e,future:h,navigator:x}=ae.useContext(Po),{matches:v}=ae.useContext(Eo),{pathname:S}=Ma(),_=JSON.stringify(J1(v,h.v7_relativeSplatPath)),T=ae.useRef(!1);return nx(()=>{T.current=!0}),ae.useCallback(function(d,r){if(r===void 0&&(r={}),!T.current)return;if(typeof d=="number"){x.go(d);return}let c=Z1(d,JSON.parse(_),S,r.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:ja([e,c.pathname])),(r.replace?x.replace:x.push)(c,r.state,r)},[e,x,_,S,t])}function rx(t,e){let{relative:h}=e===void 0?{}:e,{future:x}=ae.useContext(Po),{matches:v}=ae.useContext(Eo),{pathname:S}=Ma(),_=JSON.stringify(J1(v,x.v7_relativeSplatPath));return ae.useMemo(()=>Z1(t,JSON.parse(_),S,h==="path"),[t,_,S,h])}function Ob(t,e){return Nb(t,e)}function Nb(t,e,h,x){gh()||wn(!1);let{navigator:v}=ae.useContext(Po),{matches:S}=ae.useContext(Eo),_=S[S.length-1],T=_?_.params:{};_&&_.pathname;let E=_?_.pathnameBase:"/";_&&_.route;let d=Ma(),r;if(e){var c;let a=typeof e=="string"?ql(e):e;E==="/"||(c=a.pathname)!=null&&c.startsWith(E)||wn(!1),r=a}else r=d;let l=r.pathname||"/",i=l;if(E!=="/"){let a=E.replace(/^\//,"").split("/");i="/"+l.replace(/^\//,"").split("/").slice(a.length).join("/")}let s=ib(t,{pathname:i}),o=Db(s&&s.map(a=>Object.assign({},a,{params:Object.assign({},T,a.params),pathname:ja([E,v.encodeLocation?v.encodeLocation(a.pathname).pathname:a.pathname]),pathnameBase:a.pathnameBase==="/"?E:ja([E,v.encodeLocation?v.encodeLocation(a.pathnameBase).pathname:a.pathnameBase])})),S,h,x);return e&&o?ae.createElement(cf.Provider,{value:{location:nh({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:Ea.Pop}},o):o}function Lb(){let t=zb(),e=kb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),h=t instanceof Error?t.stack:null,v={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ae.createElement(ae.Fragment,null,ae.createElement("h2",null,"Unexpected Application Error!"),ae.createElement("h3",{style:{fontStyle:"italic"}},e),h?ae.createElement("pre",{style:v},h):null,null)}const Mb=ae.createElement(Lb,null);class Ab extends ae.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,h){return h.location!==e.location||h.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:h.error,location:h.location,revalidation:e.revalidation||h.revalidation}}componentDidCatch(e,h){console.error("React Router caught the following error during render",e,h)}render(){return this.state.error!==void 0?ae.createElement(Eo.Provider,{value:this.props.routeContext},ae.createElement(tx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rb(t){let{routeContext:e,match:h,children:x}=t,v=ae.useContext(Op);return v&&v.static&&v.staticContext&&(h.route.errorElement||h.route.ErrorBoundary)&&(v.staticContext._deepestRenderedBoundaryId=h.route.id),ae.createElement(Eo.Provider,{value:e},x)}function Db(t,e,h,x){var v;if(e===void 0&&(e=[]),h===void 0&&(h=null),x===void 0&&(x=null),t==null){var S;if(!h)return null;if(h.errors)t=h.matches;else if((S=x)!=null&&S.v7_partialHydration&&e.length===0&&!h.initialized&&h.matches.length>0)t=h.matches;else return null}let _=t,T=(v=h)==null?void 0:v.errors;if(T!=null){let r=_.findIndex(c=>c.route.id&&T?.[c.route.id]!==void 0);r>=0||wn(!1),_=_.slice(0,Math.min(_.length,r+1))}let E=!1,d=-1;if(h&&x&&x.v7_partialHydration)for(let r=0;r<_.length;r++){let c=_[r];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(d=r),c.route.id){let{loaderData:l,errors:i}=h,s=c.route.loader&&l[c.route.id]===void 0&&(!i||i[c.route.id]===void 0);if(c.route.lazy||s){E=!0,d>=0?_=_.slice(0,d+1):_=[_[0]];break}}}return _.reduceRight((r,c,l)=>{let i,s=!1,o=null,a=null;h&&(i=T&&c.route.id?T[c.route.id]:void 0,o=c.route.errorElement||Mb,E&&(d<0&&l===0?(Vb("route-fallback"),s=!0,a=null):d===l&&(s=!0,a=c.route.hydrateFallbackElement||null)));let m=e.concat(_.slice(0,l+1)),f=()=>{let g;return i?g=o:s?g=a:c.route.Component?g=ae.createElement(c.route.Component,null):c.route.element?g=c.route.element:g=r,ae.createElement(Rb,{match:c,routeContext:{outlet:r,matches:m,isDataRoute:h!=null},children:g})};return h&&(c.route.ErrorBoundary||c.route.errorElement||l===0)?ae.createElement(Ab,{location:h.location,revalidation:h.revalidation,component:o,error:i,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()},null)}var ix=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(ix||{}),sx=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(sx||{});function Fb(t){let e=ae.useContext(Op);return e||wn(!1),e}function Ib(t){let e=ae.useContext(Pb);return e||wn(!1),e}function Bb(t){let e=ae.useContext(Eo);return e||wn(!1),e}function ax(t){let e=Bb(),h=e.matches[e.matches.length-1];return h.route.id||wn(!1),h.route.id}function zb(){var t;let e=ae.useContext(tx),h=Ib(),x=ax();return e!==void 0?e:(t=h.errors)==null?void 0:t[x]}function Ub(){let{router:t}=Fb(ix.UseNavigateStable),e=ax(sx.UseNavigateStable),h=ae.useRef(!1);return nx(()=>{h.current=!0}),ae.useCallback(function(v,S){S===void 0&&(S={}),h.current&&(typeof v=="number"?t.navigate(v):t.navigate(v,nh({fromRouteId:e},S)))},[t,e])}const F0={};function Vb(t,e,h){F0[t]||(F0[t]=!0)}function Gb(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function wi(t){wn(!1)}function Hb(t){let{basename:e="/",children:h=null,location:x,navigationType:v=Ea.Pop,navigator:S,static:_=!1,future:T}=t;gh()&&wn(!1);let E=e.replace(/^\/*/,"/"),d=ae.useMemo(()=>({basename:E,navigator:S,static:_,future:nh({v7_relativeSplatPath:!1},T)}),[E,T,S,_]);typeof x=="string"&&(x=ql(x));let{pathname:r="/",search:c="",hash:l="",state:i=null,key:s="default"}=x,o=ae.useMemo(()=>{let a=jp(r,E);return a==null?null:{location:{pathname:a,search:c,hash:l,state:i,key:s},navigationType:v}},[E,r,c,l,i,s,v]);return o==null?null:ae.createElement(Po.Provider,{value:d},ae.createElement(cf.Provider,{children:h,value:o}))}function Wb(t){let{children:e,location:h}=t;return Ob(Zg(e),h)}new Promise(()=>{});function Zg(t,e){e===void 0&&(e=[]);let h=[];return ae.Children.forEach(t,(x,v)=>{if(!ae.isValidElement(x))return;let S=[...e,v];if(x.type===ae.Fragment){h.push.apply(h,Zg(x.props.children,S));return}x.type!==wi&&wn(!1),!x.props.index||!x.props.children||wn(!1);let _={id:x.props.id||S.join("-"),caseSensitive:x.props.caseSensitive,element:x.props.element,Component:x.props.Component,index:x.props.index,path:x.props.path,loader:x.props.loader,action:x.props.action,errorElement:x.props.errorElement,ErrorBoundary:x.props.ErrorBoundary,hasErrorBoundary:x.props.ErrorBoundary!=null||x.props.errorElement!=null,shouldRevalidate:x.props.shouldRevalidate,handle:x.props.handle,lazy:x.props.lazy};x.props.children&&(_.children=Zg(x.props.children,S)),h.push(_)}),h}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ep(){return ep=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var h=arguments[e];for(var x in h)Object.prototype.hasOwnProperty.call(h,x)&&(t[x]=h[x])}return t},ep.apply(this,arguments)}function Xb(t,e){if(t==null)return{};var h={},x=Object.keys(t),v,S;for(S=0;S<x.length;S++)v=x[S],!(e.indexOf(v)>=0)&&(h[v]=t[v]);return h}function Yb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qb(t,e){return t.button===0&&(!e||e==="_self")&&!Yb(t)}function tp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,h)=>{let x=t[h];return e.concat(Array.isArray(x)?x.map(v=>[h,v]):[[h,x]])},[]))}function Kb(t,e){let h=tp(t);return e&&e.forEach((x,v)=>{h.has(v)||e.getAll(v).forEach(S=>{h.append(v,S)})}),h}const $b=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Qb="6";try{window.__reactRouterVersion=Qb}catch{}const Jb="startTransition",I0=Rw[Jb];function Zb(t){let{basename:e,children:h,future:x,window:v}=t,S=ae.useRef();S.current==null&&(S.current=tb({window:v,v5Compat:!0}));let _=S.current,[T,E]=ae.useState({action:_.action,location:_.location}),{v7_startTransition:d}=x||{},r=ae.useCallback(c=>{d&&I0?I0(()=>E(c)):E(c)},[E,d]);return ae.useLayoutEffect(()=>_.listen(r),[_,r]),ae.useEffect(()=>Gb(x),[x]),ae.createElement(Hb,{basename:e,children:h,location:T.location,navigationType:T.action,navigator:_,future:x})}const eS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ts=ae.forwardRef(function(e,h){let{onClick:x,relative:v,reloadDocument:S,replace:_,state:T,target:E,to:d,preventScrollReset:r,viewTransition:c}=e,l=Xb(e,$b),{basename:i}=ae.useContext(Po),s,o=!1;if(typeof d=="string"&&tS.test(d)&&(s=d,eS))try{let g=new URL(window.location.href),w=d.startsWith("//")?new URL(g.protocol+d):new URL(d),C=jp(w.pathname,i);w.origin===g.origin&&C!=null?d=C+w.search+w.hash:o=!0}catch{}let a=Eb(d,{relative:v}),m=nS(d,{replace:_,state:T,target:E,preventScrollReset:r,relative:v,viewTransition:c});function f(g){x&&x(g),g.defaultPrevented||m(g)}return ae.createElement("a",ep({},l,{href:s||a,onClick:o||S?x:f,ref:h,target:E}))});var B0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(B0||(B0={}));var z0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(z0||(z0={}));function nS(t,e){let{target:h,replace:x,state:v,preventScrollReset:S,relative:_,viewTransition:T}=e===void 0?{}:e,E=Ns(),d=Ma(),r=rx(t,{relative:_});return ae.useCallback(c=>{if(qb(c,h)){c.preventDefault();let l=x!==void 0?x:Qd(d)===Qd(r);E(t,{replace:l,state:v,preventScrollReset:S,relative:_,viewTransition:T})}},[d,E,r,x,v,h,t,S,_,T])}function rS(t){let e=ae.useRef(tp(t)),h=ae.useRef(!1),x=Ma(),v=ae.useMemo(()=>Kb(x.search,h.current?null:e.current),[x.search]),S=Ns(),_=ae.useCallback((T,E)=>{const d=tp(typeof T=="function"?T(v):T);h.current=!0,S("?"+d,E)},[S,v]);return[v,_]}const iS={},Np=iS?.VITE_API_BASE?void 0:"https://my-backend-production-3416.up.railway.app";function sS(t,e){const h=String(t||"").replace(/\/+$/,"/");return new URL(e,h).toString()}async function Ld(t,e={}){const h=(Gt?.language||"ru").split("-")[0],x=new URL(sS(Np,t));x.searchParams.has("lng")||x.searchParams.set("lng",h);const v=await fetch(x.toString(),{method:e.method||"GET",headers:{"Content-Type":"application/json","Accept-Language":h,...e.headers||{}},credentials:"include",body:e.body});let S=null;try{S=await v.json()}catch{}if(!v.ok||S&&S.success===!1){const _=S&&(S.error||S.message)||`${v.status} ${v.statusText}`;throw new Error(_)}return S}const ox=ae.createContext(),Kl=()=>{const t=ae.useContext(ox);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},lx=({children:t})=>{const[e,h]=ae.useState(null),[x,v]=ae.useState(!0);ae.useEffect(()=>{S()},[]);const S=async()=>{try{const d=await Ld("/api/auth/me");d.success&&d.user?h(d.user):h(null)}catch(d){console.error("Auth check error:",d),h(null)}finally{v(!1)}},_=async(d,r)=>{try{const c=await Ld("/api/auth/login",{method:"POST",body:JSON.stringify({email:d,password:r})});return c.success&&c.user&&h(c.user),c}catch(c){return console.error("Login error:",c),{success:!1,error:c.message||" "}}},T=async(d,r,c,l)=>{try{const i=await Ld("/api/auth/register",{method:"POST",body:JSON.stringify({name:d,email:r,password:c,phone:l})});return i.success&&i.user&&h(i.user),i}catch(i){return console.error("Register error:",i),{success:!1,error:i.message||" "}}},E=async()=>{try{await Ld("/api/auth/logout",{method:"POST"})}catch(d){console.error("Logout error:",d)}finally{h(null),localStorage.removeItem("cart")}};return k.jsx(ox.Provider,{value:{user:e,isLoading:x,login:_,register:T,logout:E},children:t})},ux=ae.createContext(),Ls=()=>{const t=ae.useContext(ux);if(!t)throw new Error("useCart must be used within a CartProvider");return t},aS=({children:t})=>{const[e,h]=ae.useState([]),[x,v]=ae.useState(!1);ae.useEffect(()=>{try{console.log(" CartProvider: Loading cart from localStorage");const i=localStorage.getItem("cart");if(i){const s=JSON.parse(i);Array.isArray(s)&&(h(s),console.log(" CartProvider: Loaded",s.length,"items from localStorage"))}}catch(i){console.error(" CartProvider: Error loading cart:",i),h([])}},[]),ae.useEffect(()=>{try{console.log(" CartProvider: Saving cart to localStorage, items:",e.length),localStorage.setItem("cart",JSON.stringify(e))}catch(i){console.error(" CartProvider: Error saving cart:",i)}},[e]);const l={cartItems:e,addToCart:i=>{console.log(" addToCart: Adding product:",i.name),h(s=>{const o=s.find(a=>a.id===i.id);if(o){const a=s.map(m=>m.id===i.id?{...m,quantity:m.quantity+50}:m);return console.log(" addToCart: Updated existing item, new quantity:",o.quantity+50),a}else{const a={...i,quantity:50,id:i.id||String(Math.random()),image:i.image||i.images?.[0]?.url||"https://via.placeholder.com/100x100?text=No+Image"},m=[...s,a];return console.log(" addToCart: Added new item, total items:",m.length),m}})},removeFromCart:i=>{console.log(" removeFromCart: Removing product ID:",i),h(s=>{const o=s.filter(a=>a.id!==i);return console.log(" removeFromCart: Removed item, remaining items:",o.length),o})},updateQuantity:(i,s)=>{const o=Math.max(50,parseInt(s)||50);console.log(" updateQuantity: Product ID:",i,"New quantity:",o),h(a=>a.map(m=>m.id===i?{...m,quantity:o}:m))},clearCart:()=>{console.log(" clearCart: Clearing all items"),h([])},getCartTotal:()=>{const i=e.reduce((s,o)=>{try{const a=parseFloat(String(o.price).replace(/[^\d.]/g,""))||0;return s+a*o.quantity}catch{return s}},0);return console.log(" getCartTotal: Total:",i),i},getCartItemsCount:()=>{const i=e.reduce((s,o)=>s+o.quantity,0);return console.log(" getCartItemsCount: Count:",i),i},isOpen:x,setIsOpen:i=>{console.log(" setIsOpen: Setting isOpen to:",i),v(i)}};return console.log(" CartProvider: Rendering with isOpen:",x,"items:",e.length),k.jsx(ux.Provider,{value:l,children:t})},cx=ae.createContext(),oS=()=>{const t=ae.useContext(cx);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},lS=({children:t})=>{const[e,h]=ae.useState(!1),[x,v]=ae.useState(!1);ae.useEffect(()=>{v(!0);const _=localStorage.getItem("theme"),T=window.matchMedia("(prefers-color-scheme: dark)").matches;_==="dark"||!_&&T?(h(!0),document.documentElement.classList.add("dark")):document.documentElement.classList.remove("dark")},[]),ae.useEffect(()=>{x&&(localStorage.setItem("theme",e?"dark":"light"),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},[e,x]);const S=()=>h(!e);return k.jsx(cx.Provider,{value:{isDark:e,toggleTheme:S},children:t})};var uS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hS=(t,e)=>{const h=ae.forwardRef(({color:x="currentColor",size:v=24,strokeWidth:S=2,absoluteStrokeWidth:_,children:T,...E},d)=>ae.createElement("svg",{ref:d,...uS,width:v,height:v,stroke:x,strokeWidth:_?Number(S)*24/Number(v):S,className:`lucide lucide-${cS(t)}`,...E},[...e.map(([r,c])=>ae.createElement(r,c)),...(Array.isArray(T)?T:[T])||[]]));return h.displayName=`${t}`,h};var $e=hS;const hx=$e("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),dS=$e("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]),fS=$e("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]),gS=$e("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]),Lp=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),np=$e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),pS=$e("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),mS=$e("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),vS=$e("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),rh=$e("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),dx=$e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),yS=$e("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Ud=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Mp=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Gl=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),hg=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),xS=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),wS=$e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),_S=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),bS=$e("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),SS=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),CS=$e("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),kS=$e("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),rp=$e("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),TS=$e("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),U0=$e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),PS=$e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),V0=$e("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ES=$e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Gc=$e("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),jS=$e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),G0=$e("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Jd=$e("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),OS=$e("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),H0=$e("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Fl=$e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Zd=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),NS=$e("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),fx=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),LS=$e("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),MS=$e("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),gx=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),AS=$e("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),px=$e("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),RS=$e("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),$l=$e("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ap=$e("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),dg=$e("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),W0=$e("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),hf=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),X0=$e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Rp=$e("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),DS=$e("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),FS=$e("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),Y0=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),mx=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ql=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),IS=$e("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),BS=$e("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),vx=({isOpen:t,onClose:e})=>{const[h,x]=ae.useState(!0),[v,S]=ae.useState({name:"",email:"",password:"",phone:""}),[_,T]=ae.useState(""),[E,d]=ae.useState(!1),{login:r,register:c}=Kl(),{t:l}=cn(),i=Ns(),s=m=>{const{name:f,value:g}=m.target;S(w=>({...w,[f]:g})),T("")},o=async m=>{m.preventDefault(),d(!0),T("");try{let f;h?f=await r(v.email,v.password):f=await c(v.name,v.email,v.password,v.phone),f.success?(e(),S({name:"",email:"",password:"",phone:""}),f.user?.role==="admin"?i("/admin"):i("/profile")):T(f.error)}catch(f){console.error(f),T(" .  .")}finally{d(!1)}},a=()=>{x(!h),T(""),S({name:"",email:"",password:"",phone:""})};return t?k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4",children:k.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-6 w-full max-w-md text-gray-900 dark:text-gray-100",children:["        ",k.jsxs("div",{className:"flex justify-between items-center mb-4",children:[k.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:l(h?"auth.login":"auth.register")}),k.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:k.jsx(Ql,{className:"w-5 h-5"})})]}),_&&k.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg mb-4",children:_}),k.jsxs("form",{onSubmit:o,className:"space-y-4",children:[!h&&k.jsxs(k.Fragment,{children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:l("auth.name")}),k.jsx("input",{type:"text",id:"name",name:"name",value:v.name,onChange:s,required:!0,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none
 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500`,placeholder:l("auth.name")})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:l("auth.phone")}),k.jsx("input",{type:"tel",id:"phone",name:"phone",value:v.phone,onChange:s,required:!0,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none
 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500`,placeholder:l("auth.phone")})]})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:l("auth.email")}),k.jsx("input",{type:"email",id:"email",name:"email",value:v.email,onChange:s,required:!0,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none
 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500`,placeholder:l("auth.email")})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:l("auth.password")}),k.jsx("input",{type:"password",id:"password",name:"password",value:v.password,onChange:s,required:!0,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none
 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500`,placeholder:l("auth.password")})]}),k.jsx("button",{type:"submit",disabled:E,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l(E?"common.loading":h?"auth.login":"auth.register")})]}),k.jsx("div",{className:"mt-6 text-center",children:k.jsxs("p",{className:"text-sm text-gray-600",children:[l(h?"auth.noAccount":"auth.hasAccount"),k.jsx("button",{onClick:a,className:"ml-1 text-blue-600 hover:underline font-medium",children:l(h?"auth.register":"auth.login")})]})})]})}):null},ip=()=>{const{t}=cn(),[e,h]=ae.useState({}),{cartItems:x,updateQuantity:v,removeFromCart:S,getCartTotal:_,getCartItemsCount:T,clearCart:E,isOpen:d,setIsOpen:r}=Ls(),c=Ns();console.log(" Cart Component: Rendering with isOpen =",d,"items count =",x.length),ae.useEffect(()=>{const m=document.body.style.overflow;return d?(console.log(" Cart: Disabling body scroll"),document.body.style.overflow="hidden"):(console.log(" Cart: Re-enabling body scroll"),document.body.style.overflow=""),()=>{console.log(" Cart: Cleanup restoring previous body scroll"),document.body.style.overflow=m}},[d]);const l=m=>parseFloat(m.replace(/[^\d.]/g,"")).toLocaleString("ru-RU")+" ",i=()=>{console.log(" Cart: Checkout clicked"),r(!1),c("/checkout")},s=()=>{console.log(" Cart: Close button clicked"),r(!1)},o=m=>{console.log(" Cart: Backdrop clicked"),m.target===m.currentTarget&&r(!1)},a=m=>{console.log(" Cart: Modal content clicked"),m.stopPropagation()};return d?(console.log(" Cart: Rendering modal portal to document.body"),eb.createPortal(k.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4",onClick:o,children:k.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg w-full max-w-md max-h-[90vh] flex flex-col shadow-xl border border-gray-200 dark:border-gray-700",onClick:a,children:[k.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[k.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t("cart.title")," (",T(),")"]}),k.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-600 dark:text-gray-400",children:k.jsx(Ql,{className:"w-5 h-5"})})]}),k.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x.length===0?k.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[k.jsx($l,{className:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),k.jsx("p",{className:"text-lg dark:text-gray-300",children:t("cart.empty")}),k.jsx("p",{className:"text-sm dark:text-gray-400",children:t("cart.emptyDescription")})]}):k.jsx("div",{className:"space-y-4",children:x.map(m=>k.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800",children:[k.jsx("img",{src:m.image||"https://via.placeholder.com/100x100?text=No+Image",alt:m.name,className:"w-16 h-16 object-cover rounded-lg",onError:f=>{f.target.src="https://via.placeholder.com/100x100?text=No+Image"}}),k.jsxs("div",{className:"flex-1",children:[k.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:m.name}),k.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:l(m.price)}),k.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[k.jsx("button",{onClick:()=>{console.log(" Cart: Decrease quantity for",m.name),v(m.id,m.quantity-50)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors text-gray-600 dark:text-gray-400",children:k.jsx(jS,{className:"w-4 h-4"})}),k.jsx("input",{type:"number",min:50,inputMode:"numeric",value:e[m.id]??m.quantity,onChange:f=>{const g=f.target.value;console.log(" Cart: Input changed for",m.name,"value:",g),h(w=>({...w,[m.id]:g})),v(m.id,g)},onBlur:()=>{const f=e[m.id]??m.quantity;console.log(" Cart: Input blurred for",m.name,"final value:",f),v(m.id,f),h(g=>{const w={...g};return delete w[m.id],w})},className:"w-24 text-center border border-gray-300 dark:border-gray-600 rounded-md py-1 no-number-spin bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),k.jsx("button",{onClick:()=>{console.log(" Cart: Increase quantity for",m.name),v(m.id,m.quantity+50)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors text-gray-600 dark:text-gray-400",children:k.jsx(Zd,{className:"w-4 h-4"})}),k.jsx("button",{onClick:()=>{console.log(" Cart: Remove item",m.name),S(m.id)},className:"p-1 hover:bg-red-100 dark:hover:bg-red-900 text-red-600 dark:text-red-400 rounded-full transition-colors ml-2",children:k.jsx(hf,{className:"w-4 h-4"})})]})]})]},m.id))})}),x.length>0&&k.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[k.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[k.jsx("span",{className:"text-gray-900 dark:text-white",children:t("cart.total")}),k.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[_().toLocaleString("ru-RU")," "]})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("button",{onClick:i,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:t("cart.checkout")}),k.jsx("button",{onClick:()=>{console.log(" Cart: Clear cart clicked"),E()},className:"w-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:t("cart.clearCart")})]})]})]})}),document.body)):(console.log(" Cart: Not rendering because isOpen is false"),null)},q0=()=>{const{i18n:t}=cn(),[e,h]=ae.useState(!1),x=[{code:"ru",name:"",short:"RU",flag:""},{code:"kk",name:"",short:"",flag:""},{code:"en",name:"English",short:"EN",flag:""}],v=x.find(_=>_.code===t.language.split("-")[0])||x[0],S=_=>{t.changeLanguage(_),localStorage.setItem("i18nextLng",_),document.documentElement.lang=_,h(!1)};return k.jsxs("div",{className:"relative z-50",children:[k.jsxs("button",{onClick:()=>h(!e),className:"flex items-center space-x-2 px-3 py-2 text-gray-700 dark:text-gray-200 hover:text-blue-600 transition-colors rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-blue-300 min-w-[80px]",children:[k.jsx(CS,{className:"w-4 h-4"}),k.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:v.short}),k.jsx("span",{className:"text-sm font-medium sm:hidden",children:v.flag}),k.jsx(Ud,{className:`w-4 h-4 transition-transform ${e?"rotate-180":""}`})]}),e&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)}),k.jsx("div",{className:"absolute top-full left-0 sm:left-auto sm:right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 py-2",children:x.map(_=>k.jsxs("button",{onClick:()=>S(_.code),className:`w-full flex items-center space-x-3 px-4 py-2 text-left transition-colors ${t.language.startsWith(_.code)?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[k.jsx("span",{className:"text-lg",children:_.flag}),k.jsxs("div",{className:"flex-1",children:[k.jsx("div",{className:"font-medium text-sm",children:_.name}),k.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:_.short})]}),t.language.startsWith(_.code)&&k.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]},_.code))})]})]})},zS=()=>{const t=Ma(),{user:e,logout:h}=Kl(),{clearCart:x}=Ls(),{t:v}=cn(),{isDark:S,toggleTheme:_}=oS(),[T,E]=ae.useState(!1),[d,r]=ae.useState(!1),c=ae.useRef(null);ae.useEffect(()=>{const s=c.current;if(!s)return;const o=()=>document.documentElement.style.setProperty("--nav-h",`${s.offsetHeight}px`);o();const a=new ResizeObserver(o);return a.observe(s),()=>a.disconnect()},[]);const l=s=>t.pathname===s,i=()=>{e?(x(),h()):E(!0)};return k.jsxs(k.Fragment,{children:[k.jsx("header",{ref:c,className:`sticky top-0 z-40 border-b-0 shadow-none 
             bg-[rgba(15,23,42,0.6)] dark:bg-[rgba(0,0,0,0.6)] 
             backdrop-blur-md backdrop-saturate-150 
             supports-[backdrop-filter]:bg-[rgba(255,255,255,0.05)] 
             dark:supports-[backdrop-filter]:bg-[rgba(0,0,0,0.4)] 
             transition-all duration-300`,children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"flex justify-between items-center h-16",children:[k.jsxs(Ts,{to:"/",className:"flex items-center gap-2",children:[k.jsx("img",{src:"/images/logo.png",alt:"Salt Lake",className:"h-10 sm:h-12 w-auto"}),k.jsx("span",{className:"text-xl sm:text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Salt Lake"})]}),k.jsx("nav",{className:"hidden md:flex space-x-8",children:[{to:"/",label:v("header.nav.home")},{to:"/catalog",label:v("header.nav.catalog")},{to:"/news",label:v("header.nav.news")},{to:"/about",label:v("header.nav.about")},{to:"/contacts",label:v("header.nav.contacts")}].map(s=>k.jsx(Ts,{to:s.to,className:`px-3 py-2 text-sm font-medium ${l(s.to)?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400"}`,children:s.label},s.to))}),k.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[k.jsx(q0,{}),k.jsx("button",{onClick:_,className:"p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:v(S?"header.theme.light":"header.theme.dark"),children:S?k.jsx(W0,{className:"w-5 h-5"}):k.jsx(G0,{className:"w-5 h-5"})}),k.jsx(ip,{}),e?k.jsxs("div",{className:"flex items-center space-x-3",children:[k.jsxs(Ts,{to:e.role==="admin"?"/admin":"/profile",className:"inline-flex items-center text-sm text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:[k.jsx(Y0,{className:"w-4 h-4 mr-1"}),k.jsx("span",{children:e.role==="admin"?v("header.admin"):v("header.profile")})]}),k.jsx("span",{className:"hidden lg:inline text-sm text-gray-500 dark:text-gray-400",children:e.name}),k.jsx("button",{onClick:i,className:"p-2 text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:v("header.nav.logout"),children:k.jsx(U0,{className:"w-5 h-5"})})]}):k.jsx("button",{onClick:i,className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors",children:v("header.nav.login")})]}),k.jsx("button",{onClick:()=>r(s=>!s),className:"md:hidden p-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:d?k.jsx(Ql,{className:"w-6 h-6"}):k.jsx(ES,{className:"w-6 h-6"})})]}),d&&k.jsxs("div",{className:"md:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 py-4",children:[k.jsxs("nav",{className:"flex flex-col space-y-4 px-4",children:[k.jsx(Ts,{to:"/",onClick:()=>r(!1),children:v("header.nav.home")}),k.jsx(Ts,{to:"/catalog",onClick:()=>r(!1),children:v("header.nav.catalog")}),k.jsx(Ts,{to:"/news",onClick:()=>r(!1),children:v("header.nav.news")}),k.jsx(Ts,{to:"/about",onClick:()=>r(!1),children:v("header.nav.about")}),k.jsx(Ts,{to:"/contacts",onClick:()=>r(!1),children:v("header.nav.contacts")})]}),k.jsxs("div",{className:"mt-4 flex items-center justify-between px-4",children:[k.jsx(q0,{}),k.jsx("button",{onClick:_,className:"p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:v(S?"header.theme.light":"header.theme.dark"),children:S?k.jsx(W0,{className:"w-5 h-5"}):k.jsx(G0,{className:"w-5 h-5"})})]}),k.jsxs("div",{className:"mt-4 border-t border-gray-200 dark:border-gray-700 pt-4 px-4 flex flex-col space-y-3",children:[k.jsx(ip,{}),e?k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsxs(Ts,{to:e.role==="admin"?"/admin":"/profile",onClick:()=>r(!1),className:"inline-flex items-center text-sm text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:[k.jsx(Y0,{className:"w-4 h-4 mr-1"}),k.jsx("span",{children:e.role==="admin"?v("header.admin"):v("header.profile")})]}),k.jsx("button",{onClick:i,className:"p-2 text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:k.jsx(U0,{className:"w-5 h-5"})})]}):k.jsx("button",{onClick:i,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors",children:v("header.nav.login")})]})]})]})}),k.jsx("style",{children:`
        :root {
          --nav-h: 64px;
        }
      `}),k.jsx(vx,{isOpen:T,onClose:()=>E(!1)})]})},US=()=>{const{setIsOpen:t,getCartItemsCount:e}=Ls(),h=()=>{console.log(" FloatingCart button clicked!"),console.log(" Calling setIsOpen(true)"),t(!0)};return console.log(" FloatingCart rendering, count:",e()),k.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:k.jsxs("button",{onClick:h,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:scale-110 group relative animate-bounce-gentle",children:[k.jsx($l,{className:"w-6 h-6"}),e()>0&&k.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center animate-pulse",children:e()})]})})},VS=()=>{const{pathname:t}=Ma();return ae.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[t]),null},GS=({product:t,cartLabel:e})=>{const{addToCart:h}=Ls();return k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden min-w-[150px] max-w-[180px] animate-scale-in",children:[k.jsx("div",{className:"w-full h-24 bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:k.jsx("img",{src:t.image||"https://via.placeholder.com/200x150?text=No+Image",alt:t.name,className:"max-w-full max-h-full object-contain",onError:x=>x.currentTarget.src="https://via.placeholder.com/200x150?text=No+Image"})}),k.jsxs("div",{className:"p-2",children:[k.jsx("a",{href:t.url||"#",className:"block text-xs font-semibold text-gray-900 dark:text-gray-100 line-clamp-2 hover:underline",title:t.name,children:t.name}),k.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[k.jsx("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:t.price}),k.jsxs("button",{onClick:()=>h(t),className:"inline-flex items-center gap-1 rounded-md px-2 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 transition",title:e||" ",children:[k.jsx($l,{className:"w-3 h-3"}),e||" ."," "]})]})]})]})},HS="https://my-backend-production-3416.up.railway.app",WS=()=>{const{t,i18n:e}=cn(),{cartItems:h}=Ls(),[x,v]=ae.useState(!1),[S,_]=ae.useState(""),[T,E]=ae.useState(!1),[d,r]=ae.useState(!1),[c,l]=ae.useState(!0),[i,s]=ae.useState(()=>localStorage.getItem("chatSessionId")),[o,a]=ae.useState([{role:"assistant",content:t("chat.greeting"),products:[],ui:{}}]),m=ae.useRef(null),f=ae.useMemo(()=>h.map(C=>({id:C.id,name:C.name,quantity:C.quantity})),[h]);ae.useEffect(()=>{x&&m.current&&m.current.scrollIntoView({behavior:"smooth"})},[x,o]);const g=async C=>{if(!C.trim())return;const P=[...o,{role:"user",content:C}];a(P),_(""),E(!0),r(!0),l(!1);try{const L=await(await fetch(`${HS}/api/assistant`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:i,messages:P.map(D=>({role:D.role,content:D.content})),locale:i?void 0:e.language||"ru",cartSnapshot:f,limit:33})})).json();L.sessionId&&L.sessionId!==i&&(s(L.sessionId),localStorage.setItem("chatSessionId",L.sessionId));const B=L?.reply||t("chat.error.general");a(D=>[...D,{role:"assistant",content:B,products:L.products||[],ui:L.ui||{}}])}catch(M){console.error(" Assistant error:",M),a(L=>[...L,{role:"assistant",content:t("chat.error.network"),products:[],ui:{}}])}finally{E(!1),r(!1)}},w=[t("chat.quick.stars5"),t("chat.quick.logo"),t("chat.quick.delivery"),t("chat.quick.eco")];return k.jsxs(k.Fragment,{children:[!x&&k.jsx("button",{onClick:()=>v(!0),className:"fixed bottom-6 left-6 z-50 bg-[#1e3a8a] text-white p-4 rounded-full shadow-lg hover:bg-[#1e40af] transition-all animate-bounce-gentle","aria-label":t("chat.open"),children:k.jsx(Gc,{className:"w-6 h-6 animate-pulse-slow"})}),x&&k.jsxs("div",{className:"fixed bottom-6 left-6 z-50 w-[92vw] max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex flex-col animate-scale-in",children:[k.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("img",{src:"/images/logo.png",alt:"Salt Lake",className:"w-7 h-7 rounded-lg object-contain"}),k.jsxs("div",{children:[k.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:t("chat.title")}),k.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[k.jsx(Ap,{className:"w-3 h-3 animate-pulse-slow"})," ",t("chat.status")]})]})]}),k.jsx("button",{onClick:()=>v(!1),className:"p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition","aria-label":t("chat.close"),children:k.jsx(Ql,{className:"w-5 h-5"})})]}),k.jsxs("div",{className:"px-3 py-3 space-y-3 h-80 overflow-y-auto",children:[o.map((C,P)=>k.jsxs("div",{className:"flex flex-col space-y-2 animate-slide-up",children:[k.jsx("div",{className:`flex ${C.role==="assistant"?"justify-start":"justify-end"}`,children:k.jsx("div",{className:`${C.role==="assistant"?"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100":"bg-[#1e3a8a] text-white"} px-3 py-2 rounded-2xl max-w-[80%] whitespace-pre-wrap`,children:C.content})}),C.role==="assistant"&&C.products?.length>0&&k.jsx("div",{className:"grid grid-cols-2 gap-3 ml-2",children:C.products.map(M=>k.jsx(GS,{product:M,cartLabel:C.ui?.cartLabel||" "},M.id))})]},P)),d&&k.jsx("div",{className:"flex justify-start",children:k.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 text-gray-500 px-3 py-2 rounded-2xl text-sm flex gap-1",children:[k.jsx("span",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),k.jsx("span",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce [animation-delay:0.2s]"}),k.jsx("span",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce [animation-delay:0.4s]"})]})}),k.jsx("div",{ref:m})]}),c&&k.jsx("div",{className:"px-3 pb-2 flex gap-2 flex-wrap",children:w.map((C,P)=>k.jsx("button",{onClick:()=>g(C),className:"text-xs px-3 py-1 rounded-full border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition animate-fade-in",children:C},P))}),k.jsxs("form",{onSubmit:C=>{C.preventDefault(),g(S)},className:"p-3 border-t border-gray-200 dark:border-gray-700 flex items-center gap-2",children:[k.jsx("input",{value:S,onChange:C=>_(C.target.value),placeholder:t("chat.placeholder"),className:"flex-1 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-xl px-3 py-2 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-[#1e3a8a] transition"}),k.jsxs("button",{disabled:T||!S.trim(),className:"bg-[#1e3a8a] disabled:opacity-50 text-white px-3 py-2 rounded-xl hover:bg-[#1e40af] transition inline-flex items-center gap-1 animate-scale-in",children:[k.jsx(AS,{className:"w-4 h-4"}),k.jsx("span",{className:"hidden sm:inline",children:t("chat.send")})]})]})]})]})},ih=({size:t="medium",text:e=null})=>{const{t:h}=cn(),x={small:"w-6 h-6",medium:"w-8 h-8",large:"w-12 h-12"},v={small:"text-sm",medium:"text-base",large:"text-lg"};return k.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[k.jsx(fx,{className:`${x[t]} animate-spin text-blue-600 mb-4`}),k.jsx("p",{className:`text-gray-600 ${v[t]}`,children:e||h("common.loading")})]})},Dp=ae.createContext({});function Fp(t){const e=ae.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ip=typeof window<"u",yx=Ip?ae.useLayoutEffect:ae.useEffect,df=ae.createContext(null);function Bp(t,e){t.indexOf(e)===-1&&t.push(e)}function zp(t,e){const h=t.indexOf(e);h>-1&&t.splice(h,1)}const js=(t,e,h)=>h>e?e:h<t?t:h;let Up=()=>{};const Os={},xx=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function wx(t){return typeof t=="object"&&t!==null}const _x=t=>/^0[^.\s]+$/u.test(t);function Vp(t){let e;return()=>(e===void 0&&(e=t()),e)}const ri=t=>t,XS=(t,e)=>h=>e(t(h)),ph=(...t)=>t.reduce(XS),sh=(t,e,h)=>{const x=e-t;return x===0?1:(h-t)/x};class Gp{constructor(){this.subscriptions=[]}add(e){return Bp(this.subscriptions,e),()=>zp(this.subscriptions,e)}notify(e,h,x){const v=this.subscriptions.length;if(v)if(v===1)this.subscriptions[0](e,h,x);else for(let S=0;S<v;S++){const _=this.subscriptions[S];_&&_(e,h,x)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qi=t=>t*1e3,ni=t=>t/1e3;function bx(t,e){return e?t*(1e3/e):0}const Sx=(t,e,h)=>(((1-3*h+3*e)*t+(3*h-6*e))*t+3*e)*t,YS=1e-7,qS=12;function KS(t,e,h,x,v){let S,_,T=0;do _=e+(h-e)/2,S=Sx(_,x,v)-t,S>0?h=_:e=_;while(Math.abs(S)>YS&&++T<qS);return _}function mh(t,e,h,x){if(t===e&&h===x)return ri;const v=S=>KS(S,0,1,t,h);return S=>S===0||S===1?S:Sx(v(S),e,x)}const Cx=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kx=t=>e=>1-t(1-e),Tx=mh(.33,1.53,.69,.99),Hp=kx(Tx),Px=Cx(Hp),Ex=t=>(t*=2)<1?.5*Hp(t):.5*(2-Math.pow(2,-10*(t-1))),Wp=t=>1-Math.sin(Math.acos(t)),jx=kx(Wp),Ox=Cx(Wp),$S=mh(.42,0,1,1),QS=mh(0,0,.58,1),Nx=mh(.42,0,.58,1),JS=t=>Array.isArray(t)&&typeof t[0]!="number",Lx=t=>Array.isArray(t)&&typeof t[0]=="number",ZS={linear:ri,easeIn:$S,easeInOut:Nx,easeOut:QS,circIn:Wp,circInOut:Ox,circOut:jx,backIn:Hp,backInOut:Px,backOut:Tx,anticipate:Ex},eC=t=>typeof t=="string",K0=t=>{if(Lx(t)){Up(t.length===4);const[e,h,x,v]=t;return mh(e,h,x,v)}else if(eC(t))return ZS[t];return t},Md=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function tC(t,e){let h=new Set,x=new Set,v=!1,S=!1;const _=new WeakSet;let T={delta:0,timestamp:0,isProcessing:!1};function E(r){_.has(r)&&(d.schedule(r),t()),r(T)}const d={schedule:(r,c=!1,l=!1)=>{const s=l&&v?h:x;return c&&_.add(r),s.has(r)||s.add(r),r},cancel:r=>{x.delete(r),_.delete(r)},process:r=>{if(T=r,v){S=!0;return}v=!0,[h,x]=[x,h],h.forEach(E),h.clear(),v=!1,S&&(S=!1,d.process(r))}};return d}const nC=40;function Mx(t,e){let h=!1,x=!0;const v={delta:0,timestamp:0,isProcessing:!1},S=()=>h=!0,_=Md.reduce((g,w)=>(g[w]=tC(S),g),{}),{setup:T,read:E,resolveKeyframes:d,preUpdate:r,update:c,preRender:l,render:i,postRender:s}=_,o=()=>{const g=Os.useManualTiming?v.timestamp:performance.now();h=!1,Os.useManualTiming||(v.delta=x?1e3/60:Math.max(Math.min(g-v.timestamp,nC),1)),v.timestamp=g,v.isProcessing=!0,T.process(v),E.process(v),d.process(v),r.process(v),c.process(v),l.process(v),i.process(v),s.process(v),v.isProcessing=!1,h&&e&&(x=!1,t(o))},a=()=>{h=!0,x=!0,v.isProcessing||t(o)};return{schedule:Md.reduce((g,w)=>{const C=_[w];return g[w]=(P,M=!1,L=!1)=>(h||a(),C.schedule(P,M,L)),g},{}),cancel:g=>{for(let w=0;w<Md.length;w++)_[Md[w]].cancel(g)},state:v,steps:_}}const{schedule:Ht,cancel:Na,state:$n,steps:fg}=Mx(typeof requestAnimationFrame<"u"?requestAnimationFrame:ri,!0);let Vd;function rC(){Vd=void 0}const Or={now:()=>(Vd===void 0&&Or.set($n.isProcessing||Os.useManualTiming?$n.timestamp:performance.now()),Vd),set:t=>{Vd=t,queueMicrotask(rC)}},Ax=t=>e=>typeof e=="string"&&e.startsWith(t),Xp=Ax("--"),iC=Ax("var(--"),Yp=t=>iC(t)?sC.test(t.split("/*")[0].trim()):!1,sC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Jl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ah={...Jl,transform:t=>js(0,1,t)},Ad={...Jl,default:1},Yc=t=>Math.round(t*1e5)/1e5,qp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function aC(t){return t==null}const oC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Kp=(t,e)=>h=>!!(typeof h=="string"&&oC.test(h)&&h.startsWith(t)||e&&!aC(h)&&Object.prototype.hasOwnProperty.call(h,e)),Rx=(t,e,h)=>x=>{if(typeof x!="string")return x;const[v,S,_,T]=x.match(qp);return{[t]:parseFloat(v),[e]:parseFloat(S),[h]:parseFloat(_),alpha:T!==void 0?parseFloat(T):1}},lC=t=>js(0,255,t),gg={...Jl,transform:t=>Math.round(lC(t))},_o={test:Kp("rgb","red"),parse:Rx("red","green","blue"),transform:({red:t,green:e,blue:h,alpha:x=1})=>"rgba("+gg.transform(t)+", "+gg.transform(e)+", "+gg.transform(h)+", "+Yc(ah.transform(x))+")"};function uC(t){let e="",h="",x="",v="";return t.length>5?(e=t.substring(1,3),h=t.substring(3,5),x=t.substring(5,7),v=t.substring(7,9)):(e=t.substring(1,2),h=t.substring(2,3),x=t.substring(3,4),v=t.substring(4,5),e+=e,h+=h,x+=x,v+=v),{red:parseInt(e,16),green:parseInt(h,16),blue:parseInt(x,16),alpha:v?parseInt(v,16)/255:1}}const sp={test:Kp("#"),parse:uC,transform:_o.transform},vh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pa=vh("deg"),Ki=vh("%"),tt=vh("px"),cC=vh("vh"),hC=vh("vw"),$0={...Ki,parse:t=>Ki.parse(t)/100,transform:t=>Ki.transform(t*100)},Il={test:Kp("hsl","hue"),parse:Rx("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:h,alpha:x=1})=>"hsla("+Math.round(t)+", "+Ki.transform(Yc(e))+", "+Ki.transform(Yc(h))+", "+Yc(ah.transform(x))+")"},xn={test:t=>_o.test(t)||sp.test(t)||Il.test(t),parse:t=>_o.test(t)?_o.parse(t):Il.test(t)?Il.parse(t):sp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_o.transform(t):Il.transform(t),getAnimatableNone:t=>{const e=xn.parse(t);return e.alpha=0,xn.transform(e)}},dC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fC(t){return isNaN(t)&&typeof t=="string"&&(t.match(qp)?.length||0)+(t.match(dC)?.length||0)>0}const Dx="number",Fx="color",gC="var",pC="var(",Q0="${}",mC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function oh(t){const e=t.toString(),h=[],x={color:[],number:[],var:[]},v=[];let S=0;const T=e.replace(mC,E=>(xn.test(E)?(x.color.push(S),v.push(Fx),h.push(xn.parse(E))):E.startsWith(pC)?(x.var.push(S),v.push(gC),h.push(E)):(x.number.push(S),v.push(Dx),h.push(parseFloat(E))),++S,Q0)).split(Q0);return{values:h,split:T,indexes:x,types:v}}function Ix(t){return oh(t).values}function Bx(t){const{split:e,types:h}=oh(t),x=e.length;return v=>{let S="";for(let _=0;_<x;_++)if(S+=e[_],v[_]!==void 0){const T=h[_];T===Dx?S+=Yc(v[_]):T===Fx?S+=xn.transform(v[_]):S+=v[_]}return S}}const vC=t=>typeof t=="number"?0:xn.test(t)?xn.getAnimatableNone(t):t;function yC(t){const e=Ix(t);return Bx(t)(e.map(vC))}const La={test:fC,parse:Ix,createTransformer:Bx,getAnimatableNone:yC};function pg(t,e,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?t+(e-t)*6*h:h<1/2?e:h<2/3?t+(e-t)*(2/3-h)*6:t}function xC({hue:t,saturation:e,lightness:h,alpha:x}){t/=360,e/=100,h/=100;let v=0,S=0,_=0;if(!e)v=S=_=h;else{const T=h<.5?h*(1+e):h+e-h*e,E=2*h-T;v=pg(E,T,t+1/3),S=pg(E,T,t),_=pg(E,T,t-1/3)}return{red:Math.round(v*255),green:Math.round(S*255),blue:Math.round(_*255),alpha:x}}function ef(t,e){return h=>h>0?e:t}const qt=(t,e,h)=>t+(e-t)*h,mg=(t,e,h)=>{const x=t*t,v=h*(e*e-x)+x;return v<0?0:Math.sqrt(v)},wC=[sp,_o,Il],_C=t=>wC.find(e=>e.test(t));function J0(t){const e=_C(t);if(!e)return!1;let h=e.parse(t);return e===Il&&(h=xC(h)),h}const Z0=(t,e)=>{const h=J0(t),x=J0(e);if(!h||!x)return ef(t,e);const v={...h};return S=>(v.red=mg(h.red,x.red,S),v.green=mg(h.green,x.green,S),v.blue=mg(h.blue,x.blue,S),v.alpha=qt(h.alpha,x.alpha,S),_o.transform(v))},ap=new Set(["none","hidden"]);function bC(t,e){return ap.has(t)?h=>h<=0?t:e:h=>h>=1?e:t}function SC(t,e){return h=>qt(t,e,h)}function $p(t){return typeof t=="number"?SC:typeof t=="string"?Yp(t)?ef:xn.test(t)?Z0:TC:Array.isArray(t)?zx:typeof t=="object"?xn.test(t)?Z0:CC:ef}function zx(t,e){const h=[...t],x=h.length,v=t.map((S,_)=>$p(S)(S,e[_]));return S=>{for(let _=0;_<x;_++)h[_]=v[_](S);return h}}function CC(t,e){const h={...t,...e},x={};for(const v in h)t[v]!==void 0&&e[v]!==void 0&&(x[v]=$p(t[v])(t[v],e[v]));return v=>{for(const S in x)h[S]=x[S](v);return h}}function kC(t,e){const h=[],x={color:0,var:0,number:0};for(let v=0;v<e.values.length;v++){const S=e.types[v],_=t.indexes[S][x[S]],T=t.values[_]??0;h[v]=T,x[S]++}return h}const TC=(t,e)=>{const h=La.createTransformer(e),x=oh(t),v=oh(e);return x.indexes.var.length===v.indexes.var.length&&x.indexes.color.length===v.indexes.color.length&&x.indexes.number.length>=v.indexes.number.length?ap.has(t)&&!v.values.length||ap.has(e)&&!x.values.length?bC(t,e):ph(zx(kC(x,v),v.values),h):ef(t,e)};function Ux(t,e,h){return typeof t=="number"&&typeof e=="number"&&typeof h=="number"?qt(t,e,h):$p(t)(t,e)}const PC=t=>{const e=({timestamp:h})=>t(h);return{start:(h=!0)=>Ht.update(e,h),stop:()=>Na(e),now:()=>$n.isProcessing?$n.timestamp:Or.now()}},Vx=(t,e,h=10)=>{let x="";const v=Math.max(Math.round(e/h),2);for(let S=0;S<v;S++)x+=Math.round(t(S/(v-1))*1e4)/1e4+", ";return`linear(${x.substring(0,x.length-2)})`},tf=2e4;function Qp(t){let e=0;const h=50;let x=t.next(e);for(;!x.done&&e<tf;)e+=h,x=t.next(e);return e>=tf?1/0:e}function EC(t,e=100,h){const x=h({...t,keyframes:[0,e]}),v=Math.min(Qp(x),tf);return{type:"keyframes",ease:S=>x.next(v*S).value/e,duration:ni(v)}}const jC=5;function Gx(t,e,h){const x=Math.max(e-jC,0);return bx(h-t(x),e-x)}const Zt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vg=.001;function OC({duration:t=Zt.duration,bounce:e=Zt.bounce,velocity:h=Zt.velocity,mass:x=Zt.mass}){let v,S,_=1-e;_=js(Zt.minDamping,Zt.maxDamping,_),t=js(Zt.minDuration,Zt.maxDuration,ni(t)),_<1?(v=d=>{const r=d*_,c=r*t,l=r-h,i=op(d,_),s=Math.exp(-c);return vg-l/i*s},S=d=>{const c=d*_*t,l=c*h+h,i=Math.pow(_,2)*Math.pow(d,2)*t,s=Math.exp(-c),o=op(Math.pow(d,2),_);return(-v(d)+vg>0?-1:1)*((l-i)*s)/o}):(v=d=>{const r=Math.exp(-d*t),c=(d-h)*t+1;return-vg+r*c},S=d=>{const r=Math.exp(-d*t),c=(h-d)*(t*t);return r*c});const T=5/t,E=LC(v,S,T);if(t=qi(t),isNaN(E))return{stiffness:Zt.stiffness,damping:Zt.damping,duration:t};{const d=Math.pow(E,2)*x;return{stiffness:d,damping:_*2*Math.sqrt(x*d),duration:t}}}const NC=12;function LC(t,e,h){let x=h;for(let v=1;v<NC;v++)x=x-t(x)/e(x);return x}function op(t,e){return t*Math.sqrt(1-e*e)}const MC=["duration","bounce"],AC=["stiffness","damping","mass"];function ev(t,e){return e.some(h=>t[h]!==void 0)}function RC(t){let e={velocity:Zt.velocity,stiffness:Zt.stiffness,damping:Zt.damping,mass:Zt.mass,isResolvedFromDuration:!1,...t};if(!ev(t,AC)&&ev(t,MC))if(t.visualDuration){const h=t.visualDuration,x=2*Math.PI/(h*1.2),v=x*x,S=2*js(.05,1,1-(t.bounce||0))*Math.sqrt(v);e={...e,mass:Zt.mass,stiffness:v,damping:S}}else{const h=OC(t);e={...e,...h,mass:Zt.mass},e.isResolvedFromDuration=!0}return e}function nf(t=Zt.visualDuration,e=Zt.bounce){const h=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:x,restDelta:v}=h;const S=h.keyframes[0],_=h.keyframes[h.keyframes.length-1],T={done:!1,value:S},{stiffness:E,damping:d,mass:r,duration:c,velocity:l,isResolvedFromDuration:i}=RC({...h,velocity:-ni(h.velocity||0)}),s=l||0,o=d/(2*Math.sqrt(E*r)),a=_-S,m=ni(Math.sqrt(E/r)),f=Math.abs(a)<5;x||(x=f?Zt.restSpeed.granular:Zt.restSpeed.default),v||(v=f?Zt.restDelta.granular:Zt.restDelta.default);let g;if(o<1){const C=op(m,o);g=P=>{const M=Math.exp(-o*m*P);return _-M*((s+o*m*a)/C*Math.sin(C*P)+a*Math.cos(C*P))}}else if(o===1)g=C=>_-Math.exp(-m*C)*(a+(s+m*a)*C);else{const C=m*Math.sqrt(o*o-1);g=P=>{const M=Math.exp(-o*m*P),L=Math.min(C*P,300);return _-M*((s+o*m*a)*Math.sinh(L)+C*a*Math.cosh(L))/C}}const w={calculatedDuration:i&&c||null,next:C=>{const P=g(C);if(i)T.done=C>=c;else{let M=C===0?s:0;o<1&&(M=C===0?qi(s):Gx(g,C,P));const L=Math.abs(M)<=x,B=Math.abs(_-P)<=v;T.done=L&&B}return T.value=T.done?_:P,T},toString:()=>{const C=Math.min(Qp(w),tf),P=Vx(M=>w.next(C*M).value,C,30);return C+"ms "+P},toTransition:()=>{}};return w}nf.applyToOptions=t=>{const e=EC(t,100,nf);return t.ease=e.ease,t.duration=qi(e.duration),t.type="keyframes",t};function lp({keyframes:t,velocity:e=0,power:h=.8,timeConstant:x=325,bounceDamping:v=10,bounceStiffness:S=500,modifyTarget:_,min:T,max:E,restDelta:d=.5,restSpeed:r}){const c=t[0],l={done:!1,value:c},i=L=>T!==void 0&&L<T||E!==void 0&&L>E,s=L=>T===void 0?E:E===void 0||Math.abs(T-L)<Math.abs(E-L)?T:E;let o=h*e;const a=c+o,m=_===void 0?a:_(a);m!==a&&(o=m-c);const f=L=>-o*Math.exp(-L/x),g=L=>m+f(L),w=L=>{const B=f(L),D=g(L);l.done=Math.abs(B)<=d,l.value=l.done?m:D};let C,P;const M=L=>{i(l.value)&&(C=L,P=nf({keyframes:[l.value,s(l.value)],velocity:Gx(g,L,l.value),damping:v,stiffness:S,restDelta:d,restSpeed:r}))};return M(0),{calculatedDuration:null,next:L=>{let B=!1;return!P&&C===void 0&&(B=!0,w(L),M(L)),C!==void 0&&L>=C?P.next(L-C):(!B&&w(L),l)}}}function DC(t,e,h){const x=[],v=h||Os.mix||Ux,S=t.length-1;for(let _=0;_<S;_++){let T=v(t[_],t[_+1]);if(e){const E=Array.isArray(e)?e[_]||ri:e;T=ph(E,T)}x.push(T)}return x}function FC(t,e,{clamp:h=!0,ease:x,mixer:v}={}){const S=t.length;if(Up(S===e.length),S===1)return()=>e[0];if(S===2&&e[0]===e[1])return()=>e[1];const _=t[0]===t[1];t[0]>t[S-1]&&(t=[...t].reverse(),e=[...e].reverse());const T=DC(e,x,v),E=T.length,d=r=>{if(_&&r<t[0])return e[0];let c=0;if(E>1)for(;c<t.length-2&&!(r<t[c+1]);c++);const l=sh(t[c],t[c+1],r);return T[c](l)};return h?r=>d(js(t[0],t[S-1],r)):d}function IC(t,e){const h=t[t.length-1];for(let x=1;x<=e;x++){const v=sh(0,e,x);t.push(qt(h,1,v))}}function BC(t){const e=[0];return IC(e,t.length-1),e}function zC(t,e){return t.map(h=>h*e)}function UC(t,e){return t.map(()=>e||Nx).splice(0,t.length-1)}function qc({duration:t=300,keyframes:e,times:h,ease:x="easeInOut"}){const v=JS(x)?x.map(K0):K0(x),S={done:!1,value:e[0]},_=zC(h&&h.length===e.length?h:BC(e),t),T=FC(_,e,{ease:Array.isArray(v)?v:UC(e,v)});return{calculatedDuration:t,next:E=>(S.value=T(E),S.done=E>=t,S)}}const VC=t=>t!==null;function Jp(t,{repeat:e,repeatType:h="loop"},x,v=1){const S=t.filter(VC),T=v<0||e&&h!=="loop"&&e%2===1?0:S.length-1;return!T||x===void 0?S[T]:x}const GC={decay:lp,inertia:lp,tween:qc,keyframes:qc,spring:nf};function Hx(t){typeof t.type=="string"&&(t.type=GC[t.type])}class Zp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,h){return this.finished.then(e,h)}}const HC=t=>t/100;class em extends Zp{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:h}=this.options;h&&h.updatedAt!==Or.now()&&this.tick(Or.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Hx(e);const{type:h=qc,repeat:x=0,repeatDelay:v=0,repeatType:S,velocity:_=0}=e;let{keyframes:T}=e;const E=h||qc;E!==qc&&typeof T[0]!="number"&&(this.mixKeyframes=ph(HC,Ux(T[0],T[1])),T=[0,100]);const d=E({...e,keyframes:T});S==="mirror"&&(this.mirroredGenerator=E({...e,keyframes:[...T].reverse(),velocity:-_})),d.calculatedDuration===null&&(d.calculatedDuration=Qp(d));const{calculatedDuration:r}=d;this.calculatedDuration=r,this.resolvedDuration=r+v,this.totalDuration=this.resolvedDuration*(x+1)-v,this.generator=d}updateTime(e){const h=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=h}tick(e,h=!1){const{generator:x,totalDuration:v,mixKeyframes:S,mirroredGenerator:_,resolvedDuration:T,calculatedDuration:E}=this;if(this.startTime===null)return x.next(0);const{delay:d=0,keyframes:r,repeat:c,repeatType:l,repeatDelay:i,type:s,onUpdate:o,finalKeyframe:a}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-v/this.speed,this.startTime)),h?this.currentTime=e:this.updateTime(e);const m=this.currentTime-d*(this.playbackSpeed>=0?1:-1),f=this.playbackSpeed>=0?m<0:m>v;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let g=this.currentTime,w=x;if(c){const L=Math.min(this.currentTime,v)/T;let B=Math.floor(L),D=L%1;!D&&L>=1&&(D=1),D===1&&B--,B=Math.min(B,c+1),!!(B%2)&&(l==="reverse"?(D=1-D,i&&(D-=i/T)):l==="mirror"&&(w=_)),g=js(0,1,D)*T}const C=f?{done:!1,value:r[0]}:w.next(g);S&&(C.value=S(C.value));let{done:P}=C;!f&&E!==null&&(P=this.playbackSpeed>=0?this.currentTime>=v:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return M&&s!==lp&&(C.value=Jp(r,this.options,a,this.speed)),o&&o(C.value),M&&this.finish(),C}then(e,h){return this.finished.then(e,h)}get duration(){return ni(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ni(e)}get time(){return ni(this.currentTime)}set time(e){e=qi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Or.now());const h=this.playbackSpeed!==e;this.playbackSpeed=e,h&&(this.time=ni(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=PC,startTime:h}=this.options;this.driver||(this.driver=e(v=>this.tick(v))),this.options.onPlay?.();const x=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=x):this.holdTime!==null?this.startTime=x-this.holdTime:this.startTime||(this.startTime=h??x),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Or.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function WC(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const bo=t=>t*180/Math.PI,up=t=>{const e=bo(Math.atan2(t[1],t[0]));return cp(e)},XC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:up,rotateZ:up,skewX:t=>bo(Math.atan(t[1])),skewY:t=>bo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},cp=t=>(t=t%360,t<0&&(t+=360),t),tv=up,nv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),rv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),YC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:nv,scaleY:rv,scale:t=>(nv(t)+rv(t))/2,rotateX:t=>cp(bo(Math.atan2(t[6],t[5]))),rotateY:t=>cp(bo(Math.atan2(-t[2],t[0]))),rotateZ:tv,rotate:tv,skewX:t=>bo(Math.atan(t[4])),skewY:t=>bo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function hp(t){return t.includes("scale")?1:0}function dp(t,e){if(!t||t==="none")return hp(e);const h=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let x,v;if(h)x=YC,v=h;else{const T=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);x=XC,v=T}if(!v)return hp(e);const S=x[e],_=v[1].split(",").map(KC);return typeof S=="function"?S(_):_[S]}const qC=(t,e)=>{const{transform:h="none"}=getComputedStyle(t);return dp(h,e)};function KC(t){return parseFloat(t.trim())}const Zl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eu=new Set(Zl),iv=t=>t===Jl||t===tt,$C=new Set(["x","y","z"]),QC=Zl.filter(t=>!$C.has(t));function JC(t){const e=[];return QC.forEach(h=>{const x=t.getValue(h);x!==void 0&&(e.push([h,x.get()]),x.set(h.startsWith("scale")?1:0))}),e}const Co={width:({x:t},{paddingLeft:e="0",paddingRight:h="0"})=>t.max-t.min-parseFloat(e)-parseFloat(h),height:({y:t},{paddingTop:e="0",paddingBottom:h="0"})=>t.max-t.min-parseFloat(e)-parseFloat(h),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>dp(e,"x"),y:(t,{transform:e})=>dp(e,"y")};Co.translateX=Co.x;Co.translateY=Co.y;const ko=new Set;let fp=!1,gp=!1,pp=!1;function Wx(){if(gp){const t=Array.from(ko).filter(x=>x.needsMeasurement),e=new Set(t.map(x=>x.element)),h=new Map;e.forEach(x=>{const v=JC(x);v.length&&(h.set(x,v),x.render())}),t.forEach(x=>x.measureInitialState()),e.forEach(x=>{x.render();const v=h.get(x);v&&v.forEach(([S,_])=>{x.getValue(S)?.set(_)})}),t.forEach(x=>x.measureEndState()),t.forEach(x=>{x.suspendedScrollY!==void 0&&window.scrollTo(0,x.suspendedScrollY)})}gp=!1,fp=!1,ko.forEach(t=>t.complete(pp)),ko.clear()}function Xx(){ko.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(gp=!0)})}function ZC(){pp=!0,Xx(),Wx(),pp=!1}class tm{constructor(e,h,x,v,S,_=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=h,this.name=x,this.motionValue=v,this.element=S,this.isAsync=_}scheduleResolve(){this.state="scheduled",this.isAsync?(ko.add(this),fp||(fp=!0,Ht.read(Xx),Ht.resolveKeyframes(Wx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:h,element:x,motionValue:v}=this;if(e[0]===null){const S=v?.get(),_=e[e.length-1];if(S!==void 0)e[0]=S;else if(x&&h){const T=x.readValue(h,_);T!=null&&(e[0]=T)}e[0]===void 0&&(e[0]=_),v&&S===void 0&&v.set(e[0])}WC(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ko.delete(this)}cancel(){this.state==="scheduled"&&(ko.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const e3=t=>t.startsWith("--");function t3(t,e,h){e3(e)?t.style.setProperty(e,h):t.style[e]=h}const n3=Vp(()=>window.ScrollTimeline!==void 0),r3={};function i3(t,e){const h=Vp(t);return()=>r3[e]??h()}const Yx=i3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hc=([t,e,h,x])=>`cubic-bezier(${t}, ${e}, ${h}, ${x})`,sv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hc([0,.65,.55,1]),circOut:Hc([.55,0,1,.45]),backIn:Hc([.31,.01,.66,-.59]),backOut:Hc([.33,1.53,.69,.99])};function qx(t,e){if(t)return typeof t=="function"?Yx()?Vx(t,e):"ease-out":Lx(t)?Hc(t):Array.isArray(t)?t.map(h=>qx(h,e)||sv.easeOut):sv[t]}function s3(t,e,h,{delay:x=0,duration:v=300,repeat:S=0,repeatType:_="loop",ease:T="easeOut",times:E}={},d=void 0){const r={[e]:h};E&&(r.offset=E);const c=qx(T,v);Array.isArray(c)&&(r.easing=c);const l={delay:x,duration:v,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:S+1,direction:_==="reverse"?"alternate":"normal"};return d&&(l.pseudoElement=d),t.animate(r,l)}function Kx(t){return typeof t=="function"&&"applyToOptions"in t}function a3({type:t,...e}){return Kx(t)&&Yx()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class o3 extends Zp{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:h,name:x,keyframes:v,pseudoElement:S,allowFlatten:_=!1,finalKeyframe:T,onComplete:E}=e;this.isPseudoElement=!!S,this.allowFlatten=_,this.options=e,Up(typeof e.type!="string");const d=a3(e);this.animation=s3(h,x,v,d,S),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!S){const r=Jp(v,this.options,T,this.speed);this.updateMotionValue?this.updateMotionValue(r):t3(h,x,r),this.animation.cancel()}E?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ni(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ni(e)}get time(){return ni(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=qi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:h}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&n3()?(this.animation.timeline=e,ri):h(this)}}const $x={anticipate:Ex,backInOut:Px,circInOut:Ox};function l3(t){return t in $x}function u3(t){typeof t.ease=="string"&&l3(t.ease)&&(t.ease=$x[t.ease])}const av=10;class c3 extends o3{constructor(e){u3(e),Hx(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:h,onUpdate:x,onComplete:v,element:S,..._}=this.options;if(!h)return;if(e!==void 0){h.set(e);return}const T=new em({..._,autoplay:!1}),E=qi(this.finishedTime??this.time);h.setWithVelocity(T.sample(E-av).value,T.sample(E).value,av),T.stop()}}const ov=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(La.test(t)||t==="0")&&!t.startsWith("url("));function h3(t){const e=t[0];if(t.length===1)return!0;for(let h=0;h<t.length;h++)if(t[h]!==e)return!0}function d3(t,e,h,x){const v=t[0];if(v===null)return!1;if(e==="display"||e==="visibility")return!0;const S=t[t.length-1],_=ov(v,e),T=ov(S,e);return!_||!T?!1:h3(t)||(h==="spring"||Kx(h))&&x}function mp(t){t.duration=0,t.type="keyframes"}const f3=new Set(["opacity","clipPath","filter","transform"]),g3=Vp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function p3(t){const{motionValue:e,name:h,repeatDelay:x,repeatType:v,damping:S,type:_}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:E,transformTemplate:d}=e.owner.getProps();return g3()&&h&&f3.has(h)&&(h!=="transform"||!d)&&!E&&!x&&v!=="mirror"&&S!==0&&_!=="inertia"}const m3=40;class v3 extends Zp{constructor({autoplay:e=!0,delay:h=0,type:x="keyframes",repeat:v=0,repeatDelay:S=0,repeatType:_="loop",keyframes:T,name:E,motionValue:d,element:r,...c}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Or.now();const l={autoplay:e,delay:h,type:x,repeat:v,repeatDelay:S,repeatType:_,name:E,motionValue:d,element:r,...c},i=r?.KeyframeResolver||tm;this.keyframeResolver=new i(T,(s,o,a)=>this.onKeyframesResolved(s,o,l,!a),E,d,r),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,h,x,v){this.keyframeResolver=void 0;const{name:S,type:_,velocity:T,delay:E,isHandoff:d,onUpdate:r}=x;this.resolvedAt=Or.now(),d3(e,S,_,T)||((Os.instantAnimations||!E)&&r?.(Jp(e,x,h)),e[0]=e[e.length-1],mp(x),x.repeat=0);const l={startTime:v?this.resolvedAt?this.resolvedAt-this.createdAt>m3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:h,...x,keyframes:e},i=!d&&p3(l)?new c3({...l,element:l.motionValue.owner.current}):new em(l);i.finished.then(()=>this.notifyFinished()).catch(ri),this.pendingTimeline&&(this.stopTimeline=i.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=i}get finished(){return this._animation?this.animation.finished:this._finished}then(e,h){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ZC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const y3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function x3(t){const e=y3.exec(t);if(!e)return[,];const[,h,x,v]=e;return[`--${h??x}`,v]}function Qx(t,e,h=1){const[x,v]=x3(t);if(!x)return;const S=window.getComputedStyle(e).getPropertyValue(x);if(S){const _=S.trim();return xx(_)?parseFloat(_):_}return Yp(v)?Qx(v,e,h+1):v}function nm(t,e){return t?.[e]??t?.default??t}const Jx=new Set(["width","height","top","left","right","bottom",...Zl]),w3={test:t=>t==="auto",parse:t=>t},Zx=t=>e=>e.test(t),e2=[Jl,tt,Ki,Pa,hC,cC,w3],lv=t=>e2.find(Zx(t));function _3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||_x(t):!0}const b3=new Set(["brightness","contrast","saturate","opacity"]);function S3(t){const[e,h]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[x]=h.match(qp)||[];if(!x)return t;const v=h.replace(x,"");let S=b3.has(e)?1:0;return x!==h&&(S*=100),e+"("+S+v+")"}const C3=/\b([a-z-]*)\(.*?\)/gu,vp={...La,getAnimatableNone:t=>{const e=t.match(C3);return e?e.map(S3).join(" "):t}},uv={...Jl,transform:Math.round},k3={rotate:Pa,rotateX:Pa,rotateY:Pa,rotateZ:Pa,scale:Ad,scaleX:Ad,scaleY:Ad,scaleZ:Ad,skew:Pa,skewX:Pa,skewY:Pa,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:ah,originX:$0,originY:$0,originZ:tt},rm={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,backgroundPositionX:tt,backgroundPositionY:tt,...k3,zIndex:uv,fillOpacity:ah,strokeOpacity:ah,numOctaves:uv},T3={...rm,color:xn,backgroundColor:xn,outlineColor:xn,fill:xn,stroke:xn,borderColor:xn,borderTopColor:xn,borderRightColor:xn,borderBottomColor:xn,borderLeftColor:xn,filter:vp,WebkitFilter:vp},t2=t=>T3[t];function n2(t,e){let h=t2(t);return h!==vp&&(h=La),h.getAnimatableNone?h.getAnimatableNone(e):void 0}const P3=new Set(["auto","none","0"]);function E3(t,e,h){let x=0,v;for(;x<t.length&&!v;){const S=t[x];typeof S=="string"&&!P3.has(S)&&oh(S).values.length&&(v=t[x]),x++}if(v&&h)for(const S of e)t[S]=n2(h,v)}class j3 extends tm{constructor(e,h,x,v,S){super(e,h,x,v,S,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:h,name:x}=this;if(!h||!h.current)return;super.readKeyframes();for(let E=0;E<e.length;E++){let d=e[E];if(typeof d=="string"&&(d=d.trim(),Yp(d))){const r=Qx(d,h.current);r!==void 0&&(e[E]=r),E===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Jx.has(x)||e.length!==2)return;const[v,S]=e,_=lv(v),T=lv(S);if(_!==T)if(iv(_)&&iv(T))for(let E=0;E<e.length;E++){const d=e[E];typeof d=="string"&&(e[E]=parseFloat(d))}else Co[x]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:h}=this,x=[];for(let v=0;v<e.length;v++)(e[v]===null||_3(e[v]))&&x.push(v);x.length&&E3(e,x,h)}measureInitialState(){const{element:e,unresolvedKeyframes:h,name:x}=this;if(!e||!e.current)return;x==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Co[x](e.measureViewportBox(),window.getComputedStyle(e.current)),h[0]=this.measuredOrigin;const v=h[h.length-1];v!==void 0&&e.getValue(x,v).jump(v,!1)}measureEndState(){const{element:e,name:h,unresolvedKeyframes:x}=this;if(!e||!e.current)return;const v=e.getValue(h);v&&v.jump(this.measuredOrigin,!1);const S=x.length-1,_=x[S];x[S]=Co[h](e.measureViewportBox(),window.getComputedStyle(e.current)),_!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=_),this.removedTransforms?.length&&this.removedTransforms.forEach(([T,E])=>{e.getValue(T).set(E)}),this.resolveNoneKeyframes()}}function O3(t,e,h){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let x=document;const v=h?.[t]??x.querySelectorAll(t);return v?Array.from(v):[]}return Array.from(t)}const r2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function i2(t){return wx(t)&&"offsetHeight"in t}const cv=30,N3=t=>!isNaN(parseFloat(t));class L3{constructor(e,h={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=x=>{const v=Or.now();if(this.updatedAt!==v&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(x),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const S of this.dependents)S.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=h.owner}setCurrent(e){this.current=e,this.updatedAt=Or.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=N3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,h){this.events[e]||(this.events[e]=new Gp);const x=this.events[e].add(h);return e==="change"?()=>{x(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:x}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,h){this.passiveEffect=e,this.stopPassiveEffect=h}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,h,x){this.set(h),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-x}jump(e,h=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,h&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Or.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cv)return 0;const h=Math.min(this.updatedAt-this.prevUpdatedAt,cv);return bx(parseFloat(this.current)-parseFloat(this.prevFrameValue),h)}start(e){return this.stop(),new Promise(h=>{this.hasAnimated=!0,this.animation=e(h),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xl(t,e){return new L3(t,e)}const{schedule:im}=Mx(queueMicrotask,!1),bi={x:!1,y:!1};function s2(){return bi.x||bi.y}function M3(t){return t==="x"||t==="y"?bi[t]?null:(bi[t]=!0,()=>{bi[t]=!1}):bi.x||bi.y?null:(bi.x=bi.y=!0,()=>{bi.x=bi.y=!1})}function a2(t,e){const h=O3(t),x=new AbortController,v={passive:!0,...e,signal:x.signal};return[h,v,()=>x.abort()]}function hv(t){return!(t.pointerType==="touch"||s2())}function A3(t,e,h={}){const[x,v,S]=a2(t,h),_=T=>{if(!hv(T))return;const{target:E}=T,d=e(E,T);if(typeof d!="function"||!E)return;const r=c=>{hv(c)&&(d(c),E.removeEventListener("pointerleave",r))};E.addEventListener("pointerleave",r,v)};return x.forEach(T=>{T.addEventListener("pointerenter",_,v)}),S}const o2=(t,e)=>e?t===e?!0:o2(t,e.parentElement):!1,sm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,R3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function D3(t){return R3.has(t.tagName)||t.tabIndex!==-1}const Gd=new WeakSet;function dv(t){return e=>{e.key==="Enter"&&t(e)}}function yg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const F3=(t,e)=>{const h=t.currentTarget;if(!h)return;const x=dv(()=>{if(Gd.has(h))return;yg(h,"down");const v=dv(()=>{yg(h,"up")}),S=()=>yg(h,"cancel");h.addEventListener("keyup",v,e),h.addEventListener("blur",S,e)});h.addEventListener("keydown",x,e),h.addEventListener("blur",()=>h.removeEventListener("keydown",x),e)};function fv(t){return sm(t)&&!s2()}function I3(t,e,h={}){const[x,v,S]=a2(t,h),_=T=>{const E=T.currentTarget;if(!fv(T))return;Gd.add(E);const d=e(E,T),r=(i,s)=>{window.removeEventListener("pointerup",c),window.removeEventListener("pointercancel",l),Gd.has(E)&&Gd.delete(E),fv(i)&&typeof d=="function"&&d(i,{success:s})},c=i=>{r(i,E===window||E===document||h.useGlobalTarget||o2(E,i.target))},l=i=>{r(i,!1)};window.addEventListener("pointerup",c,v),window.addEventListener("pointercancel",l,v)};return x.forEach(T=>{(h.useGlobalTarget?window:T).addEventListener("pointerdown",_,v),i2(T)&&(T.addEventListener("focus",d=>F3(d,v)),!D3(T)&&!T.hasAttribute("tabindex")&&(T.tabIndex=0))}),S}function l2(t){return wx(t)&&"ownerSVGElement"in t}function B3(t){return l2(t)&&t.tagName==="svg"}const ir=t=>!!(t&&t.getVelocity),z3=[...e2,xn,La],U3=t=>z3.find(Zx(t)),am=ae.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function gv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function V3(...t){return e=>{let h=!1;const x=t.map(v=>{const S=gv(v,e);return!h&&typeof S=="function"&&(h=!0),S});if(h)return()=>{for(let v=0;v<x.length;v++){const S=x[v];typeof S=="function"?S():gv(t[v],null)}}}}function G3(...t){return ae.useCallback(V3(...t),t)}class H3 extends ae.Component{getSnapshotBeforeUpdate(e){const h=this.props.childRef.current;if(h&&e.isPresent&&!this.props.isPresent){const x=h.offsetParent,v=i2(x)&&x.offsetWidth||0,S=this.props.sizeRef.current;S.height=h.offsetHeight||0,S.width=h.offsetWidth||0,S.top=h.offsetTop,S.left=h.offsetLeft,S.right=v-S.width-S.left}return null}componentDidUpdate(){}render(){return this.props.children}}function W3({children:t,isPresent:e,anchorX:h,root:x}){const v=ae.useId(),S=ae.useRef(null),_=ae.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:T}=ae.useContext(am),E=G3(S,t?.ref);return ae.useInsertionEffect(()=>{const{width:d,height:r,top:c,left:l,right:i}=_.current;if(e||!S.current||!d||!r)return;const s=h==="left"?`left: ${l}`:`right: ${i}`;S.current.dataset.motionPopId=v;const o=document.createElement("style");T&&(o.nonce=T);const a=x??document.head;return a.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${v}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${r}px !important;
            ${s}px !important;
            top: ${c}px !important;
          }
        `),()=>{a.contains(o)&&a.removeChild(o)}},[e]),k.jsx(H3,{isPresent:e,childRef:S,sizeRef:_,children:ae.cloneElement(t,{ref:E})})}const X3=({children:t,initial:e,isPresent:h,onExitComplete:x,custom:v,presenceAffectsLayout:S,mode:_,anchorX:T,root:E})=>{const d=Fp(Y3),r=ae.useId();let c=!0,l=ae.useMemo(()=>(c=!1,{id:r,initial:e,isPresent:h,custom:v,onExitComplete:i=>{d.set(i,!0);for(const s of d.values())if(!s)return;x&&x()},register:i=>(d.set(i,!1),()=>d.delete(i))}),[h,d,x]);return S&&c&&(l={...l}),ae.useMemo(()=>{d.forEach((i,s)=>d.set(s,!1))},[h]),ae.useEffect(()=>{!h&&!d.size&&x&&x()},[h]),_==="popLayout"&&(t=k.jsx(W3,{isPresent:h,anchorX:T,root:E,children:t})),k.jsx(df.Provider,{value:l,children:t})};function Y3(){return new Map}function u2(t=!0){const e=ae.useContext(df);if(e===null)return[!0,null];const{isPresent:h,onExitComplete:x,register:v}=e,S=ae.useId();ae.useEffect(()=>{if(t)return v(S)},[t]);const _=ae.useCallback(()=>t&&x&&x(S),[S,x,t]);return!h&&x?[!1,_]:[!0]}const Rd=t=>t.key||"";function pv(t){const e=[];return ae.Children.forEach(t,h=>{ae.isValidElement(h)&&e.push(h)}),e}const q3=({children:t,custom:e,initial:h=!0,onExitComplete:x,presenceAffectsLayout:v=!0,mode:S="sync",propagate:_=!1,anchorX:T="left",root:E})=>{const[d,r]=u2(_),c=ae.useMemo(()=>pv(t),[t]),l=_&&!d?[]:c.map(Rd),i=ae.useRef(!0),s=ae.useRef(c),o=Fp(()=>new Map),[a,m]=ae.useState(c),[f,g]=ae.useState(c);yx(()=>{i.current=!1,s.current=c;for(let P=0;P<f.length;P++){const M=Rd(f[P]);l.includes(M)?o.delete(M):o.get(M)!==!0&&o.set(M,!1)}},[f,l.length,l.join("-")]);const w=[];if(c!==a){let P=[...c];for(let M=0;M<f.length;M++){const L=f[M],B=Rd(L);l.includes(B)||(P.splice(M,0,L),w.push(L))}return S==="wait"&&w.length&&(P=w),g(pv(P)),m(c),null}const{forceRender:C}=ae.useContext(Dp);return k.jsx(k.Fragment,{children:f.map(P=>{const M=Rd(P),L=_&&!d?!1:c===f||l.includes(M),B=()=>{if(o.has(M))o.set(M,!0);else return;let D=!0;o.forEach(H=>{H||(D=!1)}),D&&(C?.(),g(s.current),_&&r?.(),x&&x())};return k.jsx(X3,{isPresent:L,initial:!i.current||h?void 0:!1,custom:e,presenceAffectsLayout:v,mode:S,root:E,onExitComplete:L?void 0:B,anchorX:T,children:P},M)})})},c2=ae.createContext({strict:!1}),mv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yl={};for(const t in mv)Yl[t]={isEnabled:e=>mv[t].some(h=>!!e[h])};function K3(t){for(const e in t)Yl[e]={...Yl[e],...t[e]}}const $3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$3.has(t)}let h2=t=>!rf(t);function Q3(t){typeof t=="function"&&(h2=e=>e.startsWith("on")?!rf(e):t(e))}try{Q3(require("@emotion/is-prop-valid").default)}catch{}function J3(t,e,h){const x={};for(const v in t)v==="values"&&typeof t.values=="object"||(h2(v)||h===!0&&rf(v)||!e&&!rf(v)||t.draggable&&v.startsWith("onDrag"))&&(x[v]=t[v]);return x}const ff=ae.createContext({});function gf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function lh(t){return typeof t=="string"||Array.isArray(t)}const om=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lm=["initial",...om];function pf(t){return gf(t.animate)||lm.some(e=>lh(t[e]))}function d2(t){return!!(pf(t)||t.variants)}function Z3(t,e){if(pf(t)){const{initial:h,animate:x}=t;return{initial:h===!1||lh(h)?h:void 0,animate:lh(x)?x:void 0}}return t.inherit!==!1?e:{}}function e5(t){const{initial:e,animate:h}=Z3(t,ae.useContext(ff));return ae.useMemo(()=>({initial:e,animate:h}),[vv(e),vv(h)])}function vv(t){return Array.isArray(t)?t.join(" "):t}const uh={};function t5(t){for(const e in t)uh[e]=t[e],Xp(e)&&(uh[e].isCSSVariable=!0)}function f2(t,{layout:e,layoutId:h}){return eu.has(t)||t.startsWith("origin")||(e||h!==void 0)&&(!!uh[t]||t==="opacity")}const n5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r5=Zl.length;function i5(t,e,h){let x="",v=!0;for(let S=0;S<r5;S++){const _=Zl[S],T=t[_];if(T===void 0)continue;let E=!0;if(typeof T=="number"?E=T===(_.startsWith("scale")?1:0):E=parseFloat(T)===0,!E||h){const d=r2(T,rm[_]);if(!E){v=!1;const r=n5[_]||_;x+=`${r}(${d}) `}h&&(e[_]=d)}}return x=x.trim(),h?x=h(e,v?"":x):v&&(x="none"),x}function um(t,e,h){const{style:x,vars:v,transformOrigin:S}=t;let _=!1,T=!1;for(const E in e){const d=e[E];if(eu.has(E)){_=!0;continue}else if(Xp(E)){v[E]=d;continue}else{const r=r2(d,rm[E]);E.startsWith("origin")?(T=!0,S[E]=r):x[E]=r}}if(e.transform||(_||h?x.transform=i5(e,t.transform,h):x.transform&&(x.transform="none")),T){const{originX:E="50%",originY:d="50%",originZ:r=0}=S;x.transformOrigin=`${E} ${d} ${r}`}}const cm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function g2(t,e,h){for(const x in e)!ir(e[x])&&!f2(x,h)&&(t[x]=e[x])}function s5({transformTemplate:t},e){return ae.useMemo(()=>{const h=cm();return um(h,e,t),Object.assign({},h.vars,h.style)},[e])}function a5(t,e){const h=t.style||{},x={};return g2(x,h,t),Object.assign(x,s5(t,e)),x}function o5(t,e){const h={},x=a5(t,e);return t.drag&&t.dragListener!==!1&&(h.draggable=!1,x.userSelect=x.WebkitUserSelect=x.WebkitTouchCallout="none",x.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(h.tabIndex=0),h.style=x,h}const l5={offset:"stroke-dashoffset",array:"stroke-dasharray"},u5={offset:"strokeDashoffset",array:"strokeDasharray"};function c5(t,e,h=1,x=0,v=!0){t.pathLength=1;const S=v?l5:u5;t[S.offset]=tt.transform(-x);const _=tt.transform(e),T=tt.transform(h);t[S.array]=`${_} ${T}`}function p2(t,{attrX:e,attrY:h,attrScale:x,pathLength:v,pathSpacing:S=1,pathOffset:_=0,...T},E,d,r){if(um(t,T,d),E){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:c,style:l}=t;c.transform&&(l.transform=c.transform,delete c.transform),(l.transform||c.transformOrigin)&&(l.transformOrigin=c.transformOrigin??"50% 50%",delete c.transformOrigin),l.transform&&(l.transformBox=r?.transformBox??"fill-box",delete c.transformBox),e!==void 0&&(c.x=e),h!==void 0&&(c.y=h),x!==void 0&&(c.scale=x),v!==void 0&&c5(c,v,S,_,!1)}const m2=()=>({...cm(),attrs:{}}),v2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function h5(t,e,h,x){const v=ae.useMemo(()=>{const S=m2();return p2(S,e,v2(x),t.transformTemplate,t.style),{...S.attrs,style:{...S.style}}},[e]);if(t.style){const S={};g2(S,t.style,t),v.style={...S,...v.style}}return v}const d5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hm(t){return typeof t!="string"||t.includes("-")?!1:!!(d5.indexOf(t)>-1||/[A-Z]/u.test(t))}function f5(t,e,h,{latestValues:x},v,S=!1){const T=(hm(t)?h5:o5)(e,x,v,t),E=J3(e,typeof t=="string",S),d=t!==ae.Fragment?{...E,...T,ref:h}:{},{children:r}=e,c=ae.useMemo(()=>ir(r)?r.get():r,[r]);return ae.createElement(t,{...d,children:c})}function yv(t){const e=[{},{}];return t?.values.forEach((h,x)=>{e[0][x]=h.get(),e[1][x]=h.getVelocity()}),e}function dm(t,e,h,x){if(typeof e=="function"){const[v,S]=yv(x);e=e(h!==void 0?h:t.custom,v,S)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[v,S]=yv(x);e=e(h!==void 0?h:t.custom,v,S)}return e}function Hd(t){return ir(t)?t.get():t}function g5({scrapeMotionValuesFromProps:t,createRenderState:e},h,x,v){return{latestValues:p5(h,x,v,t),renderState:e()}}function p5(t,e,h,x){const v={},S=x(t,{});for(const l in S)v[l]=Hd(S[l]);let{initial:_,animate:T}=t;const E=pf(t),d=d2(t);e&&d&&!E&&t.inherit!==!1&&(_===void 0&&(_=e.initial),T===void 0&&(T=e.animate));let r=h?h.initial===!1:!1;r=r||_===!1;const c=r?T:_;if(c&&typeof c!="boolean"&&!gf(c)){const l=Array.isArray(c)?c:[c];for(let i=0;i<l.length;i++){const s=dm(t,l[i]);if(s){const{transitionEnd:o,transition:a,...m}=s;for(const f in m){let g=m[f];if(Array.isArray(g)){const w=r?g.length-1:0;g=g[w]}g!==null&&(v[f]=g)}for(const f in o)v[f]=o[f]}}}return v}const y2=t=>(e,h)=>{const x=ae.useContext(ff),v=ae.useContext(df),S=()=>g5(t,e,x,v);return h?S():Fp(S)};function fm(t,e,h){const{style:x}=t,v={};for(const S in x)(ir(x[S])||e.style&&ir(e.style[S])||f2(S,t)||h?.getValue(S)?.liveStyle!==void 0)&&(v[S]=x[S]);return v}const m5=y2({scrapeMotionValuesFromProps:fm,createRenderState:cm});function x2(t,e,h){const x=fm(t,e,h);for(const v in t)if(ir(t[v])||ir(e[v])){const S=Zl.indexOf(v)!==-1?"attr"+v.charAt(0).toUpperCase()+v.substring(1):v;x[S]=t[v]}return x}const v5=y2({scrapeMotionValuesFromProps:x2,createRenderState:m2}),y5=Symbol.for("motionComponentSymbol");function Bl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function x5(t,e,h){return ae.useCallback(x=>{x&&t.onMount&&t.onMount(x),e&&(x?e.mount(x):e.unmount()),h&&(typeof h=="function"?h(x):Bl(h)&&(h.current=x))},[e])}const gm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),w5="framerAppearId",w2="data-"+gm(w5),_2=ae.createContext({});function _5(t,e,h,x,v){const{visualElement:S}=ae.useContext(ff),_=ae.useContext(c2),T=ae.useContext(df),E=ae.useContext(am).reducedMotion,d=ae.useRef(null);x=x||_.renderer,!d.current&&x&&(d.current=x(t,{visualState:e,parent:S,props:h,presenceContext:T,blockInitialAnimation:T?T.initial===!1:!1,reducedMotionConfig:E}));const r=d.current,c=ae.useContext(_2);r&&!r.projection&&v&&(r.type==="html"||r.type==="svg")&&b5(d.current,h,v,c);const l=ae.useRef(!1);ae.useInsertionEffect(()=>{r&&l.current&&r.update(h,T)});const i=h[w2],s=ae.useRef(!!i&&!window.MotionHandoffIsComplete?.(i)&&window.MotionHasOptimisedAnimation?.(i));return yx(()=>{r&&(l.current=!0,window.MotionIsMounted=!0,r.updateFeatures(),r.scheduleRenderMicrotask(),s.current&&r.animationState&&r.animationState.animateChanges())}),ae.useEffect(()=>{r&&(!s.current&&r.animationState&&r.animationState.animateChanges(),s.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(i)}),s.current=!1),r.enteringChildren=void 0)}),r}function b5(t,e,h,x){const{layoutId:v,layout:S,drag:_,dragConstraints:T,layoutScroll:E,layoutRoot:d,layoutCrossfade:r}=e;t.projection=new h(t.latestValues,e["data-framer-portal-id"]?void 0:b2(t.parent)),t.projection.setOptions({layoutId:v,layout:S,alwaysMeasureLayout:!!_||T&&Bl(T),visualElement:t,animationType:typeof S=="string"?S:"both",initialPromotionConfig:x,crossfade:r,layoutScroll:E,layoutRoot:d})}function b2(t){if(t)return t.options.allowProjection!==!1?t.projection:b2(t.parent)}function xg(t,{forwardMotionProps:e=!1}={},h,x){h&&K3(h);const v=hm(t)?v5:m5;function S(T,E){let d;const r={...ae.useContext(am),...T,layoutId:S5(T)},{isStatic:c}=r,l=e5(T),i=v(T,c);if(!c&&Ip){C5();const s=k5(r);d=s.MeasureLayout,l.visualElement=_5(t,i,r,x,s.ProjectionNode)}return k.jsxs(ff.Provider,{value:l,children:[d&&l.visualElement?k.jsx(d,{visualElement:l.visualElement,...r}):null,f5(t,T,x5(i,l.visualElement,E),i,c,e)]})}S.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const _=ae.forwardRef(S);return _[y5]=t,_}function S5({layoutId:t}){const e=ae.useContext(Dp).id;return e&&t!==void 0?e+"-"+t:t}function C5(t,e){ae.useContext(c2).strict}function k5(t){const{drag:e,layout:h}=Yl;if(!e&&!h)return{};const x={...e,...h};return{MeasureLayout:e?.isEnabled(t)||h?.isEnabled(t)?x.MeasureLayout:void 0,ProjectionNode:x.ProjectionNode}}function T5(t,e){if(typeof Proxy>"u")return xg;const h=new Map,x=(S,_)=>xg(S,_,t,e),v=(S,_)=>x(S,_);return new Proxy(v,{get:(S,_)=>_==="create"?x:(h.has(_)||h.set(_,xg(_,void 0,t,e)),h.get(_))})}function S2({top:t,left:e,right:h,bottom:x}){return{x:{min:e,max:h},y:{min:t,max:x}}}function P5({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function E5(t,e){if(!e)return t;const h=e({x:t.left,y:t.top}),x=e({x:t.right,y:t.bottom});return{top:h.y,left:h.x,bottom:x.y,right:x.x}}function wg(t){return t===void 0||t===1}function yp({scale:t,scaleX:e,scaleY:h}){return!wg(t)||!wg(e)||!wg(h)}function wo(t){return yp(t)||C2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function C2(t){return xv(t.x)||xv(t.y)}function xv(t){return t&&t!=="0%"}function sf(t,e,h){const x=t-h,v=e*x;return h+v}function wv(t,e,h,x,v){return v!==void 0&&(t=sf(t,v,x)),sf(t,h,x)+e}function xp(t,e=0,h=1,x,v){t.min=wv(t.min,e,h,x,v),t.max=wv(t.max,e,h,x,v)}function k2(t,{x:e,y:h}){xp(t.x,e.translate,e.scale,e.originPoint),xp(t.y,h.translate,h.scale,h.originPoint)}const _v=.999999999999,bv=1.0000000000001;function j5(t,e,h,x=!1){const v=h.length;if(!v)return;e.x=e.y=1;let S,_;for(let T=0;T<v;T++){S=h[T],_=S.projectionDelta;const{visualElement:E}=S.options;E&&E.props.style&&E.props.style.display==="contents"||(x&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Ul(t,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),_&&(e.x*=_.x.scale,e.y*=_.y.scale,k2(t,_)),x&&wo(S.latestValues)&&Ul(t,S.latestValues))}e.x<bv&&e.x>_v&&(e.x=1),e.y<bv&&e.y>_v&&(e.y=1)}function zl(t,e){t.min=t.min+e,t.max=t.max+e}function Sv(t,e,h,x,v=.5){const S=qt(t.min,t.max,v);xp(t,e,h,S,x)}function Ul(t,e){Sv(t.x,e.x,e.scaleX,e.scale,e.originX),Sv(t.y,e.y,e.scaleY,e.scale,e.originY)}function T2(t,e){return S2(E5(t.getBoundingClientRect(),e))}function O5(t,e,h){const x=T2(t,h),{scroll:v}=e;return v&&(zl(x.x,v.offset.x),zl(x.y,v.offset.y)),x}const Cv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vl=()=>({x:Cv(),y:Cv()}),kv=()=>({min:0,max:0}),un=()=>({x:kv(),y:kv()}),wp={current:null},P2={current:!1};function N5(){if(P2.current=!0,!!Ip)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>wp.current=t.matches;t.addEventListener("change",e),e()}else wp.current=!1}const L5=new WeakMap;function M5(t,e,h){for(const x in e){const v=e[x],S=h[x];if(ir(v))t.addValue(x,v);else if(ir(S))t.addValue(x,Xl(v,{owner:t}));else if(S!==v)if(t.hasValue(x)){const _=t.getValue(x);_.liveStyle===!0?_.jump(v):_.hasAnimated||_.set(v)}else{const _=t.getStaticValue(x);t.addValue(x,Xl(_!==void 0?_:v,{owner:t}))}}for(const x in h)e[x]===void 0&&t.removeValue(x);return e}const Tv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class A5{scrapeMotionValuesFromProps(e,h,x){return{}}constructor({parent:e,props:h,presenceContext:x,reducedMotionConfig:v,blockInitialAnimation:S,visualState:_},T={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const l=Or.now();this.renderScheduledAt<l&&(this.renderScheduledAt=l,Ht.render(this.render,!1,!0))};const{latestValues:E,renderState:d}=_;this.latestValues=E,this.baseTarget={...E},this.initialValues=h.initial?{...E}:{},this.renderState=d,this.parent=e,this.props=h,this.presenceContext=x,this.depth=e?e.depth+1:0,this.reducedMotionConfig=v,this.options=T,this.blockInitialAnimation=!!S,this.isControllingVariants=pf(h),this.isVariantNode=d2(h),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:r,...c}=this.scrapeMotionValuesFromProps(h,{},this);for(const l in c){const i=c[l];E[l]!==void 0&&ir(i)&&i.set(E[l])}}mount(e){this.current=e,L5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((h,x)=>this.bindToMotionValue(x,h)),P2.current||N5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:wp.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Na(this.notifyUpdate),Na(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const h=this.features[e];h&&(h.unmount(),h.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,h){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const x=eu.has(e);x&&this.onBindTransform&&this.onBindTransform();const v=h.on("change",_=>{this.latestValues[e]=_,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),x&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let S;window.MotionCheckAppearSync&&(S=window.MotionCheckAppearSync(this,e,h)),this.valueSubscriptions.set(e,()=>{v(),S&&S(),h.owner&&h.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Yl){const h=Yl[e];if(!h)continue;const{isEnabled:x,Feature:v}=h;if(!this.features[e]&&v&&x(this.props)&&(this.features[e]=new v(this)),this.features[e]){const S=this.features[e];S.isMounted?S.update():(S.mount(),S.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):un()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,h){this.latestValues[e]=h}update(e,h){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=h;for(let x=0;x<Tv.length;x++){const v=Tv[x];this.propEventSubscriptions[v]&&(this.propEventSubscriptions[v](),delete this.propEventSubscriptions[v]);const S="on"+v,_=e[S];_&&(this.propEventSubscriptions[v]=this.on(v,_))}this.prevMotionValues=M5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const h=this.getClosestVariantNode();if(h)return h.variantChildren&&h.variantChildren.add(e),()=>h.variantChildren.delete(e)}addValue(e,h){const x=this.values.get(e);h!==x&&(x&&this.removeValue(e),this.bindToMotionValue(e,h),this.values.set(e,h),this.latestValues[e]=h.get())}removeValue(e){this.values.delete(e);const h=this.valueSubscriptions.get(e);h&&(h(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,h){if(this.props.values&&this.props.values[e])return this.props.values[e];let x=this.values.get(e);return x===void 0&&h!==void 0&&(x=Xl(h===null?void 0:h,{owner:this}),this.addValue(e,x)),x}readValue(e,h){let x=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return x!=null&&(typeof x=="string"&&(xx(x)||_x(x))?x=parseFloat(x):!U3(x)&&La.test(h)&&(x=n2(e,h)),this.setBaseTarget(e,ir(x)?x.get():x)),ir(x)?x.get():x}setBaseTarget(e,h){this.baseTarget[e]=h}getBaseTarget(e){const{initial:h}=this.props;let x;if(typeof h=="string"||typeof h=="object"){const S=dm(this.props,h,this.presenceContext?.custom);S&&(x=S[e])}if(h&&x!==void 0)return x;const v=this.getBaseTargetFromProps(this.props,e);return v!==void 0&&!ir(v)?v:this.initialValues[e]!==void 0&&x===void 0?void 0:this.baseTarget[e]}on(e,h){return this.events[e]||(this.events[e]=new Gp),this.events[e].add(h)}notify(e,...h){this.events[e]&&this.events[e].notify(...h)}scheduleRenderMicrotask(){im.render(this.render)}}class E2 extends A5{constructor(){super(...arguments),this.KeyframeResolver=j3}sortInstanceNodePosition(e,h){return e.compareDocumentPosition(h)&2?1:-1}getBaseTargetFromProps(e,h){return e.style?e.style[h]:void 0}removeValueFromRenderState(e,{vars:h,style:x}){delete h[e],delete x[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ir(e)&&(this.childSubscription=e.on("change",h=>{this.current&&(this.current.textContent=`${h}`)}))}}function j2(t,{style:e,vars:h},x,v){const S=t.style;let _;for(_ in e)S[_]=e[_];v?.applyProjectionStyles(S,x);for(_ in h)S.setProperty(_,h[_])}function R5(t){return window.getComputedStyle(t)}class D5 extends E2{constructor(){super(...arguments),this.type="html",this.renderInstance=j2}readValueFromInstance(e,h){if(eu.has(h))return this.projection?.isProjecting?hp(h):qC(e,h);{const x=R5(e),v=(Xp(h)?x.getPropertyValue(h):x[h])||0;return typeof v=="string"?v.trim():v}}measureInstanceViewportBox(e,{transformPagePoint:h}){return T2(e,h)}build(e,h,x){um(e,h,x.transformTemplate)}scrapeMotionValuesFromProps(e,h,x){return fm(e,h,x)}}const O2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function F5(t,e,h,x){j2(t,e,void 0,x);for(const v in e.attrs)t.setAttribute(O2.has(v)?v:gm(v),e.attrs[v])}class I5 extends E2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=un}getBaseTargetFromProps(e,h){return e[h]}readValueFromInstance(e,h){if(eu.has(h)){const x=t2(h);return x&&x.default||0}return h=O2.has(h)?h:gm(h),e.getAttribute(h)}scrapeMotionValuesFromProps(e,h,x){return x2(e,h,x)}build(e,h,x){p2(e,h,this.isSVGTag,x.transformTemplate,x.style)}renderInstance(e,h,x,v){F5(e,h,x,v)}mount(e){this.isSVGTag=v2(e.tagName),super.mount(e)}}const B5=(t,e)=>hm(t)?new I5(e):new D5(e,{allowProjection:t!==ae.Fragment});function Hl(t,e,h){const x=t.getProps();return dm(x,e,h!==void 0?h:x.custom,t)}const _p=t=>Array.isArray(t);function z5(t,e,h){t.hasValue(e)?t.getValue(e).set(h):t.addValue(e,Xl(h))}function U5(t){return _p(t)?t[t.length-1]||0:t}function V5(t,e){const h=Hl(t,e);let{transitionEnd:x={},transition:v={},...S}=h||{};S={...S,...x};for(const _ in S){const T=U5(S[_]);z5(t,_,T)}}function G5(t){return!!(ir(t)&&t.add)}function bp(t,e){const h=t.getValue("willChange");if(G5(h))return h.add(e);if(!h&&Os.WillChange){const x=new Os.WillChange("auto");t.addValue("willChange",x),x.add(e)}}function N2(t){return t.props[w2]}const H5=t=>t!==null;function W5(t,{repeat:e,repeatType:h="loop"},x){const v=t.filter(H5),S=e&&h!=="loop"&&e%2===1?0:v.length-1;return v[S]}const X5={type:"spring",stiffness:500,damping:25,restSpeed:10},Y5=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),q5={type:"keyframes",duration:.8},K5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$5=(t,{keyframes:e})=>e.length>2?q5:eu.has(t)?t.startsWith("scale")?Y5(e[1]):X5:K5;function Q5({when:t,delay:e,delayChildren:h,staggerChildren:x,staggerDirection:v,repeat:S,repeatType:_,repeatDelay:T,from:E,elapsed:d,...r}){return!!Object.keys(r).length}const pm=(t,e,h,x={},v,S)=>_=>{const T=nm(x,t)||{},E=T.delay||x.delay||0;let{elapsed:d=0}=x;d=d-qi(E);const r={keyframes:Array.isArray(h)?h:[null,h],ease:"easeOut",velocity:e.getVelocity(),...T,delay:-d,onUpdate:l=>{e.set(l),T.onUpdate&&T.onUpdate(l)},onComplete:()=>{_(),T.onComplete&&T.onComplete()},name:t,motionValue:e,element:S?void 0:v};Q5(T)||Object.assign(r,$5(t,r)),r.duration&&(r.duration=qi(r.duration)),r.repeatDelay&&(r.repeatDelay=qi(r.repeatDelay)),r.from!==void 0&&(r.keyframes[0]=r.from);let c=!1;if((r.type===!1||r.duration===0&&!r.repeatDelay)&&(mp(r),r.delay===0&&(c=!0)),(Os.instantAnimations||Os.skipAnimations)&&(c=!0,mp(r),r.delay=0),r.allowFlatten=!T.type&&!T.ease,c&&!S&&e.get()!==void 0){const l=W5(r.keyframes,T);if(l!==void 0){Ht.update(()=>{r.onUpdate(l),r.onComplete()});return}}return T.isSync?new em(r):new v3(r)};function J5({protectedKeys:t,needsAnimating:e},h){const x=t.hasOwnProperty(h)&&e[h]!==!0;return e[h]=!1,x}function L2(t,e,{delay:h=0,transitionOverride:x,type:v}={}){let{transition:S=t.getDefaultTransition(),transitionEnd:_,...T}=e;x&&(S=x);const E=[],d=v&&t.animationState&&t.animationState.getState()[v];for(const r in T){const c=t.getValue(r,t.latestValues[r]??null),l=T[r];if(l===void 0||d&&J5(d,r))continue;const i={delay:h,...nm(S||{},r)},s=c.get();if(s!==void 0&&!c.isAnimating&&!Array.isArray(l)&&l===s&&!i.velocity)continue;let o=!1;if(window.MotionHandoffAnimation){const m=N2(t);if(m){const f=window.MotionHandoffAnimation(m,r,Ht);f!==null&&(i.startTime=f,o=!0)}}bp(t,r),c.start(pm(r,c,l,t.shouldReduceMotion&&Jx.has(r)?{type:!1}:i,t,o));const a=c.animation;a&&E.push(a)}return _&&Promise.all(E).then(()=>{Ht.update(()=>{_&&V5(t,_)})}),E}function M2(t,e,h,x=0,v=1){const S=Array.from(t).sort((d,r)=>d.sortNodePosition(r)).indexOf(e),_=t.size,T=(_-1)*x;return typeof h=="function"?h(S,_):v===1?S*x:T-S*x}function Sp(t,e,h={}){const x=Hl(t,e,h.type==="exit"?t.presenceContext?.custom:void 0);let{transition:v=t.getDefaultTransition()||{}}=x||{};h.transitionOverride&&(v=h.transitionOverride);const S=x?()=>Promise.all(L2(t,x,h)):()=>Promise.resolve(),_=t.variantChildren&&t.variantChildren.size?(E=0)=>{const{delayChildren:d=0,staggerChildren:r,staggerDirection:c}=v;return Z5(t,e,E,d,r,c,h)}:()=>Promise.resolve(),{when:T}=v;if(T){const[E,d]=T==="beforeChildren"?[S,_]:[_,S];return E().then(()=>d())}else return Promise.all([S(),_(h.delay)])}function Z5(t,e,h=0,x=0,v=0,S=1,_){const T=[];for(const E of t.variantChildren)E.notify("AnimationStart",e),T.push(Sp(E,e,{..._,delay:h+(typeof x=="function"?0:x)+M2(t.variantChildren,E,x,v,S)}).then(()=>E.notify("AnimationComplete",e)));return Promise.all(T)}function e4(t,e,h={}){t.notify("AnimationStart",e);let x;if(Array.isArray(e)){const v=e.map(S=>Sp(t,S,h));x=Promise.all(v)}else if(typeof e=="string")x=Sp(t,e,h);else{const v=typeof e=="function"?Hl(t,e,h.custom):e;x=Promise.all(L2(t,v,h))}return x.then(()=>{t.notify("AnimationComplete",e)})}function A2(t,e){if(!Array.isArray(e))return!1;const h=e.length;if(h!==t.length)return!1;for(let x=0;x<h;x++)if(e[x]!==t[x])return!1;return!0}const t4=lm.length;function R2(t){if(!t)return;if(!t.isControllingVariants){const h=t.parent?R2(t.parent)||{}:{};return t.props.initial!==void 0&&(h.initial=t.props.initial),h}const e={};for(let h=0;h<t4;h++){const x=lm[h],v=t.props[x];(lh(v)||v===!1)&&(e[x]=v)}return e}const n4=[...om].reverse(),r4=om.length;function i4(t){return e=>Promise.all(e.map(({animation:h,options:x})=>e4(t,h,x)))}function s4(t){let e=i4(t),h=Pv(),x=!0;const v=E=>(d,r)=>{const c=Hl(t,r,E==="exit"?t.presenceContext?.custom:void 0);if(c){const{transition:l,transitionEnd:i,...s}=c;d={...d,...s,...i}}return d};function S(E){e=E(t)}function _(E){const{props:d}=t,r=R2(t.parent)||{},c=[],l=new Set;let i={},s=1/0;for(let a=0;a<r4;a++){const m=n4[a],f=h[m],g=d[m]!==void 0?d[m]:r[m],w=lh(g),C=m===E?f.isActive:null;C===!1&&(s=a);let P=g===r[m]&&g!==d[m]&&w;if(P&&x&&t.manuallyAnimateOnMount&&(P=!1),f.protectedKeys={...i},!f.isActive&&C===null||!g&&!f.prevProp||gf(g)||typeof g=="boolean")continue;const M=a4(f.prevProp,g);let L=M||m===E&&f.isActive&&!P&&w||a>s&&w,B=!1;const D=Array.isArray(g)?g:[g];let H=D.reduce(v(m),{});C===!1&&(H={});const{prevResolvedValues:Q={}}=f,ee={...Q,...H},se=U=>{L=!0,l.has(U)&&(B=!0,l.delete(U)),f.needsAnimating[U]=!0;const X=t.getValue(U);X&&(X.liveStyle=!1)};for(const U in ee){const X=H[U],Z=Q[U];if(i.hasOwnProperty(U))continue;let $=!1;_p(X)&&_p(Z)?$=!A2(X,Z):$=X!==Z,$?X!=null?se(U):l.add(U):X!==void 0&&l.has(U)?se(U):f.protectedKeys[U]=!0}f.prevProp=g,f.prevResolvedValues=H,f.isActive&&(i={...i,...H}),x&&t.blockInitialAnimation&&(L=!1);const ie=P&&M;L&&(!ie||B)&&c.push(...D.map(U=>{const X={type:m};if(typeof U=="string"&&x&&!ie&&t.manuallyAnimateOnMount&&t.parent){const{parent:Z}=t,$=Hl(Z,U);if(Z.enteringChildren&&$){const{delayChildren:R}=$.transition||{};X.delay=M2(Z.enteringChildren,t,R)}}return{animation:U,options:X}}))}if(l.size){const a={};if(typeof d.initial!="boolean"){const m=Hl(t,Array.isArray(d.initial)?d.initial[0]:d.initial);m&&m.transition&&(a.transition=m.transition)}l.forEach(m=>{const f=t.getBaseTarget(m),g=t.getValue(m);g&&(g.liveStyle=!0),a[m]=f??null}),c.push({animation:a})}let o=!!c.length;return x&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(o=!1),x=!1,o?e(c):Promise.resolve()}function T(E,d){if(h[E].isActive===d)return Promise.resolve();t.variantChildren?.forEach(c=>c.animationState?.setActive(E,d)),h[E].isActive=d;const r=_(E);for(const c in h)h[c].protectedKeys={};return r}return{animateChanges:_,setActive:T,setAnimateFunction:S,getState:()=>h,reset:()=>{h=Pv(),x=!0}}}function a4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!A2(e,t):!1}function yo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Pv(){return{animate:yo(!0),whileInView:yo(),whileHover:yo(),whileTap:yo(),whileDrag:yo(),whileFocus:yo(),exit:yo()}}class Aa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class o4 extends Aa{constructor(e){super(e),e.animationState||(e.animationState=s4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();gf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:h}=this.node.prevProps||{};e!==h&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let l4=0;class u4 extends Aa{constructor(){super(...arguments),this.id=l4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:h}=this.node.presenceContext,{isPresent:x}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===x)return;const v=this.node.animationState.setActive("exit",!e);h&&!e&&v.then(()=>{h(this.id)})}mount(){const{register:e,onExitComplete:h}=this.node.presenceContext||{};h&&h(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const c4={animation:{Feature:o4},exit:{Feature:u4}};function ch(t,e,h,x={passive:!0}){return t.addEventListener(e,h,x),()=>t.removeEventListener(e,h)}function yh(t){return{point:{x:t.pageX,y:t.pageY}}}const h4=t=>e=>sm(e)&&t(e,yh(e));function Kc(t,e,h,x){return ch(t,e,h4(h),x)}const D2=1e-4,d4=1-D2,f4=1+D2,F2=.01,g4=0-F2,p4=0+F2;function yr(t){return t.max-t.min}function m4(t,e,h){return Math.abs(t-e)<=h}function Ev(t,e,h,x=.5){t.origin=x,t.originPoint=qt(e.min,e.max,t.origin),t.scale=yr(h)/yr(e),t.translate=qt(h.min,h.max,t.origin)-t.originPoint,(t.scale>=d4&&t.scale<=f4||isNaN(t.scale))&&(t.scale=1),(t.translate>=g4&&t.translate<=p4||isNaN(t.translate))&&(t.translate=0)}function $c(t,e,h,x){Ev(t.x,e.x,h.x,x?x.originX:void 0),Ev(t.y,e.y,h.y,x?x.originY:void 0)}function jv(t,e,h){t.min=h.min+e.min,t.max=t.min+yr(e)}function v4(t,e,h){jv(t.x,e.x,h.x),jv(t.y,e.y,h.y)}function Ov(t,e,h){t.min=e.min-h.min,t.max=t.min+yr(e)}function Qc(t,e,h){Ov(t.x,e.x,h.x),Ov(t.y,e.y,h.y)}function ti(t){return[t("x"),t("y")]}const I2=({current:t})=>t?t.ownerDocument.defaultView:null,Nv=(t,e)=>Math.abs(t-e);function y4(t,e){const h=Nv(t.x,e.x),x=Nv(t.y,e.y);return Math.sqrt(h**2+x**2)}class B2{constructor(e,h,{transformPagePoint:x,contextWindow:v=window,dragSnapToOrigin:S=!1,distanceThreshold:_=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const l=bg(this.lastMoveEventInfo,this.history),i=this.startEvent!==null,s=y4(l.offset,{x:0,y:0})>=this.distanceThreshold;if(!i&&!s)return;const{point:o}=l,{timestamp:a}=$n;this.history.push({...o,timestamp:a});const{onStart:m,onMove:f}=this.handlers;i||(m&&m(this.lastMoveEvent,l),this.startEvent=this.lastMoveEvent),f&&f(this.lastMoveEvent,l)},this.handlePointerMove=(l,i)=>{this.lastMoveEvent=l,this.lastMoveEventInfo=_g(i,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(l,i)=>{this.end();const{onEnd:s,onSessionEnd:o,resumeAnimation:a}=this.handlers;if(this.dragSnapToOrigin&&a&&a(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=bg(l.type==="pointercancel"?this.lastMoveEventInfo:_g(i,this.transformPagePoint),this.history);this.startEvent&&s&&s(l,m),o&&o(l,m)},!sm(e))return;this.dragSnapToOrigin=S,this.handlers=h,this.transformPagePoint=x,this.distanceThreshold=_,this.contextWindow=v||window;const T=yh(e),E=_g(T,this.transformPagePoint),{point:d}=E,{timestamp:r}=$n;this.history=[{...d,timestamp:r}];const{onSessionStart:c}=h;c&&c(e,bg(E,this.history)),this.removeListeners=ph(Kc(this.contextWindow,"pointermove",this.handlePointerMove),Kc(this.contextWindow,"pointerup",this.handlePointerUp),Kc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Na(this.updatePoint)}}function _g(t,e){return e?{point:e(t.point)}:t}function Lv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function bg({point:t},e){return{point:t,delta:Lv(t,z2(e)),offset:Lv(t,x4(e)),velocity:w4(e,.1)}}function x4(t){return t[0]}function z2(t){return t[t.length-1]}function w4(t,e){if(t.length<2)return{x:0,y:0};let h=t.length-1,x=null;const v=z2(t);for(;h>=0&&(x=t[h],!(v.timestamp-x.timestamp>qi(e)));)h--;if(!x)return{x:0,y:0};const S=ni(v.timestamp-x.timestamp);if(S===0)return{x:0,y:0};const _={x:(v.x-x.x)/S,y:(v.y-x.y)/S};return _.x===1/0&&(_.x=0),_.y===1/0&&(_.y=0),_}function _4(t,{min:e,max:h},x){return e!==void 0&&t<e?t=x?qt(e,t,x.min):Math.max(t,e):h!==void 0&&t>h&&(t=x?qt(h,t,x.max):Math.min(t,h)),t}function Mv(t,e,h){return{min:e!==void 0?t.min+e:void 0,max:h!==void 0?t.max+h-(t.max-t.min):void 0}}function b4(t,{top:e,left:h,bottom:x,right:v}){return{x:Mv(t.x,h,v),y:Mv(t.y,e,x)}}function Av(t,e){let h=e.min-t.min,x=e.max-t.max;return e.max-e.min<t.max-t.min&&([h,x]=[x,h]),{min:h,max:x}}function S4(t,e){return{x:Av(t.x,e.x),y:Av(t.y,e.y)}}function C4(t,e){let h=.5;const x=yr(t),v=yr(e);return v>x?h=sh(e.min,e.max-x,t.min):x>v&&(h=sh(t.min,t.max-v,e.min)),js(0,1,h)}function k4(t,e){const h={};return e.min!==void 0&&(h.min=e.min-t.min),e.max!==void 0&&(h.max=e.max-t.min),h}const Cp=.35;function T4(t=Cp){return t===!1?t=0:t===!0&&(t=Cp),{x:Rv(t,"left","right"),y:Rv(t,"top","bottom")}}function Rv(t,e,h){return{min:Dv(t,e),max:Dv(t,h)}}function Dv(t,e){return typeof t=="number"?t:t[e]||0}const P4=new WeakMap;class E4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=un(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:h=!1,distanceThreshold:x}={}){const{presenceContext:v}=this.visualElement;if(v&&v.isPresent===!1)return;const S=c=>{const{dragSnapToOrigin:l}=this.getProps();l?this.pauseAnimation():this.stopAnimation(),h&&this.snapToCursor(yh(c).point)},_=(c,l)=>{const{drag:i,dragPropagation:s,onDragStart:o}=this.getProps();if(i&&!s&&(this.openDragLock&&this.openDragLock(),this.openDragLock=M3(i),!this.openDragLock))return;this.latestPointerEvent=c,this.latestPanInfo=l,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ti(m=>{let f=this.getAxisMotionValue(m).get()||0;if(Ki.test(f)){const{projection:g}=this.visualElement;if(g&&g.layout){const w=g.layout.layoutBox[m];w&&(f=yr(w)*(parseFloat(f)/100))}}this.originPoint[m]=f}),o&&Ht.postRender(()=>o(c,l)),bp(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},T=(c,l)=>{this.latestPointerEvent=c,this.latestPanInfo=l;const{dragPropagation:i,dragDirectionLock:s,onDirectionLock:o,onDrag:a}=this.getProps();if(!i&&!this.openDragLock)return;const{offset:m}=l;if(s&&this.currentDirection===null){this.currentDirection=j4(m),this.currentDirection!==null&&o&&o(this.currentDirection);return}this.updateAxis("x",l.point,m),this.updateAxis("y",l.point,m),this.visualElement.render(),a&&a(c,l)},E=(c,l)=>{this.latestPointerEvent=c,this.latestPanInfo=l,this.stop(c,l),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ti(c=>this.getAnimationState(c)==="paused"&&this.getAxisMotionValue(c).animation?.play()),{dragSnapToOrigin:r}=this.getProps();this.panSession=new B2(e,{onSessionStart:S,onStart:_,onMove:T,onSessionEnd:E,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,distanceThreshold:x,contextWindow:I2(this.visualElement)})}stop(e,h){const x=e||this.latestPointerEvent,v=h||this.latestPanInfo,S=this.isDragging;if(this.cancel(),!S||!v||!x)return;const{velocity:_}=v;this.startAnimation(_);const{onDragEnd:T}=this.getProps();T&&Ht.postRender(()=>T(x,v))}cancel(){this.isDragging=!1;const{projection:e,animationState:h}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:x}=this.getProps();!x&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),h&&h.setActive("whileDrag",!1)}updateAxis(e,h,x){const{drag:v}=this.getProps();if(!x||!Dd(e,v,this.currentDirection))return;const S=this.getAxisMotionValue(e);let _=this.originPoint[e]+x[e];this.constraints&&this.constraints[e]&&(_=_4(_,this.constraints[e],this.elastic[e])),S.set(_)}resolveConstraints(){const{dragConstraints:e,dragElastic:h}=this.getProps(),x=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,v=this.constraints;e&&Bl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&x?this.constraints=b4(x.layoutBox,e):this.constraints=!1,this.elastic=T4(h),v!==this.constraints&&x&&this.constraints&&!this.hasMutatedConstraints&&ti(S=>{this.constraints!==!1&&this.getAxisMotionValue(S)&&(this.constraints[S]=k4(x.layoutBox[S],this.constraints[S]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:h}=this.getProps();if(!e||!Bl(e))return!1;const x=e.current,{projection:v}=this.visualElement;if(!v||!v.layout)return!1;const S=O5(x,v.root,this.visualElement.getTransformPagePoint());let _=S4(v.layout.layoutBox,S);if(h){const T=h(P5(_));this.hasMutatedConstraints=!!T,T&&(_=S2(T))}return _}startAnimation(e){const{drag:h,dragMomentum:x,dragElastic:v,dragTransition:S,dragSnapToOrigin:_,onDragTransitionEnd:T}=this.getProps(),E=this.constraints||{},d=ti(r=>{if(!Dd(r,h,this.currentDirection))return;let c=E&&E[r]||{};_&&(c={min:0,max:0});const l=v?200:1e6,i=v?40:1e7,s={type:"inertia",velocity:x?e[r]:0,bounceStiffness:l,bounceDamping:i,timeConstant:750,restDelta:1,restSpeed:10,...S,...c};return this.startAxisValueAnimation(r,s)});return Promise.all(d).then(T)}startAxisValueAnimation(e,h){const x=this.getAxisMotionValue(e);return bp(this.visualElement,e),x.start(pm(e,x,0,h,this.visualElement,!1))}stopAnimation(){ti(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ti(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const h=`_drag${e.toUpperCase()}`,x=this.visualElement.getProps(),v=x[h];return v||this.visualElement.getValue(e,(x.initial?x.initial[e]:void 0)||0)}snapToCursor(e){ti(h=>{const{drag:x}=this.getProps();if(!Dd(h,x,this.currentDirection))return;const{projection:v}=this.visualElement,S=this.getAxisMotionValue(h);if(v&&v.layout){const{min:_,max:T}=v.layout.layoutBox[h];S.set(e[h]-qt(_,T,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:h}=this.getProps(),{projection:x}=this.visualElement;if(!Bl(h)||!x||!this.constraints)return;this.stopAnimation();const v={x:0,y:0};ti(_=>{const T=this.getAxisMotionValue(_);if(T&&this.constraints!==!1){const E=T.get();v[_]=C4({min:E,max:E},this.constraints[_])}});const{transformTemplate:S}=this.visualElement.getProps();this.visualElement.current.style.transform=S?S({},""):"none",x.root&&x.root.updateScroll(),x.updateLayout(),this.resolveConstraints(),ti(_=>{if(!Dd(_,e,null))return;const T=this.getAxisMotionValue(_),{min:E,max:d}=this.constraints[_];T.set(qt(E,d,v[_]))})}addListeners(){if(!this.visualElement.current)return;P4.set(this.visualElement,this);const e=this.visualElement.current,h=Kc(e,"pointerdown",E=>{const{drag:d,dragListener:r=!0}=this.getProps();d&&r&&this.start(E)}),x=()=>{const{dragConstraints:E}=this.getProps();Bl(E)&&E.current&&(this.constraints=this.resolveRefConstraints())},{projection:v}=this.visualElement,S=v.addEventListener("measure",x);v&&!v.layout&&(v.root&&v.root.updateScroll(),v.updateLayout()),Ht.read(x);const _=ch(window,"resize",()=>this.scalePositionWithinConstraints()),T=v.addEventListener("didUpdate",(({delta:E,hasLayoutChanged:d})=>{this.isDragging&&d&&(ti(r=>{const c=this.getAxisMotionValue(r);c&&(this.originPoint[r]+=E[r].translate,c.set(c.get()+E[r].translate))}),this.visualElement.render())}));return()=>{_(),h(),S(),T&&T()}}getProps(){const e=this.visualElement.getProps(),{drag:h=!1,dragDirectionLock:x=!1,dragPropagation:v=!1,dragConstraints:S=!1,dragElastic:_=Cp,dragMomentum:T=!0}=e;return{...e,drag:h,dragDirectionLock:x,dragPropagation:v,dragConstraints:S,dragElastic:_,dragMomentum:T}}}function Dd(t,e,h){return(e===!0||e===t)&&(h===null||h===t)}function j4(t,e=10){let h=null;return Math.abs(t.y)>e?h="y":Math.abs(t.x)>e&&(h="x"),h}class O4 extends Aa{constructor(e){super(e),this.removeGroupControls=ri,this.removeListeners=ri,this.controls=new E4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ri}unmount(){this.removeGroupControls(),this.removeListeners()}}const Fv=t=>(e,h)=>{t&&Ht.postRender(()=>t(e,h))};class N4 extends Aa{constructor(){super(...arguments),this.removePointerDownListener=ri}onPointerDown(e){this.session=new B2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:I2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:h,onPan:x,onPanEnd:v}=this.node.getProps();return{onSessionStart:Fv(e),onStart:Fv(h),onMove:x,onEnd:(S,_)=>{delete this.session,v&&Ht.postRender(()=>v(S,_))}}}mount(){this.removePointerDownListener=Kc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Iv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const tc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(tt.test(t))t=parseFloat(t);else return t;const h=Iv(t,e.target.x),x=Iv(t,e.target.y);return`${h}% ${x}%`}},L4={correct:(t,{treeScale:e,projectionDelta:h})=>{const x=t,v=La.parse(t);if(v.length>5)return x;const S=La.createTransformer(t),_=typeof v[0]!="number"?1:0,T=h.x.scale*e.x,E=h.y.scale*e.y;v[0+_]/=T,v[1+_]/=E;const d=qt(T,E,.5);return typeof v[2+_]=="number"&&(v[2+_]/=d),typeof v[3+_]=="number"&&(v[3+_]/=d),S(v)}};let Sg=!1;class M4 extends ae.Component{componentDidMount(){const{visualElement:e,layoutGroup:h,switchLayoutGroup:x,layoutId:v}=this.props,{projection:S}=e;t5(A4),S&&(h.group&&h.group.add(S),x&&x.register&&v&&x.register(S),Sg&&S.root.didUpdate(),S.addEventListener("animationComplete",()=>{this.safeToRemove()}),S.setOptions({...S.options,onExitComplete:()=>this.safeToRemove()})),Wd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:h,visualElement:x,drag:v,isPresent:S}=this.props,{projection:_}=x;return _&&(_.isPresent=S,Sg=!0,v||e.layoutDependency!==h||h===void 0||e.isPresent!==S?_.willUpdate():this.safeToRemove(),e.isPresent!==S&&(S?_.promote():_.relegate()||Ht.postRender(()=>{const T=_.getStack();(!T||!T.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),im.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:h,switchLayoutGroup:x}=this.props,{projection:v}=e;Sg=!0,v&&(v.scheduleCheckAfterUnmount(),h&&h.group&&h.group.remove(v),x&&x.deregister&&x.deregister(v))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function U2(t){const[e,h]=u2(),x=ae.useContext(Dp);return k.jsx(M4,{...t,layoutGroup:x,switchLayoutGroup:ae.useContext(_2),isPresent:e,safeToRemove:h})}const A4={borderRadius:{...tc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tc,borderTopRightRadius:tc,borderBottomLeftRadius:tc,borderBottomRightRadius:tc,boxShadow:L4};function R4(t,e,h){const x=ir(t)?t:Xl(t);return x.start(pm("",x,e,h)),x.animation}const D4=(t,e)=>t.depth-e.depth;class F4{constructor(){this.children=[],this.isDirty=!1}add(e){Bp(this.children,e),this.isDirty=!0}remove(e){zp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(D4),this.isDirty=!1,this.children.forEach(e)}}function I4(t,e){const h=Or.now(),x=({timestamp:v})=>{const S=v-h;S>=e&&(Na(x),t(S-e))};return Ht.setup(x,!0),()=>Na(x)}const V2=["TopLeft","TopRight","BottomLeft","BottomRight"],B4=V2.length,Bv=t=>typeof t=="string"?parseFloat(t):t,zv=t=>typeof t=="number"||tt.test(t);function z4(t,e,h,x,v,S){v?(t.opacity=qt(0,h.opacity??1,U4(x)),t.opacityExit=qt(e.opacity??1,0,V4(x))):S&&(t.opacity=qt(e.opacity??1,h.opacity??1,x));for(let _=0;_<B4;_++){const T=`border${V2[_]}Radius`;let E=Uv(e,T),d=Uv(h,T);if(E===void 0&&d===void 0)continue;E||(E=0),d||(d=0),E===0||d===0||zv(E)===zv(d)?(t[T]=Math.max(qt(Bv(E),Bv(d),x),0),(Ki.test(d)||Ki.test(E))&&(t[T]+="%")):t[T]=d}(e.rotate||h.rotate)&&(t.rotate=qt(e.rotate||0,h.rotate||0,x))}function Uv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const U4=G2(0,.5,jx),V4=G2(.5,.95,ri);function G2(t,e,h){return x=>x<t?0:x>e?1:h(sh(t,e,x))}function Vv(t,e){t.min=e.min,t.max=e.max}function ei(t,e){Vv(t.x,e.x),Vv(t.y,e.y)}function Gv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Hv(t,e,h,x,v){return t-=e,t=sf(t,1/h,x),v!==void 0&&(t=sf(t,1/v,x)),t}function G4(t,e=0,h=1,x=.5,v,S=t,_=t){if(Ki.test(e)&&(e=parseFloat(e),e=qt(_.min,_.max,e/100)-_.min),typeof e!="number")return;let T=qt(S.min,S.max,x);t===S&&(T-=e),t.min=Hv(t.min,e,h,T,v),t.max=Hv(t.max,e,h,T,v)}function Wv(t,e,[h,x,v],S,_){G4(t,e[h],e[x],e[v],e.scale,S,_)}const H4=["x","scaleX","originX"],W4=["y","scaleY","originY"];function Xv(t,e,h,x){Wv(t.x,e,H4,h?h.x:void 0,x?x.x:void 0),Wv(t.y,e,W4,h?h.y:void 0,x?x.y:void 0)}function Yv(t){return t.translate===0&&t.scale===1}function H2(t){return Yv(t.x)&&Yv(t.y)}function qv(t,e){return t.min===e.min&&t.max===e.max}function X4(t,e){return qv(t.x,e.x)&&qv(t.y,e.y)}function Kv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function W2(t,e){return Kv(t.x,e.x)&&Kv(t.y,e.y)}function $v(t){return yr(t.x)/yr(t.y)}function Qv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Y4{constructor(){this.members=[]}add(e){Bp(this.members,e),e.scheduleRender()}remove(e){if(zp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const h=this.members[this.members.length-1];h&&this.promote(h)}}relegate(e){const h=this.members.findIndex(v=>e===v);if(h===0)return!1;let x;for(let v=h;v>=0;v--){const S=this.members[v];if(S.isPresent!==!1){x=S;break}}return x?(this.promote(x),!0):!1}promote(e,h){const x=this.lead;if(e!==x&&(this.prevLead=x,this.lead=e,e.show(),x)){x.instance&&x.scheduleRender(),e.scheduleRender(),e.resumeFrom=x,h&&(e.resumeFrom.preserveOpacity=!0),x.snapshot&&(e.snapshot=x.snapshot,e.snapshot.latestValues=x.animationValues||x.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:v}=e.options;v===!1&&x.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:h,resumingFrom:x}=e;h.onExitComplete&&h.onExitComplete(),x&&x.options.onExitComplete&&x.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function q4(t,e,h){let x="";const v=t.x.translate/e.x,S=t.y.translate/e.y,_=h?.z||0;if((v||S||_)&&(x=`translate3d(${v}px, ${S}px, ${_}px) `),(e.x!==1||e.y!==1)&&(x+=`scale(${1/e.x}, ${1/e.y}) `),h){const{transformPerspective:d,rotate:r,rotateX:c,rotateY:l,skewX:i,skewY:s}=h;d&&(x=`perspective(${d}px) ${x}`),r&&(x+=`rotate(${r}deg) `),c&&(x+=`rotateX(${c}deg) `),l&&(x+=`rotateY(${l}deg) `),i&&(x+=`skewX(${i}deg) `),s&&(x+=`skewY(${s}deg) `)}const T=t.x.scale*e.x,E=t.y.scale*e.y;return(T!==1||E!==1)&&(x+=`scale(${T}, ${E})`),x||"none"}const Cg=["","X","Y","Z"],K4=1e3;let $4=0;function kg(t,e,h,x){const{latestValues:v}=e;v[t]&&(h[t]=v[t],e.setStaticValue(t,0),x&&(x[t]=0))}function X2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const h=N2(e);if(window.MotionHasOptimisedAnimation(h,"transform")){const{layout:v,layoutId:S}=t.options;window.MotionCancelOptimisedAnimation(h,"transform",Ht,!(v||S))}const{parent:x}=t;x&&!x.hasCheckedOptimisedAppear&&X2(x)}function Y2({attachResizeListener:t,defaultParent:e,measureScroll:h,checkIsScrollRoot:x,resetTransform:v}){return class{constructor(_={},T=e?.()){this.id=$4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Z4),this.nodes.forEach(rk),this.nodes.forEach(ik),this.nodes.forEach(ek)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=_,this.root=T?T.root||T:this,this.path=T?[...T.path,T]:[],this.parent=T,this.depth=T?T.depth+1:0;for(let E=0;E<this.path.length;E++)this.path[E].shouldResetTransform=!0;this.root===this&&(this.nodes=new F4)}addEventListener(_,T){return this.eventHandlers.has(_)||this.eventHandlers.set(_,new Gp),this.eventHandlers.get(_).add(T)}notifyListeners(_,...T){const E=this.eventHandlers.get(_);E&&E.notify(...T)}hasListeners(_){return this.eventHandlers.has(_)}mount(_){if(this.instance)return;this.isSVG=l2(_)&&!B3(_),this.instance=_;const{layoutId:T,layout:E,visualElement:d}=this.options;if(d&&!d.current&&d.mount(_),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(E||T)&&(this.isLayoutDirty=!0),t){let r,c=0;const l=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{c=window.innerWidth}),t(_,()=>{const i=window.innerWidth;i!==c&&(c=i,this.root.updateBlockedByResize=!0,r&&r(),r=I4(l,250),Wd.hasAnimatedSinceResize&&(Wd.hasAnimatedSinceResize=!1,this.nodes.forEach(ey)))})}T&&this.root.registerSharedNode(T,this),this.options.animate!==!1&&d&&(T||E)&&this.addEventListener("didUpdate",({delta:r,hasLayoutChanged:c,hasRelativeLayoutChanged:l,layout:i})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const s=this.options.transition||d.getDefaultTransition()||uk,{onLayoutAnimationStart:o,onLayoutAnimationComplete:a}=d.getProps(),m=!this.targetLayout||!W2(this.targetLayout,i),f=!c&&l;if(this.options.layoutRoot||this.resumeFrom||f||c&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={...nm(s,"layout"),onPlay:o,onComplete:a};(d.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(r,f)}else c||ey(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const _=this.getStack();_&&_.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Na(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sk),this.animationId++)}getTransformTemplate(){const{visualElement:_}=this.options;return _&&_.getProps().transformTemplate}willUpdate(_=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&X2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const c=this.path[r];c.shouldResetTransform=!0,c.updateScroll("snapshot"),c.options.layoutRoot&&c.willUpdate(!1)}const{layoutId:T,layout:E}=this.options;if(T===void 0&&!E)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),_&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Jv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Zv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nk),this.nodes.forEach(Q4),this.nodes.forEach(J4)):this.nodes.forEach(Zv),this.clearAllSnapshots();const T=Or.now();$n.delta=js(0,1e3/60,T-$n.timestamp),$n.timestamp=T,$n.isProcessing=!0,fg.update.process($n),fg.preRender.process($n),fg.render.process($n),$n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,im.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tk),this.sharedNodes.forEach(ak)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yr(this.snapshot.measuredBox.x)&&!yr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let E=0;E<this.path.length;E++)this.path[E].updateScroll();const _=this.layout;this.layout=this.measure(!1),this.layoutCorrected=un(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:T}=this.options;T&&T.notify("LayoutMeasure",this.layout.layoutBox,_?_.layoutBox:void 0)}updateScroll(_="measure"){let T=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===_&&(T=!1),T&&this.instance){const E=x(this.instance);this.scroll={animationId:this.root.animationId,phase:_,isRoot:E,offset:h(this.instance),wasRoot:this.scroll?this.scroll.isRoot:E}}}resetTransform(){if(!v)return;const _=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,T=this.projectionDelta&&!H2(this.projectionDelta),E=this.getTransformTemplate(),d=E?E(this.latestValues,""):void 0,r=d!==this.prevTransformTemplateValue;_&&this.instance&&(T||wo(this.latestValues)||r)&&(v(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(_=!0){const T=this.measurePageBox();let E=this.removeElementScroll(T);return _&&(E=this.removeTransform(E)),ck(E),{animationId:this.root.animationId,measuredBox:T,layoutBox:E,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:_}=this.options;if(!_)return un();const T=_.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(hk))){const{scroll:d}=this.root;d&&(zl(T.x,d.offset.x),zl(T.y,d.offset.y))}return T}removeElementScroll(_){const T=un();if(ei(T,_),this.scroll?.wasRoot)return T;for(let E=0;E<this.path.length;E++){const d=this.path[E],{scroll:r,options:c}=d;d!==this.root&&r&&c.layoutScroll&&(r.wasRoot&&ei(T,_),zl(T.x,r.offset.x),zl(T.y,r.offset.y))}return T}applyTransform(_,T=!1){const E=un();ei(E,_);for(let d=0;d<this.path.length;d++){const r=this.path[d];!T&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ul(E,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),wo(r.latestValues)&&Ul(E,r.latestValues)}return wo(this.latestValues)&&Ul(E,this.latestValues),E}removeTransform(_){const T=un();ei(T,_);for(let E=0;E<this.path.length;E++){const d=this.path[E];if(!d.instance||!wo(d.latestValues))continue;yp(d.latestValues)&&d.updateSnapshot();const r=un(),c=d.measurePageBox();ei(r,c),Xv(T,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,r)}return wo(this.latestValues)&&Xv(T,this.latestValues),T}setTargetDelta(_){this.targetDelta=_,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(_){this.options={...this.options,..._,crossfade:_.crossfade!==void 0?_.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(_=!1){const T=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=T.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=T.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=T.isSharedProjectionDirty);const E=!!this.resumingFrom||this!==T;if(!(_||E&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:c}=this.options;if(!(!this.layout||!(r||c))){if(this.resolvedRelativeTargetAt=$n.timestamp,!this.targetDelta&&!this.relativeTarget){const l=this.getClosestProjectingParent();l&&l.layout&&this.animationProgress!==1?(this.relativeParent=l,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),Qc(this.relativeTargetOrigin,this.layout.layoutBox,l.layout.layoutBox),ei(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=un(),this.targetWithTransforms=un()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),v4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ei(this.target,this.layout.layoutBox),k2(this.target,this.targetDelta)):ei(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const l=this.getClosestProjectingParent();l&&!!l.resumingFrom==!!this.resumingFrom&&!l.options.layoutScroll&&l.target&&this.animationProgress!==1?(this.relativeParent=l,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),Qc(this.relativeTargetOrigin,this.target,l.target),ei(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||yp(this.parent.latestValues)||C2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const _=this.getLead(),T=!!this.resumingFrom||this!==_;let E=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(E=!1),T&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(E=!1),this.resolvedRelativeTargetAt===$n.timestamp&&(E=!1),E)return;const{layout:d,layoutId:r}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||r))return;ei(this.layoutCorrected,this.layout.layoutBox);const c=this.treeScale.x,l=this.treeScale.y;j5(this.layoutCorrected,this.treeScale,this.path,T),_.layout&&!_.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(_.target=_.layout.layoutBox,_.targetWithTransforms=un());const{target:i}=_;if(!i){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Gv(this.prevProjectionDelta.x,this.projectionDelta.x),Gv(this.prevProjectionDelta.y,this.projectionDelta.y)),$c(this.projectionDelta,this.layoutCorrected,i,this.latestValues),(this.treeScale.x!==c||this.treeScale.y!==l||!Qv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Qv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",i))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(_=!0){if(this.options.visualElement?.scheduleRender(),_){const T=this.getStack();T&&T.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vl(),this.projectionDelta=Vl(),this.projectionDeltaWithTransform=Vl()}setAnimationOrigin(_,T=!1){const E=this.snapshot,d=E?E.latestValues:{},r={...this.latestValues},c=Vl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!T;const l=un(),i=E?E.source:void 0,s=this.layout?this.layout.source:void 0,o=i!==s,a=this.getStack(),m=!a||a.members.length<=1,f=!!(o&&!m&&this.options.crossfade===!0&&!this.path.some(lk));this.animationProgress=0;let g;this.mixTargetDelta=w=>{const C=w/1e3;ty(c.x,_.x,C),ty(c.y,_.y,C),this.setTargetDelta(c),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qc(l,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ok(this.relativeTarget,this.relativeTargetOrigin,l,C),g&&X4(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=un()),ei(g,this.relativeTarget)),o&&(this.animationValues=r,z4(r,d,this.latestValues,C,f,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(_){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Na(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{Wd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Xl(0)),this.currentAnimation=R4(this.motionValue,[0,1e3],{..._,velocity:0,isSync:!0,onUpdate:T=>{this.mixTargetDelta(T),_.onUpdate&&_.onUpdate(T)},onStop:()=>{},onComplete:()=>{_.onComplete&&_.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const _=this.getStack();_&&_.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(K4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const _=this.getLead();let{targetWithTransforms:T,target:E,layout:d,latestValues:r}=_;if(!(!T||!E||!d)){if(this!==_&&this.layout&&d&&q2(this.options.animationType,this.layout.layoutBox,d.layoutBox)){E=this.target||un();const c=yr(this.layout.layoutBox.x);E.x.min=_.target.x.min,E.x.max=E.x.min+c;const l=yr(this.layout.layoutBox.y);E.y.min=_.target.y.min,E.y.max=E.y.min+l}ei(T,E),Ul(T,r),$c(this.projectionDeltaWithTransform,this.layoutCorrected,T,r)}}registerSharedNode(_,T){this.sharedNodes.has(_)||this.sharedNodes.set(_,new Y4),this.sharedNodes.get(_).add(T);const d=T.options.initialPromotionConfig;T.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(T):void 0})}isLead(){const _=this.getStack();return _?_.lead===this:!0}getLead(){const{layoutId:_}=this.options;return _?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:_}=this.options;return _?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:_}=this.options;if(_)return this.root.sharedNodes.get(_)}promote({needsReset:_,transition:T,preserveFollowOpacity:E}={}){const d=this.getStack();d&&d.promote(this,E),_&&(this.projectionDelta=void 0,this.needsReset=!0),T&&this.setOptions({transition:T})}relegate(){const _=this.getStack();return _?_.relegate(this):!1}resetSkewAndRotation(){const{visualElement:_}=this.options;if(!_)return;let T=!1;const{latestValues:E}=_;if((E.z||E.rotate||E.rotateX||E.rotateY||E.rotateZ||E.skewX||E.skewY)&&(T=!0),!T)return;const d={};E.z&&kg("z",_,d,this.animationValues);for(let r=0;r<Cg.length;r++)kg(`rotate${Cg[r]}`,_,d,this.animationValues),kg(`skew${Cg[r]}`,_,d,this.animationValues);_.render();for(const r in d)_.setStaticValue(r,d[r]),this.animationValues&&(this.animationValues[r]=d[r]);_.scheduleRender()}applyProjectionStyles(_,T){if(!this.instance||this.isSVG)return;if(!this.isVisible){_.visibility="hidden";return}const E=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,_.visibility="",_.opacity="",_.pointerEvents=Hd(T?.pointerEvents)||"",_.transform=E?E(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=Hd(T?.pointerEvents)||""),this.hasProjected&&!wo(this.latestValues)&&(_.transform=E?E({},""):"none",this.hasProjected=!1);return}_.visibility="";const r=d.animationValues||d.latestValues;this.applyTransformsToTarget();let c=q4(this.projectionDeltaWithTransform,this.treeScale,r);E&&(c=E(r,c)),_.transform=c;const{x:l,y:i}=this.projectionDelta;_.transformOrigin=`${l.origin*100}% ${i.origin*100}% 0`,d.animationValues?_.opacity=d===this?r.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit:_.opacity=d===this?r.opacity!==void 0?r.opacity:"":r.opacityExit!==void 0?r.opacityExit:0;for(const s in uh){if(r[s]===void 0)continue;const{correct:o,applyTo:a,isCSSVariable:m}=uh[s],f=c==="none"?r[s]:o(r[s],d);if(a){const g=a.length;for(let w=0;w<g;w++)_[a[w]]=f}else m?this.options.visualElement.renderState.vars[s]=f:_[s]=f}this.options.layoutId&&(_.pointerEvents=d===this?Hd(T?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(_=>_.currentAnimation?.stop()),this.root.nodes.forEach(Jv),this.root.sharedNodes.clear()}}}function Q4(t){t.updateLayout()}function J4(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:h,measuredBox:x}=t.layout,{animationType:v}=t.options,S=e.source!==t.layout.source;v==="size"?ti(r=>{const c=S?e.measuredBox[r]:e.layoutBox[r],l=yr(c);c.min=h[r].min,c.max=c.min+l}):q2(v,e.layoutBox,h)&&ti(r=>{const c=S?e.measuredBox[r]:e.layoutBox[r],l=yr(h[r]);c.max=c.min+l,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[r].max=t.relativeTarget[r].min+l)});const _=Vl();$c(_,h,e.layoutBox);const T=Vl();S?$c(T,t.applyTransform(x,!0),e.measuredBox):$c(T,h,e.layoutBox);const E=!H2(_);let d=!1;if(!t.resumeFrom){const r=t.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:c,layout:l}=r;if(c&&l){const i=un();Qc(i,e.layoutBox,c.layoutBox);const s=un();Qc(s,h,l.layoutBox),W2(i,s)||(d=!0),r.options.layoutRoot&&(t.relativeTarget=s,t.relativeTargetOrigin=i,t.relativeParent=r)}}}t.notifyListeners("didUpdate",{layout:h,snapshot:e,delta:T,layoutDelta:_,hasLayoutChanged:E,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:h}=t.options;h&&h()}t.options.transition=void 0}function Z4(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ek(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tk(t){t.clearSnapshot()}function Jv(t){t.clearMeasurements()}function Zv(t){t.isLayoutDirty=!1}function nk(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ey(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rk(t){t.resolveTargetDelta()}function ik(t){t.calcProjection()}function sk(t){t.resetSkewAndRotation()}function ak(t){t.removeLeadSnapshot()}function ty(t,e,h){t.translate=qt(e.translate,0,h),t.scale=qt(e.scale,1,h),t.origin=e.origin,t.originPoint=e.originPoint}function ny(t,e,h,x){t.min=qt(e.min,h.min,x),t.max=qt(e.max,h.max,x)}function ok(t,e,h,x){ny(t.x,e.x,h.x,x),ny(t.y,e.y,h.y,x)}function lk(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uk={duration:.45,ease:[.4,0,.1,1]},ry=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),iy=ry("applewebkit/")&&!ry("chrome/")?Math.round:ri;function sy(t){t.min=iy(t.min),t.max=iy(t.max)}function ck(t){sy(t.x),sy(t.y)}function q2(t,e,h){return t==="position"||t==="preserve-aspect"&&!m4($v(e),$v(h),.2)}function hk(t){return t!==t.root&&t.scroll?.wasRoot}const dk=Y2({attachResizeListener:(t,e)=>ch(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tg={current:void 0},K2=Y2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Tg.current){const t=new dk({});t.mount(window),t.setOptions({layoutScroll:!0}),Tg.current=t}return Tg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),fk={pan:{Feature:N4},drag:{Feature:O4,ProjectionNode:K2,MeasureLayout:U2}};function ay(t,e,h){const{props:x}=t;t.animationState&&x.whileHover&&t.animationState.setActive("whileHover",h==="Start");const v="onHover"+h,S=x[v];S&&Ht.postRender(()=>S(e,yh(e)))}class gk extends Aa{mount(){const{current:e}=this.node;e&&(this.unmount=A3(e,(h,x)=>(ay(this.node,x,"Start"),v=>ay(this.node,v,"End"))))}unmount(){}}class pk extends Aa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ph(ch(this.node.current,"focus",()=>this.onFocus()),ch(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function oy(t,e,h){const{props:x}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&x.whileTap&&t.animationState.setActive("whileTap",h==="Start");const v="onTap"+(h==="End"?"":h),S=x[v];S&&Ht.postRender(()=>S(e,yh(e)))}class mk extends Aa{mount(){const{current:e}=this.node;e&&(this.unmount=I3(e,(h,x)=>(oy(this.node,x,"Start"),(v,{success:S})=>oy(this.node,v,S?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const kp=new WeakMap,Pg=new WeakMap,vk=t=>{const e=kp.get(t.target);e&&e(t)},yk=t=>{t.forEach(vk)};function xk({root:t,...e}){const h=t||document;Pg.has(h)||Pg.set(h,{});const x=Pg.get(h),v=JSON.stringify(e);return x[v]||(x[v]=new IntersectionObserver(yk,{root:t,...e})),x[v]}function wk(t,e,h){const x=xk(e);return kp.set(t,h),x.observe(t),()=>{kp.delete(t),x.unobserve(t)}}const _k={some:0,all:1};class bk extends Aa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:h,margin:x,amount:v="some",once:S}=e,_={root:h?h.current:void 0,rootMargin:x,threshold:typeof v=="number"?v:_k[v]},T=E=>{const{isIntersecting:d}=E;if(this.isInView===d||(this.isInView=d,S&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:r,onViewportLeave:c}=this.node.getProps(),l=d?r:c;l&&l(E)};return wk(this.node.current,_,T)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:h}=this.node;["amount","margin","root"].some(Sk(e,h))&&this.startObserver()}unmount(){}}function Sk({viewport:t={}},{viewport:e={}}={}){return h=>t[h]!==e[h]}const Ck={inView:{Feature:bk},tap:{Feature:mk},focus:{Feature:pk},hover:{Feature:gk}},kk={layout:{ProjectionNode:K2,MeasureLayout:U2}},Tk={...c4,...Ck,...fk,...kk},ly=T5(Tk,B5),uy="/assets/myphoto3-kyN32aie.jpg",Pk="/assets/myphoto33-D67Tgr28.jpg",cy="/assets/myphoto-B9S0NRs1.jpg",Ek="/assets/myphoto_mobile-D1s9qLRC.jpg";function jk(){const{t}=cn(),[e,h]=ae.useState(0),[x,v]=ae.useState(window.innerWidth<=768),S=ae.useRef(null);ae.useEffect(()=>{const i=()=>v(window.innerWidth<=768);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const _=[{id:"saltlake",title:"Salt Lake",subtitle:t("hero.saltlake.subtitle"),tagline:t("hero.tagline"),cta:{href:"/catalog",label:t("hero.saltlake.cta")},images:{desktop:uy,mobile:Pk,lqip:uy}},{id:"standard",title:"STANDARD COLLECTION",subtitle:t("hero.standard.subtitle"),tagline:t("hero.tagline"),cta:{href:"/catalog?cat=accessories&sub=standard",label:t("hero.standard.cta")},images:{desktop:cy,mobile:Ek,lqip:cy}}],T=ae.useCallback(()=>h(i=>(i+1)%_.length),[]),E=ae.useCallback(()=>h(i=>(i-1+_.length)%_.length),[]);ae.useEffect(()=>{const i=setInterval(T,6e3);return()=>clearInterval(i)},[T]),ae.useEffect(()=>{const i=o=>{if(!o)return;const a=new Image;a.src=o,a.decoding="async"},s=_[(e+1)%_.length];i(s.images.desktop),i(s.images.mobile)},[e]);const d=i=>{S.current=i.touches[0].clientX},r=i=>{if(S.current===null)return;const s=S.current-i.changedTouches[0].clientX;Math.abs(s)>50&&(s>0?T():E()),S.current=null},c=_[e],l=x?c.images.mobile:c.images.desktop;return k.jsxs("section",{className:"relative w-full overflow-hidden select-none",style:{height:"100vh"},onTouchStart:d,onTouchEnd:r,children:[k.jsx(q3,{initial:!1,mode:"wait",children:k.jsx(ly.img,{src:l,alt:c.title,decoding:"async",fetchpriority:"high",initial:{opacity:.6,scale:1.02},animate:{opacity:1,scale:1},exit:{opacity:.85,scale:1.01},transition:{duration:.35,ease:"easeOut"},className:"absolute inset-0 w-full h-full object-cover",style:{objectPosition:"center center"},onError:i=>i.currentTarget.src=c.images.lqip},c.id+(x?"_mobile":"_desktop"))}),k.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/10 to-transparent"}),k.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center px-4 z-10",children:k.jsxs(ly.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,ease:"easeOut"},className:"text-white",children:[k.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 border border-white/20 rounded-full px-4 py-1 mb-4 backdrop-blur",children:[k.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-400 animate-pulse"}),k.jsx("span",{className:"text-sm",children:c.tagline})]}),k.jsx("h1",{className:"text-5xl md:text-7xl font-extrabold drop-shadow-lg",children:c.title}),k.jsx("p",{className:"mt-4 text-lg md:text-2xl text-white/90 max-w-2xl mx-auto",children:c.subtitle}),k.jsx("div",{className:"mt-8",children:k.jsx("a",{href:c.cta.href,className:"px-8 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-semibold shadow-lg transition",children:c.cta.label})})]},c.title)}),k.jsx("div",{className:"absolute bottom-5 left-1/2 -translate-x-1/2 z-10 flex gap-2",children:_.map((i,s)=>k.jsx("button",{onClick:()=>h(s),className:`h-2.5 rounded-full transition-all ${s===e?"w-8 bg-white":"w-3 bg-white/60 hover:bg-white/90"}`},i.id))}),!x&&k.jsxs(k.Fragment,{children:[k.jsx("button",{onClick:E,className:"absolute left-6 top-1/2 -translate-y-1/2 bg-black/40 hover:bg-black/60 text-white p-3 rounded-full transition z-20",children:k.jsx(Mp,{size:28})}),k.jsx("button",{onClick:T,className:"absolute right-6 top-1/2 -translate-y-1/2 bg-black/40 hover:bg-black/60 text-white p-3 rounded-full transition z-20",children:k.jsx(Gl,{size:28})})]})]})}const Ok="https://my-backend-production-3416.up.railway.app",hy="/news-fallback.jpg";function af(t=""){return typeof t!="string"||!t?hy:/^https?:\/\//i.test(t)?t:t.startsWith("/uploads/")?`${Ok}${t}`:hy}const Nk=()=>{const{t,i18n:e}=cn(),[h,x]=ae.useState([]),[v,S]=ae.useState(!0),[_,T]=ae.useState(null),E=async r=>{try{const c=(r||e.language||"ru").split("-")[0],i=await(await fetch(`${Np}/api/news?lng=${c}`,{headers:{"Accept-Language":c}})).json();i.success&&Array.isArray(i.news)?x(i.news.slice(0,3)):x([])}catch(c){console.error("  :",c),x([])}finally{S(!1)}};ae.useEffect(()=>{E();const r=setTimeout(()=>{e.language&&E(e.language)},400);return()=>clearTimeout(r)},[e.language]);const d=r=>{if(!r)return"";const c={ru:"ru-RU",kk:"kk-KZ",en:"en-US"},l=(e.language||"ru").split("-")[0];return new Date(r).toLocaleDateString(c[l]||"ru-RU",{year:"numeric",month:"long",day:"numeric"})};return v||h.length===0?k.jsx("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:k.jsx("div",{className:"max-w-6xl mx-auto px-4 text-center",children:v?k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-4 py-2 rounded-full text-sm font-medium mb-4 animate-pulse",children:[k.jsx(X0,{className:"w-4 h-4"}),t("news.tag")]}),k.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4 animate-pulse",children:t("news.loading")})]}):k.jsxs(k.Fragment,{children:[k.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:t("news.empty")}),k.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("news.errorLoad")})]})})}):k.jsxs("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-800 dark:to-gray-900",children:[k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-4 py-2 rounded-full text-sm font-medium mb-4",children:[k.jsx(X0,{className:"w-4 h-4"}),t("news.tag")]}),k.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6",children:t("news.title")}),k.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:t("news.subtitle",{defaultValue:"Latest trends and hospitality innovations"})})]}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map(r=>{const c=e.language?.split("-")[0]||"ru",l=r[`title_${c}`]||r.title_ru||r.title||t("news.noTitle"),i=r[`excerpt_${c}`]||r.excerpt||(r.content?r.content.slice(0,150)+"...":"");return r[`content_${c}`]||r.content_ru||r.content,k.jsxs("div",{onClick:()=>T(r),className:"group bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",children:[k.jsxs("div",{className:"relative overflow-hidden",children:[k.jsx("img",{src:af(r.imageUrl),alt:l,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500",onError:s=>s.currentTarget.src="/news-fallback.jpg"}),k.jsx("div",{className:"absolute top-4 left-4",children:k.jsx("span",{className:"bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:t("news.tag")})})]}),k.jsxs("div",{className:"p-6",children:[k.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-3",children:[k.jsx(rh,{className:"w-4 h-4"}),k.jsx("span",{children:d(r.publishedAt||r.created_at||r.createdAt||r.updatedAt)})]}),k.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors line-clamp-2",children:l}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 line-clamp-3",children:i}),k.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 font-semibold group-hover:gap-3 transition-all",children:[k.jsx("span",{children:t("news.readMore")}),k.jsx(np,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})]})]})]},r.id)})}),k.jsx("div",{className:"text-center mt-12",children:k.jsxs("a",{href:"/news",className:"inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-semibold transition-all",children:[t("news.viewAll"),k.jsx(np,{className:"w-4 h-4"})]})})]}),_&&k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[k.jsxs("div",{className:"relative",children:[k.jsx("img",{src:af(_.imageUrl),alt:_.title,className:"w-full h-64 object-cover",onError:r=>r.currentTarget.src="/news-fallback.jpg"}),k.jsx("button",{onClick:()=>T(null),className:"absolute top-4 right-4 bg-white dark:bg-gray-800 rounded-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:""})]}),k.jsx("div",{className:"p-8",children:(()=>{const r=e.language?.split("-")[0]||"ru",c=_[`title_${r}`]||_.title_ru||_.title||t("news.noTitle"),l=_[`content_${r}`]||_.content_ru||_.content||"";return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[k.jsx(rh,{className:"w-4 h-4"}),k.jsx("span",{children:d(_.publishedAt||_.created_at||_.createdAt||_.updatedAt)}),_.author&&k.jsxs("span",{children:[" ",_.author]})]}),k.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:c}),k.jsx("div",{className:"prose dark:prose-invert max-w-none",children:l.split(`
`).map((i,s)=>k.jsx("p",{className:"mb-4 text-gray-700 dark:text-gray-300 leading-relaxed",children:i},s))})]})})()})]})})]})},dy="https://my-backend-production-3416.up.railway.app",Lk=()=>{const{user:t}=Kl(),{t:e}=cn(),[h,x]=ae.useState([]),[v,S]=ae.useState({name:"",text:"",stars:5}),[_,T]=ae.useState(!0),[E,d]=ae.useState(!1),r=async()=>{try{T(!0);const i=await fetch(`${dy}/api/reviews`,{headers:{"Content-Type":"application/json"}});if(i.ok){const s=await i.json();x(s.success&&Array.isArray(s.reviews)?s.reviews:[])}else x([])}catch(i){console.error("  :",i),x([])}finally{T(!1)}},c=async i=>{if(i.preventDefault(),!t||!v.name.trim()||!v.text.trim())return;const s=Math.min(5,Math.max(1,Number(v.stars)||5));try{(await fetch(`${dy}/api/reviews`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:v.name.trim(),text:v.text.trim(),stars:s})})).ok&&(S({name:"",text:"",stars:5}),r())}catch(o){console.error("  :",o)}};ae.useEffect(()=>{r()},[]);const l=h.length?(h.reduce((i,s)=>i+(s.stars||5),0)/h.length).toFixed(1):null;return _?k.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:k.jsx(ih,{size:"large",text:e("home.loading")})}):k.jsxs("div",{className:"min-h-screen",children:[k.jsx(jk,{}),k.jsx("section",{className:"py-20 bg-gradient-to-b from-white to-gray-50/50 dark:from-gray-900 dark:to-gray-800",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.whyChoose")}),k.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto leading-relaxed",children:e("home.whyDescription")})]}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{icon:Rp,title:e("home.fastDelivery"),description:e("home.fastDeliveryDesc"),gradient:"from-green-500 to-blue-500"},{icon:px,title:e("home.qualityGuarantee"),description:e("home.qualityGuaranteeDesc"),gradient:"from-blue-500 to-purple-500"},{icon:kS,title:e("home.support"),description:e("home.supportDesc"),gradient:"from-purple-500 to-pink-500"}].map((i,s)=>k.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700",children:[k.jsx("div",{className:`bg-gradient-to-r ${i.gradient} w-16 h-16 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300`,children:k.jsx(i.icon,{className:"w-8 h-8 text-white"})}),k.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:i.title}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:i.description})]},s))})]})}),k.jsx(Nk,{}),k.jsx("section",{className:"py-16 bg-gradient-to-r from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[k.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.contactUsTitle")}),k.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-10 max-w-2xl mx-auto",children:e("home.contactUsSubtitle")}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 max-w-3xl mx-auto",children:[k.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:k.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[k.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full",children:k.jsx(Fl,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),k.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("home.kazakhstanTitle")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:e("home.kazakhstanPhone")}),k.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("home.kazakhstanDesc")}),k.jsx("a",{href:"tel:+77757016266",className:"mt-4 inline-block bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:e("home.callNow")})]})}),k.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 border border-gray-100 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:k.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[k.jsx("div",{className:"bg-green-100 dark:bg-green-900 p-3 rounded-full",children:k.jsx(Fl,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),k.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("home.kyrgyzstanTitle")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:e("home.kyrgyzstanPhone")}),k.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("home.kyrgyzstanDesc")}),k.jsx("a",{href:"tel:+996707123456",className:"mt-4 inline-block bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:e("home.callNow")})]})})]})]})}),k.jsx("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-800 dark:to-gray-900",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6",children:e("home.reviewsTitle")}),k.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:e("home.reviewsSubtitle")})]}),l&&k.jsx("div",{className:"flex justify-center items-center mb-12",children:k.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg border border-gray-100 dark:border-gray-700",children:k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("div",{className:"text-5xl font-bold text-yellow-500",children:l}),k.jsxs("div",{className:"flex flex-col",children:[k.jsx("div",{className:"flex items-center gap-1 mb-2",children:[1,2,3,4,5].map(i=>k.jsx(dg,{className:`w-6 h-6 ${i<=Math.round(l)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},i))}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("home.basedOnReviews",{count:h.length})})]})]})})}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:h.slice(0,6).map(i=>k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700 group",children:[k.jsx(NS,{className:"w-8 h-8 text-blue-500 mb-4 opacity-50 transform rotate-180"}),k.jsx("div",{className:"flex items-center gap-2 mb-4",children:[1,2,3,4,5].map(s=>k.jsx(dg,{className:`w-4 h-4 ${s<=(i.stars||5)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},s))}),k.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6 leading-relaxed italic",children:['"',i.text,'"']}),k.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-100 dark:border-gray-700",children:[k.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:i.name.charAt(0).toUpperCase()}),k.jsxs("div",{children:[k.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:i.name}),k.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(i.created_at).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})})]})]})]},i.id))}),k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg border border-gray-100 dark:border-gray-700 max-w-2xl mx-auto",children:[k.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 text-center",children:e("home.leaveReview")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:e("home.shareExperience")}),k.jsx("form",{onSubmit:c,className:"space-y-6",children:t?k.jsxs(k.Fragment,{children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("home.yourName")}),k.jsx("input",{type:"text",value:v.name,onChange:i=>S(s=>({...s,name:i.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:e("home.namePlaceholder")})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("home.rating")}),k.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(i=>k.jsx("button",{type:"button",onClick:()=>S(s=>({...s,stars:i})),className:`p-2 rounded-lg transition-all duration-200 ${v.stars>=i?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 hover:bg-yellow-50"}`,children:k.jsx(dg,{className:`w-6 h-6 ${v.stars>=i?"fill-current":""}`})},i))})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("home.reviewText")}),k.jsx("textarea",{rows:"4",value:v.text,onChange:i=>S(s=>({...s,text:i.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:e("home.reviewPlaceholder")})]}),k.jsx("button",{type:"submit",disabled:!v.name.trim()||!v.text.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-4 px-6 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:e("home.publishReview")})]}):k.jsxs("div",{className:"text-center py-4",children:[k.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("home.loginToReview")}),k.jsx("button",{type:"button",onClick:()=>d(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:e("home.login")})]})})]})]})}),k.jsx(vx,{isOpen:E,onClose:()=>d(!1)})]})},Mk=({product:t,isOpen:e,onClose:h})=>{const[x,v]=ae.useState(1),[S,_]=ae.useState(0),[T,E]=ae.useState(!1),[d,r]=ae.useState(0);ae.useEffect(()=>(e?(document.body.style.overflow="hidden",v(1),_(0),E(!1),r(0)):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]);const c=()=>{v(g=>{const w=Math.min(g+.25,3);return E(w>1),w})},l=()=>{v(g=>{const w=Math.max(g-.25,.5);return E(w>1),w})},i=()=>_(g=>(g+90)%360),s=()=>{v(1),_(0),E(!1)},o=g=>{T?s():c()},a=()=>{t.images&&t.images.length>1&&(r(g=>g===t.images.length-1?0:g+1),v(1),_(0),E(!1))},m=()=>{t.images&&t.images.length>1&&(r(g=>g===0?t.images.length-1:g-1),v(1),_(0),E(!1))};if(!e||!t)return null;const f=t.images&&t.images[d]?t.images[d].url:"https://via.placeholder.com/600x400?text=No+Image";return k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50 p-4 cursor-zoom-out",onClick:h,children:k.jsxs("div",{className:"relative max-w-4xl max-h-full w-full h-full flex items-center justify-center",onClick:g=>g.stopPropagation(),children:[k.jsxs("div",{className:"absolute top-4 right-4 flex gap-3 z-10 bg-black/50 backdrop-blur-sm rounded-2xl p-3",children:[k.jsx("button",{onClick:c,className:"p-3 text-white hover:bg-white/20 rounded-xl transition-all duration-300 hover:scale-110",title:"",children:k.jsx(IS,{className:"w-5 h-5"})}),k.jsx("button",{onClick:l,className:"p-3 text-white hover:bg-white/20 rounded-xl transition-all duration-300 hover:scale-110",title:"",children:k.jsx(BS,{className:"w-5 h-5"})}),k.jsx("button",{onClick:i,className:"p-3 text-white hover:bg-white/20 rounded-xl transition-all duration-300 hover:scale-110",title:"",children:k.jsx(LS,{className:"w-5 h-5"})}),k.jsx("button",{onClick:s,className:"p-3 text-white hover:bg-white/20 rounded-xl transition-all duration-300 hover:scale-110",title:"",children:""}),k.jsx("button",{onClick:h,className:"p-3 text-white hover:bg-red-500/50 rounded-xl transition-all duration-300 hover:scale-110",children:k.jsx(Ql,{className:"w-5 h-5"})})]}),t.images&&t.images.length>1&&k.jsxs(k.Fragment,{children:[k.jsx("button",{onClick:g=>{g.stopPropagation(),m()},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-3 rounded-full hover:bg-black/70 transition-all z-10",children:k.jsx(Mp,{className:"w-6 h-6"})}),k.jsx("button",{onClick:g=>{g.stopPropagation(),a()},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-3 rounded-full hover:bg-black/70 transition-all z-10",children:k.jsx(Gl,{className:"w-6 h-6"})})]}),k.jsx("div",{className:"flex justify-center items-center w-full h-full p-4",children:k.jsx("div",{className:`relative transition-all duration-500 ${T?"cursor-zoom-out":"cursor-zoom-in"}`,style:{transform:`scale(${x}) rotate(${S}deg)`,transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",maxWidth:"90vw",maxHeight:"80vh"},children:k.jsx("img",{src:f,alt:t.name,className:"max-w-full max-h-[70vh] object-contain rounded-lg shadow-2xl",onClick:o,style:{transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onError:g=>{console.error("Modal image failed to load:",g.target.src),g.target.src="https://via.placeholder.com/600x400?text=Image+Error",g.target.onerror=null}})})}),t.images&&t.images.length>1&&k.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/70 text-white px-4 py-2 rounded-xl text-sm backdrop-blur-sm border border-white/20",children:[" ",d+1," / ",t.images.length]}),x!==1&&k.jsxs("div",{className:"absolute top-4 left-4 bg-black/70 text-white px-3 py-1 rounded-xl text-sm backdrop-blur-sm border border-white/20",children:[": ",Math.round(x*100),"%"]})]})})},Ak=({type:t="card",count:e=1})=>{const h=()=>k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-200 dark:border-gray-700 animate-pulse",children:[k.jsx("div",{className:"w-full h-48 bg-gray-200 dark:bg-gray-700 relative overflow-hidden",children:k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent animate-shimmer bg-[length:200px_100%] bg-repeat-x"})}),k.jsxs("div",{className:"p-6",children:[k.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-3 relative overflow-hidden",children:k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent animate-shimmer bg-[length:200px_100%] bg-repeat-x"})}),k.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-full mb-2 relative overflow-hidden",children:k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent animate-shimmer bg-[length:200px_100%] bg-repeat-x"})}),k.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-2/3 mb-4 relative overflow-hidden",children:k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent animate-shimmer bg-[length:200px_100%] bg-repeat-x"})}),k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-20 relative overflow-hidden",children:k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent animate-shimmer bg-[length:200px_100%] bg-repeat-x"})}),k.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded-lg w-24 relative overflow-hidden",children:k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent animate-shimmer bg-[length:200px_100%] bg-repeat-x"})})]})]})]}),x=()=>k.jsxs("div",{className:"space-y-3",children:[k.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 relative overflow-hidden",children:k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent animate-shimmer bg-[length:200px_100%] bg-repeat-x"})}),k.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full relative overflow-hidden",children:k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent animate-shimmer bg-[length:200px_100%] bg-repeat-x"})}),k.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6 relative overflow-hidden",children:k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent animate-shimmer bg-[length:200px_100%] bg-repeat-x"})})]});return t==="text"?k.jsx(x,{}):k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:e}).map((v,S)=>k.jsx(h,{},S))})};var Xd={exports:{}},nc={},Eg={},jg={},fy;function ht(){return fy||(fy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function h(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Qm<"u"?Qm:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:h(),isUnminified:/param/.test((function(v){}).toString()),dblClickWindow:400,getAngle(v){return t.Konva.angleDeg?v*e:v},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var v;return(v=t.Konva.Transformer)===null||v===void 0?void 0:v.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(v){t.glob.Konva=v}};const x=v=>{t.Konva[v.prototype.getClassName()]=v};t._registerNode=x,t.Konva._injectGlobal(t.Konva)})(jg)),jg}var Og={},gy;function en(){return gy||(gy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=ht();class h{constructor(w=[1,0,0,1,0,0]){this.dirty=!1,this.m=w&&w.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new h(this.m)}copyInto(w){w.m[0]=this.m[0],w.m[1]=this.m[1],w.m[2]=this.m[2],w.m[3]=this.m[3],w.m[4]=this.m[4],w.m[5]=this.m[5]}point(w){const C=this.m;return{x:C[0]*w.x+C[2]*w.y+C[4],y:C[1]*w.x+C[3]*w.y+C[5]}}translate(w,C){return this.m[4]+=this.m[0]*w+this.m[2]*C,this.m[5]+=this.m[1]*w+this.m[3]*C,this}scale(w,C){return this.m[0]*=w,this.m[1]*=w,this.m[2]*=C,this.m[3]*=C,this}rotate(w){const C=Math.cos(w),P=Math.sin(w),M=this.m[0]*C+this.m[2]*P,L=this.m[1]*C+this.m[3]*P,B=this.m[0]*-P+this.m[2]*C,D=this.m[1]*-P+this.m[3]*C;return this.m[0]=M,this.m[1]=L,this.m[2]=B,this.m[3]=D,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(w,C){const P=this.m[0]+this.m[2]*C,M=this.m[1]+this.m[3]*C,L=this.m[2]+this.m[0]*w,B=this.m[3]+this.m[1]*w;return this.m[0]=P,this.m[1]=M,this.m[2]=L,this.m[3]=B,this}multiply(w){const C=this.m[0]*w.m[0]+this.m[2]*w.m[1],P=this.m[1]*w.m[0]+this.m[3]*w.m[1],M=this.m[0]*w.m[2]+this.m[2]*w.m[3],L=this.m[1]*w.m[2]+this.m[3]*w.m[3],B=this.m[0]*w.m[4]+this.m[2]*w.m[5]+this.m[4],D=this.m[1]*w.m[4]+this.m[3]*w.m[5]+this.m[5];return this.m[0]=C,this.m[1]=P,this.m[2]=M,this.m[3]=L,this.m[4]=B,this.m[5]=D,this}invert(){const w=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),C=this.m[3]*w,P=-this.m[1]*w,M=-this.m[2]*w,L=this.m[0]*w,B=w*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),D=w*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=C,this.m[1]=P,this.m[2]=M,this.m[3]=L,this.m[4]=B,this.m[5]=D,this}getMatrix(){return this.m}decompose(){const w=this.m[0],C=this.m[1],P=this.m[2],M=this.m[3],L=this.m[4],B=this.m[5],D=w*M-C*P,H={x:L,y:B,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(w!=0||C!=0){const Q=Math.sqrt(w*w+C*C);H.rotation=C>0?Math.acos(w/Q):-Math.acos(w/Q),H.scaleX=Q,H.scaleY=D/Q,H.skewX=(w*P+C*M)/D,H.skewY=0}else if(P!=0||M!=0){const Q=Math.sqrt(P*P+M*M);H.rotation=Math.PI/2-(M>0?Math.acos(-P/Q):-Math.acos(P/Q)),H.scaleX=D/Q,H.scaleY=Q,H.skewX=0,H.skewY=(w*P+C*M)/D}return H.rotation=t.Util._getRotation(H.rotation),H}}t.Transform=h;const x="[object Array]",v="[object Number]",S="[object String]",_="[object Boolean]",T=Math.PI/180,E=180/Math.PI,d="#",r="",c="0",l="Konva warning: ",i="Konva error: ",s="rgb(",o={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},a=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let m=[];const f=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(g){setTimeout(g,60)};t.Util={_isElement(g){return!!(g&&g.nodeType==1)},_isFunction(g){return!!(g&&g.constructor&&g.call&&g.apply)},_isPlainObject(g){return!!g&&g.constructor===Object},_isArray(g){return Object.prototype.toString.call(g)===x},_isNumber(g){return Object.prototype.toString.call(g)===v&&!isNaN(g)&&isFinite(g)},_isString(g){return Object.prototype.toString.call(g)===S},_isBoolean(g){return Object.prototype.toString.call(g)===_},isObject(g){return g instanceof Object},isValidSelector(g){if(typeof g!="string")return!1;const w=g[0];return w==="#"||w==="."||w===w.toUpperCase()},_sign(g){return g===0||g>0?1:-1},requestAnimFrame(g){m.push(g),m.length===1&&f(function(){const w=m;m=[],w.forEach(function(C){C()})})},createCanvasElement(){const g=document.createElement("canvas");try{g.style=g.style||{}}catch{}return g},createImageElement(){return document.createElement("img")},_isInDocument(g){for(;g=g.parentNode;)if(g==document)return!0;return!1},_urlToImage(g,w){const C=t.Util.createImageElement();C.onload=function(){w(C)},C.src=g},_rgbToHex(g,w,C){return((1<<24)+(g<<16)+(w<<8)+C).toString(16).slice(1)},_hexToRgb(g){g=g.replace(d,r);const w=parseInt(g,16);return{r:w>>16&255,g:w>>8&255,b:w&255}},getRandomColor(){let g=(Math.random()*16777215<<0).toString(16);for(;g.length<6;)g=c+g;return d+g},getRGB(g){let w;return g in o?(w=o[g],{r:w[0],g:w[1],b:w[2]}):g[0]===d?this._hexToRgb(g.substring(1)):g.substr(0,4)===s?(w=a.exec(g.replace(/ /g,"")),{r:parseInt(w[1],10),g:parseInt(w[2],10),b:parseInt(w[3],10)}):{r:0,g:0,b:0}},colorToRGBA(g){return g=g||"black",t.Util._namedColorToRBA(g)||t.Util._hex3ColorToRGBA(g)||t.Util._hex4ColorToRGBA(g)||t.Util._hex6ColorToRGBA(g)||t.Util._hex8ColorToRGBA(g)||t.Util._rgbColorToRGBA(g)||t.Util._rgbaColorToRGBA(g)||t.Util._hslColorToRGBA(g)},_namedColorToRBA(g){const w=o[g.toLowerCase()];return w?{r:w[0],g:w[1],b:w[2],a:1}:null},_rgbColorToRGBA(g){if(g.indexOf("rgb(")===0){g=g.match(/rgb\(([^)]+)\)/)[1];const w=g.split(/ *, */).map(Number);return{r:w[0],g:w[1],b:w[2],a:1}}},_rgbaColorToRGBA(g){if(g.indexOf("rgba(")===0){g=g.match(/rgba\(([^)]+)\)/)[1];const w=g.split(/ *, */).map((C,P)=>C.slice(-1)==="%"?P===3?parseInt(C)/100:parseInt(C)/100*255:Number(C));return{r:w[0],g:w[1],b:w[2],a:w[3]}}},_hex8ColorToRGBA(g){if(g[0]==="#"&&g.length===9)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:parseInt(g.slice(7,9),16)/255}},_hex6ColorToRGBA(g){if(g[0]==="#"&&g.length===7)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:1}},_hex4ColorToRGBA(g){if(g[0]==="#"&&g.length===5)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:parseInt(g[4]+g[4],16)/255}},_hex3ColorToRGBA(g){if(g[0]==="#"&&g.length===4)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:1}},_hslColorToRGBA(g){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(g)){const[w,...C]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(g),P=Number(C[0])/360,M=Number(C[1])/100,L=Number(C[2])/100;let B,D,H;if(M===0)return H=L*255,{r:Math.round(H),g:Math.round(H),b:Math.round(H),a:1};L<.5?B=L*(1+M):B=L+M-L*M;const Q=2*L-B,ee=[0,0,0];for(let se=0;se<3;se++)D=P+1/3*-(se-1),D<0&&D++,D>1&&D--,6*D<1?H=Q+(B-Q)*6*D:2*D<1?H=B:3*D<2?H=Q+(B-Q)*(2/3-D)*6:H=Q,ee[se]=H*255;return{r:Math.round(ee[0]),g:Math.round(ee[1]),b:Math.round(ee[2]),a:1}}},haveIntersection(g,w){return!(w.x>g.x+g.width||w.x+w.width<g.x||w.y>g.y+g.height||w.y+w.height<g.y)},cloneObject(g){const w={};for(const C in g)this._isPlainObject(g[C])?w[C]=this.cloneObject(g[C]):this._isArray(g[C])?w[C]=this.cloneArray(g[C]):w[C]=g[C];return w},cloneArray(g){return g.slice(0)},degToRad(g){return g*T},radToDeg(g){return g*E},_degToRad(g){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(g)},_radToDeg(g){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(g)},_getRotation(g){return e.Konva.angleDeg?t.Util.radToDeg(g):g},_capitalize(g){return g.charAt(0).toUpperCase()+g.slice(1)},throw(g){throw new Error(i+g)},error(g){console.error(i+g)},warn(g){e.Konva.showWarnings&&console.warn(l+g)},each(g,w){for(const C in g)w(C,g[C])},_inRange(g,w,C){return w<=g&&g<C},_getProjectionToSegment(g,w,C,P,M,L){let B,D,H;const Q=(g-C)*(g-C)+(w-P)*(w-P);if(Q==0)B=g,D=w,H=(M-C)*(M-C)+(L-P)*(L-P);else{const ee=((M-g)*(C-g)+(L-w)*(P-w))/Q;ee<0?(B=g,D=w,H=(g-M)*(g-M)+(w-L)*(w-L)):ee>1?(B=C,D=P,H=(C-M)*(C-M)+(P-L)*(P-L)):(B=g+ee*(C-g),D=w+ee*(P-w),H=(B-M)*(B-M)+(D-L)*(D-L))}return[B,D,H]},_getProjectionToLine(g,w,C){const P=t.Util.cloneObject(g);let M=Number.MAX_VALUE;return w.forEach(function(L,B){if(!C&&B===w.length-1)return;const D=w[(B+1)%w.length],H=t.Util._getProjectionToSegment(L.x,L.y,D.x,D.y,g.x,g.y),Q=H[0],ee=H[1],se=H[2];se<M&&(P.x=Q,P.y=ee,M=se)}),P},_prepareArrayForTween(g,w,C){const P=[],M=[];if(g.length>w.length){const B=w;w=g,g=B}for(let B=0;B<g.length;B+=2)P.push({x:g[B],y:g[B+1]});for(let B=0;B<w.length;B+=2)M.push({x:w[B],y:w[B+1]});const L=[];return M.forEach(function(B){const D=t.Util._getProjectionToLine(B,P,C);L.push(D.x),L.push(D.y)}),L},_prepareToStringify(g){let w;g.visitedByCircularReferenceRemoval=!0;for(const C in g)if(g.hasOwnProperty(C)&&g[C]&&typeof g[C]=="object"){if(w=Object.getOwnPropertyDescriptor(g,C),g[C].visitedByCircularReferenceRemoval||t.Util._isElement(g[C]))if(w.configurable)delete g[C];else return null;else if(t.Util._prepareToStringify(g[C])===null)if(w.configurable)delete g[C];else return null}return delete g.visitedByCircularReferenceRemoval,g},_assign(g,w){for(const C in w)g[C]=w[C];return g},_getFirstPointerId(g){return g.touches?g.changedTouches[0].identifier:g.pointerId||999},releaseCanvas(...g){e.Konva.releaseCanvasOnDestroy&&g.forEach(w=>{w.width=0,w.height=0})},drawRoundedRectPath(g,w,C,P){let M=0,L=0,B=0,D=0;typeof P=="number"?M=L=B=D=Math.min(P,w/2,C/2):(M=Math.min(P[0]||0,w/2,C/2),L=Math.min(P[1]||0,w/2,C/2),D=Math.min(P[2]||0,w/2,C/2),B=Math.min(P[3]||0,w/2,C/2)),g.moveTo(M,0),g.lineTo(w-L,0),g.arc(w-L,L,L,Math.PI*3/2,0,!1),g.lineTo(w,C-D),g.arc(w-D,C-D,D,0,Math.PI/2,!1),g.lineTo(B,C),g.arc(B,C-B,B,Math.PI/2,Math.PI,!1),g.lineTo(0,M),g.arc(M,M,M,Math.PI,Math.PI*3/2,!1)}}})(Og)),Og}var rc={},Ps={},Es={},py;function $2(){if(py)return Es;py=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.HitContext=Es.SceneContext=Es.Context=void 0;const t=en(),e=ht();function h(m){const f=[],g=m.length,w=t.Util;for(let C=0;C<g;C++){let P=m[C];w._isNumber(P)?P=Math.round(P*1e3)/1e3:w._isString(P)||(P=P+""),f.push(P)}return f}const x=",",v="(",S=")",_="([",T="])",E=";",d="()",r="=",c=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],l=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],i=100;let s=class{constructor(f){this.canvas=f,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(f){f.fillEnabled()&&this._fill(f)}_fill(f){}strokeShape(f){f.hasStroke()&&this._stroke(f)}_stroke(f){}fillStrokeShape(f){f.attrs.fillAfterStrokeEnabled?(this.strokeShape(f),this.fillShape(f)):(this.fillShape(f),this.strokeShape(f))}getTrace(f,g){let w=this.traceArr,C=w.length,P="",M,L,B,D;for(M=0;M<C;M++)L=w[M],B=L.method,B?(D=L.args,P+=B,f?P+=d:t.Util._isArray(D[0])?P+=_+D.join(x)+T:(g&&(D=D.map(H=>typeof H=="number"?Math.floor(H):H)),P+=v+D.join(x)+S)):(P+=L.property,f||(P+=r+L.val)),P+=E;return P}clearTrace(){this.traceArr=[]}_trace(f){let g=this.traceArr,w;g.push(f),w=g.length,w>=i&&g.shift()}reset(){const f=this.getCanvas().getPixelRatio();this.setTransform(1*f,0,0,1*f,0,0)}getCanvas(){return this.canvas}clear(f){const g=this.getCanvas();f?this.clearRect(f.x||0,f.y||0,f.width||0,f.height||0):this.clearRect(0,0,g.getWidth()/g.pixelRatio,g.getHeight()/g.pixelRatio)}_applyLineCap(f){const g=f.attrs.lineCap;g&&this.setAttr("lineCap",g)}_applyOpacity(f){const g=f.getAbsoluteOpacity();g!==1&&this.setAttr("globalAlpha",g)}_applyLineJoin(f){const g=f.attrs.lineJoin;g&&this.setAttr("lineJoin",g)}setAttr(f,g){this._context[f]=g}arc(f,g,w,C,P,M){this._context.arc(f,g,w,C,P,M)}arcTo(f,g,w,C,P){this._context.arcTo(f,g,w,C,P)}beginPath(){this._context.beginPath()}bezierCurveTo(f,g,w,C,P,M){this._context.bezierCurveTo(f,g,w,C,P,M)}clearRect(f,g,w,C){this._context.clearRect(f,g,w,C)}clip(...f){this._context.clip.apply(this._context,f)}closePath(){this._context.closePath()}createImageData(f,g){const w=arguments;if(w.length===2)return this._context.createImageData(f,g);if(w.length===1)return this._context.createImageData(f)}createLinearGradient(f,g,w,C){return this._context.createLinearGradient(f,g,w,C)}createPattern(f,g){return this._context.createPattern(f,g)}createRadialGradient(f,g,w,C,P,M){return this._context.createRadialGradient(f,g,w,C,P,M)}drawImage(f,g,w,C,P,M,L,B,D){const H=arguments,Q=this._context;H.length===3?Q.drawImage(f,g,w):H.length===5?Q.drawImage(f,g,w,C,P):H.length===9&&Q.drawImage(f,g,w,C,P,M,L,B,D)}ellipse(f,g,w,C,P,M,L,B){this._context.ellipse(f,g,w,C,P,M,L,B)}isPointInPath(f,g,w,C){return w?this._context.isPointInPath(w,f,g,C):this._context.isPointInPath(f,g,C)}fill(...f){this._context.fill.apply(this._context,f)}fillRect(f,g,w,C){this._context.fillRect(f,g,w,C)}strokeRect(f,g,w,C){this._context.strokeRect(f,g,w,C)}fillText(f,g,w,C){C?this._context.fillText(f,g,w,C):this._context.fillText(f,g,w)}measureText(f){return this._context.measureText(f)}getImageData(f,g,w,C){return this._context.getImageData(f,g,w,C)}lineTo(f,g){this._context.lineTo(f,g)}moveTo(f,g){this._context.moveTo(f,g)}rect(f,g,w,C){this._context.rect(f,g,w,C)}roundRect(f,g,w,C,P){this._context.roundRect(f,g,w,C,P)}putImageData(f,g,w){this._context.putImageData(f,g,w)}quadraticCurveTo(f,g,w,C){this._context.quadraticCurveTo(f,g,w,C)}restore(){this._context.restore()}rotate(f){this._context.rotate(f)}save(){this._context.save()}scale(f,g){this._context.scale(f,g)}setLineDash(f){this._context.setLineDash?this._context.setLineDash(f):"mozDash"in this._context?this._context.mozDash=f:"webkitLineDash"in this._context&&(this._context.webkitLineDash=f)}getLineDash(){return this._context.getLineDash()}setTransform(f,g,w,C,P,M){this._context.setTransform(f,g,w,C,P,M)}stroke(f){f?this._context.stroke(f):this._context.stroke()}strokeText(f,g,w,C){this._context.strokeText(f,g,w,C)}transform(f,g,w,C,P,M){this._context.transform(f,g,w,C,P,M)}translate(f,g){this._context.translate(f,g)}_enableTrace(){let f=this,g=c.length,w=this.setAttr,C,P;const M=function(L){let B=f[L],D;f[L]=function(){return P=h(Array.prototype.slice.call(arguments,0)),D=B.apply(f,arguments),f._trace({method:L,args:P}),D}};for(C=0;C<g;C++)M(c[C]);f.setAttr=function(){w.apply(f,arguments);const L=arguments[0];let B=arguments[1];(L==="shadowOffsetX"||L==="shadowOffsetY"||L==="shadowBlur")&&(B=B/this.canvas.getPixelRatio()),f._trace({property:L,val:B})}}_applyGlobalCompositeOperation(f){const g=f.attrs.globalCompositeOperation;!g||g==="source-over"||this.setAttr("globalCompositeOperation",g)}};Es.Context=s,l.forEach(function(m){Object.defineProperty(s.prototype,m,{get(){return this._context[m]},set(f){this._context[m]=f}})});class o extends s{constructor(f,{willReadFrequently:g=!1}={}){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:g})}_fillColor(f){const g=f.fill();this.setAttr("fillStyle",g),f._fillFunc(this)}_fillPattern(f){this.setAttr("fillStyle",f._getFillPattern()),f._fillFunc(this)}_fillLinearGradient(f){const g=f._getLinearGradient();g&&(this.setAttr("fillStyle",g),f._fillFunc(this))}_fillRadialGradient(f){const g=f._getRadialGradient();g&&(this.setAttr("fillStyle",g),f._fillFunc(this))}_fill(f){const g=f.fill(),w=f.getFillPriority();if(g&&w==="color"){this._fillColor(f);return}const C=f.getFillPatternImage();if(C&&w==="pattern"){this._fillPattern(f);return}const P=f.getFillLinearGradientColorStops();if(P&&w==="linear-gradient"){this._fillLinearGradient(f);return}const M=f.getFillRadialGradientColorStops();if(M&&w==="radial-gradient"){this._fillRadialGradient(f);return}g?this._fillColor(f):C?this._fillPattern(f):P?this._fillLinearGradient(f):M&&this._fillRadialGradient(f)}_strokeLinearGradient(f){const g=f.getStrokeLinearGradientStartPoint(),w=f.getStrokeLinearGradientEndPoint(),C=f.getStrokeLinearGradientColorStops(),P=this.createLinearGradient(g.x,g.y,w.x,w.y);if(C){for(let M=0;M<C.length;M+=2)P.addColorStop(C[M],C[M+1]);this.setAttr("strokeStyle",P)}}_stroke(f){const g=f.dash(),w=f.getStrokeScaleEnabled();if(f.hasStroke()){if(!w){this.save();const P=this.getCanvas().getPixelRatio();this.setTransform(P,0,0,P,0,0)}this._applyLineCap(f),g&&f.dashEnabled()&&(this.setLineDash(g),this.setAttr("lineDashOffset",f.dashOffset())),this.setAttr("lineWidth",f.strokeWidth()),f.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),f.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(f):this.setAttr("strokeStyle",f.stroke()),f._strokeFunc(this),w||this.restore()}}_applyShadow(f){var g,w,C;const P=(g=f.getShadowRGBA())!==null&&g!==void 0?g:"black",M=(w=f.getShadowBlur())!==null&&w!==void 0?w:5,L=(C=f.getShadowOffset())!==null&&C!==void 0?C:{x:0,y:0},B=f.getAbsoluteScale(),D=this.canvas.getPixelRatio(),H=B.x*D,Q=B.y*D;this.setAttr("shadowColor",P),this.setAttr("shadowBlur",M*Math.min(Math.abs(H),Math.abs(Q))),this.setAttr("shadowOffsetX",L.x*H),this.setAttr("shadowOffsetY",L.y*Q)}}Es.SceneContext=o;class a extends s{constructor(f){super(f),this._context=f._canvas.getContext("2d",{willReadFrequently:!0})}_fill(f){this.save(),this.setAttr("fillStyle",f.colorKey),f._fillFuncHit(this),this.restore()}strokeShape(f){f.hasHitStroke()&&this._stroke(f)}_stroke(f){if(f.hasHitStroke()){const g=f.getStrokeScaleEnabled();if(!g){this.save();const P=this.getCanvas().getPixelRatio();this.setTransform(P,0,0,P,0,0)}this._applyLineCap(f);const w=f.hitStrokeWidth(),C=w==="auto"?f.strokeWidth():w;this.setAttr("lineWidth",C),this.setAttr("strokeStyle",f.colorKey),f._strokeFuncHit(this),g||this.restore()}}}return Es.HitContext=a,Es}var my;function mf(){if(my)return Ps;my=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.HitCanvas=Ps.SceneCanvas=Ps.Canvas=void 0;const t=en(),e=$2(),h=ht();let x;function v(){if(x)return x;const E=t.Util.createCanvasElement(),d=E.getContext("2d");return x=(function(){const r=h.Konva._global.devicePixelRatio||1,c=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;return r/c})(),t.Util.releaseCanvas(E),x}let S=class{constructor(d){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const c=(d||{}).pixelRatio||h.Konva.pixelRatio||v();this.pixelRatio=c,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(d){const r=this.pixelRatio;this.pixelRatio=d,this.setSize(this.getWidth()/r,this.getHeight()/r)}setWidth(d){this.width=this._canvas.width=d*this.pixelRatio,this._canvas.style.width=d+"px";const r=this.pixelRatio;this.getContext()._context.scale(r,r)}setHeight(d){this.height=this._canvas.height=d*this.pixelRatio,this._canvas.style.height=d+"px";const r=this.pixelRatio;this.getContext()._context.scale(r,r)}getWidth(){return this.width}getHeight(){return this.height}setSize(d,r){this.setWidth(d||0),this.setHeight(r||0)}toDataURL(d,r){try{return this._canvas.toDataURL(d,r)}catch{try{return this._canvas.toDataURL()}catch(l){return t.Util.error("Unable to get data URL. "+l.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Ps.Canvas=S;class _ extends S{constructor(d={width:0,height:0,willReadFrequently:!1}){super(d),this.context=new e.SceneContext(this,{willReadFrequently:d.willReadFrequently}),this.setSize(d.width,d.height)}}Ps.SceneCanvas=_;class T extends S{constructor(d={width:0,height:0}){super(d),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(d.width,d.height)}}return Ps.HitCanvas=T,Ps}var Ng={},vy;function mm(){return vy||(vy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=ht(),h=en();t.DD={get isDragging(){let x=!1;return t.DD._dragElements.forEach(v=>{v.dragStatus==="dragging"&&(x=!0)}),x},justDragged:!1,get node(){let x;return t.DD._dragElements.forEach(v=>{x=v.node}),x},_dragElements:new Map,_drag(x){const v=[];t.DD._dragElements.forEach((S,_)=>{const{node:T}=S,E=T.getStage();E.setPointersPositions(x),S.pointerId===void 0&&(S.pointerId=h.Util._getFirstPointerId(x));const d=E._changedPointerPositions.find(r=>r.id===S.pointerId);if(d){if(S.dragStatus!=="dragging"){const r=T.dragDistance();if(Math.max(Math.abs(d.x-S.startPointerPos.x),Math.abs(d.y-S.startPointerPos.y))<r||(T.startDrag({evt:x}),!T.isDragging()))return}T._setDragPosition(x,S),v.push(T)}}),v.forEach(S=>{S.fire("dragmove",{type:"dragmove",target:S,evt:x},!0)})},_endDragBefore(x){const v=[];t.DD._dragElements.forEach(S=>{const{node:_}=S,T=_.getStage();if(x&&T.setPointersPositions(x),!T._changedPointerPositions.find(r=>r.id===S.pointerId))return;(S.dragStatus==="dragging"||S.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,S.dragStatus="stopped");const d=S.node.getLayer()||S.node instanceof e.Konva.Stage&&S.node;d&&v.indexOf(d)===-1&&v.push(d)}),v.forEach(S=>{S.draw()})},_endDragAfter(x){t.DD._dragElements.forEach((v,S)=>{v.dragStatus==="stopped"&&v.node.fire("dragend",{type:"dragend",target:v.node,evt:x},!0),v.dragStatus!=="dragging"&&t.DD._dragElements.delete(S)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(Ng)),Ng}var Lg={},Er={},yy;function xt(){if(yy)return Er;yy=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.RGBComponent=x,Er.alphaComponent=v,Er.getNumberValidator=S,Er.getNumberOrArrayOfNumbersValidator=_,Er.getNumberOrAutoValidator=T,Er.getStringValidator=E,Er.getStringOrGradientValidator=d,Er.getFunctionValidator=r,Er.getNumberArrayValidator=c,Er.getBooleanValidator=l,Er.getComponentValidator=i;const t=ht(),e=en();function h(s){return e.Util._isString(s)?'"'+s+'"':Object.prototype.toString.call(s)==="[object Number]"||e.Util._isBoolean(s)?s:Object.prototype.toString.call(s)}function x(s){return s>255?255:s<0?0:Math.round(s)}function v(s){return s>1?1:s<1e-4?1e-4:s}function S(){if(t.Konva.isUnminified)return function(s,o){return e.Util._isNumber(s)||e.Util.warn(h(s)+' is a not valid value for "'+o+'" attribute. The value should be a number.'),s}}function _(s){if(t.Konva.isUnminified)return function(o,a){let m=e.Util._isNumber(o),f=e.Util._isArray(o)&&o.length==s;return!m&&!f&&e.Util.warn(h(o)+' is a not valid value for "'+a+'" attribute. The value should be a number or Array<number>('+s+")"),o}}function T(){if(t.Konva.isUnminified)return function(s,o){return e.Util._isNumber(s)||s==="auto"||e.Util.warn(h(s)+' is a not valid value for "'+o+'" attribute. The value should be a number or "auto".'),s}}function E(){if(t.Konva.isUnminified)return function(s,o){return e.Util._isString(s)||e.Util.warn(h(s)+' is a not valid value for "'+o+'" attribute. The value should be a string.'),s}}function d(){if(t.Konva.isUnminified)return function(s,o){const a=e.Util._isString(s),m=Object.prototype.toString.call(s)==="[object CanvasGradient]"||s&&s.addColorStop;return a||m||e.Util.warn(h(s)+' is a not valid value for "'+o+'" attribute. The value should be a string or a native gradient.'),s}}function r(){if(t.Konva.isUnminified)return function(s,o){return e.Util._isFunction(s)||e.Util.warn(h(s)+' is a not valid value for "'+o+'" attribute. The value should be a function.'),s}}function c(){if(t.Konva.isUnminified)return function(s,o){const a=Int8Array?Object.getPrototypeOf(Int8Array):null;return a&&s instanceof a||(e.Util._isArray(s)?s.forEach(function(m){e.Util._isNumber(m)||e.Util.warn('"'+o+'" attribute has non numeric element '+m+". Make sure that all elements are numbers.")}):e.Util.warn(h(s)+' is a not valid value for "'+o+'" attribute. The value should be a array of numbers.')),s}}function l(){if(t.Konva.isUnminified)return function(s,o){return s===!0||s===!1||e.Util.warn(h(s)+' is a not valid value for "'+o+'" attribute. The value should be a boolean.'),s}}function i(s){if(t.Konva.isUnminified)return function(o,a){return o==null||e.Util.isObject(o)||e.Util.warn(h(o)+' is a not valid value for "'+a+'" attribute. The value should be an object with properties '+s),o}}return Er}var xy;function vt(){return xy||(xy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=en(),h=xt(),x="get",v="set";t.Factory={addGetterSetter(S,_,T,E,d){t.Factory.addGetter(S,_,T),t.Factory.addSetter(S,_,E,d),t.Factory.addOverloadedGetterSetter(S,_)},addGetter(S,_,T){const E=x+e.Util._capitalize(_);S.prototype[E]=S.prototype[E]||function(){const d=this.attrs[_];return d===void 0?T:d}},addSetter(S,_,T,E){const d=v+e.Util._capitalize(_);S.prototype[d]||t.Factory.overWriteSetter(S,_,T,E)},overWriteSetter(S,_,T,E){const d=v+e.Util._capitalize(_);S.prototype[d]=function(r){return T&&r!==void 0&&r!==null&&(r=T.call(this,r,_)),this._setAttr(_,r),E&&E.call(this),this}},addComponentsGetterSetter(S,_,T,E,d){const r=T.length,c=e.Util._capitalize,l=x+c(_),i=v+c(_);S.prototype[l]=function(){const o={};for(let a=0;a<r;a++){const m=T[a];o[m]=this.getAttr(_+c(m))}return o};const s=(0,h.getComponentValidator)(T);S.prototype[i]=function(o){const a=this.attrs[_];E&&(o=E.call(this,o,_)),s&&s.call(this,o,_);for(const m in o)o.hasOwnProperty(m)&&this._setAttr(_+c(m),o[m]);return o||T.forEach(m=>{this._setAttr(_+c(m),void 0)}),this._fireChangeEvent(_,a,o),d&&d.call(this),this},t.Factory.addOverloadedGetterSetter(S,_)},addOverloadedGetterSetter(S,_){const T=e.Util._capitalize(_),E=v+T,d=x+T;S.prototype[_]=function(){return arguments.length?(this[E](arguments[0]),this):this[d]()}},addDeprecatedGetterSetter(S,_,T,E){e.Util.error("Adding deprecated "+_);const d=x+e.Util._capitalize(_),r=_+" property is deprecated and will be removed soon. Look at Konva change log for more information.";S.prototype[d]=function(){e.Util.error(r);const c=this.attrs[_];return c===void 0?T:c},t.Factory.addSetter(S,_,E,function(){e.Util.error(r)}),t.Factory.addOverloadedGetterSetter(S,_)},backCompat(S,_){e.Util.each(_,function(T,E){const d=S.prototype[E],r=x+e.Util._capitalize(T),c=v+e.Util._capitalize(T);function l(){d.apply(this,arguments),e.Util.error('"'+T+'" method is deprecated and will be removed soon. Use ""'+E+'" instead.')}S.prototype[T]=l,S.prototype[r]=l,S.prototype[c]=l})},afterSetFilter(){this._filterUpToDate=!1}}})(Lg)),Lg}var wy;function hn(){if(wy)return rc;wy=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.Node=void 0;const t=mf(),e=mm(),h=vt(),x=ht(),v=en(),S=xt(),_="absoluteOpacity",T="allEventListeners",E="absoluteTransform",d="absoluteScale",r="canvas",c="Change",l="children",i="konva",s="listening",o="mouseenter",a="mouseleave",m="pointerenter",f="pointerleave",g="touchenter",w="touchleave",C="set",P="Shape",M=" ",L="stage",B="transform",D="Stage",H="visible",Q=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(M);let ee=1,se=class Tp{constructor(U){this._id=ee++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(U),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(U){(U===B||U===E)&&this._cache.get(U)?this._cache.get(U).dirty=!0:U?this._cache.delete(U):this._cache.clear()}_getCache(U,X){let Z=this._cache.get(U);return(Z===void 0||(U===B||U===E)&&Z.dirty===!0)&&(Z=X.call(this),this._cache.set(U,Z)),Z}_calculate(U,X,Z){if(!this._attachedDepsListeners.get(U)){const $=X.map(R=>R+"Change.konva").join(M);this.on($,()=>{this._clearCache(U)}),this._attachedDepsListeners.set(U,!0)}return this._getCache(U,Z)}_getCanvasCache(){return this._cache.get(r)}_clearSelfAndDescendantCache(U){this._clearCache(U),U===E&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(r)){const{scene:U,filter:X,hit:Z,buffer:$}=this._cache.get(r);v.Util.releaseCanvas(U,X,Z,$),this._cache.delete(r)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(U){const X=U||{};let Z={};(X.x===void 0||X.y===void 0||X.width===void 0||X.height===void 0)&&(Z=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let $=Math.ceil(X.width||Z.width),R=Math.ceil(X.height||Z.height),V=X.pixelRatio,W=X.x===void 0?Math.floor(Z.x):X.x,q=X.y===void 0?Math.floor(Z.y):X.y,oe=X.offset||0,Y=X.drawBorder||!1,I=X.hitCanvasPixelRatio||1;if(!$||!R){v.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const K=Math.abs(Math.round(Z.x)-W)>.5?1:0,ne=Math.abs(Math.round(Z.y)-q)>.5?1:0;$+=oe*2+K,R+=oe*2+ne,W-=oe,q-=oe;const le=new t.SceneCanvas({pixelRatio:V,width:$,height:R}),he=new t.SceneCanvas({pixelRatio:V,width:0,height:0,willReadFrequently:!0}),ve=new t.HitCanvas({pixelRatio:I,width:$,height:R}),ye=le.getContext(),Oe=ve.getContext(),pe=new t.SceneCanvas({width:le.width/le.pixelRatio+Math.abs(W),height:le.height/le.pixelRatio+Math.abs(q),pixelRatio:le.pixelRatio}),de=pe.getContext();return ve.isCache=!0,le.isCache=!0,this._cache.delete(r),this._filterUpToDate=!1,X.imageSmoothingEnabled===!1&&(le.getContext()._context.imageSmoothingEnabled=!1,he.getContext()._context.imageSmoothingEnabled=!1),ye.save(),Oe.save(),de.save(),ye.translate(-W,-q),Oe.translate(-W,-q),de.translate(-W,-q),pe.x=W,pe.y=q,this._isUnderCache=!0,this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(d),this.drawScene(le,this,pe),this.drawHit(ve,this),this._isUnderCache=!1,ye.restore(),Oe.restore(),Y&&(ye.save(),ye.beginPath(),ye.rect(0,0,$,R),ye.closePath(),ye.setAttr("strokeStyle","red"),ye.setAttr("lineWidth",5),ye.stroke(),ye.restore()),this._cache.set(r,{scene:le,filter:he,hit:ve,buffer:pe,x:W,y:q}),this._requestDraw(),this}isCached(){return this._cache.has(r)}getClientRect(U){throw new Error('abstract "getClientRect" method call')}_transformedRect(U,X){const Z=[{x:U.x,y:U.y},{x:U.x+U.width,y:U.y},{x:U.x+U.width,y:U.y+U.height},{x:U.x,y:U.y+U.height}];let $=1/0,R=1/0,V=-1/0,W=-1/0;const q=this.getAbsoluteTransform(X);return Z.forEach(function(oe){const Y=q.point(oe);$===void 0&&($=V=Y.x,R=W=Y.y),$=Math.min($,Y.x),R=Math.min(R,Y.y),V=Math.max(V,Y.x),W=Math.max(W,Y.y)}),{x:$,y:R,width:V-$,height:W-R}}_drawCachedSceneCanvas(U){U.save(),U._applyOpacity(this),U._applyGlobalCompositeOperation(this);const X=this._getCanvasCache();U.translate(X.x,X.y);const Z=this._getCachedSceneCanvas(),$=Z.pixelRatio;U.drawImage(Z._canvas,0,0,Z.width/$,Z.height/$),U.restore()}_drawCachedHitCanvas(U){const X=this._getCanvasCache(),Z=X.hit;U.save(),U.translate(X.x,X.y),U.drawImage(Z._canvas,0,0,Z.width/Z.pixelRatio,Z.height/Z.pixelRatio),U.restore()}_getCachedSceneCanvas(){let U=this.filters(),X=this._getCanvasCache(),Z=X.scene,$=X.filter,R=$.getContext(),V,W,q,oe;if(U){if(!this._filterUpToDate){const Y=Z.pixelRatio;$.setSize(Z.width/Z.pixelRatio,Z.height/Z.pixelRatio);try{for(V=U.length,R.clear(),R.drawImage(Z._canvas,0,0,Z.getWidth()/Y,Z.getHeight()/Y),W=R.getImageData(0,0,$.getWidth(),$.getHeight()),q=0;q<V;q++){if(oe=U[q],typeof oe!="function"){v.Util.error("Filter should be type of function, but got "+typeof oe+" instead. Please check correct filters");continue}oe.call(this,W),R.putImageData(W,0,0)}}catch(I){v.Util.error("Unable to apply filter. "+I.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return $}return Z}on(U,X){if(this._cache&&this._cache.delete(T),arguments.length===3)return this._delegate.apply(this,arguments);const Z=U.split(M);for(let $=0;$<Z.length;$++){const V=Z[$].split("."),W=V[0],q=V[1]||"";this.eventListeners[W]||(this.eventListeners[W]=[]),this.eventListeners[W].push({name:q,handler:X})}return this}off(U,X){let Z=(U||"").split(M),$=Z.length,R,V,W,q,oe,Y;if(this._cache&&this._cache.delete(T),!U)for(V in this.eventListeners)this._off(V);for(R=0;R<$;R++)if(W=Z[R],q=W.split("."),oe=q[0],Y=q[1],oe)this.eventListeners[oe]&&this._off(oe,Y,X);else for(V in this.eventListeners)this._off(V,Y,X);return this}dispatchEvent(U){const X={target:this,type:U.type,evt:U};return this.fire(U.type,X),this}addEventListener(U,X){return this.on(U,function(Z){X.call(this,Z.evt)}),this}removeEventListener(U){return this.off(U),this}_delegate(U,X,Z){const $=this;this.on(U,function(R){const V=R.target.findAncestors(X,!0,$);for(let W=0;W<V.length;W++)R=v.Util.cloneObject(R),R.currentTarget=V[W],Z.call(V[W],R)})}remove(){return this.isDragging()&&this.stopDrag(),e.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(E),this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(L),this._clearSelfAndDescendantCache(H),this._clearSelfAndDescendantCache(s)}_remove(){this._clearCaches();const U=this.getParent();U&&U.children&&(U.children.splice(this.index,1),U._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(U){const X="get"+v.Util._capitalize(U);return v.Util._isFunction(this[X])?this[X]():this.attrs[U]}getAncestors(){let U=this.getParent(),X=[];for(;U;)X.push(U),U=U.getParent();return X}getAttrs(){return this.attrs||{}}setAttrs(U){return this._batchTransformChanges(()=>{let X,Z;if(!U)return this;for(X in U)X!==l&&(Z=C+v.Util._capitalize(X),v.Util._isFunction(this[Z])?this[Z](U[X]):this._setAttr(X,U[X]))}),this}isListening(){return this._getCache(s,this._isListening)}_isListening(U){if(!this.listening())return!1;const Z=this.getParent();return Z&&Z!==U&&this!==U?Z._isListening(U):!0}isVisible(){return this._getCache(H,this._isVisible)}_isVisible(U){if(!this.visible())return!1;const Z=this.getParent();return Z&&Z!==U&&this!==U?Z._isVisible(U):!0}shouldDrawHit(U,X=!1){if(U)return this._isVisible(U)&&this._isListening(U);const Z=this.getLayer();let $=!1;e.DD._dragElements.forEach(V=>{V.dragStatus==="dragging"&&(V.node.nodeType==="Stage"||V.node.getLayer()===Z)&&($=!0)});const R=!X&&!x.Konva.hitOnDragEnabled&&($||x.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!R}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let U=this.getDepth(),X=this,Z=0,$,R,V,W;function q(Y){for($=[],R=Y.length,V=0;V<R;V++)W=Y[V],Z++,W.nodeType!==P&&($=$.concat(W.getChildren().slice())),W._id===X._id&&(V=R);$.length>0&&$[0].getDepth()<=U&&q($)}const oe=this.getStage();return X.nodeType!==D&&oe&&q(oe.getChildren()),Z}getDepth(){let U=0,X=this.parent;for(;X;)U++,X=X.parent;return U}_batchTransformChanges(U){this._batchingTransformChange=!0,U(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(B),this._clearSelfAndDescendantCache(E)),this._needClearTransformCache=!1}setPosition(U){return this._batchTransformChanges(()=>{this.x(U.x),this.y(U.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const U=this.getStage();if(!U)return null;const X=U.getPointerPosition();if(!X)return null;const Z=this.getAbsoluteTransform().copy();return Z.invert(),Z.point(X)}getAbsolutePosition(U){let X=!1,Z=this.parent;for(;Z;){if(Z.isCached()){X=!0;break}Z=Z.parent}X&&!U&&(U=!0);const $=this.getAbsoluteTransform(U).getMatrix(),R=new v.Transform,V=this.offset();return R.m=$.slice(),R.translate(V.x,V.y),R.getTranslation()}setAbsolutePosition(U){const{x:X,y:Z,...$}=this._clearTransform();this.attrs.x=X,this.attrs.y=Z,this._clearCache(B);const R=this._getAbsoluteTransform().copy();return R.invert(),R.translate(U.x,U.y),U={x:this.attrs.x+R.getTranslation().x,y:this.attrs.y+R.getTranslation().y},this._setTransform($),this.setPosition({x:U.x,y:U.y}),this._clearCache(B),this._clearSelfAndDescendantCache(E),this}_setTransform(U){let X;for(X in U)this.attrs[X]=U[X]}_clearTransform(){const U={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,U}move(U){let X=U.x,Z=U.y,$=this.x(),R=this.y();return X!==void 0&&($+=X),Z!==void 0&&(R+=Z),this.setPosition({x:$,y:R}),this}_eachAncestorReverse(U,X){let Z=[],$=this.getParent(),R,V;if(!(X&&X._id===this._id)){for(Z.unshift(this);$&&(!X||$._id!==X._id);)Z.unshift($),$=$.parent;for(R=Z.length,V=0;V<R;V++)U(Z[V])}}rotate(U){return this.rotation(this.rotation()+U),this}moveToTop(){if(!this.parent)return v.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const U=this.index,X=this.parent.getChildren().length;return U<X-1?(this.parent.children.splice(U,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return v.Util.warn("Node has no parent. moveUp function is ignored."),!1;const U=this.index,X=this.parent.getChildren().length;return U<X-1?(this.parent.children.splice(U,1),this.parent.children.splice(U+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return v.Util.warn("Node has no parent. moveDown function is ignored."),!1;const U=this.index;return U>0?(this.parent.children.splice(U,1),this.parent.children.splice(U-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return v.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const U=this.index;return U>0?(this.parent.children.splice(U,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(U){if(!this.parent)return v.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(U<0||U>=this.parent.children.length)&&v.Util.warn("Unexpected value "+U+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const X=this.index;return this.parent.children.splice(X,1),this.parent.children.splice(U,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(_,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let U=this.opacity();const X=this.getParent();return X&&!X._isUnderCache&&(U*=X.getAbsoluteOpacity()),U}moveTo(U){return this.getParent()!==U&&(this._remove(),U.add(this)),this}toObject(){let U=this.getAttrs(),X,Z,$,R,V;const W={attrs:{},className:this.getClassName()};for(X in U)Z=U[X],V=v.Util.isObject(Z)&&!v.Util._isPlainObject(Z)&&!v.Util._isArray(Z),!V&&($=typeof this[X]=="function"&&this[X],delete U[X],R=$?$.call(this):null,U[X]=Z,R!==Z&&(W.attrs[X]=Z));return v.Util._prepareToStringify(W)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(U,X,Z){const $=[];X&&this._isMatch(U)&&$.push(this);let R=this.parent;for(;R;){if(R===Z)return $;R._isMatch(U)&&$.push(R),R=R.parent}return $}isAncestorOf(U){return!1}findAncestor(U,X,Z){return this.findAncestors(U,X,Z)[0]}_isMatch(U){if(!U)return!1;if(typeof U=="function")return U(this);let X=U.replace(/ /g,"").split(","),Z=X.length,$,R;for($=0;$<Z;$++)if(R=X[$],v.Util.isValidSelector(R)||(v.Util.warn('Selector "'+R+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),v.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),v.Util.warn("Konva is awesome, right?")),R.charAt(0)==="#"){if(this.id()===R.slice(1))return!0}else if(R.charAt(0)==="."){if(this.hasName(R.slice(1)))return!0}else if(this.className===R||this.nodeType===R)return!0;return!1}getLayer(){const U=this.getParent();return U?U.getLayer():null}getStage(){return this._getCache(L,this._getStage)}_getStage(){const U=this.getParent();return U?U.getStage():null}fire(U,X={},Z){return X.target=X.target||this,Z?this._fireAndBubble(U,X):this._fire(U,X),this}getAbsoluteTransform(U){return U?this._getAbsoluteTransform(U):this._getCache(E,this._getAbsoluteTransform)}_getAbsoluteTransform(U){let X;if(U)return X=new v.Transform,this._eachAncestorReverse(function(Z){const $=Z.transformsEnabled();$==="all"?X.multiply(Z.getTransform()):$==="position"&&X.translate(Z.x()-Z.offsetX(),Z.y()-Z.offsetY())},U),X;{X=this._cache.get(E)||new v.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(X):X.reset();const Z=this.transformsEnabled();if(Z==="all")X.multiply(this.getTransform());else if(Z==="position"){const $=this.attrs.x||0,R=this.attrs.y||0,V=this.attrs.offsetX||0,W=this.attrs.offsetY||0;X.translate($-V,R-W)}return X.dirty=!1,X}}getAbsoluteScale(U){let X=this;for(;X;)X._isUnderCache&&(U=X),X=X.getParent();const $=this.getAbsoluteTransform(U).decompose();return{x:$.scaleX,y:$.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(B,this._getTransform)}_getTransform(){var U,X;const Z=this._cache.get(B)||new v.Transform;Z.reset();const $=this.x(),R=this.y(),V=x.Konva.getAngle(this.rotation()),W=(U=this.attrs.scaleX)!==null&&U!==void 0?U:1,q=(X=this.attrs.scaleY)!==null&&X!==void 0?X:1,oe=this.attrs.skewX||0,Y=this.attrs.skewY||0,I=this.attrs.offsetX||0,K=this.attrs.offsetY||0;return($!==0||R!==0)&&Z.translate($,R),V!==0&&Z.rotate(V),(oe!==0||Y!==0)&&Z.skew(oe,Y),(W!==1||q!==1)&&Z.scale(W,q),(I!==0||K!==0)&&Z.translate(-1*I,-1*K),Z.dirty=!1,Z}clone(U){let X=v.Util.cloneObject(this.attrs),Z,$,R,V,W;for(Z in U)X[Z]=U[Z];const q=new this.constructor(X);for(Z in this.eventListeners)for($=this.eventListeners[Z],R=$.length,V=0;V<R;V++)W=$[V],W.name.indexOf(i)<0&&(q.eventListeners[Z]||(q.eventListeners[Z]=[]),q.eventListeners[Z].push(W));return q}_toKonvaCanvas(U){U=U||{};const X=this.getClientRect(),Z=this.getStage(),$=U.x!==void 0?U.x:Math.floor(X.x),R=U.y!==void 0?U.y:Math.floor(X.y),V=U.pixelRatio||1,W=new t.SceneCanvas({width:U.width||Math.ceil(X.width)||(Z?Z.width():0),height:U.height||Math.ceil(X.height)||(Z?Z.height():0),pixelRatio:V}),q=W.getContext(),oe=new t.SceneCanvas({width:W.width/W.pixelRatio+Math.abs($),height:W.height/W.pixelRatio+Math.abs(R),pixelRatio:W.pixelRatio});return U.imageSmoothingEnabled===!1&&(q._context.imageSmoothingEnabled=!1),q.save(),($||R)&&q.translate(-1*$,-1*R),this.drawScene(W,void 0,oe),q.restore(),W}toCanvas(U){return this._toKonvaCanvas(U)._canvas}toDataURL(U){U=U||{};const X=U.mimeType||null,Z=U.quality||null,$=this._toKonvaCanvas(U).toDataURL(X,Z);return U.callback&&U.callback($),$}toImage(U){return new Promise((X,Z)=>{try{const $=U?.callback;$&&delete U.callback,v.Util._urlToImage(this.toDataURL(U),function(R){X(R),$?.(R)})}catch($){Z($)}})}toBlob(U){return new Promise((X,Z)=>{try{const $=U?.callback;$&&delete U.callback,this.toCanvas(U).toBlob(R=>{X(R),$?.(R)},U?.mimeType,U?.quality)}catch($){Z($)}})}setSize(U){return this.width(U.width),this.height(U.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():x.Konva.dragDistance}_off(U,X,Z){let $=this.eventListeners[U],R,V,W;for(R=0;R<$.length;R++)if(V=$[R].name,W=$[R].handler,(V!=="konva"||X==="konva")&&(!X||V===X)&&(!Z||Z===W)){if($.splice(R,1),$.length===0){delete this.eventListeners[U];break}R--}}_fireChangeEvent(U,X,Z){this._fire(U+c,{oldVal:X,newVal:Z})}addName(U){if(!this.hasName(U)){const X=this.name(),Z=X?X+" "+U:U;this.name(Z)}return this}hasName(U){if(!U)return!1;const X=this.name();return X?(X||"").split(/\s/g).indexOf(U)!==-1:!1}removeName(U){const X=(this.name()||"").split(/\s/g),Z=X.indexOf(U);return Z!==-1&&(X.splice(Z,1),this.name(X.join(" "))),this}setAttr(U,X){const Z=this[C+v.Util._capitalize(U)];return v.Util._isFunction(Z)?Z.call(this,X):this._setAttr(U,X),this}_requestDraw(){if(x.Konva.autoDrawEnabled){const U=this.getLayer()||this.getStage();U?.batchDraw()}}_setAttr(U,X){const Z=this.attrs[U];Z===X&&!v.Util.isObject(X)||(X==null?delete this.attrs[U]:this.attrs[U]=X,this._shouldFireChangeEvents&&this._fireChangeEvent(U,Z,X),this._requestDraw())}_setComponentAttr(U,X,Z){let $;Z!==void 0&&($=this.attrs[U],$||(this.attrs[U]=this.getAttr(U)),this.attrs[U][X]=Z,this._fireChangeEvent(U,$,Z))}_fireAndBubble(U,X,Z){X&&this.nodeType===P&&(X.target=this);const $=[o,a,m,f,g,w];if(!($.indexOf(U)!==-1&&(Z&&(this===Z||this.isAncestorOf&&this.isAncestorOf(Z))||this.nodeType==="Stage"&&!Z))){this._fire(U,X);const V=$.indexOf(U)!==-1&&Z&&Z.isAncestorOf&&Z.isAncestorOf(this)&&!Z.isAncestorOf(this.parent);(X&&!X.cancelBubble||!X)&&this.parent&&this.parent.isListening()&&!V&&(Z&&Z.parent?this._fireAndBubble.call(this.parent,U,X,Z):this._fireAndBubble.call(this.parent,U,X))}}_getProtoListeners(U){var X,Z,$;const R=(X=this._cache.get(T))!==null&&X!==void 0?X:{};let V=R?.[U];if(V===void 0){V=[];let W=Object.getPrototypeOf(this);for(;W;){const q=($=(Z=W.eventListeners)===null||Z===void 0?void 0:Z[U])!==null&&$!==void 0?$:[];V.push(...q),W=Object.getPrototypeOf(W)}R[U]=V,this._cache.set(T,R)}return V}_fire(U,X){X=X||{},X.currentTarget=this,X.type=U;const Z=this._getProtoListeners(U);if(Z)for(let R=0;R<Z.length;R++)Z[R].handler.call(this,X);const $=this.eventListeners[U];if($)for(let R=0;R<$.length;R++)$[R].handler.call(this,X)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(U){const X=U?U.pointerId:void 0,Z=this.getStage(),$=this.getAbsolutePosition();if(!Z)return;const R=Z._getPointerById(X)||Z._changedPointerPositions[0]||$;e.DD._dragElements.set(this._id,{node:this,startPointerPos:R,offset:{x:R.x-$.x,y:R.y-$.y},dragStatus:"ready",pointerId:X})}startDrag(U,X=!0){e.DD._dragElements.has(this._id)||this._createDragElement(U);const Z=e.DD._dragElements.get(this._id);Z.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:U&&U.evt},X)}_setDragPosition(U,X){const Z=this.getStage()._getPointerById(X.pointerId);if(!Z)return;let $={x:Z.x-X.offset.x,y:Z.y-X.offset.y};const R=this.dragBoundFunc();if(R!==void 0){const V=R.call(this,$,U);V?$=V:v.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==$.x||this._lastPos.y!==$.y)&&(this.setAbsolutePosition($),this._requestDraw()),this._lastPos=$}stopDrag(U){const X=e.DD._dragElements.get(this._id);X&&(X.dragStatus="stopped"),e.DD._endDragBefore(U),e.DD._endDragAfter(U)}setDraggable(U){this._setAttr("draggable",U),this._dragChange()}isDragging(){const U=e.DD._dragElements.get(this._id);return U?U.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(U){if(!(!(U.evt.button!==void 0)||x.Konva.dragButtons.indexOf(U.evt.button)>=0)||this.isDragging())return;let $=!1;e.DD._dragElements.forEach(R=>{this.isAncestorOf(R.node)&&($=!0)}),$||this._createDragElement(U)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const X=e.DD._dragElements.get(this._id),Z=X&&X.dragStatus==="dragging",$=X&&X.dragStatus==="ready";Z?this.stopDrag():$&&e.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(U={x:0,y:0}){const X=this.getStage();if(!X)return!1;const Z={x:-U.x,y:-U.y,width:X.width()+2*U.x,height:X.height()+2*U.y};return v.Util.haveIntersection(Z,this.getClientRect())}static create(U,X){return v.Util._isString(U)&&(U=JSON.parse(U)),this._createNode(U,X)}static _createNode(U,X){let Z=Tp.prototype.getClassName.call(U),$=U.children,R,V,W;X&&(U.attrs.container=X),x.Konva[Z]||(v.Util.warn('Can not find a node with class name "'+Z+'". Fallback to "Shape".'),Z="Shape");const q=x.Konva[Z];if(R=new q(U.attrs),$)for(V=$.length,W=0;W<V;W++)R.add(Tp._createNode($[W]));return R}};rc.Node=se,se.prototype.nodeType="Node",se.prototype._attrsAffectingSize=[],se.prototype.eventListeners={},se.prototype.on.call(se.prototype,Q,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(B),this._clearSelfAndDescendantCache(E)}),se.prototype.on.call(se.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(H)}),se.prototype.on.call(se.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(s)}),se.prototype.on.call(se.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(_)});const ie=h.Factory.addGetterSetter;return ie(se,"zIndex"),ie(se,"absolutePosition"),ie(se,"position"),ie(se,"x",0,(0,S.getNumberValidator)()),ie(se,"y",0,(0,S.getNumberValidator)()),ie(se,"globalCompositeOperation","source-over",(0,S.getStringValidator)()),ie(se,"opacity",1,(0,S.getNumberValidator)()),ie(se,"name","",(0,S.getStringValidator)()),ie(se,"id","",(0,S.getStringValidator)()),ie(se,"rotation",0,(0,S.getNumberValidator)()),h.Factory.addComponentsGetterSetter(se,"scale",["x","y"]),ie(se,"scaleX",1,(0,S.getNumberValidator)()),ie(se,"scaleY",1,(0,S.getNumberValidator)()),h.Factory.addComponentsGetterSetter(se,"skew",["x","y"]),ie(se,"skewX",0,(0,S.getNumberValidator)()),ie(se,"skewY",0,(0,S.getNumberValidator)()),h.Factory.addComponentsGetterSetter(se,"offset",["x","y"]),ie(se,"offsetX",0,(0,S.getNumberValidator)()),ie(se,"offsetY",0,(0,S.getNumberValidator)()),ie(se,"dragDistance",void 0,(0,S.getNumberValidator)()),ie(se,"width",0,(0,S.getNumberValidator)()),ie(se,"height",0,(0,S.getNumberValidator)()),ie(se,"listening",!0,(0,S.getBooleanValidator)()),ie(se,"preventDefault",!0,(0,S.getBooleanValidator)()),ie(se,"filters",void 0,function(ue){return this._filterUpToDate=!1,ue}),ie(se,"visible",!0,(0,S.getBooleanValidator)()),ie(se,"transformsEnabled","all",(0,S.getStringValidator)()),ie(se,"size"),ie(se,"dragBoundFunc"),ie(se,"draggable",!1,(0,S.getBooleanValidator)()),h.Factory.backCompat(se,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),rc}var ic={},_y;function vf(){if(_y)return ic;_y=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.Container=void 0;const t=vt(),e=hn(),h=xt();let x=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(S){const _=this.children||[];return S?_.filter(S):_}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(S=>{S.parent=null,S.index=0,S.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(S=>{S.parent=null,S.index=0,S.destroy()}),this.children=[],this._requestDraw(),this}add(...S){if(S.length===0)return this;if(S.length>1){for(let T=0;T<S.length;T++)this.add(S[T]);return this}const _=S[0];return _.getParent()?(_.moveTo(this),this):(this._validateAdd(_),_.index=this.getChildren().length,_.parent=this,_._clearCaches(),this.getChildren().push(_),this._fire("add",{child:_}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(S){return this._generalFind(S,!1)}findOne(S){const _=this._generalFind(S,!0);return _.length>0?_[0]:void 0}_generalFind(S,_){const T=[];return this._descendants(E=>{const d=E._isMatch(S);return d&&T.push(E),!!(d&&_)}),T}_descendants(S){let _=!1;const T=this.getChildren();for(const E of T){if(_=S(E),_)return!0;if(E.hasChildren()&&(_=E._descendants(S),_))return!0}return!1}toObject(){const S=e.Node.prototype.toObject.call(this);return S.children=[],this.getChildren().forEach(_=>{S.children.push(_.toObject())}),S}isAncestorOf(S){let _=S.getParent();for(;_;){if(_._id===this._id)return!0;_=_.getParent()}return!1}clone(S){const _=e.Node.prototype.clone.call(this,S);return this.getChildren().forEach(function(T){_.add(T.clone())}),_}getAllIntersections(S){const _=[];return this.find("Shape").forEach(T=>{T.isVisible()&&T.intersects(S)&&_.push(T)}),_}_clearSelfAndDescendantCache(S){var _;super._clearSelfAndDescendantCache(S),!this.isCached()&&((_=this.children)===null||_===void 0||_.forEach(function(T){T._clearSelfAndDescendantCache(S)}))}_setChildrenIndices(){var S;(S=this.children)===null||S===void 0||S.forEach(function(_,T){_.index=T}),this._requestDraw()}drawScene(S,_,T){const E=this.getLayer(),d=S||E&&E.getCanvas(),r=d&&d.getContext(),c=this._getCanvasCache(),l=c&&c.scene,i=d&&d.isCache;if(!this.isVisible()&&!i)return this;if(l){r.save();const s=this.getAbsoluteTransform(_).getMatrix();r.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",d,_,T);return this}drawHit(S,_){if(!this.shouldDrawHit(_))return this;const T=this.getLayer(),E=S||T&&T.hitCanvas,d=E&&E.getContext(),r=this._getCanvasCache();if(r&&r.hit){d.save();const l=this.getAbsoluteTransform(_).getMatrix();d.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(d),d.restore()}else this._drawChildren("drawHit",E,_);return this}_drawChildren(S,_,T,E){var d;const r=_&&_.getContext(),c=this.clipWidth(),l=this.clipHeight(),i=this.clipFunc(),s=typeof c=="number"&&typeof l=="number"||i,o=T===this;if(s){r.save();const m=this.getAbsoluteTransform(T);let f=m.getMatrix();r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),r.beginPath();let g;if(i)g=i.call(this,r,this);else{const w=this.clipX(),C=this.clipY();r.rect(w||0,C||0,c,l)}r.clip.apply(r,g),f=m.copy().invert().getMatrix(),r.transform(f[0],f[1],f[2],f[3],f[4],f[5])}const a=!o&&this.globalCompositeOperation()!=="source-over"&&S==="drawScene";a&&(r.save(),r._applyGlobalCompositeOperation(this)),(d=this.children)===null||d===void 0||d.forEach(function(m){m[S](_,T,E)}),a&&r.restore(),s&&r.restore()}getClientRect(S={}){var _;const T=S.skipTransform,E=S.relativeTo;let d,r,c,l,i={x:1/0,y:1/0,width:0,height:0};const s=this;(_=this.children)===null||_===void 0||_.forEach(function(m){if(!m.visible())return;const f=m.getClientRect({relativeTo:s,skipShadow:S.skipShadow,skipStroke:S.skipStroke});f.width===0&&f.height===0||(d===void 0?(d=f.x,r=f.y,c=f.x+f.width,l=f.y+f.height):(d=Math.min(d,f.x),r=Math.min(r,f.y),c=Math.max(c,f.x+f.width),l=Math.max(l,f.y+f.height)))});const o=this.find("Shape");let a=!1;for(let m=0;m<o.length;m++)if(o[m]._isVisible(this)){a=!0;break}return a&&d!==void 0?i={x:d,y:r,width:c-d,height:l-r}:i={x:0,y:0,width:0,height:0},T?i:this._transformedRect(i,E)}};return ic.Container=x,t.Factory.addComponentsGetterSetter(x,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(x,"clipX",void 0,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(x,"clipY",void 0,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(x,"clipWidth",void 0,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(x,"clipHeight",void 0,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(x,"clipFunc"),ic}var Mg={},ka={},by;function Q2(){if(by)return ka;by=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.getCapturedShape=x,ka.createEvent=v,ka.hasPointerCapture=S,ka.setPointerCapture=_,ka.releaseCapture=T;const t=ht(),e=new Map,h=t.Konva._global.PointerEvent!==void 0;function x(E){return e.get(E)}function v(E){return{evt:E,pointerId:E.pointerId}}function S(E,d){return e.get(E)===d}function _(E,d){T(E),d.getStage()&&(e.set(E,d),h&&d._fire("gotpointercapture",v(new PointerEvent("gotpointercapture"))))}function T(E,d){const r=e.get(E);if(!r)return;const c=r.getStage();c&&c.content,e.delete(E),h&&r._fire("lostpointercapture",v(new PointerEvent("lostpointercapture")))}return ka}var Sy;function Rk(){return Sy||(Sy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=en(),h=vt(),x=vf(),v=ht(),S=mf(),_=mm(),T=ht(),E=Q2(),d="Stage",r="string",c="px",l="mouseout",i="mouseleave",s="mouseover",o="mouseenter",a="mousemove",m="mousedown",f="mouseup",g="pointermove",w="pointerdown",C="pointerup",P="pointercancel",M="lostpointercapture",L="pointerout",B="pointerleave",D="pointerover",H="pointerenter",Q="contextmenu",ee="touchstart",se="touchend",ie="touchmove",ue="touchcancel",U="wheel",X=5,Z=[[o,"_pointerenter"],[m,"_pointerdown"],[a,"_pointermove"],[f,"_pointerup"],[i,"_pointerleave"],[ee,"_pointerdown"],[ie,"_pointermove"],[se,"_pointerup"],[ue,"_pointercancel"],[s,"_pointerover"],[U,"_wheel"],[Q,"_contextmenu"],[w,"_pointerdown"],[g,"_pointermove"],[C,"_pointerup"],[P,"_pointercancel"],[B,"_pointerleave"],[M,"_lostpointercapture"]],$={mouse:{[L]:l,[B]:i,[D]:s,[H]:o,[g]:a,[w]:m,[C]:f,[P]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[L]:"touchout",[B]:"touchleave",[D]:"touchover",[H]:"touchenter",[g]:ie,[w]:ee,[C]:se,[P]:ue,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[L]:L,[B]:B,[D]:D,[H]:H,[g]:g,[w]:w,[C]:C,[P]:P,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},R=Y=>Y.indexOf("pointer")>=0?"pointer":Y.indexOf("touch")>=0?"touch":"mouse",V=Y=>{const I=R(Y);if(I==="pointer")return v.Konva.pointerEventsEnabled&&$.pointer;if(I==="touch")return $.touch;if(I==="mouse")return $.mouse};function W(Y={}){return(Y.clipFunc||Y.clipWidth||Y.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Y}const q="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class oe extends x.Container{constructor(I){super(W(I)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(I){const K=I.getType()==="Layer",ne=I.getType()==="FastLayer";K||ne||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const I=this.visible()?"":"none";this.content.style.display=I}setContainer(I){if(typeof I===r){let K;if(I.charAt(0)==="."){const ne=I.slice(1);I=document.getElementsByClassName(ne)[0]}else I.charAt(0)!=="#"?K=I:K=I.slice(1),I=document.getElementById(K);if(!I)throw"Can not find container in document with id "+K}return this._setAttr("container",I),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),I.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const I=this.children,K=I.length;for(let ne=0;ne<K;ne++)I[ne].clear();return this}clone(I){return I||(I={}),I.container=typeof document<"u"&&document.createElement("div"),x.Container.prototype.clone.call(this,I)}destroy(){super.destroy();const I=this.content;I&&e.Util._isInDocument(I)&&this.container().removeChild(I);const K=t.stages.indexOf(this);return K>-1&&t.stages.splice(K,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const I=this._pointerPositions[0]||this._changedPointerPositions[0];return I?{x:I.x,y:I.y}:(e.Util.warn(q),null)}_getPointerById(I){return this._pointerPositions.find(K=>K.id===I)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(I){I=I||{},I.x=I.x||0,I.y=I.y||0,I.width=I.width||this.width(),I.height=I.height||this.height();const K=new S.SceneCanvas({width:I.width,height:I.height,pixelRatio:I.pixelRatio||1}),ne=K.getContext()._context,le=this.children;return(I.x||I.y)&&ne.translate(-1*I.x,-1*I.y),le.forEach(function(he){if(!he.isVisible())return;const ve=he._toKonvaCanvas(I);ne.drawImage(ve._canvas,I.x,I.y,ve.getWidth()/ve.getPixelRatio(),ve.getHeight()/ve.getPixelRatio())}),K}getIntersection(I){if(!I)return null;const K=this.children,ne=K.length,le=ne-1;for(let he=le;he>=0;he--){const ve=K[he].getIntersection(I);if(ve)return ve}return null}_resizeDOM(){const I=this.width(),K=this.height();this.content&&(this.content.style.width=I+c,this.content.style.height=K+c),this.bufferCanvas.setSize(I,K),this.bufferHitCanvas.setSize(I,K),this.children.forEach(ne=>{ne.setSize({width:I,height:K}),ne.draw()})}add(I,...K){if(arguments.length>1){for(let le=0;le<arguments.length;le++)this.add(arguments[le]);return this}super.add(I);const ne=this.children.length;return ne>X&&e.Util.warn("The stage has "+ne+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),I.setSize({width:this.width(),height:this.height()}),I.draw(),v.Konva.isBrowser&&this.content.appendChild(I.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(I){return E.hasPointerCapture(I,this)}setPointerCapture(I){E.setPointerCapture(I,this)}releaseCapture(I){E.releaseCapture(I,this)}getLayers(){return this.children}_bindContentEvents(){v.Konva.isBrowser&&Z.forEach(([I,K])=>{this.content.addEventListener(I,ne=>{this[K](ne)},{passive:!1})})}_pointerenter(I){this.setPointersPositions(I);const K=V(I.type);K&&this._fire(K.pointerenter,{evt:I,target:this,currentTarget:this})}_pointerover(I){this.setPointersPositions(I);const K=V(I.type);K&&this._fire(K.pointerover,{evt:I,target:this,currentTarget:this})}_getTargetShape(I){let K=this[I+"targetShape"];return K&&!K.getStage()&&(K=null),K}_pointerleave(I){const K=V(I.type),ne=R(I.type);if(!K)return;this.setPointersPositions(I);const le=this._getTargetShape(ne),he=!(v.Konva.isDragging()||v.Konva.isTransforming())||v.Konva.hitOnDragEnabled;le&&he?(le._fireAndBubble(K.pointerout,{evt:I}),le._fireAndBubble(K.pointerleave,{evt:I}),this._fire(K.pointerleave,{evt:I,target:this,currentTarget:this}),this[ne+"targetShape"]=null):he&&(this._fire(K.pointerleave,{evt:I,target:this,currentTarget:this}),this._fire(K.pointerout,{evt:I,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(I){const K=V(I.type),ne=R(I.type);if(!K)return;this.setPointersPositions(I);let le=!1;this._changedPointerPositions.forEach(he=>{const ve=this.getIntersection(he);if(_.DD.justDragged=!1,v.Konva["_"+ne+"ListenClick"]=!0,!ve||!ve.isListening()){this[ne+"ClickStartShape"]=void 0;return}v.Konva.capturePointerEventsEnabled&&ve.setPointerCapture(he.id),this[ne+"ClickStartShape"]=ve,ve._fireAndBubble(K.pointerdown,{evt:I,pointerId:he.id}),le=!0;const ye=I.type.indexOf("touch")>=0;ve.preventDefault()&&I.cancelable&&ye&&I.preventDefault()}),le||this._fire(K.pointerdown,{evt:I,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(I){const K=V(I.type),ne=R(I.type);if(!K||(v.Konva.isDragging()&&_.DD.node.preventDefault()&&I.cancelable&&I.preventDefault(),this.setPointersPositions(I),!(!(v.Konva.isDragging()||v.Konva.isTransforming())||v.Konva.hitOnDragEnabled)))return;const he={};let ve=!1;const ye=this._getTargetShape(ne);this._changedPointerPositions.forEach(Oe=>{const pe=E.getCapturedShape(Oe.id)||this.getIntersection(Oe),de=Oe.id,Ce={evt:I,pointerId:de},te=ye!==pe;if(te&&ye&&(ye._fireAndBubble(K.pointerout,{...Ce},pe),ye._fireAndBubble(K.pointerleave,{...Ce},pe)),pe){if(he[pe._id])return;he[pe._id]=!0}pe&&pe.isListening()?(ve=!0,te&&(pe._fireAndBubble(K.pointerover,{...Ce},ye),pe._fireAndBubble(K.pointerenter,{...Ce},ye),this[ne+"targetShape"]=pe),pe._fireAndBubble(K.pointermove,{...Ce})):ye&&(this._fire(K.pointerover,{evt:I,target:this,currentTarget:this,pointerId:de}),this[ne+"targetShape"]=null)}),ve||this._fire(K.pointermove,{evt:I,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(I){const K=V(I.type),ne=R(I.type);if(!K)return;this.setPointersPositions(I);const le=this[ne+"ClickStartShape"],he=this[ne+"ClickEndShape"],ve={};let ye=!1;this._changedPointerPositions.forEach(Oe=>{const pe=E.getCapturedShape(Oe.id)||this.getIntersection(Oe);if(pe){if(pe.releaseCapture(Oe.id),ve[pe._id])return;ve[pe._id]=!0}const de=Oe.id,Ce={evt:I,pointerId:de};let te=!1;v.Konva["_"+ne+"InDblClickWindow"]?(te=!0,clearTimeout(this[ne+"DblTimeout"])):_.DD.justDragged||(v.Konva["_"+ne+"InDblClickWindow"]=!0,clearTimeout(this[ne+"DblTimeout"])),this[ne+"DblTimeout"]=setTimeout(function(){v.Konva["_"+ne+"InDblClickWindow"]=!1},v.Konva.dblClickWindow),pe&&pe.isListening()?(ye=!0,this[ne+"ClickEndShape"]=pe,pe._fireAndBubble(K.pointerup,{...Ce}),v.Konva["_"+ne+"ListenClick"]&&le&&le===pe&&(pe._fireAndBubble(K.pointerclick,{...Ce}),te&&he&&he===pe&&pe._fireAndBubble(K.pointerdblclick,{...Ce}))):(this[ne+"ClickEndShape"]=null,v.Konva["_"+ne+"ListenClick"]&&this._fire(K.pointerclick,{evt:I,target:this,currentTarget:this,pointerId:de}),te&&this._fire(K.pointerdblclick,{evt:I,target:this,currentTarget:this,pointerId:de}))}),ye||this._fire(K.pointerup,{evt:I,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),v.Konva["_"+ne+"ListenClick"]=!1,I.cancelable&&ne!=="touch"&&ne!=="pointer"&&I.preventDefault()}_contextmenu(I){this.setPointersPositions(I);const K=this.getIntersection(this.getPointerPosition());K&&K.isListening()?K._fireAndBubble(Q,{evt:I}):this._fire(Q,{evt:I,target:this,currentTarget:this})}_wheel(I){this.setPointersPositions(I);const K=this.getIntersection(this.getPointerPosition());K&&K.isListening()?K._fireAndBubble(U,{evt:I}):this._fire(U,{evt:I,target:this,currentTarget:this})}_pointercancel(I){this.setPointersPositions(I);const K=E.getCapturedShape(I.pointerId)||this.getIntersection(this.getPointerPosition());K&&K._fireAndBubble(C,E.createEvent(I)),E.releaseCapture(I.pointerId)}_lostpointercapture(I){E.releaseCapture(I.pointerId)}setPointersPositions(I){const K=this._getContentPosition();let ne=null,le=null;I=I||window.event,I.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(I.touches,he=>{this._pointerPositions.push({id:he.identifier,x:(he.clientX-K.left)/K.scaleX,y:(he.clientY-K.top)/K.scaleY})}),Array.prototype.forEach.call(I.changedTouches||I.touches,he=>{this._changedPointerPositions.push({id:he.identifier,x:(he.clientX-K.left)/K.scaleX,y:(he.clientY-K.top)/K.scaleY})})):(ne=(I.clientX-K.left)/K.scaleX,le=(I.clientY-K.top)/K.scaleY,this.pointerPos={x:ne,y:le},this._pointerPositions=[{x:ne,y:le,id:e.Util._getFirstPointerId(I)}],this._changedPointerPositions=[{x:ne,y:le,id:e.Util._getFirstPointerId(I)}])}_setPointerPosition(I){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(I)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const I=this.content.getBoundingClientRect();return{top:I.top,left:I.left,scaleX:I.width/this.content.clientWidth||1,scaleY:I.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new S.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new S.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!v.Konva.isBrowser)return;const I=this.container();if(!I)throw"Stage has no container. A container is required.";I.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),I.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(I){I.batchDraw()}),this}}t.Stage=oe,oe.prototype.nodeType=d,(0,T._registerNode)(oe),h.Factory.addGetterSetter(oe,"container"),v.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(Y=>{Y.batchDraw()})})})(Mg)),Mg}var sc={},Ag={},Cy;function In(){return Cy||(Cy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=ht(),h=en(),x=vt(),v=hn(),S=xt(),_=ht(),T=Q2(),E="hasShadow",d="shadowRGBA",r="patternImage",c="linearGradient",l="radialGradient";let i;function s(){return i||(i=h.Util.createCanvasElement().getContext("2d"),i)}t.shapes={};function o(B){const D=this.attrs.fillRule;D?B.fill(D):B.fill()}function a(B){B.stroke()}function m(B){const D=this.attrs.fillRule;D?B.fill(D):B.fill()}function f(B){B.stroke()}function g(){this._clearCache(E)}function w(){this._clearCache(d)}function C(){this._clearCache(r)}function P(){this._clearCache(c)}function M(){this._clearCache(l)}class L extends v.Node{constructor(D){super(D);let H;for(;H=h.Util.getRandomColor(),!(H&&!(H in t.shapes)););this.colorKey=H,t.shapes[H]=this}getContext(){return h.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return h.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(E,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(r,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const H=s().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(H&&H.setTransform){const Q=new h.Transform;Q.translate(this.fillPatternX(),this.fillPatternY()),Q.rotate(e.Konva.getAngle(this.fillPatternRotation())),Q.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Q.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ee=Q.getMatrix(),se=typeof DOMMatrix>"u"?{a:ee[0],b:ee[1],c:ee[2],d:ee[3],e:ee[4],f:ee[5]}:new DOMMatrix(ee);H.setTransform(se)}return H}}_getLinearGradient(){return this._getCache(c,this.__getLinearGradient)}__getLinearGradient(){const D=this.fillLinearGradientColorStops();if(D){const H=s(),Q=this.fillLinearGradientStartPoint(),ee=this.fillLinearGradientEndPoint(),se=H.createLinearGradient(Q.x,Q.y,ee.x,ee.y);for(let ie=0;ie<D.length;ie+=2)se.addColorStop(D[ie],D[ie+1]);return se}}_getRadialGradient(){return this._getCache(l,this.__getRadialGradient)}__getRadialGradient(){const D=this.fillRadialGradientColorStops();if(D){const H=s(),Q=this.fillRadialGradientStartPoint(),ee=this.fillRadialGradientEndPoint(),se=H.createRadialGradient(Q.x,Q.y,this.fillRadialGradientStartRadius(),ee.x,ee.y,this.fillRadialGradientEndRadius());for(let ie=0;ie<D.length;ie+=2)se.addColorStop(D[ie],D[ie+1]);return se}}getShadowRGBA(){return this._getCache(d,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const D=h.Util.colorToRGBA(this.shadowColor());if(D)return"rgba("+D.r+","+D.g+","+D.b+","+D.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const D=this.hitStrokeWidth();return D==="auto"?this.hasStroke():this.strokeEnabled()&&!!D}intersects(D){const H=this.getStage();if(!H)return!1;const Q=H.bufferHitCanvas;return Q.getContext().clear(),this.drawHit(Q,void 0,!0),Q.context.getImageData(Math.round(D.x),Math.round(D.y),1,1).data[3]>0}destroy(){return v.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(D){var H;if(!((H=this.attrs.perfectDrawEnabled)!==null&&H!==void 0?H:!0))return!1;const ee=D||this.hasFill(),se=this.hasStroke(),ie=this.getAbsoluteOpacity()!==1;if(ee&&se&&ie)return!0;const ue=this.hasShadow(),U=this.shadowForStrokeEnabled();return!!(ee&&se&&ue&&U)}setStrokeHitEnabled(D){h.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),D?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const D=this.size();return{x:this._centroid?-D.width/2:0,y:this._centroid?-D.height/2:0,width:D.width,height:D.height}}getClientRect(D={}){let H=!1,Q=this.getParent();for(;Q;){if(Q.isCached()){H=!0;break}Q=Q.getParent()}const ee=D.skipTransform,se=D.relativeTo||H&&this.getStage()||void 0,ie=this.getSelfRect(),U=!D.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,X=ie.width+U,Z=ie.height+U,$=!D.skipShadow&&this.hasShadow(),R=$?this.shadowOffsetX():0,V=$?this.shadowOffsetY():0,W=X+Math.abs(R),q=Z+Math.abs(V),oe=$&&this.shadowBlur()||0,Y=W+oe*2,I=q+oe*2,K={width:Y,height:I,x:-(U/2+oe)+Math.min(R,0)+ie.x,y:-(U/2+oe)+Math.min(V,0)+ie.y};return ee?K:this._transformedRect(K,se)}drawScene(D,H,Q){const ee=this.getLayer(),se=D||ee.getCanvas(),ie=se.getContext(),ue=this._getCanvasCache(),U=this.getSceneFunc(),X=this.hasShadow();let Z;const $=H===this;if(!this.isVisible()&&!$)return this;if(ue){ie.save();const R=this.getAbsoluteTransform(H).getMatrix();return ie.transform(R[0],R[1],R[2],R[3],R[4],R[5]),this._drawCachedSceneCanvas(ie),ie.restore(),this}if(!U)return this;if(ie.save(),this._useBufferCanvas()){Z=this.getStage();const R=Q||Z.bufferCanvas,V=R.getContext();V.clear(),V.save(),V._applyLineJoin(this);const W=this.getAbsoluteTransform(H).getMatrix();V.transform(W[0],W[1],W[2],W[3],W[4],W[5]),U.call(this,V,this),V.restore();const q=R.pixelRatio;X&&ie._applyShadow(this),ie._applyOpacity(this),ie._applyGlobalCompositeOperation(this),ie.drawImage(R._canvas,R.x||0,R.y||0,R.width/q,R.height/q)}else{if(ie._applyLineJoin(this),!$){const R=this.getAbsoluteTransform(H).getMatrix();ie.transform(R[0],R[1],R[2],R[3],R[4],R[5]),ie._applyOpacity(this),ie._applyGlobalCompositeOperation(this)}X&&ie._applyShadow(this),U.call(this,ie,this)}return ie.restore(),this}drawHit(D,H,Q=!1){if(!this.shouldDrawHit(H,Q))return this;const ee=this.getLayer(),se=D||ee.hitCanvas,ie=se&&se.getContext(),ue=this.hitFunc()||this.sceneFunc(),U=this._getCanvasCache(),X=U&&U.hit;if(this.colorKey||h.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),X){ie.save();const $=this.getAbsoluteTransform(H).getMatrix();return ie.transform($[0],$[1],$[2],$[3],$[4],$[5]),this._drawCachedHitCanvas(ie),ie.restore(),this}if(!ue)return this;if(ie.save(),ie._applyLineJoin(this),!(this===H)){const $=this.getAbsoluteTransform(H).getMatrix();ie.transform($[0],$[1],$[2],$[3],$[4],$[5])}return ue.call(this,ie,this),ie.restore(),this}drawHitFromCache(D=0){const H=this._getCanvasCache(),Q=this._getCachedSceneCanvas(),ee=H.hit,se=ee.getContext(),ie=ee.getWidth(),ue=ee.getHeight();se.clear(),se.drawImage(Q._canvas,0,0,ie,ue);try{const U=se.getImageData(0,0,ie,ue),X=U.data,Z=X.length,$=h.Util._hexToRgb(this.colorKey);for(let R=0;R<Z;R+=4)X[R+3]>D?(X[R]=$.r,X[R+1]=$.g,X[R+2]=$.b,X[R+3]=255):X[R+3]=0;se.putImageData(U,0,0)}catch(U){h.Util.error("Unable to draw hit graph from cached scene canvas. "+U.message)}return this}hasPointerCapture(D){return T.hasPointerCapture(D,this)}setPointerCapture(D){T.setPointerCapture(D,this)}releaseCapture(D){T.releaseCapture(D,this)}}t.Shape=L,L.prototype._fillFunc=o,L.prototype._strokeFunc=a,L.prototype._fillFuncHit=m,L.prototype._strokeFuncHit=f,L.prototype._centroid=!1,L.prototype.nodeType="Shape",(0,_._registerNode)(L),L.prototype.eventListeners={},L.prototype.on.call(L.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),L.prototype.on.call(L.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),L.prototype.on.call(L.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C),L.prototype.on.call(L.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),L.prototype.on.call(L.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",M),x.Factory.addGetterSetter(L,"stroke",void 0,(0,S.getStringOrGradientValidator)()),x.Factory.addGetterSetter(L,"strokeWidth",2,(0,S.getNumberValidator)()),x.Factory.addGetterSetter(L,"fillAfterStrokeEnabled",!1),x.Factory.addGetterSetter(L,"hitStrokeWidth","auto",(0,S.getNumberOrAutoValidator)()),x.Factory.addGetterSetter(L,"strokeHitEnabled",!0,(0,S.getBooleanValidator)()),x.Factory.addGetterSetter(L,"perfectDrawEnabled",!0,(0,S.getBooleanValidator)()),x.Factory.addGetterSetter(L,"shadowForStrokeEnabled",!0,(0,S.getBooleanValidator)()),x.Factory.addGetterSetter(L,"lineJoin"),x.Factory.addGetterSetter(L,"lineCap"),x.Factory.addGetterSetter(L,"sceneFunc"),x.Factory.addGetterSetter(L,"hitFunc"),x.Factory.addGetterSetter(L,"dash"),x.Factory.addGetterSetter(L,"dashOffset",0,(0,S.getNumberValidator)()),x.Factory.addGetterSetter(L,"shadowColor",void 0,(0,S.getStringValidator)()),x.Factory.addGetterSetter(L,"shadowBlur",0,(0,S.getNumberValidator)()),x.Factory.addGetterSetter(L,"shadowOpacity",1,(0,S.getNumberValidator)()),x.Factory.addComponentsGetterSetter(L,"shadowOffset",["x","y"]),x.Factory.addGetterSetter(L,"shadowOffsetX",0,(0,S.getNumberValidator)()),x.Factory.addGetterSetter(L,"shadowOffsetY",0,(0,S.getNumberValidator)()),x.Factory.addGetterSetter(L,"fillPatternImage"),x.Factory.addGetterSetter(L,"fill",void 0,(0,S.getStringOrGradientValidator)()),x.Factory.addGetterSetter(L,"fillPatternX",0,(0,S.getNumberValidator)()),x.Factory.addGetterSetter(L,"fillPatternY",0,(0,S.getNumberValidator)()),x.Factory.addGetterSetter(L,"fillLinearGradientColorStops"),x.Factory.addGetterSetter(L,"strokeLinearGradientColorStops"),x.Factory.addGetterSetter(L,"fillRadialGradientStartRadius",0),x.Factory.addGetterSetter(L,"fillRadialGradientEndRadius",0),x.Factory.addGetterSetter(L,"fillRadialGradientColorStops"),x.Factory.addGetterSetter(L,"fillPatternRepeat","repeat"),x.Factory.addGetterSetter(L,"fillEnabled",!0),x.Factory.addGetterSetter(L,"strokeEnabled",!0),x.Factory.addGetterSetter(L,"shadowEnabled",!0),x.Factory.addGetterSetter(L,"dashEnabled",!0),x.Factory.addGetterSetter(L,"strokeScaleEnabled",!0),x.Factory.addGetterSetter(L,"fillPriority","color"),x.Factory.addComponentsGetterSetter(L,"fillPatternOffset",["x","y"]),x.Factory.addGetterSetter(L,"fillPatternOffsetX",0,(0,S.getNumberValidator)()),x.Factory.addGetterSetter(L,"fillPatternOffsetY",0,(0,S.getNumberValidator)()),x.Factory.addComponentsGetterSetter(L,"fillPatternScale",["x","y"]),x.Factory.addGetterSetter(L,"fillPatternScaleX",1,(0,S.getNumberValidator)()),x.Factory.addGetterSetter(L,"fillPatternScaleY",1,(0,S.getNumberValidator)()),x.Factory.addComponentsGetterSetter(L,"fillLinearGradientStartPoint",["x","y"]),x.Factory.addComponentsGetterSetter(L,"strokeLinearGradientStartPoint",["x","y"]),x.Factory.addGetterSetter(L,"fillLinearGradientStartPointX",0),x.Factory.addGetterSetter(L,"strokeLinearGradientStartPointX",0),x.Factory.addGetterSetter(L,"fillLinearGradientStartPointY",0),x.Factory.addGetterSetter(L,"strokeLinearGradientStartPointY",0),x.Factory.addComponentsGetterSetter(L,"fillLinearGradientEndPoint",["x","y"]),x.Factory.addComponentsGetterSetter(L,"strokeLinearGradientEndPoint",["x","y"]),x.Factory.addGetterSetter(L,"fillLinearGradientEndPointX",0),x.Factory.addGetterSetter(L,"strokeLinearGradientEndPointX",0),x.Factory.addGetterSetter(L,"fillLinearGradientEndPointY",0),x.Factory.addGetterSetter(L,"strokeLinearGradientEndPointY",0),x.Factory.addComponentsGetterSetter(L,"fillRadialGradientStartPoint",["x","y"]),x.Factory.addGetterSetter(L,"fillRadialGradientStartPointX",0),x.Factory.addGetterSetter(L,"fillRadialGradientStartPointY",0),x.Factory.addComponentsGetterSetter(L,"fillRadialGradientEndPoint",["x","y"]),x.Factory.addGetterSetter(L,"fillRadialGradientEndPointX",0),x.Factory.addGetterSetter(L,"fillRadialGradientEndPointY",0),x.Factory.addGetterSetter(L,"fillPatternRotation",0),x.Factory.addGetterSetter(L,"fillRule",void 0,(0,S.getStringValidator)()),x.Factory.backCompat(L,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Ag)),Ag}var ky;function J2(){if(ky)return sc;ky=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.Layer=void 0;const t=en(),e=vf(),h=hn(),x=vt(),v=mf(),S=xt(),_=In(),T=ht(),E="#",d="beforeDraw",r="draw",c=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],l=c.length;class i extends e.Container{constructor(o){super(o),this.canvas=new v.SceneCanvas,this.hitCanvas=new v.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(o){return this.getContext().clear(o),this.getHitCanvas().getContext().clear(o),this}setZIndex(o){super.setZIndex(o);const a=this.getStage();return a&&a.content&&(a.content.removeChild(this.getNativeCanvasElement()),o<a.children.length-1?a.content.insertBefore(this.getNativeCanvasElement(),a.children[o+1].getCanvas()._canvas):a.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){h.Node.prototype.moveToTop.call(this);const o=this.getStage();return o&&o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!h.Node.prototype.moveUp.call(this))return!1;const a=this.getStage();return!a||!a.content?!1:(a.content.removeChild(this.getNativeCanvasElement()),this.index<a.children.length-1?a.content.insertBefore(this.getNativeCanvasElement(),a.children[this.index+1].getCanvas()._canvas):a.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(h.Node.prototype.moveDown.call(this)){const o=this.getStage();if(o){const a=o.children;o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.insertBefore(this.getNativeCanvasElement(),a[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(h.Node.prototype.moveToBottom.call(this)){const o=this.getStage();if(o){const a=o.children;o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.insertBefore(this.getNativeCanvasElement(),a[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const o=this.getNativeCanvasElement();return h.Node.prototype.remove.call(this),o&&o.parentNode&&t.Util._isInDocument(o)&&o.parentNode.removeChild(o),this}getStage(){return this.parent}setSize({width:o,height:a}){return this.canvas.setSize(o,a),this.hitCanvas.setSize(o,a),this._setSmoothEnabled(),this}_validateAdd(o){const a=o.getType();a!=="Group"&&a!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(o){return o=o||{},o.width=o.width||this.getWidth(),o.height=o.height||this.getHeight(),o.x=o.x!==void 0?o.x:this.x(),o.y=o.y!==void 0?o.y:this.y(),h.Node.prototype._toKonvaCanvas.call(this,o)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(o){if(!this.isListening()||!this.isVisible())return null;let a=1,m=!1;for(;;){for(let f=0;f<l;f++){const g=c[f],w=this._getIntersection({x:o.x+g.x*a,y:o.y+g.y*a}),C=w.shape;if(C)return C;if(m=!!w.antialiased,!w.antialiased)break}if(m)a+=1;else return null}}_getIntersection(o){const a=this.hitCanvas.pixelRatio,m=this.hitCanvas.context.getImageData(Math.round(o.x*a),Math.round(o.y*a),1,1).data,f=m[3];if(f===255){const g=t.Util._rgbToHex(m[0],m[1],m[2]),w=_.shapes[E+g];return w?{shape:w}:{antialiased:!0}}else if(f>0)return{antialiased:!0};return{}}drawScene(o,a,m){const f=this.getLayer(),g=o||f&&f.getCanvas();return this._fire(d,{node:this}),this.clearBeforeDraw()&&g.getContext().clear(),e.Container.prototype.drawScene.call(this,g,a,m),this._fire(r,{node:this}),this}drawHit(o,a){const m=this.getLayer(),f=o||m&&m.hitCanvas;return m&&m.clearBeforeDraw()&&m.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,f,a),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(o){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(o)}getHitGraphEnabled(o){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const o=this.parent;!!this.hitCanvas._canvas.parentNode?o.content.removeChild(this.hitCanvas._canvas):o.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return sc.Layer=i,i.prototype.nodeType="Layer",(0,T._registerNode)(i),x.Factory.addGetterSetter(i,"imageSmoothingEnabled",!0),x.Factory.addGetterSetter(i,"clearBeforeDraw",!0),x.Factory.addGetterSetter(i,"hitGraphEnabled",!0,(0,S.getBooleanValidator)()),sc}var ac={},Ty;function Dk(){if(Ty)return ac;Ty=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.FastLayer=void 0;const t=en(),e=J2(),h=ht();let x=class extends e.Layer{constructor(S){super(S),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return ac.FastLayer=x,x.prototype.nodeType="FastLayer",(0,h._registerNode)(x),ac}var oc={},Py;function vm(){if(Py)return oc;Py=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.Group=void 0;const t=en(),e=vf(),h=ht();let x=class extends e.Container{_validateAdd(S){const _=S.getType();_!=="Group"&&_!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return oc.Group=x,x.prototype.nodeType="Group",(0,h._registerNode)(x),oc}var lc={},Ey;function ym(){if(Ey)return lc;Ey=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.Animation=void 0;const t=ht(),e=en(),h=(function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}})();let x=class Dl{constructor(S,_){this.id=Dl.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:h(),frameRate:0},this.func=S,this.setLayers(_)}setLayers(S){let _=[];return S&&(_=Array.isArray(S)?S:[S]),this.layers=_,this}getLayers(){return this.layers}addLayer(S){const _=this.layers,T=_.length;for(let E=0;E<T;E++)if(_[E]._id===S._id)return!1;return this.layers.push(S),!0}isRunning(){const _=Dl.animations,T=_.length;for(let E=0;E<T;E++)if(_[E].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=h(),Dl._addAnimation(this),this}stop(){return Dl._removeAnimation(this),this}_updateFrameObject(S){this.frame.timeDiff=S-this.frame.lastTime,this.frame.lastTime=S,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(S){this.animations.push(S),this._handleAnimation()}static _removeAnimation(S){const _=S.id,T=this.animations,E=T.length;for(let d=0;d<E;d++)if(T[d].id===_){this.animations.splice(d,1);break}}static _runFrames(){const S={},_=this.animations;for(let T=0;T<_.length;T++){const E=_[T],d=E.layers,r=E.func;E._updateFrameObject(h());const c=d.length;let l;if(r?l=r.call(E,E.frame)!==!1:l=!0,!!l)for(let i=0;i<c;i++){const s=d[i];s._id!==void 0&&(S[s._id]=s)}}for(const T in S)S.hasOwnProperty(T)&&S[T].batchDraw()}static _animationLoop(){const S=Dl;S.animations.length?(S._runFrames(),e.Util.requestAnimFrame(S._animationLoop)):S.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return lc.Animation=x,x.animations=[],x.animIdCounter=0,x.animRunning=!1,lc}var Rg={},jy;function Fk(){return jy||(jy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=en(),h=ym(),x=hn(),v=ht(),S={node:1,duration:1,easing:1,onFinish:1,yoyo:1},_=1,T=2,E=3,d=["fill","stroke","shadowColor"];let r=0;class c{constructor(s,o,a,m,f,g,w){this.prop=s,this.propFunc=o,this.begin=m,this._pos=m,this.duration=g,this._change=0,this.prevPos=0,this.yoyo=w,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=a,this._change=f-this.begin,this.pause()}fire(s){const o=this[s];o&&o()}setTime(s){s>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():s<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=s,this.update())}getTime(){return this._time}setPosition(s){this.prevPos=this._pos,this.propFunc(s),this._pos=s}getPosition(s){return s===void 0&&(s=this._time),this.func(s,this.begin,this._change,this.duration)}play(){this.state=T,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=E,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(s){this.pause(),this._time=s,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const s=this.getTimer()-this._startTime;this.state===T?this.setTime(s):this.state===E&&this.setTime(this.duration-s)}pause(){this.state=_,this.fire("onPause")}getTimer(){return new Date().getTime()}}class l{constructor(s){const o=this,a=s.node,m=a._id,f=s.easing||t.Easings.Linear,g=!!s.yoyo;let w,C;typeof s.duration>"u"?w=.3:s.duration===0?w=.001:w=s.duration,this.node=a,this._id=r++;const P=a.getLayer()||(a instanceof v.Konva.Stage?a.getLayers():null);P||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new h.Animation(function(){o.tween.onEnterFrame()},P),this.tween=new c(C,function(M){o._tweenFunc(M)},f,0,1,w*1e3,g),this._addListeners(),l.attrs[m]||(l.attrs[m]={}),l.attrs[m][this._id]||(l.attrs[m][this._id]={}),l.tweens[m]||(l.tweens[m]={});for(C in s)S[C]===void 0&&this._addAttr(C,s[C]);this.reset(),this.onFinish=s.onFinish,this.onReset=s.onReset,this.onUpdate=s.onUpdate}_addAttr(s,o){const a=this.node,m=a._id;let f,g,w,C,P;const M=l.tweens[m][s];M&&delete l.attrs[m][M][s];let L=a.getAttr(s);if(e.Util._isArray(o))if(f=[],g=Math.max(o.length,L.length),s==="points"&&o.length!==L.length&&(o.length>L.length?(C=L,L=e.Util._prepareArrayForTween(L,o,a.closed())):(w=o,o=e.Util._prepareArrayForTween(o,L,a.closed()))),s.indexOf("fill")===0)for(let B=0;B<g;B++)if(B%2===0)f.push(o[B]-L[B]);else{const D=e.Util.colorToRGBA(L[B]);P=e.Util.colorToRGBA(o[B]),L[B]=D,f.push({r:P.r-D.r,g:P.g-D.g,b:P.b-D.b,a:P.a-D.a})}else for(let B=0;B<g;B++)f.push(o[B]-L[B]);else d.indexOf(s)!==-1?(L=e.Util.colorToRGBA(L),P=e.Util.colorToRGBA(o),f={r:P.r-L.r,g:P.g-L.g,b:P.b-L.b,a:P.a-L.a}):f=o-L;l.attrs[m][this._id][s]={start:L,diff:f,end:o,trueEnd:w,trueStart:C},l.tweens[m][s]=this._id}_tweenFunc(s){const o=this.node,a=l.attrs[o._id][this._id];let m,f,g,w,C,P,M,L;for(m in a){if(f=a[m],g=f.start,w=f.diff,L=f.end,e.Util._isArray(g))if(C=[],M=Math.max(g.length,L.length),m.indexOf("fill")===0)for(P=0;P<M;P++)P%2===0?C.push((g[P]||0)+w[P]*s):C.push("rgba("+Math.round(g[P].r+w[P].r*s)+","+Math.round(g[P].g+w[P].g*s)+","+Math.round(g[P].b+w[P].b*s)+","+(g[P].a+w[P].a*s)+")");else for(P=0;P<M;P++)C.push((g[P]||0)+w[P]*s);else d.indexOf(m)!==-1?C="rgba("+Math.round(g.r+w.r*s)+","+Math.round(g.g+w.g*s)+","+Math.round(g.b+w.b*s)+","+(g.a+w.a*s)+")":C=g+w*s;o.setAttr(m,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const s=this.node,o=l.attrs[s._id][this._id];o.points&&o.points.trueEnd&&s.setAttr("points",o.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const s=this.node,o=l.attrs[s._id][this._id];o.points&&o.points.trueStart&&s.points(o.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(s){return this.tween.seek(s*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const s=this.node._id,o=this._id,a=l.tweens[s];this.pause(),this.anim&&this.anim.stop();for(const m in a)delete l.tweens[s][m];delete l.attrs[s][o],l.tweens[s]&&(Object.keys(l.tweens[s]).length===0&&delete l.tweens[s],Object.keys(l.attrs[s]).length===0&&delete l.attrs[s])}}t.Tween=l,l.attrs={},l.tweens={},x.Node.prototype.to=function(i){const s=i.onFinish;i.node=this,i.onFinish=function(){this.destroy(),s&&s()},new l(i).play()},t.Easings={BackEaseIn(i,s,o,a){return o*(i/=a)*i*((1.70158+1)*i-1.70158)+s},BackEaseOut(i,s,o,a){return o*((i=i/a-1)*i*((1.70158+1)*i+1.70158)+1)+s},BackEaseInOut(i,s,o,a){let m=1.70158;return(i/=a/2)<1?o/2*(i*i*(((m*=1.525)+1)*i-m))+s:o/2*((i-=2)*i*(((m*=1.525)+1)*i+m)+2)+s},ElasticEaseIn(i,s,o,a,m,f){let g=0;return i===0?s:(i/=a)===1?s+o:(f||(f=a*.3),!m||m<Math.abs(o)?(m=o,g=f/4):g=f/(2*Math.PI)*Math.asin(o/m),-(m*Math.pow(2,10*(i-=1))*Math.sin((i*a-g)*(2*Math.PI)/f))+s)},ElasticEaseOut(i,s,o,a,m,f){let g=0;return i===0?s:(i/=a)===1?s+o:(f||(f=a*.3),!m||m<Math.abs(o)?(m=o,g=f/4):g=f/(2*Math.PI)*Math.asin(o/m),m*Math.pow(2,-10*i)*Math.sin((i*a-g)*(2*Math.PI)/f)+o+s)},ElasticEaseInOut(i,s,o,a,m,f){let g=0;return i===0?s:(i/=a/2)===2?s+o:(f||(f=a*(.3*1.5)),!m||m<Math.abs(o)?(m=o,g=f/4):g=f/(2*Math.PI)*Math.asin(o/m),i<1?-.5*(m*Math.pow(2,10*(i-=1))*Math.sin((i*a-g)*(2*Math.PI)/f))+s:m*Math.pow(2,-10*(i-=1))*Math.sin((i*a-g)*(2*Math.PI)/f)*.5+o+s)},BounceEaseOut(i,s,o,a){return(i/=a)<1/2.75?o*(7.5625*i*i)+s:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+s:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+s:o*(7.5625*(i-=2.625/2.75)*i+.984375)+s},BounceEaseIn(i,s,o,a){return o-t.Easings.BounceEaseOut(a-i,0,o,a)+s},BounceEaseInOut(i,s,o,a){return i<a/2?t.Easings.BounceEaseIn(i*2,0,o,a)*.5+s:t.Easings.BounceEaseOut(i*2-a,0,o,a)*.5+o*.5+s},EaseIn(i,s,o,a){return o*(i/=a)*i+s},EaseOut(i,s,o,a){return-o*(i/=a)*(i-2)+s},EaseInOut(i,s,o,a){return(i/=a/2)<1?o/2*i*i+s:-o/2*(--i*(i-2)-1)+s},StrongEaseIn(i,s,o,a){return o*(i/=a)*i*i*i*i+s},StrongEaseOut(i,s,o,a){return o*((i=i/a-1)*i*i*i*i+1)+s},StrongEaseInOut(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i*i+s:o/2*((i-=2)*i*i*i*i+2)+s},Linear(i,s,o,a){return o*i/a+s}}})(Rg)),Rg}var Oy;function Pp(){return Oy||(Oy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=ht(),h=en(),x=hn(),v=vf(),S=Rk(),_=J2(),T=Dk(),E=vm(),d=mm(),r=In(),c=ym(),l=Fk(),i=$2(),s=mf();t.Konva=h.Util._assign(e.Konva,{Util:h.Util,Transform:h.Transform,Node:x.Node,Container:v.Container,Stage:S.Stage,stages:S.stages,Layer:_.Layer,FastLayer:T.FastLayer,Group:E.Group,DD:d.DD,Shape:r.Shape,shapes:r.shapes,Animation:c.Animation,Tween:l.Tween,Easings:l.Easings,Context:i.Context,Canvas:s.Canvas}),t.default=t.Konva})(Eg)),Eg}var uc={},Ny;function Ik(){if(Ny)return uc;Ny=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.Arc=void 0;const t=vt(),e=In(),h=ht(),x=xt(),v=ht();let S=class extends e.Shape{_sceneFunc(T){const E=h.Konva.getAngle(this.angle()),d=this.clockwise();T.beginPath(),T.arc(0,0,this.outerRadius(),0,E,d),T.arc(0,0,this.innerRadius(),E,0,!d),T.closePath(),T.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(T){this.outerRadius(T/2)}setHeight(T){this.outerRadius(T/2)}getSelfRect(){const T=this.innerRadius(),E=this.outerRadius(),d=this.clockwise(),r=h.Konva.getAngle(d?360-this.angle():this.angle()),c=Math.cos(Math.min(r,Math.PI)),l=1,i=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),s=Math.sin(Math.min(r,Math.PI/2)),o=c*(c>0?T:E),a=l*E,m=i*(i>0?T:E),f=s*(s>0?E:T);return{x:o,y:d?-1*f:m,width:a-o,height:f-m}}};return uc.Arc=S,S.prototype._centroid=!0,S.prototype.className="Arc",S.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,v._registerNode)(S),t.Factory.addGetterSetter(S,"innerRadius",0,(0,x.getNumberValidator)()),t.Factory.addGetterSetter(S,"outerRadius",0,(0,x.getNumberValidator)()),t.Factory.addGetterSetter(S,"angle",0,(0,x.getNumberValidator)()),t.Factory.addGetterSetter(S,"clockwise",!1,(0,x.getBooleanValidator)()),uc}var cc={},hc={},Ly;function Z2(){if(Ly)return hc;Ly=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.Line=void 0;const t=vt(),e=ht(),h=In(),x=xt();function v(T,E,d,r,c,l,i){const s=Math.sqrt(Math.pow(d-T,2)+Math.pow(r-E,2)),o=Math.sqrt(Math.pow(c-d,2)+Math.pow(l-r,2)),a=i*s/(s+o),m=i*o/(s+o),f=d-a*(c-T),g=r-a*(l-E),w=d+m*(c-T),C=r+m*(l-E);return[f,g,w,C]}function S(T,E){const d=T.length,r=[];for(let c=2;c<d-2;c+=2){const l=v(T[c-2],T[c-1],T[c],T[c+1],T[c+2],T[c+3],E);isNaN(l[0])||(r.push(l[0]),r.push(l[1]),r.push(T[c]),r.push(T[c+1]),r.push(l[2]),r.push(l[3]))}return r}let _=class extends h.Shape{constructor(E){super(E),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(E){const d=this.points(),r=d.length,c=this.tension(),l=this.closed(),i=this.bezier();if(!r)return;let s=0;if(E.beginPath(),E.moveTo(d[0],d[1]),c!==0&&r>4){const o=this.getTensionPoints(),a=o.length;for(s=l?0:4,l||E.quadraticCurveTo(o[0],o[1],o[2],o[3]);s<a-2;)E.bezierCurveTo(o[s++],o[s++],o[s++],o[s++],o[s++],o[s++]);l||E.quadraticCurveTo(o[a-2],o[a-1],d[r-2],d[r-1])}else if(i)for(s=2;s<r;)E.bezierCurveTo(d[s++],d[s++],d[s++],d[s++],d[s++],d[s++]);else for(s=2;s<r;s+=2)E.lineTo(d[s],d[s+1]);l?(E.closePath(),E.fillStrokeShape(this)):E.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():S(this.points(),this.tension())}_getTensionPointsClosed(){const E=this.points(),d=E.length,r=this.tension(),c=v(E[d-2],E[d-1],E[0],E[1],E[2],E[3],r),l=v(E[d-4],E[d-3],E[d-2],E[d-1],E[0],E[1],r),i=S(E,r);return[c[2],c[3]].concat(i).concat([l[0],l[1],E[d-2],E[d-1],l[2],l[3],c[0],c[1],E[0],E[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let E=this.points();if(E.length<4)return{x:E[0]||0,y:E[1]||0,width:0,height:0};this.tension()!==0?E=[E[0],E[1],...this._getTensionPoints(),E[E.length-2],E[E.length-1]]:E=this.points();let d=E[0],r=E[0],c=E[1],l=E[1],i,s;for(let o=0;o<E.length/2;o++)i=E[o*2],s=E[o*2+1],d=Math.min(d,i),r=Math.max(r,i),c=Math.min(c,s),l=Math.max(l,s);return{x:d,y:c,width:r-d,height:l-c}}};return hc.Line=_,_.prototype.className="Line",_.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(_),t.Factory.addGetterSetter(_,"closed",!1),t.Factory.addGetterSetter(_,"bezier",!1),t.Factory.addGetterSetter(_,"tension",0,(0,x.getNumberValidator)()),t.Factory.addGetterSetter(_,"points",[],(0,x.getNumberArrayValidator)()),hc}var dc={},Dg={},My;function Bk(){return My||(My=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(_,T,E)=>{let d,r;const l=E/2;d=0;for(let i=0;i<20;i++)r=l*t.tValues[20][i]+l,d+=t.cValues[20][i]*x(_,T,r);return l*d};t.getCubicArcLength=e;const h=(_,T,E)=>{E===void 0&&(E=1);const d=_[0]-2*_[1]+_[2],r=T[0]-2*T[1]+T[2],c=2*_[1]-2*_[0],l=2*T[1]-2*T[0],i=4*(d*d+r*r),s=4*(d*c+r*l),o=c*c+l*l;if(i===0)return E*Math.sqrt(Math.pow(_[2]-_[0],2)+Math.pow(T[2]-T[0],2));const a=s/(2*i),m=o/i,f=E+a,g=m-a*a,w=f*f+g>0?Math.sqrt(f*f+g):0,C=a*a+g>0?Math.sqrt(a*a+g):0,P=a+Math.sqrt(a*a+g)!==0?g*Math.log(Math.abs((f+w)/(a+C))):0;return Math.sqrt(i)/2*(f*w-a*C+P)};t.getQuadraticArcLength=h;function x(_,T,E){const d=v(1,E,_),r=v(1,E,T),c=d*d+r*r;return Math.sqrt(c)}const v=(_,T,E)=>{const d=E.length-1;let r,c;if(d===0)return 0;if(_===0){c=0;for(let l=0;l<=d;l++)c+=t.binomialCoefficients[d][l]*Math.pow(1-T,d-l)*Math.pow(T,l)*E[l];return c}else{r=new Array(d);for(let l=0;l<d;l++)r[l]=d*(E[l+1]-E[l]);return v(_-1,T,r)}},S=(_,T,E)=>{let d=1,r=_/T,c=(_-E(r))/T,l=0;for(;d>.001;){const i=E(r+c),s=Math.abs(_-i)/T;if(s<d)d=s,r+=c;else{const o=E(r-c),a=Math.abs(_-o)/T;a<d?(d=a,r-=c):c/=2}if(l++,l>500)break}return r};t.t2length=S})(Dg)),Dg}var Ay;function xm(){if(Ay)return dc;Ay=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.Path=void 0;const t=vt(),e=ht(),h=In(),x=Bk();let v=class jr extends h.Shape{constructor(_){super(_),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=jr.parsePathData(this.data()),this.pathLength=jr.getPathLength(this.dataArray)}_sceneFunc(_){const T=this.dataArray;_.beginPath();let E=!1;for(let d=0;d<T.length;d++){const r=T[d].command,c=T[d].points;switch(r){case"L":_.lineTo(c[0],c[1]);break;case"M":_.moveTo(c[0],c[1]);break;case"C":_.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":_.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const l=c[0],i=c[1],s=c[2],o=c[3],a=c[4],m=c[5],f=c[6],g=c[7],w=s>o?s:o,C=s>o?1:s/o,P=s>o?o/s:1;_.translate(l,i),_.rotate(f),_.scale(C,P),_.arc(0,0,w,a,a+m,1-g),_.scale(1/C,1/P),_.rotate(-f),_.translate(-l,-i);break;case"z":E=!0,_.closePath();break}}!E&&!this.hasFill()?_.strokeShape(this):_.fillStrokeShape(this)}getSelfRect(){let _=[];this.dataArray.forEach(function(i){if(i.command==="A"){const s=i.points[4],o=i.points[5],a=i.points[4]+o;let m=Math.PI/180;if(Math.abs(s-a)<m&&(m=Math.abs(s-a)),o<0)for(let f=s-m;f>a;f-=m){const g=jr.getPointOnEllipticalArc(i.points[0],i.points[1],i.points[2],i.points[3],f,0);_.push(g.x,g.y)}else for(let f=s+m;f<a;f+=m){const g=jr.getPointOnEllipticalArc(i.points[0],i.points[1],i.points[2],i.points[3],f,0);_.push(g.x,g.y)}}else if(i.command==="C")for(let s=0;s<=1;s+=.01){const o=jr.getPointOnCubicBezier(s,i.start.x,i.start.y,i.points[0],i.points[1],i.points[2],i.points[3],i.points[4],i.points[5]);_.push(o.x,o.y)}else _=_.concat(i.points)});let T=_[0],E=_[0],d=_[1],r=_[1],c,l;for(let i=0;i<_.length/2;i++)c=_[i*2],l=_[i*2+1],isNaN(c)||(T=Math.min(T,c),E=Math.max(E,c)),isNaN(l)||(d=Math.min(d,l),r=Math.max(r,l));return{x:T,y:d,width:E-T,height:r-d}}getLength(){return this.pathLength}getPointAtLength(_){return jr.getPointAtLengthOfDataArray(_,this.dataArray)}static getLineLength(_,T,E,d){return Math.sqrt((E-_)*(E-_)+(d-T)*(d-T))}static getPathLength(_){let T=0;for(let E=0;E<_.length;++E)T+=_[E].pathLength;return T}static getPointAtLengthOfDataArray(_,T){let E,d=0,r=T.length;if(!r)return null;for(;d<r&&_>T[d].pathLength;)_-=T[d].pathLength,++d;if(d===r)return E=T[d-1].points.slice(-2),{x:E[0],y:E[1]};if(_<.01)return T[d].command==="M"?(E=T[d].points.slice(0,2),{x:E[0],y:E[1]}):{x:T[d].start.x,y:T[d].start.y};const c=T[d],l=c.points;switch(c.command){case"L":return jr.getPointOnLine(_,c.start.x,c.start.y,l[0],l[1]);case"C":return jr.getPointOnCubicBezier((0,x.t2length)(_,jr.getPathLength(T),w=>(0,x.getCubicArcLength)([c.start.x,l[0],l[2],l[4]],[c.start.y,l[1],l[3],l[5]],w)),c.start.x,c.start.y,l[0],l[1],l[2],l[3],l[4],l[5]);case"Q":return jr.getPointOnQuadraticBezier((0,x.t2length)(_,jr.getPathLength(T),w=>(0,x.getQuadraticArcLength)([c.start.x,l[0],l[2]],[c.start.y,l[1],l[3]],w)),c.start.x,c.start.y,l[0],l[1],l[2],l[3]);case"A":const i=l[0],s=l[1],o=l[2],a=l[3],m=l[5],f=l[6];let g=l[4];return g+=m*_/c.pathLength,jr.getPointOnEllipticalArc(i,s,o,a,g,f)}return null}static getPointOnLine(_,T,E,d,r,c,l){c=c??T,l=l??E;const i=this.getLineLength(T,E,d,r);if(i<1e-10)return{x:T,y:E};if(d===T)return{x:c,y:l+(r>E?_:-_)};const s=(r-E)/(d-T),o=Math.sqrt(_*_/(1+s*s))*(d<T?-1:1),a=s*o;if(Math.abs(l-E-s*(c-T))<1e-10)return{x:c+o,y:l+a};const m=((c-T)*(d-T)+(l-E)*(r-E))/(i*i),f=T+m*(d-T),g=E+m*(r-E),w=this.getLineLength(c,l,f,g),C=Math.sqrt(_*_-w*w),P=Math.sqrt(C*C/(1+s*s))*(d<T?-1:1),M=s*P;return{x:f+P,y:g+M}}static getPointOnCubicBezier(_,T,E,d,r,c,l,i,s){function o(C){return C*C*C}function a(C){return 3*C*C*(1-C)}function m(C){return 3*C*(1-C)*(1-C)}function f(C){return(1-C)*(1-C)*(1-C)}const g=i*o(_)+c*a(_)+d*m(_)+T*f(_),w=s*o(_)+l*a(_)+r*m(_)+E*f(_);return{x:g,y:w}}static getPointOnQuadraticBezier(_,T,E,d,r,c,l){function i(f){return f*f}function s(f){return 2*f*(1-f)}function o(f){return(1-f)*(1-f)}const a=c*i(_)+d*s(_)+T*o(_),m=l*i(_)+r*s(_)+E*o(_);return{x:a,y:m}}static getPointOnEllipticalArc(_,T,E,d,r,c){const l=Math.cos(c),i=Math.sin(c),s={x:E*Math.cos(r),y:d*Math.sin(r)};return{x:_+(s.x*l-s.y*i),y:T+(s.x*i+s.y*l)}}static parsePathData(_){if(!_)return[];let T=_;const E=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];T=T.replace(new RegExp(" ","g"),",");for(let a=0;a<E.length;a++)T=T.replace(new RegExp(E[a],"g"),"|"+E[a]);const d=T.split("|"),r=[],c=[];let l=0,i=0;const s=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let o;for(let a=1;a<d.length;a++){let m=d[a],f=m.charAt(0);for(m=m.slice(1),c.length=0;o=s.exec(m);)c.push(o[0]);const g=[];for(let w=0,C=c.length;w<C;w++){if(c[w]==="00"){g.push(0,0);continue}const P=parseFloat(c[w]);isNaN(P)?g.push(0):g.push(P)}for(;g.length>0&&!isNaN(g[0]);){let w="",C=[];const P=l,M=i;let L,B,D,H,Q,ee,se,ie,ue,U;switch(f){case"l":l+=g.shift(),i+=g.shift(),w="L",C.push(l,i);break;case"L":l=g.shift(),i=g.shift(),C.push(l,i);break;case"m":const X=g.shift(),Z=g.shift();if(l+=X,i+=Z,w="M",r.length>2&&r[r.length-1].command==="z"){for(let $=r.length-2;$>=0;$--)if(r[$].command==="M"){l=r[$].points[0]+X,i=r[$].points[1]+Z;break}}C.push(l,i),f="l";break;case"M":l=g.shift(),i=g.shift(),w="M",C.push(l,i),f="L";break;case"h":l+=g.shift(),w="L",C.push(l,i);break;case"H":l=g.shift(),w="L",C.push(l,i);break;case"v":i+=g.shift(),w="L",C.push(l,i);break;case"V":i=g.shift(),w="L",C.push(l,i);break;case"C":C.push(g.shift(),g.shift(),g.shift(),g.shift()),l=g.shift(),i=g.shift(),C.push(l,i);break;case"c":C.push(l+g.shift(),i+g.shift(),l+g.shift(),i+g.shift()),l+=g.shift(),i+=g.shift(),w="C",C.push(l,i);break;case"S":B=l,D=i,L=r[r.length-1],L.command==="C"&&(B=l+(l-L.points[2]),D=i+(i-L.points[3])),C.push(B,D,g.shift(),g.shift()),l=g.shift(),i=g.shift(),w="C",C.push(l,i);break;case"s":B=l,D=i,L=r[r.length-1],L.command==="C"&&(B=l+(l-L.points[2]),D=i+(i-L.points[3])),C.push(B,D,l+g.shift(),i+g.shift()),l+=g.shift(),i+=g.shift(),w="C",C.push(l,i);break;case"Q":C.push(g.shift(),g.shift()),l=g.shift(),i=g.shift(),C.push(l,i);break;case"q":C.push(l+g.shift(),i+g.shift()),l+=g.shift(),i+=g.shift(),w="Q",C.push(l,i);break;case"T":B=l,D=i,L=r[r.length-1],L.command==="Q"&&(B=l+(l-L.points[0]),D=i+(i-L.points[1])),l=g.shift(),i=g.shift(),w="Q",C.push(B,D,l,i);break;case"t":B=l,D=i,L=r[r.length-1],L.command==="Q"&&(B=l+(l-L.points[0]),D=i+(i-L.points[1])),l+=g.shift(),i+=g.shift(),w="Q",C.push(B,D,l,i);break;case"A":H=g.shift(),Q=g.shift(),ee=g.shift(),se=g.shift(),ie=g.shift(),ue=l,U=i,l=g.shift(),i=g.shift(),w="A",C=this.convertEndpointToCenterParameterization(ue,U,l,i,se,ie,H,Q,ee);break;case"a":H=g.shift(),Q=g.shift(),ee=g.shift(),se=g.shift(),ie=g.shift(),ue=l,U=i,l+=g.shift(),i+=g.shift(),w="A",C=this.convertEndpointToCenterParameterization(ue,U,l,i,se,ie,H,Q,ee);break}r.push({command:w||f,points:C,start:{x:P,y:M},pathLength:this.calcLength(P,M,w||f,C)})}(f==="z"||f==="Z")&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r}static calcLength(_,T,E,d){let r,c,l,i;const s=jr;switch(E){case"L":return s.getLineLength(_,T,d[0],d[1]);case"C":return(0,x.getCubicArcLength)([_,d[0],d[2],d[4]],[T,d[1],d[3],d[5]],1);case"Q":return(0,x.getQuadraticArcLength)([_,d[0],d[2]],[T,d[1],d[3]],1);case"A":r=0;const o=d[4],a=d[5],m=d[4]+a;let f=Math.PI/180;if(Math.abs(o-m)<f&&(f=Math.abs(o-m)),c=s.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],o,0),a<0)for(i=o-f;i>m;i-=f)l=s.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],i,0),r+=s.getLineLength(c.x,c.y,l.x,l.y),c=l;else for(i=o+f;i<m;i+=f)l=s.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],i,0),r+=s.getLineLength(c.x,c.y,l.x,l.y),c=l;return l=s.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],m,0),r+=s.getLineLength(c.x,c.y,l.x,l.y),r}return 0}static convertEndpointToCenterParameterization(_,T,E,d,r,c,l,i,s){const o=s*(Math.PI/180),a=Math.cos(o)*(_-E)/2+Math.sin(o)*(T-d)/2,m=-1*Math.sin(o)*(_-E)/2+Math.cos(o)*(T-d)/2,f=a*a/(l*l)+m*m/(i*i);f>1&&(l*=Math.sqrt(f),i*=Math.sqrt(f));let g=Math.sqrt((l*l*(i*i)-l*l*(m*m)-i*i*(a*a))/(l*l*(m*m)+i*i*(a*a)));r===c&&(g*=-1),isNaN(g)&&(g=0);const w=g*l*m/i,C=g*-i*a/l,P=(_+E)/2+Math.cos(o)*w-Math.sin(o)*C,M=(T+d)/2+Math.sin(o)*w+Math.cos(o)*C,L=function(ie){return Math.sqrt(ie[0]*ie[0]+ie[1]*ie[1])},B=function(ie,ue){return(ie[0]*ue[0]+ie[1]*ue[1])/(L(ie)*L(ue))},D=function(ie,ue){return(ie[0]*ue[1]<ie[1]*ue[0]?-1:1)*Math.acos(B(ie,ue))},H=D([1,0],[(a-w)/l,(m-C)/i]),Q=[(a-w)/l,(m-C)/i],ee=[(-1*a-w)/l,(-1*m-C)/i];let se=D(Q,ee);return B(Q,ee)<=-1&&(se=Math.PI),B(Q,ee)>=1&&(se=0),c===0&&se>0&&(se=se-2*Math.PI),c===1&&se<0&&(se=se+2*Math.PI),[P,M,l,i,H,se,o,c]}};return dc.Path=v,v.prototype.className="Path",v.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(v),t.Factory.addGetterSetter(v,"data"),dc}var Ry;function zk(){if(Ry)return cc;Ry=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.Arrow=void 0;const t=vt(),e=Z2(),h=xt(),x=ht(),v=xm();let S=class extends e.Line{_sceneFunc(T){super._sceneFunc(T);const E=Math.PI*2,d=this.points();let r=d;const c=this.tension()!==0&&d.length>4;c&&(r=this.getTensionPoints());const l=this.pointerLength(),i=d.length;let s,o;if(c){const f=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],d[i-2],d[i-1]],g=v.Path.calcLength(r[r.length-4],r[r.length-3],"C",f),w=v.Path.getPointOnQuadraticBezier(Math.min(1,1-l/g),f[0],f[1],f[2],f[3],f[4],f[5]);s=d[i-2]-w.x,o=d[i-1]-w.y}else s=d[i-2]-d[i-4],o=d[i-1]-d[i-3];const a=(Math.atan2(o,s)+E)%E,m=this.pointerWidth();this.pointerAtEnding()&&(T.save(),T.beginPath(),T.translate(d[i-2],d[i-1]),T.rotate(a),T.moveTo(0,0),T.lineTo(-l,m/2),T.lineTo(-l,-m/2),T.closePath(),T.restore(),this.__fillStroke(T)),this.pointerAtBeginning()&&(T.save(),T.beginPath(),T.translate(d[0],d[1]),c?(s=(r[0]+r[2])/2-d[0],o=(r[1]+r[3])/2-d[1]):(s=d[2]-d[0],o=d[3]-d[1]),T.rotate((Math.atan2(-o,-s)+E)%E),T.moveTo(0,0),T.lineTo(-l,m/2),T.lineTo(-l,-m/2),T.closePath(),T.restore(),this.__fillStroke(T))}__fillStroke(T){const E=this.dashEnabled();E&&(this.attrs.dashEnabled=!1,T.setLineDash([])),T.fillStrokeShape(this),E&&(this.attrs.dashEnabled=!0)}getSelfRect(){const T=super.getSelfRect(),E=this.pointerWidth()/2;return{x:T.x,y:T.y-E,width:T.width,height:T.height+E*2}}};return cc.Arrow=S,S.prototype.className="Arrow",(0,x._registerNode)(S),t.Factory.addGetterSetter(S,"pointerLength",10,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(S,"pointerWidth",10,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(S,"pointerAtBeginning",!1),t.Factory.addGetterSetter(S,"pointerAtEnding",!0),cc}var fc={},Dy;function Uk(){if(Dy)return fc;Dy=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.Circle=void 0;const t=vt(),e=In(),h=xt(),x=ht();let v=class extends e.Shape{_sceneFunc(_){_.beginPath(),_.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),_.closePath(),_.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(_){this.radius()!==_/2&&this.radius(_/2)}setHeight(_){this.radius()!==_/2&&this.radius(_/2)}};return fc.Circle=v,v.prototype._centroid=!0,v.prototype.className="Circle",v.prototype._attrsAffectingSize=["radius"],(0,x._registerNode)(v),t.Factory.addGetterSetter(v,"radius",0,(0,h.getNumberValidator)()),fc}var gc={},Fy;function Vk(){if(Fy)return gc;Fy=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.Ellipse=void 0;const t=vt(),e=In(),h=xt(),x=ht();let v=class extends e.Shape{_sceneFunc(_){const T=this.radiusX(),E=this.radiusY();_.beginPath(),_.save(),T!==E&&_.scale(1,E/T),_.arc(0,0,T,0,Math.PI*2,!1),_.restore(),_.closePath(),_.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(_){this.radiusX(_/2)}setHeight(_){this.radiusY(_/2)}};return gc.Ellipse=v,v.prototype.className="Ellipse",v.prototype._centroid=!0,v.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,x._registerNode)(v),t.Factory.addComponentsGetterSetter(v,"radius",["x","y"]),t.Factory.addGetterSetter(v,"radiusX",0,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(v,"radiusY",0,(0,h.getNumberValidator)()),gc}var pc={},Iy;function Gk(){if(Iy)return pc;Iy=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.Image=void 0;const t=en(),e=vt(),h=In(),x=ht(),v=xt();class S extends h.Shape{constructor(T){super(T),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",E=>{this._removeImageLoad(E.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const T=this.image();T&&T.complete||T&&T.readyState===4||T&&T.addEventListener&&T.addEventListener("load",this._loadListener)}_removeImageLoad(T){T&&T.removeEventListener&&T.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const T=!!this.cornerRadius(),E=this.hasShadow();return T&&E?!0:super._useBufferCanvas(!0)}_sceneFunc(T){const E=this.getWidth(),d=this.getHeight(),r=this.cornerRadius(),c=this.attrs.image;let l;if(c){const i=this.attrs.cropWidth,s=this.attrs.cropHeight;i&&s?l=[c,this.cropX(),this.cropY(),i,s,0,0,E,d]:l=[c,0,0,E,d]}(this.hasFill()||this.hasStroke()||r)&&(T.beginPath(),r?t.Util.drawRoundedRectPath(T,E,d,r):T.rect(0,0,E,d),T.closePath(),T.fillStrokeShape(this)),c&&(r&&T.clip(),T.drawImage.apply(T,l))}_hitFunc(T){const E=this.width(),d=this.height(),r=this.cornerRadius();T.beginPath(),r?t.Util.drawRoundedRectPath(T,E,d,r):T.rect(0,0,E,d),T.closePath(),T.fillStrokeShape(this)}getWidth(){var T,E;return(T=this.attrs.width)!==null&&T!==void 0?T:(E=this.image())===null||E===void 0?void 0:E.width}getHeight(){var T,E;return(T=this.attrs.height)!==null&&T!==void 0?T:(E=this.image())===null||E===void 0?void 0:E.height}static fromURL(T,E,d=null){const r=t.Util.createImageElement();r.onload=function(){const c=new S({image:r});E(c)},r.onerror=d,r.crossOrigin="Anonymous",r.src=T}}return pc.Image=S,S.prototype.className="Image",(0,x._registerNode)(S),e.Factory.addGetterSetter(S,"cornerRadius",0,(0,v.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(S,"image"),e.Factory.addComponentsGetterSetter(S,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(S,"cropX",0,(0,v.getNumberValidator)()),e.Factory.addGetterSetter(S,"cropY",0,(0,v.getNumberValidator)()),e.Factory.addGetterSetter(S,"cropWidth",0,(0,v.getNumberValidator)()),e.Factory.addGetterSetter(S,"cropHeight",0,(0,v.getNumberValidator)()),pc}var xo={},By;function Hk(){if(By)return xo;By=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.Tag=xo.Label=void 0;const t=vt(),e=In(),h=vm(),x=xt(),v=ht(),S=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],_="Change.konva",T="none",E="up",d="right",r="down",c="left",l=S.length;let i=class extends h.Group{constructor(a){super(a),this.on("add.konva",function(m){this._addListeners(m.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(a){let m=this,f;const g=function(){m._sync()};for(f=0;f<l;f++)a.on(S[f]+_,g)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let a=this.getText(),m=this.getTag(),f,g,w,C,P,M,L;if(a&&m){switch(f=a.width(),g=a.height(),w=m.pointerDirection(),C=m.pointerWidth(),L=m.pointerHeight(),P=0,M=0,w){case E:P=f/2,M=-1*L;break;case d:P=f+C,M=g/2;break;case r:P=f/2,M=g+L;break;case c:P=-1*C,M=g/2;break}m.setAttrs({x:-1*P,y:-1*M,width:f,height:g}),a.setAttrs({x:-1*P,y:-1*M})}}};xo.Label=i,i.prototype.className="Label",(0,v._registerNode)(i);class s extends e.Shape{_sceneFunc(a){const m=this.width(),f=this.height(),g=this.pointerDirection(),w=this.pointerWidth(),C=this.pointerHeight(),P=this.cornerRadius();let M=0,L=0,B=0,D=0;typeof P=="number"?M=L=B=D=Math.min(P,m/2,f/2):(M=Math.min(P[0]||0,m/2,f/2),L=Math.min(P[1]||0,m/2,f/2),D=Math.min(P[2]||0,m/2,f/2),B=Math.min(P[3]||0,m/2,f/2)),a.beginPath(),a.moveTo(M,0),g===E&&(a.lineTo((m-w)/2,0),a.lineTo(m/2,-1*C),a.lineTo((m+w)/2,0)),a.lineTo(m-L,0),a.arc(m-L,L,L,Math.PI*3/2,0,!1),g===d&&(a.lineTo(m,(f-C)/2),a.lineTo(m+w,f/2),a.lineTo(m,(f+C)/2)),a.lineTo(m,f-D),a.arc(m-D,f-D,D,0,Math.PI/2,!1),g===r&&(a.lineTo((m+w)/2,f),a.lineTo(m/2,f+C),a.lineTo((m-w)/2,f)),a.lineTo(B,f),a.arc(B,f-B,B,Math.PI/2,Math.PI,!1),g===c&&(a.lineTo(0,(f+C)/2),a.lineTo(-1*w,f/2),a.lineTo(0,(f-C)/2)),a.lineTo(0,M),a.arc(M,M,M,Math.PI,Math.PI*3/2,!1),a.closePath(),a.fillStrokeShape(this)}getSelfRect(){let a=0,m=0,f=this.pointerWidth(),g=this.pointerHeight(),w=this.pointerDirection(),C=this.width(),P=this.height();return w===E?(m-=g,P+=g):w===r?P+=g:w===c?(a-=f*1.5,C+=f):w===d&&(C+=f*1.5),{x:a,y:m,width:C,height:P}}}return xo.Tag=s,s.prototype.className="Tag",(0,v._registerNode)(s),t.Factory.addGetterSetter(s,"pointerDirection",T),t.Factory.addGetterSetter(s,"pointerWidth",0,(0,x.getNumberValidator)()),t.Factory.addGetterSetter(s,"pointerHeight",0,(0,x.getNumberValidator)()),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,x.getNumberOrArrayOfNumbersValidator)(4)),xo}var mc={},zy;function ew(){if(zy)return mc;zy=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.Rect=void 0;const t=vt(),e=In(),h=ht(),x=en(),v=xt();let S=class extends e.Shape{_sceneFunc(T){const E=this.cornerRadius(),d=this.width(),r=this.height();T.beginPath(),E?x.Util.drawRoundedRectPath(T,d,r,E):T.rect(0,0,d,r),T.closePath(),T.fillStrokeShape(this)}};return mc.Rect=S,S.prototype.className="Rect",(0,h._registerNode)(S),t.Factory.addGetterSetter(S,"cornerRadius",0,(0,v.getNumberOrArrayOfNumbersValidator)(4)),mc}var vc={},Uy;function Wk(){if(Uy)return vc;Uy=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.RegularPolygon=void 0;const t=vt(),e=In(),h=xt(),x=ht();let v=class extends e.Shape{_sceneFunc(_){const T=this._getPoints();_.beginPath(),_.moveTo(T[0].x,T[0].y);for(let E=1;E<T.length;E++)_.lineTo(T[E].x,T[E].y);_.closePath(),_.fillStrokeShape(this)}_getPoints(){const _=this.attrs.sides,T=this.attrs.radius||0,E=[];for(let d=0;d<_;d++)E.push({x:T*Math.sin(d*2*Math.PI/_),y:-1*T*Math.cos(d*2*Math.PI/_)});return E}getSelfRect(){const _=this._getPoints();let T=_[0].x,E=_[0].y,d=_[0].x,r=_[0].y;return _.forEach(c=>{T=Math.min(T,c.x),E=Math.max(E,c.x),d=Math.min(d,c.y),r=Math.max(r,c.y)}),{x:T,y:d,width:E-T,height:r-d}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(_){this.radius(_/2)}setHeight(_){this.radius(_/2)}};return vc.RegularPolygon=v,v.prototype.className="RegularPolygon",v.prototype._centroid=!0,v.prototype._attrsAffectingSize=["radius"],(0,x._registerNode)(v),t.Factory.addGetterSetter(v,"radius",0,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(v,"sides",0,(0,h.getNumberValidator)()),vc}var yc={},Vy;function Xk(){if(Vy)return yc;Vy=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.Ring=void 0;const t=vt(),e=In(),h=xt(),x=ht(),v=Math.PI*2;let S=class extends e.Shape{_sceneFunc(T){T.beginPath(),T.arc(0,0,this.innerRadius(),0,v,!1),T.moveTo(this.outerRadius(),0),T.arc(0,0,this.outerRadius(),v,0,!0),T.closePath(),T.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(T){this.outerRadius(T/2)}setHeight(T){this.outerRadius(T/2)}};return yc.Ring=S,S.prototype.className="Ring",S.prototype._centroid=!0,S.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,x._registerNode)(S),t.Factory.addGetterSetter(S,"innerRadius",0,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(S,"outerRadius",0,(0,h.getNumberValidator)()),yc}var xc={},Gy;function Yk(){if(Gy)return xc;Gy=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.Sprite=void 0;const t=vt(),e=In(),h=ym(),x=xt(),v=ht();let S=class extends e.Shape{constructor(T){super(T),this._updated=!0,this.anim=new h.Animation(()=>{const E=this._updated;return this._updated=!1,E}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(T){const E=this.animation(),d=this.frameIndex(),r=d*4,c=this.animations()[E],l=this.frameOffsets(),i=c[r+0],s=c[r+1],o=c[r+2],a=c[r+3],m=this.image();if((this.hasFill()||this.hasStroke())&&(T.beginPath(),T.rect(0,0,o,a),T.closePath(),T.fillStrokeShape(this)),m)if(l){const f=l[E],g=d*2;T.drawImage(m,i,s,o,a,f[g+0],f[g+1],o,a)}else T.drawImage(m,i,s,o,a,0,0,o,a)}_hitFunc(T){const E=this.animation(),d=this.frameIndex(),r=d*4,c=this.animations()[E],l=this.frameOffsets(),i=c[r+2],s=c[r+3];if(T.beginPath(),l){const o=l[E],a=d*2;T.rect(o[a+0],o[a+1],i,s)}else T.rect(0,0,i,s);T.closePath(),T.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const T=this;this.interval=setInterval(function(){T._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const T=this.getLayer();this.anim.setLayers(T),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const T=this.frameIndex(),E=this.animation(),d=this.animations(),r=d[E],c=r.length/4;T<c-1?this.frameIndex(T+1):this.frameIndex(0)}};return xc.Sprite=S,S.prototype.className="Sprite",(0,v._registerNode)(S),t.Factory.addGetterSetter(S,"animation"),t.Factory.addGetterSetter(S,"animations"),t.Factory.addGetterSetter(S,"frameOffsets"),t.Factory.addGetterSetter(S,"image"),t.Factory.addGetterSetter(S,"frameIndex",0,(0,x.getNumberValidator)()),t.Factory.addGetterSetter(S,"frameRate",17,(0,x.getNumberValidator)()),t.Factory.backCompat(S,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),xc}var wc={},Hy;function qk(){if(Hy)return wc;Hy=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.Star=void 0;const t=vt(),e=In(),h=xt(),x=ht();let v=class extends e.Shape{_sceneFunc(_){const T=this.innerRadius(),E=this.outerRadius(),d=this.numPoints();_.beginPath(),_.moveTo(0,0-E);for(let r=1;r<d*2;r++){const c=r%2===0?E:T,l=c*Math.sin(r*Math.PI/d),i=-1*c*Math.cos(r*Math.PI/d);_.lineTo(l,i)}_.closePath(),_.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(_){this.outerRadius(_/2)}setHeight(_){this.outerRadius(_/2)}};return wc.Star=v,v.prototype.className="Star",v.prototype._centroid=!0,v.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,x._registerNode)(v),t.Factory.addGetterSetter(v,"numPoints",5,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(v,"innerRadius",0,(0,h.getNumberValidator)()),t.Factory.addGetterSetter(v,"outerRadius",0,(0,h.getNumberValidator)()),wc}var Al={},Wy;function tw(){if(Wy)return Al;Wy=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.Text=void 0,Al.stringToArray=_;const t=en(),e=vt(),h=In(),x=ht(),v=xt(),S=ht();function _(V){return[...V].reduce((W,q,oe,Y)=>{if(new RegExp("\\p{Emoji}","u").test(q)){const I=Y[oe+1];I&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(I)?(W.push(q+I),Y[oe+1]=""):W.push(q)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(q+(Y[oe+1]||""))?W.push(q+Y[oe+1]):oe>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(q)?W[W.length-1]+=q:q&&W.push(q);return W},[])}const T="auto",E="center",d="inherit",r="justify",c="Change.konva",l="2d",i="-",s="left",o="text",a="Text",m="top",f="bottom",g="middle",w="normal",C="px ",P=" ",M="right",L="rtl",B="word",D="char",H="none",Q="",ee=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],se=ee.length;function ie(V){return V.split(",").map(W=>{W=W.trim();const q=W.indexOf(" ")>=0,oe=W.indexOf('"')>=0||W.indexOf("'")>=0;return q&&!oe&&(W=`"${W}"`),W}).join(", ")}let ue;function U(){return ue||(ue=t.Util.createCanvasElement().getContext(l),ue)}function X(V){V.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Z(V){V.setAttr("miterLimit",2),V.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function $(V){return V=V||{},!V.fillLinearGradientColorStops&&!V.fillRadialGradientColorStops&&!V.fillPatternImage&&(V.fill=V.fill||"black"),V}let R=class extends h.Shape{constructor(W){super($(W)),this._partialTextX=0,this._partialTextY=0;for(let q=0;q<se;q++)this.on(ee[q]+c,this._setTextData);this._setTextData()}_sceneFunc(W){const q=this.textArr,oe=q.length;if(!this.text())return;let Y=this.padding(),I=this.fontSize(),K=this.lineHeight()*I,ne=this.verticalAlign(),le=this.direction(),he=0,ve=this.align(),ye=this.getWidth(),Oe=this.letterSpacing(),pe=this.fill(),de=this.textDecoration(),Ce=de.indexOf("underline")!==-1,te=de.indexOf("line-through")!==-1,fe;le=le===d?W.direction:le;let Se=K/2,je=g;if(x.Konva._fixTextRendering){const Me=this.measureSize("M");je="alphabetic",Se=(Me.fontBoundingBoxAscent-Me.fontBoundingBoxDescent)/2+K/2}for(le===L&&W.setAttr("direction",le),W.setAttr("font",this._getContextFont()),W.setAttr("textBaseline",je),W.setAttr("textAlign",s),ne===g?he=(this.getHeight()-oe*K-Y*2)/2:ne===f&&(he=this.getHeight()-oe*K-Y*2),W.translate(Y,he+Y),fe=0;fe<oe;fe++){let Me=0,Le=0;const _e=q[fe],Ie=_e.text,He=_e.width,Je=_e.lastInParagraph;if(W.save(),ve===M?Me+=ye-He-Y*2:ve===E&&(Me+=(ye-He-Y*2)/2),Ce){W.save(),W.beginPath();const nt=x.Konva._fixTextRendering?Math.round(I/4):Math.round(I/2),ot=Me,dt=Se+Le+nt;W.moveTo(ot,dt);const ut=ve===r&&!Je?ye-Y*2:He;W.lineTo(ot+Math.round(ut),dt),W.lineWidth=I/15;const Bn=this._getLinearGradient();W.strokeStyle=Bn||pe,W.stroke(),W.restore()}if(te){W.save(),W.beginPath();const nt=x.Konva._fixTextRendering?-Math.round(I/4):0;W.moveTo(Me,Se+Le+nt);const ot=ve===r&&!Je?ye-Y*2:He;W.lineTo(Me+Math.round(ot),Se+Le+nt),W.lineWidth=I/15;const dt=this._getLinearGradient();W.strokeStyle=dt||pe,W.stroke(),W.restore()}if(le!==L&&(Oe!==0||ve===r)){const nt=Ie.split(" ").length-1,ot=_(Ie);for(let dt=0;dt<ot.length;dt++){const ut=ot[dt];ut===" "&&!Je&&ve===r&&(Me+=(ye-Y*2-He)/nt),this._partialTextX=Me,this._partialTextY=Se+Le,this._partialText=ut,W.fillStrokeShape(this),Me+=this.measureSize(ut).width+Oe}}else Oe!==0&&W.setAttr("letterSpacing",`${Oe}px`),this._partialTextX=Me,this._partialTextY=Se+Le,this._partialText=Ie,W.fillStrokeShape(this);W.restore(),oe>1&&(Se+=K)}}_hitFunc(W){const q=this.getWidth(),oe=this.getHeight();W.beginPath(),W.rect(0,0,q,oe),W.closePath(),W.fillStrokeShape(this)}setText(W){const q=t.Util._isString(W)?W:W==null?"":W+"";return this._setAttr(o,q),this}getWidth(){return this.attrs.width===T||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===T||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(W){var q,oe,Y,I,K,ne,le,he,ve,ye,Oe;let pe=U(),de=this.fontSize(),Ce;pe.save(),pe.font=this._getContextFont(),Ce=pe.measureText(W),pe.restore();const te=de/100;return{actualBoundingBoxAscent:(q=Ce.actualBoundingBoxAscent)!==null&&q!==void 0?q:71.58203125*te,actualBoundingBoxDescent:(oe=Ce.actualBoundingBoxDescent)!==null&&oe!==void 0?oe:0,actualBoundingBoxLeft:(Y=Ce.actualBoundingBoxLeft)!==null&&Y!==void 0?Y:-7.421875*te,actualBoundingBoxRight:(I=Ce.actualBoundingBoxRight)!==null&&I!==void 0?I:75.732421875*te,alphabeticBaseline:(K=Ce.alphabeticBaseline)!==null&&K!==void 0?K:0,emHeightAscent:(ne=Ce.emHeightAscent)!==null&&ne!==void 0?ne:100*te,emHeightDescent:(le=Ce.emHeightDescent)!==null&&le!==void 0?le:-20*te,fontBoundingBoxAscent:(he=Ce.fontBoundingBoxAscent)!==null&&he!==void 0?he:91*te,fontBoundingBoxDescent:(ve=Ce.fontBoundingBoxDescent)!==null&&ve!==void 0?ve:21*te,hangingBaseline:(ye=Ce.hangingBaseline)!==null&&ye!==void 0?ye:72.80000305175781*te,ideographicBaseline:(Oe=Ce.ideographicBaseline)!==null&&Oe!==void 0?Oe:-21*te,width:Ce.width,height:de}}_getContextFont(){return this.fontStyle()+P+this.fontVariant()+P+(this.fontSize()+C)+ie(this.fontFamily())}_addTextLine(W){this.align()===r&&(W=W.trim());const oe=this._getTextWidth(W);return this.textArr.push({text:W,width:oe,lastInParagraph:!1})}_getTextWidth(W){const q=this.letterSpacing(),oe=W.length;return U().measureText(W).width+q*oe}_setTextData(){let W=this.text().split(`
`),q=+this.fontSize(),oe=0,Y=this.lineHeight()*q,I=this.attrs.width,K=this.attrs.height,ne=I!==T&&I!==void 0,le=K!==T&&K!==void 0,he=this.padding(),ve=I-he*2,ye=K-he*2,Oe=0,pe=this.wrap(),de=pe!==H,Ce=pe!==D&&de,te=this.ellipsis();this.textArr=[],U().font=this._getContextFont();const fe=te?this._getTextWidth(Q):0;for(let Se=0,je=W.length;Se<je;++Se){let Me=W[Se],Le=this._getTextWidth(Me);if(ne&&Le>ve)for(;Me.length>0;){let _e=0,Ie=_(Me).length,He="",Je=0;for(;_e<Ie;){const nt=_e+Ie>>>1,ot=_(Me),dt=ot.slice(0,nt+1).join(""),ut=this._getTextWidth(dt);(te&&le&&Oe+Y>ye?ut+fe:ut)<=ve?(_e=nt+1,He=dt,Je=ut):Ie=nt}if(He){if(Ce){const dt=_(Me),ut=_(He),Bn=dt[ut.length],Nr=Bn===P||Bn===i;let dn;if(Nr&&Je<=ve)dn=ut.length;else{const Da=ut.lastIndexOf(P),Si=ut.lastIndexOf(i);dn=Math.max(Da,Si)+1}dn>0&&(_e=dn,He=dt.slice(0,_e).join(""),Je=this._getTextWidth(He))}if(He=He.trimRight(),this._addTextLine(He),oe=Math.max(oe,Je),Oe+=Y,this._shouldHandleEllipsis(Oe)){this._tryToAddEllipsisToLastLine();break}if(Me=_(Me).slice(_e).join("").trimLeft(),Me.length>0&&(Le=this._getTextWidth(Me),Le<=ve)){this._addTextLine(Me),Oe+=Y,oe=Math.max(oe,Le);break}}else break}else this._addTextLine(Me),Oe+=Y,oe=Math.max(oe,Le),this._shouldHandleEllipsis(Oe)&&Se<je-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),le&&Oe+Y>ye)break}this.textHeight=q,this.textWidth=oe}_shouldHandleEllipsis(W){const q=+this.fontSize(),oe=this.lineHeight()*q,Y=this.attrs.height,I=Y!==T&&Y!==void 0,K=this.padding(),ne=Y-K*2;return!(this.wrap()!==H)||I&&W+oe>ne}_tryToAddEllipsisToLastLine(){const W=this.attrs.width,q=W!==T&&W!==void 0,oe=this.padding(),Y=W-oe*2,I=this.ellipsis(),K=this.textArr[this.textArr.length-1];!K||!I||(q&&(this._getTextWidth(K.text+Q)<Y||(K.text=K.text.slice(0,K.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(K.text+Q))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const W=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,q=this.hasShadow();return W&&q?!0:super._useBufferCanvas()}};return Al.Text=R,R.prototype._fillFunc=X,R.prototype._strokeFunc=Z,R.prototype.className=a,R.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,S._registerNode)(R),e.Factory.overWriteSetter(R,"width",(0,v.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(R,"height",(0,v.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(R,"direction",d),e.Factory.addGetterSetter(R,"fontFamily","Arial"),e.Factory.addGetterSetter(R,"fontSize",12,(0,v.getNumberValidator)()),e.Factory.addGetterSetter(R,"fontStyle",w),e.Factory.addGetterSetter(R,"fontVariant",w),e.Factory.addGetterSetter(R,"padding",0,(0,v.getNumberValidator)()),e.Factory.addGetterSetter(R,"align",s),e.Factory.addGetterSetter(R,"verticalAlign",m),e.Factory.addGetterSetter(R,"lineHeight",1,(0,v.getNumberValidator)()),e.Factory.addGetterSetter(R,"wrap",B),e.Factory.addGetterSetter(R,"ellipsis",!1,(0,v.getBooleanValidator)()),e.Factory.addGetterSetter(R,"letterSpacing",0,(0,v.getNumberValidator)()),e.Factory.addGetterSetter(R,"text","",(0,v.getStringValidator)()),e.Factory.addGetterSetter(R,"textDecoration",""),Al}var _c={},Xy;function Kk(){if(Xy)return _c;Xy=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.TextPath=void 0;const t=en(),e=vt(),h=In(),x=xm(),v=tw(),S=xt(),_=ht(),T="",E="normal";function d(l){l.fillText(this.partialText,0,0)}function r(l){l.strokeText(this.partialText,0,0)}let c=class extends h.Shape{constructor(i){super(i),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return x.Path.getPathLength(this.dataArray)}_getPointAtLength(i){if(!this.attrs.data)return null;const s=this.pathLength;return i-1>s?null:x.Path.getPointAtLengthOfDataArray(i,this.dataArray)}_readDataAttribute(){this.dataArray=x.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(i){i.setAttr("font",this._getContextFont()),i.setAttr("textBaseline",this.textBaseline()),i.setAttr("textAlign","left"),i.save();const s=this.textDecoration(),o=this.fill(),a=this.fontSize(),m=this.glyphInfo;s==="underline"&&i.beginPath();for(let f=0;f<m.length;f++){i.save();const g=m[f].p0;i.translate(g.x,g.y),i.rotate(m[f].rotation),this.partialText=m[f].text,i.fillStrokeShape(this),s==="underline"&&(f===0&&i.moveTo(0,a/2+1),i.lineTo(a,a/2+1)),i.restore()}s==="underline"&&(i.strokeStyle=o,i.lineWidth=a/20,i.stroke()),i.restore()}_hitFunc(i){i.beginPath();const s=this.glyphInfo;if(s.length>=1){const o=s[0].p0;i.moveTo(o.x,o.y)}for(let o=0;o<s.length;o++){const a=s[o].p1;i.lineTo(a.x,a.y)}i.setAttr("lineWidth",this.fontSize()),i.setAttr("strokeStyle",this.colorKey),i.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(i){return v.Text.prototype.setText.call(this,i)}_getContextFont(){return v.Text.prototype._getContextFont.call(this)}_getTextSize(i){const o=this.dummyCanvas.getContext("2d");o.save(),o.font=this._getContextFont();const a=o.measureText(i);return o.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:i,height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const o=this.letterSpacing(),a=this.align(),m=this.kerningFunc(),f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);let g=0;a==="center"&&(g=Math.max(0,this.pathLength/2-f/2)),a==="right"&&(g=Math.max(0,this.pathLength-f));const w=(0,v.stringToArray)(this.text());let C=g;for(let P=0;P<w.length;P++){const M=this._getPointAtLength(C);if(!M)return;let L=this._getTextSize(w[P]).width+o;if(w[P]===" "&&a==="justify"){const se=this.text().split(" ").length-1;L+=(this.pathLength-f)/se}const B=this._getPointAtLength(C+L);if(!B)return;const D=x.Path.getLineLength(M.x,M.y,B.x,B.y);let H=0;if(m)try{H=m(w[P-1],w[P])*this.fontSize()}catch{H=0}M.x+=H,B.x+=H,this.textWidth+=H;const Q=x.Path.getPointOnLine(H+D/2,M.x,M.y,B.x,B.y),ee=Math.atan2(B.y-M.y,B.x-M.x);this.glyphInfo.push({transposeX:Q.x,transposeY:Q.y,text:w[P],rotation:ee,p0:M,p1:B}),C+=L}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const i=[];this.glyphInfo.forEach(function(C){i.push(C.p0.x),i.push(C.p0.y),i.push(C.p1.x),i.push(C.p1.y)});let s=i[0]||0,o=i[0]||0,a=i[1]||0,m=i[1]||0,f,g;for(let C=0;C<i.length/2;C++)f=i[C*2],g=i[C*2+1],s=Math.min(s,f),o=Math.max(o,f),a=Math.min(a,g),m=Math.max(m,g);const w=this.fontSize();return{x:s-w/2,y:a-w/2,width:o-s+w,height:m-a+w}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return _c.TextPath=c,c.prototype._fillFunc=d,c.prototype._strokeFunc=r,c.prototype._fillFuncHit=d,c.prototype._strokeFuncHit=r,c.prototype.className="TextPath",c.prototype._attrsAffectingSize=["text","fontSize","data"],(0,_._registerNode)(c),e.Factory.addGetterSetter(c,"data"),e.Factory.addGetterSetter(c,"fontFamily","Arial"),e.Factory.addGetterSetter(c,"fontSize",12,(0,S.getNumberValidator)()),e.Factory.addGetterSetter(c,"fontStyle",E),e.Factory.addGetterSetter(c,"align","left"),e.Factory.addGetterSetter(c,"letterSpacing",0,(0,S.getNumberValidator)()),e.Factory.addGetterSetter(c,"textBaseline","middle"),e.Factory.addGetterSetter(c,"fontVariant",E),e.Factory.addGetterSetter(c,"text",T),e.Factory.addGetterSetter(c,"textDecoration",""),e.Factory.addGetterSetter(c,"kerningFunc",void 0),_c}var bc={},Yy;function $k(){if(Yy)return bc;Yy=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.Transformer=void 0;const t=en(),e=vt(),h=hn(),x=In(),v=ew(),S=vm(),_=ht(),T=xt(),E=ht(),d="tr-konva",r=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(L=>L+`.${d}`).join(" "),c="nodesRect",l=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],i={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},s="ontouchstart"in _.Konva._global;function o(L,B,D){if(L==="rotater")return D;B+=t.Util.degToRad(i[L]||0);const H=(t.Util.radToDeg(B)%360+360)%360;return t.Util._inRange(H,315+22.5,360)||t.Util._inRange(H,0,22.5)?"ns-resize":t.Util._inRange(H,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(H,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(H,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(H,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(H,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(H,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(H,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+H),"pointer")}const a=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function m(L){return{x:L.x+L.width/2*Math.cos(L.rotation)+L.height/2*Math.sin(-L.rotation),y:L.y+L.height/2*Math.cos(L.rotation)+L.width/2*Math.sin(L.rotation)}}function f(L,B,D){const H=D.x+(L.x-D.x)*Math.cos(B)-(L.y-D.y)*Math.sin(B),Q=D.y+(L.x-D.x)*Math.sin(B)+(L.y-D.y)*Math.cos(B);return{...L,rotation:L.rotation+B,x:H,y:Q}}function g(L,B){const D=m(L);return f(L,B,D)}function w(L,B,D){let H=B;for(let Q=0;Q<L.length;Q++){const ee=_.Konva.getAngle(L[Q]),se=Math.abs(ee-B)%(Math.PI*2);Math.min(se,Math.PI*2-se)<D&&(H=ee)}return H}let C=0;class P extends S.Group{constructor(B){super(B),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(r,this.update),this.getNode()&&this.update()}attachTo(B){return this.setNode(B),this}setNode(B){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([B])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return d+this._id}setNodes(B=[]){this._nodes&&this._nodes.length&&this.detach();const D=B.filter(Q=>Q.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=B=D,B.length===1&&this.useSingleNodeRotation()?this.rotation(B[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(Q=>{const ee=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(Q._attrsAffectingSize.length){const se=Q._attrsAffectingSize.map(ie=>ie+"Change."+this._getEventNamespace()).join(" ");Q.on(se,ee)}Q.on(l.map(se=>se+`.${this._getEventNamespace()}`).join(" "),ee),Q.on(`absoluteTransformChange.${this._getEventNamespace()}`,ee),this._proxyDrag(Q)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(B){let D;B.on(`dragstart.${this._getEventNamespace()}`,H=>{D=B.getAbsolutePosition(),!this.isDragging()&&B!==this.findOne(".back")&&this.startDrag(H,!1)}),B.on(`dragmove.${this._getEventNamespace()}`,H=>{if(!D)return;const Q=B.getAbsolutePosition(),ee=Q.x-D.x,se=Q.y-D.y;this.nodes().forEach(ie=>{if(ie===B||ie.isDragging())return;const ue=ie.getAbsolutePosition();ie.setAbsolutePosition({x:ue.x+ee,y:ue.y+se}),ie.startDrag(H)}),D=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(B=>{B.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(c),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(c,this.__getNodeRect)}__getNodeShape(B,D=this.rotation(),H){const Q=B.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ee=B.getAbsoluteScale(H),se=B.getAbsolutePosition(H),ie=Q.x*ee.x-B.offsetX()*ee.x,ue=Q.y*ee.y-B.offsetY()*ee.y,U=(_.Konva.getAngle(B.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),X={x:se.x+ie*Math.cos(U)+ue*Math.sin(-U),y:se.y+ue*Math.cos(U)+ie*Math.sin(U),width:Q.width*ee.x,height:Q.height*ee.y,rotation:U};return f(X,-_.Konva.getAngle(D),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const D=[];this.nodes().map(U=>{const X=U.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Z=[{x:X.x,y:X.y},{x:X.x+X.width,y:X.y},{x:X.x+X.width,y:X.y+X.height},{x:X.x,y:X.y+X.height}],$=U.getAbsoluteTransform();Z.forEach(function(R){const V=$.point(R);D.push(V)})});const H=new t.Transform;H.rotate(-_.Konva.getAngle(this.rotation()));let Q=1/0,ee=1/0,se=-1/0,ie=-1/0;D.forEach(function(U){const X=H.point(U);Q===void 0&&(Q=se=X.x,ee=ie=X.y),Q=Math.min(Q,X.x),ee=Math.min(ee,X.y),se=Math.max(se,X.x),ie=Math.max(ie,X.y)}),H.invert();const ue=H.point({x:Q,y:ee});return{x:ue.x,y:ue.y,width:se-Q,height:ie-ee,rotation:_.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),a.forEach(B=>{this._createAnchor(B)}),this._createAnchor("rotater")}_createAnchor(B){const D=new v.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:B+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:s?10:"auto"}),H=this;D.on("mousedown touchstart",function(Q){H._handleMouseDown(Q)}),D.on("dragstart",Q=>{D.stopDrag(),Q.cancelBubble=!0}),D.on("dragend",Q=>{Q.cancelBubble=!0}),D.on("mouseenter",()=>{const Q=_.Konva.getAngle(this.rotation()),ee=this.rotateAnchorCursor(),se=o(B,Q,ee);D.getStage().content&&(D.getStage().content.style.cursor=se),this._cursorChange=!0}),D.on("mouseout",()=>{D.getStage().content&&(D.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(D)}_createBack(){const B=new x.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(D,H){const Q=H.getParent(),ee=Q.padding();D.beginPath(),D.rect(-ee,-ee,H.width()+ee*2,H.height()+ee*2),D.moveTo(H.width()/2,-ee),Q.rotateEnabled()&&Q.rotateLineVisible()&&D.lineTo(H.width()/2,-Q.rotateAnchorOffset()*t.Util._sign(H.height())-ee),D.fillStrokeShape(H)},hitFunc:(D,H)=>{if(!this.shouldOverdrawWholeArea())return;const Q=this.padding();D.beginPath(),D.rect(-Q,-Q,H.width()+Q*2,H.height()+Q*2),D.fillStrokeShape(H)}});this.add(B),this._proxyDrag(B),B.on("dragstart",D=>{D.cancelBubble=!0}),B.on("dragmove",D=>{D.cancelBubble=!0}),B.on("dragend",D=>{D.cancelBubble=!0}),this.on("dragmove",D=>{this.update()})}_handleMouseDown(B){if(this._transforming)return;this._movingAnchorName=B.target.name().split(" ")[0];const D=this._getNodeRect(),H=D.width,Q=D.height,ee=Math.sqrt(Math.pow(H,2)+Math.pow(Q,2));this.sin=Math.abs(Q/ee),this.cos=Math.abs(H/ee),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const se=B.target.getAbsolutePosition(),ie=B.target.getStage().getPointerPosition();this._anchorDragOffset={x:ie.x-se.x,y:ie.y-se.y},C++,this._fire("transformstart",{evt:B.evt,target:this.getNode()}),this._nodes.forEach(ue=>{ue._fire("transformstart",{evt:B.evt,target:ue})})}_handleMouseMove(B){let D,H,Q;const ee=this.findOne("."+this._movingAnchorName),se=ee.getStage();se.setPointersPositions(B);const ie=se.getPointerPosition();let ue={x:ie.x-this._anchorDragOffset.x,y:ie.y-this._anchorDragOffset.y};const U=ee.getAbsolutePosition();this.anchorDragBoundFunc()&&(ue=this.anchorDragBoundFunc()(U,ue,B)),ee.setAbsolutePosition(ue);const X=ee.getAbsolutePosition();if(U.x===X.x&&U.y===X.y)return;if(this._movingAnchorName==="rotater"){const Y=this._getNodeRect();D=ee.x()-Y.width/2,H=-ee.y()+Y.height/2;let I=Math.atan2(-H,D)+Math.PI/2;Y.height<0&&(I-=Math.PI);const ne=_.Konva.getAngle(this.rotation())+I,le=_.Konva.getAngle(this.rotationSnapTolerance()),ve=w(this.rotationSnaps(),ne,le)-Y.rotation,ye=g(Y,ve);this._fitNodesInto(ye,B);return}const Z=this.shiftBehavior();let $;Z==="inverted"?$=this.keepRatio()&&!B.shiftKey:Z==="none"?$=this.keepRatio():$=this.keepRatio()||B.shiftKey;let R=this.centeredScaling()||B.altKey;if(this._movingAnchorName==="top-left"){if($){const Y=R?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};Q=Math.sqrt(Math.pow(Y.x-ee.x(),2)+Math.pow(Y.y-ee.y(),2));const I=this.findOne(".top-left").x()>Y.x?-1:1,K=this.findOne(".top-left").y()>Y.y?-1:1;D=Q*this.cos*I,H=Q*this.sin*K,this.findOne(".top-left").x(Y.x-D),this.findOne(".top-left").y(Y.y-H)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(ee.y());else if(this._movingAnchorName==="top-right"){if($){const Y=R?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};Q=Math.sqrt(Math.pow(ee.x()-Y.x,2)+Math.pow(Y.y-ee.y(),2));const I=this.findOne(".top-right").x()<Y.x?-1:1,K=this.findOne(".top-right").y()>Y.y?-1:1;D=Q*this.cos*I,H=Q*this.sin*K,this.findOne(".top-right").x(Y.x+D),this.findOne(".top-right").y(Y.y-H)}var V=ee.position();this.findOne(".top-left").y(V.y),this.findOne(".bottom-right").x(V.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(ee.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(ee.x());else if(this._movingAnchorName==="bottom-left"){if($){const Y=R?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};Q=Math.sqrt(Math.pow(Y.x-ee.x(),2)+Math.pow(ee.y()-Y.y,2));const I=Y.x<ee.x()?-1:1,K=ee.y()<Y.y?-1:1;D=Q*this.cos*I,H=Q*this.sin*K,ee.x(Y.x-D),ee.y(Y.y+H)}V=ee.position(),this.findOne(".top-left").x(V.x),this.findOne(".bottom-right").y(V.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(ee.y());else if(this._movingAnchorName==="bottom-right"){if($){const Y=R?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};Q=Math.sqrt(Math.pow(ee.x()-Y.x,2)+Math.pow(ee.y()-Y.y,2));const I=this.findOne(".bottom-right").x()<Y.x?-1:1,K=this.findOne(".bottom-right").y()<Y.y?-1:1;D=Q*this.cos*I,H=Q*this.sin*K,this.findOne(".bottom-right").x(Y.x+D),this.findOne(".bottom-right").y(Y.y+H)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(R=this.centeredScaling()||B.altKey,R){const Y=this.findOne(".top-left"),I=this.findOne(".bottom-right"),K=Y.x(),ne=Y.y(),le=this.getWidth()-I.x(),he=this.getHeight()-I.y();I.move({x:-K,y:-ne}),Y.move({x:le,y:he})}const W=this.findOne(".top-left").getAbsolutePosition();D=W.x,H=W.y;const q=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),oe=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:D,y:H,width:q,height:oe,rotation:_.Konva.getAngle(this.rotation())},B)}_handleMouseUp(B){this._removeEvents(B)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(B){var D;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const H=this.getNode();C--,this._fire("transformend",{evt:B,target:H}),(D=this.getLayer())===null||D===void 0||D.batchDraw(),H&&this._nodes.forEach(Q=>{var ee;Q._fire("transformend",{evt:B,target:Q}),(ee=Q.getLayer())===null||ee===void 0||ee.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(B,D){const H=this._getNodeRect(),Q=1;if(t.Util._inRange(B.width,-this.padding()*2-Q,Q)){this.update();return}if(t.Util._inRange(B.height,-this.padding()*2-Q,Q)){this.update();return}const ee=new t.Transform;if(ee.rotate(_.Konva.getAngle(this.rotation())),this._movingAnchorName&&B.width<0&&this._movingAnchorName.indexOf("left")>=0){const $=ee.point({x:-this.padding()*2,y:0});B.x+=$.x,B.y+=$.y,B.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=$.x,this._anchorDragOffset.y-=$.y}else if(this._movingAnchorName&&B.width<0&&this._movingAnchorName.indexOf("right")>=0){const $=ee.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=$.x,this._anchorDragOffset.y-=$.y,B.width+=this.padding()*2}if(this._movingAnchorName&&B.height<0&&this._movingAnchorName.indexOf("top")>=0){const $=ee.point({x:0,y:-this.padding()*2});B.x+=$.x,B.y+=$.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=$.x,this._anchorDragOffset.y-=$.y,B.height+=this.padding()*2}else if(this._movingAnchorName&&B.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const $=ee.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=$.x,this._anchorDragOffset.y-=$.y,B.height+=this.padding()*2}if(this.boundBoxFunc()){const $=this.boundBoxFunc()(H,B);$?B=$:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const se=1e7,ie=new t.Transform;ie.translate(H.x,H.y),ie.rotate(H.rotation),ie.scale(H.width/se,H.height/se);const ue=new t.Transform,U=B.width/se,X=B.height/se;this.flipEnabled()===!1?(ue.translate(B.x,B.y),ue.rotate(B.rotation),ue.translate(B.width<0?B.width:0,B.height<0?B.height:0),ue.scale(Math.abs(U),Math.abs(X))):(ue.translate(B.x,B.y),ue.rotate(B.rotation),ue.scale(U,X));const Z=ue.multiply(ie.invert());this._nodes.forEach($=>{var R;const V=$.getParent().getAbsoluteTransform(),W=$.getTransform().copy();W.translate($.offsetX(),$.offsetY());const q=new t.Transform;q.multiply(V.copy().invert()).multiply(Z).multiply(V).multiply(W);const oe=q.decompose();$.setAttrs(oe),(R=$.getLayer())===null||R===void 0||R.batchDraw()}),this.rotation(t.Util._getRotation(B.rotation)),this._nodes.forEach($=>{this._fire("transform",{evt:D,target:$}),$._fire("transform",{evt:D,target:$})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(B,D){this.findOne(B).setAttrs(D)}update(){var B;const D=this._getNodeRect();this.rotation(t.Util._getRotation(D.rotation));const H=D.width,Q=D.height,ee=this.enabledAnchors(),se=this.resizeEnabled(),ie=this.padding(),ue=this.anchorSize(),U=this.find("._anchor");U.forEach(Z=>{Z.setAttrs({width:ue,height:ue,offsetX:ue/2,offsetY:ue/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:ue/2+ie,offsetY:ue/2+ie,visible:se&&ee.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:H/2,y:0,offsetY:ue/2+ie,visible:se&&ee.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:H,y:0,offsetX:ue/2-ie,offsetY:ue/2+ie,visible:se&&ee.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:Q/2,offsetX:ue/2+ie,visible:se&&ee.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:H,y:Q/2,offsetX:ue/2-ie,visible:se&&ee.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:Q,offsetX:ue/2+ie,offsetY:ue/2-ie,visible:se&&ee.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:H/2,y:Q,offsetY:ue/2-ie,visible:se&&ee.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:H,y:Q,offsetX:ue/2-ie,offsetY:ue/2-ie,visible:se&&ee.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:H/2,y:-this.rotateAnchorOffset()*t.Util._sign(Q)-ie,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:H,height:Q,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const X=this.anchorStyleFunc();X&&U.forEach(Z=>{X(Z)}),(B=this.getLayer())===null||B===void 0||B.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const B=this.findOne("."+this._movingAnchorName);B&&B.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),S.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return h.Node.prototype.toObject.call(this)}clone(B){return h.Node.prototype.clone.call(this,B)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}bc.Transformer=P,P.isTransforming=()=>C>0;function M(L){return L instanceof Array||t.Util.warn("enabledAnchors value should be an array"),L instanceof Array&&L.forEach(function(B){a.indexOf(B)===-1&&t.Util.warn("Unknown anchor name: "+B+". Available names are: "+a.join(", "))}),L||[]}return P.prototype.className="Transformer",(0,E._registerNode)(P),e.Factory.addGetterSetter(P,"enabledAnchors",a,M),e.Factory.addGetterSetter(P,"flipEnabled",!0,(0,T.getBooleanValidator)()),e.Factory.addGetterSetter(P,"resizeEnabled",!0),e.Factory.addGetterSetter(P,"anchorSize",10,(0,T.getNumberValidator)()),e.Factory.addGetterSetter(P,"rotateEnabled",!0),e.Factory.addGetterSetter(P,"rotateLineVisible",!0),e.Factory.addGetterSetter(P,"rotationSnaps",[]),e.Factory.addGetterSetter(P,"rotateAnchorOffset",50,(0,T.getNumberValidator)()),e.Factory.addGetterSetter(P,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(P,"rotationSnapTolerance",5,(0,T.getNumberValidator)()),e.Factory.addGetterSetter(P,"borderEnabled",!0),e.Factory.addGetterSetter(P,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(P,"anchorStrokeWidth",1,(0,T.getNumberValidator)()),e.Factory.addGetterSetter(P,"anchorFill","white"),e.Factory.addGetterSetter(P,"anchorCornerRadius",0,(0,T.getNumberValidator)()),e.Factory.addGetterSetter(P,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(P,"borderStrokeWidth",1,(0,T.getNumberValidator)()),e.Factory.addGetterSetter(P,"borderDash"),e.Factory.addGetterSetter(P,"keepRatio",!0),e.Factory.addGetterSetter(P,"shiftBehavior","default"),e.Factory.addGetterSetter(P,"centeredScaling",!1),e.Factory.addGetterSetter(P,"ignoreStroke",!1),e.Factory.addGetterSetter(P,"padding",0,(0,T.getNumberValidator)()),e.Factory.addGetterSetter(P,"nodes"),e.Factory.addGetterSetter(P,"node"),e.Factory.addGetterSetter(P,"boundBoxFunc"),e.Factory.addGetterSetter(P,"anchorDragBoundFunc"),e.Factory.addGetterSetter(P,"anchorStyleFunc"),e.Factory.addGetterSetter(P,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(P,"useSingleNodeRotation",!0),e.Factory.backCompat(P,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),bc}var Sc={},qy;function Qk(){if(qy)return Sc;qy=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.Wedge=void 0;const t=vt(),e=In(),h=ht(),x=xt(),v=ht();let S=class extends e.Shape{_sceneFunc(T){T.beginPath(),T.arc(0,0,this.radius(),0,h.Konva.getAngle(this.angle()),this.clockwise()),T.lineTo(0,0),T.closePath(),T.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(T){this.radius(T/2)}setHeight(T){this.radius(T/2)}};return Sc.Wedge=S,S.prototype.className="Wedge",S.prototype._centroid=!0,S.prototype._attrsAffectingSize=["radius"],(0,v._registerNode)(S),t.Factory.addGetterSetter(S,"radius",0,(0,x.getNumberValidator)()),t.Factory.addGetterSetter(S,"angle",0,(0,x.getNumberValidator)()),t.Factory.addGetterSetter(S,"clockwise",!1),t.Factory.backCompat(S,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Sc}var Cc={},Ky;function Jk(){if(Ky)return Cc;Ky=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.Blur=void 0;const t=vt(),e=hn(),h=xt();function x(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const v=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],S=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function _(E,d){const r=E.data,c=E.width,l=E.height;let i,s,o,a,m,f,g,w,C,P,M,L,B,D,H,Q,ee,se,ie,ue;const U=d+d+1,X=c-1,Z=l-1,$=d+1,R=$*($+1)/2,V=new x,W=v[d],q=S[d];let oe=null,Y=V,I=null,K=null;for(let ne=1;ne<U;ne++)Y=Y.next=new x,ne===$&&(oe=Y);Y.next=V,o=s=0;for(let ne=0;ne<l;ne++){L=B=D=H=a=m=f=g=0,w=$*(Q=r[s]),C=$*(ee=r[s+1]),P=$*(se=r[s+2]),M=$*(ie=r[s+3]),a+=R*Q,m+=R*ee,f+=R*se,g+=R*ie,Y=V;for(let le=0;le<$;le++)Y.r=Q,Y.g=ee,Y.b=se,Y.a=ie,Y=Y.next;for(let le=1;le<$;le++)i=s+((X<le?X:le)<<2),a+=(Y.r=Q=r[i])*(ue=$-le),m+=(Y.g=ee=r[i+1])*ue,f+=(Y.b=se=r[i+2])*ue,g+=(Y.a=ie=r[i+3])*ue,L+=Q,B+=ee,D+=se,H+=ie,Y=Y.next;I=V,K=oe;for(let le=0;le<c;le++)r[s+3]=ie=g*W>>q,ie!==0?(ie=255/ie,r[s]=(a*W>>q)*ie,r[s+1]=(m*W>>q)*ie,r[s+2]=(f*W>>q)*ie):r[s]=r[s+1]=r[s+2]=0,a-=w,m-=C,f-=P,g-=M,w-=I.r,C-=I.g,P-=I.b,M-=I.a,i=o+((i=le+d+1)<X?i:X)<<2,L+=I.r=r[i],B+=I.g=r[i+1],D+=I.b=r[i+2],H+=I.a=r[i+3],a+=L,m+=B,f+=D,g+=H,I=I.next,w+=Q=K.r,C+=ee=K.g,P+=se=K.b,M+=ie=K.a,L-=Q,B-=ee,D-=se,H-=ie,K=K.next,s+=4;o+=c}for(let ne=0;ne<c;ne++){B=D=H=L=m=f=g=a=0,s=ne<<2,w=$*(Q=r[s]),C=$*(ee=r[s+1]),P=$*(se=r[s+2]),M=$*(ie=r[s+3]),a+=R*Q,m+=R*ee,f+=R*se,g+=R*ie,Y=V;for(let he=0;he<$;he++)Y.r=Q,Y.g=ee,Y.b=se,Y.a=ie,Y=Y.next;let le=c;for(let he=1;he<=d;he++)s=le+ne<<2,a+=(Y.r=Q=r[s])*(ue=$-he),m+=(Y.g=ee=r[s+1])*ue,f+=(Y.b=se=r[s+2])*ue,g+=(Y.a=ie=r[s+3])*ue,L+=Q,B+=ee,D+=se,H+=ie,Y=Y.next,he<Z&&(le+=c);s=ne,I=V,K=oe;for(let he=0;he<l;he++)i=s<<2,r[i+3]=ie=g*W>>q,ie>0?(ie=255/ie,r[i]=(a*W>>q)*ie,r[i+1]=(m*W>>q)*ie,r[i+2]=(f*W>>q)*ie):r[i]=r[i+1]=r[i+2]=0,a-=w,m-=C,f-=P,g-=M,w-=I.r,C-=I.g,P-=I.b,M-=I.a,i=ne+((i=he+$)<Z?i:Z)*c<<2,a+=L+=I.r=r[i],m+=B+=I.g=r[i+1],f+=D+=I.b=r[i+2],g+=H+=I.a=r[i+3],I=I.next,w+=Q=K.r,C+=ee=K.g,P+=se=K.b,M+=ie=K.a,L-=Q,B-=ee,D-=se,H-=ie,K=K.next,s+=c}}const T=function(d){const r=Math.round(this.blurRadius());r>0&&_(d,r)};return Cc.Blur=T,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),Cc}var kc={},$y;function Zk(){if($y)return kc;$y=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.Brighten=void 0;const t=vt(),e=hn(),h=xt(),x=function(v){const S=this.brightness()*255,_=v.data,T=_.length;for(let E=0;E<T;E+=4)_[E]+=S,_[E+1]+=S,_[E+2]+=S};return kc.Brighten=x,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),kc}var Tc={},Qy;function e6(){if(Qy)return Tc;Qy=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.Contrast=void 0;const t=vt(),e=hn(),h=xt(),x=function(v){const S=Math.pow((this.contrast()+100)/100,2),_=v.data,T=_.length;let E=150,d=150,r=150;for(let c=0;c<T;c+=4)E=_[c],d=_[c+1],r=_[c+2],E/=255,E-=.5,E*=S,E+=.5,E*=255,d/=255,d-=.5,d*=S,d+=.5,d*=255,r/=255,r-=.5,r*=S,r+=.5,r*=255,E=E<0?0:E>255?255:E,d=d<0?0:d>255?255:d,r=r<0?0:r>255?255:r,_[c]=E,_[c+1]=d,_[c+2]=r};return Tc.Contrast=x,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),Tc}var Pc={},Jy;function t6(){if(Jy)return Pc;Jy=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.Emboss=void 0;const t=vt(),e=hn(),h=en(),x=xt(),v=function(S){const _=this.embossStrength()*10,T=this.embossWhiteLevel()*255,E=this.embossDirection(),d=this.embossBlend(),r=S.data,c=S.width,l=S.height,i=c*4;let s=0,o=0,a=l;switch(E){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:h.Util.error("Unknown emboss direction: "+E)}do{const m=(a-1)*i;let f=s;a+f<1&&(f=0),a+f>l&&(f=0);const g=(a-1+f)*c*4;let w=c;do{const C=m+(w-1)*4;let P=o;w+P<1&&(P=0),w+P>c&&(P=0);const M=g+(w-1+P)*4,L=r[C]-r[M],B=r[C+1]-r[M+1],D=r[C+2]-r[M+2];let H=L;const Q=H>0?H:-H,ee=B>0?B:-B,se=D>0?D:-D;if(ee>Q&&(H=B),se>Q&&(H=D),H*=_,d){const ie=r[C]+H,ue=r[C+1]+H,U=r[C+2]+H;r[C]=ie>255?255:ie<0?0:ie,r[C+1]=ue>255?255:ue<0?0:ue,r[C+2]=U>255?255:U<0?0:U}else{let ie=T-H;ie<0?ie=0:ie>255&&(ie=255),r[C]=r[C+1]=r[C+2]=ie}}while(--w)}while(--a)};return Pc.Emboss=v,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,x.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,x.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),Pc}var Ec={},Zy;function n6(){if(Zy)return Ec;Zy=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.Enhance=void 0;const t=vt(),e=hn(),h=xt();function x(S,_,T,E,d){const r=T-_,c=d-E;if(r===0)return E+c/2;if(c===0)return E;let l=(S-_)/r;return l=c*l+E,l}const v=function(S){const _=S.data,T=_.length;let E=_[0],d=E,r,c=_[1],l=c,i,s=_[2],o=s,a;const m=this.enhance();if(m===0)return;for(let L=0;L<T;L+=4)r=_[L+0],r<E?E=r:r>d&&(d=r),i=_[L+1],i<c?c=i:i>l&&(l=i),a=_[L+2],a<s?s=a:a>o&&(o=a);d===E&&(d=255,E=0),l===c&&(l=255,c=0),o===s&&(o=255,s=0);let f,g,w,C,P,M;if(m>0)f=d+m*(255-d),g=E-m*(E-0),w=l+m*(255-l),C=c-m*(c-0),P=o+m*(255-o),M=s-m*(s-0);else{const L=(d+E)*.5;f=d+m*(d-L),g=E+m*(E-L);const B=(l+c)*.5;w=l+m*(l-B),C=c+m*(c-B);const D=(o+s)*.5;P=o+m*(o-D),M=s+m*(s-D)}for(let L=0;L<T;L+=4)_[L+0]=x(_[L+0],E,d,g,f),_[L+1]=x(_[L+1],c,l,C,w),_[L+2]=x(_[L+2],s,o,M,P)};return Ec.Enhance=v,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),Ec}var jc={},e1;function r6(){if(e1)return jc;e1=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.Grayscale=void 0;const t=function(e){const h=e.data,x=h.length;for(let v=0;v<x;v+=4){const S=.34*h[v]+.5*h[v+1]+.16*h[v+2];h[v]=S,h[v+1]=S,h[v+2]=S}};return jc.Grayscale=t,jc}var Oc={},t1;function i6(){if(t1)return Oc;t1=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.HSL=void 0;const t=vt(),e=hn(),h=xt();t.Factory.addGetterSetter(e.Node,"hue",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter);const x=function(v){const S=v.data,_=S.length,T=1,E=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,r=this.luminance()*127,c=T*E*Math.cos(d*Math.PI/180),l=T*E*Math.sin(d*Math.PI/180),i=.299*T+.701*c+.167*l,s=.587*T-.587*c+.33*l,o=.114*T-.114*c-.497*l,a=.299*T-.299*c-.328*l,m=.587*T+.413*c+.035*l,f=.114*T-.114*c+.293*l,g=.299*T-.3*c+1.25*l,w=.587*T-.586*c-1.05*l,C=.114*T+.886*c-.2*l;let P,M,L,B;for(let D=0;D<_;D+=4)P=S[D+0],M=S[D+1],L=S[D+2],B=S[D+3],S[D+0]=i*P+s*M+o*L+r,S[D+1]=a*P+m*M+f*L+r,S[D+2]=g*P+w*M+C*L+r,S[D+3]=B};return Oc.HSL=x,Oc}var Nc={},n1;function s6(){if(n1)return Nc;n1=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.HSV=void 0;const t=vt(),e=hn(),h=xt(),x=function(v){const S=v.data,_=S.length,T=Math.pow(2,this.value()),E=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,r=T*E*Math.cos(d*Math.PI/180),c=T*E*Math.sin(d*Math.PI/180),l=.299*T+.701*r+.167*c,i=.587*T-.587*r+.33*c,s=.114*T-.114*r-.497*c,o=.299*T-.299*r-.328*c,a=.587*T+.413*r+.035*c,m=.114*T-.114*r+.293*c,f=.299*T-.3*r+1.25*c,g=.587*T-.586*r-1.05*c,w=.114*T+.886*r-.2*c;for(let C=0;C<_;C+=4){const P=S[C+0],M=S[C+1],L=S[C+2],B=S[C+3];S[C+0]=l*P+i*M+s*L,S[C+1]=o*P+a*M+m*L,S[C+2]=f*P+g*M+w*L,S[C+3]=B}};return Nc.HSV=x,t.Factory.addGetterSetter(e.Node,"hue",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),Nc}var Lc={},r1;function a6(){if(r1)return Lc;r1=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.Invert=void 0;const t=function(e){const h=e.data,x=h.length;for(let v=0;v<x;v+=4)h[v]=255-h[v],h[v+1]=255-h[v+1],h[v+2]=255-h[v+2]};return Lc.Invert=t,Lc}var Mc={},i1;function o6(){if(i1)return Mc;i1=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.Kaleidoscope=void 0;const t=vt(),e=hn(),h=en(),x=xt(),v=function(T,E,d){const r=T.data,c=E.data,l=T.width,i=T.height,s=d.polarCenterX||l/2,o=d.polarCenterY||i/2;let a=Math.sqrt(s*s+o*o),m=l-s,f=i-o;const g=Math.sqrt(m*m+f*f);a=g>a?g:a;const w=i,C=l,P=360/C*Math.PI/180;for(let M=0;M<C;M+=1){const L=Math.sin(M*P),B=Math.cos(M*P);for(let D=0;D<w;D+=1){m=Math.floor(s+a*D/w*B),f=Math.floor(o+a*D/w*L);let H=(f*l+m)*4;const Q=r[H+0],ee=r[H+1],se=r[H+2],ie=r[H+3];H=(M+D*l)*4,c[H+0]=Q,c[H+1]=ee,c[H+2]=se,c[H+3]=ie}}},S=function(T,E,d){const r=T.data,c=E.data,l=T.width,i=T.height,s=d.polarCenterX||l/2,o=d.polarCenterY||i/2;let a=Math.sqrt(s*s+o*o),m=l-s,f=i-o;const g=Math.sqrt(m*m+f*f);a=g>a?g:a;const w=i,C=l,P=0;let M,L;for(m=0;m<l;m+=1)for(f=0;f<i;f+=1){const B=m-s,D=f-o,H=Math.sqrt(B*B+D*D)*w/a;let Q=(Math.atan2(D,B)*180/Math.PI+360+P)%360;Q=Q*C/360,M=Math.floor(Q),L=Math.floor(H);let ee=(L*l+M)*4;const se=r[ee+0],ie=r[ee+1],ue=r[ee+2],U=r[ee+3];ee=(f*l+m)*4,c[ee+0]=se,c[ee+1]=ie,c[ee+2]=ue,c[ee+3]=U}},_=function(T){const E=T.width,d=T.height;let r,c,l,i,s,o,a,m,f,g,w=Math.round(this.kaleidoscopePower());const C=Math.round(this.kaleidoscopeAngle()),P=Math.floor(E*(C%360)/360);if(w<1)return;const M=h.Util.createCanvasElement();M.width=E,M.height=d;const L=M.getContext("2d").getImageData(0,0,E,d);h.Util.releaseCanvas(M),v(T,L,{polarCenterX:E/2,polarCenterY:d/2});let B=E/Math.pow(2,w);for(;B<=8;)B=B*2,w-=1;B=Math.ceil(B);let D=B,H=0,Q=D,ee=1;for(P+B>E&&(H=D,Q=0,ee=-1),c=0;c<d;c+=1)for(r=H;r!==Q;r+=ee)l=Math.round(r+P)%E,f=(E*c+l)*4,s=L.data[f+0],o=L.data[f+1],a=L.data[f+2],m=L.data[f+3],g=(E*c+r)*4,L.data[g+0]=s,L.data[g+1]=o,L.data[g+2]=a,L.data[g+3]=m;for(c=0;c<d;c+=1)for(D=Math.floor(B),i=0;i<w;i+=1){for(r=0;r<D+1;r+=1)f=(E*c+r)*4,s=L.data[f+0],o=L.data[f+1],a=L.data[f+2],m=L.data[f+3],g=(E*c+D*2-r-1)*4,L.data[g+0]=s,L.data[g+1]=o,L.data[g+2]=a,L.data[g+3]=m;D*=2}S(L,T,{})};return Mc.Kaleidoscope=_,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,x.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,x.getNumberValidator)(),t.Factory.afterSetFilter),Mc}var Ac={},s1;function l6(){if(s1)return Ac;s1=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.Mask=void 0;const t=vt(),e=hn(),h=xt();function x(l,i,s){let o=(s*l.width+i)*4;const a=[];return a.push(l.data[o++],l.data[o++],l.data[o++],l.data[o++]),a}function v(l,i){return Math.sqrt(Math.pow(l[0]-i[0],2)+Math.pow(l[1]-i[1],2)+Math.pow(l[2]-i[2],2))}function S(l){const i=[0,0,0];for(let s=0;s<l.length;s++)i[0]+=l[s][0],i[1]+=l[s][1],i[2]+=l[s][2];return i[0]/=l.length,i[1]/=l.length,i[2]/=l.length,i}function _(l,i){const s=x(l,0,0),o=x(l,l.width-1,0),a=x(l,0,l.height-1),m=x(l,l.width-1,l.height-1),f=i||10;if(v(s,o)<f&&v(o,m)<f&&v(m,a)<f&&v(a,s)<f){const g=S([o,s,m,a]),w=[];for(let C=0;C<l.width*l.height;C++){const P=v(g,[l.data[C*4],l.data[C*4+1],l.data[C*4+2]]);w[C]=P<f?0:255}return w}}function T(l,i){for(let s=0;s<l.width*l.height;s++)l.data[4*s+3]=i[s]}function E(l,i,s){const o=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(o.length)),m=Math.floor(a/2),f=[];for(let g=0;g<s;g++)for(let w=0;w<i;w++){const C=g*i+w;let P=0;for(let M=0;M<a;M++)for(let L=0;L<a;L++){const B=g+M-m,D=w+L-m;if(B>=0&&B<s&&D>=0&&D<i){const H=B*i+D,Q=o[M*a+L];P+=l[H]*Q}}f[C]=P===2040?255:0}return f}function d(l,i,s){const o=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(o.length)),m=Math.floor(a/2),f=[];for(let g=0;g<s;g++)for(let w=0;w<i;w++){const C=g*i+w;let P=0;for(let M=0;M<a;M++)for(let L=0;L<a;L++){const B=g+M-m,D=w+L-m;if(B>=0&&B<s&&D>=0&&D<i){const H=B*i+D,Q=o[M*a+L];P+=l[H]*Q}}f[C]=P>=1020?255:0}return f}function r(l,i,s){const o=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(o.length)),m=Math.floor(a/2),f=[];for(let g=0;g<s;g++)for(let w=0;w<i;w++){const C=g*i+w;let P=0;for(let M=0;M<a;M++)for(let L=0;L<a;L++){const B=g+M-m,D=w+L-m;if(B>=0&&B<s&&D>=0&&D<i){const H=B*i+D,Q=o[M*a+L];P+=l[H]*Q}}f[C]=P}return f}const c=function(l){const i=this.threshold();let s=_(l,i);return s&&(s=E(s,l.width,l.height),s=d(s,l.width,l.height),s=r(s,l.width,l.height),T(l,s)),l};return Ac.Mask=c,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),Ac}var Rc={},a1;function u6(){if(a1)return Rc;a1=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.Noise=void 0;const t=vt(),e=hn(),h=xt(),x=function(v){const S=this.noise()*255,_=v.data,T=_.length,E=S/2;for(let d=0;d<T;d+=4)_[d+0]+=E-2*E*Math.random(),_[d+1]+=E-2*E*Math.random(),_[d+2]+=E-2*E*Math.random()};return Rc.Noise=x,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),Rc}var Dc={},o1;function c6(){if(o1)return Dc;o1=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.Pixelate=void 0;const t=vt(),e=en(),h=hn(),x=xt(),v=function(S){let _=Math.ceil(this.pixelSize()),T=S.width,E=S.height,d=Math.ceil(T/_),r=Math.ceil(E/_),c=S.data;if(_<=0){e.Util.error("pixelSize value can not be <= 0");return}for(let l=0;l<d;l+=1)for(let i=0;i<r;i+=1){let s=0,o=0,a=0,m=0;const f=l*_,g=f+_,w=i*_,C=w+_;let P=0;for(let M=f;M<g;M+=1)if(!(M>=T))for(let L=w;L<C;L+=1){if(L>=E)continue;const B=(T*L+M)*4;s+=c[B+0],o+=c[B+1],a+=c[B+2],m+=c[B+3],P+=1}s=s/P,o=o/P,a=a/P,m=m/P;for(let M=f;M<g;M+=1)if(!(M>=T))for(let L=w;L<C;L+=1){if(L>=E)continue;const B=(T*L+M)*4;c[B+0]=s,c[B+1]=o,c[B+2]=a,c[B+3]=m}}};return Dc.Pixelate=v,t.Factory.addGetterSetter(h.Node,"pixelSize",8,(0,x.getNumberValidator)(),t.Factory.afterSetFilter),Dc}var Fc={},l1;function h6(){if(l1)return Fc;l1=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.Posterize=void 0;const t=vt(),e=hn(),h=xt(),x=function(v){const S=Math.round(this.levels()*254)+1,_=v.data,T=_.length,E=255/S;for(let d=0;d<T;d+=1)_[d]=Math.floor(_[d]/E)*E};return Fc.Posterize=x,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),Fc}var Ic={},u1;function d6(){if(u1)return Ic;u1=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.RGB=void 0;const t=vt(),e=hn(),h=xt(),x=function(v){const S=v.data,_=S.length,T=this.red(),E=this.green(),d=this.blue();for(let r=0;r<_;r+=4){const c=(.34*S[r]+.5*S[r+1]+.16*S[r+2])/255;S[r]=c*T,S[r+1]=c*E,S[r+2]=c*d,S[r+3]=S[r+3]}};return Ic.RGB=x,t.Factory.addGetterSetter(e.Node,"red",0,function(v){return this._filterUpToDate=!1,v>255?255:v<0?0:Math.round(v)}),t.Factory.addGetterSetter(e.Node,"green",0,function(v){return this._filterUpToDate=!1,v>255?255:v<0?0:Math.round(v)}),t.Factory.addGetterSetter(e.Node,"blue",0,h.RGBComponent,t.Factory.afterSetFilter),Ic}var Bc={},c1;function f6(){if(c1)return Bc;c1=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.RGBA=void 0;const t=vt(),e=hn(),h=xt(),x=function(v){const S=v.data,_=S.length,T=this.red(),E=this.green(),d=this.blue(),r=this.alpha();for(let c=0;c<_;c+=4){const l=1-r;S[c]=T*r+S[c]*l,S[c+1]=E*r+S[c+1]*l,S[c+2]=d*r+S[c+2]*l}};return Bc.RGBA=x,t.Factory.addGetterSetter(e.Node,"red",0,function(v){return this._filterUpToDate=!1,v>255?255:v<0?0:Math.round(v)}),t.Factory.addGetterSetter(e.Node,"green",0,function(v){return this._filterUpToDate=!1,v>255?255:v<0?0:Math.round(v)}),t.Factory.addGetterSetter(e.Node,"blue",0,h.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(v){return this._filterUpToDate=!1,v>1?1:v<0?0:v}),Bc}var zc={},h1;function g6(){if(h1)return zc;h1=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.Sepia=void 0;const t=function(e){const h=e.data,x=h.length;for(let v=0;v<x;v+=4){const S=h[v+0],_=h[v+1],T=h[v+2];h[v+0]=Math.min(255,S*.393+_*.769+T*.189),h[v+1]=Math.min(255,S*.349+_*.686+T*.168),h[v+2]=Math.min(255,S*.272+_*.534+T*.131)}};return zc.Sepia=t,zc}var Uc={},d1;function p6(){if(d1)return Uc;d1=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.Solarize=void 0;const t=function(e){const h=e.data,x=e.width,v=e.height,S=x*4;let _=v;do{const T=(_-1)*S;let E=x;do{const d=T+(E-1)*4;let r=h[d],c=h[d+1],l=h[d+2];r>127&&(r=255-r),c>127&&(c=255-c),l>127&&(l=255-l),h[d]=r,h[d+1]=c,h[d+2]=l}while(--E)}while(--_)};return Uc.Solarize=t,Uc}var Vc={},f1;function m6(){if(f1)return Vc;f1=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.Threshold=void 0;const t=vt(),e=hn(),h=xt(),x=function(v){const S=this.threshold()*255,_=v.data,T=_.length;for(let E=0;E<T;E+=1)_[E]=_[E]<S?0:255};return Vc.Threshold=x,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,h.getNumberValidator)(),t.Factory.afterSetFilter),Vc}var g1;function v6(){if(g1)return nc;g1=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.Konva=void 0;const t=Pp(),e=Ik(),h=zk(),x=Uk(),v=Vk(),S=Gk(),_=Hk(),T=Z2(),E=xm(),d=ew(),r=Wk(),c=Xk(),l=Yk(),i=qk(),s=tw(),o=Kk(),a=$k(),m=Qk(),f=Jk(),g=Zk(),w=e6(),C=t6(),P=n6(),M=r6(),L=i6(),B=s6(),D=a6(),H=o6(),Q=l6(),ee=u6(),se=c6(),ie=h6(),ue=d6(),U=f6(),X=g6(),Z=p6(),$=m6();return nc.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:h.Arrow,Circle:x.Circle,Ellipse:v.Ellipse,Image:S.Image,Label:_.Label,Tag:_.Tag,Line:T.Line,Path:E.Path,Rect:d.Rect,RegularPolygon:r.RegularPolygon,Ring:c.Ring,Sprite:l.Sprite,Star:i.Star,Text:s.Text,TextPath:o.TextPath,Transformer:a.Transformer,Wedge:m.Wedge,Filters:{Blur:f.Blur,Brighten:g.Brighten,Contrast:w.Contrast,Emboss:C.Emboss,Enhance:P.Enhance,Grayscale:M.Grayscale,HSL:L.HSL,HSV:B.HSV,Invert:D.Invert,Kaleidoscope:H.Kaleidoscope,Mask:Q.Mask,Noise:ee.Noise,Pixelate:se.Pixelate,Posterize:ie.Posterize,RGB:ue.RGB,RGBA:U.RGBA,Sepia:X.Sepia,Solarize:Z.Solarize,Threshold:$.Threshold}}),nc}var y6=Xd.exports,p1;function x6(){if(p1)return Xd.exports;p1=1,Object.defineProperty(y6,"__esModule",{value:!0});const t=v6();return Xd.exports=t.Konva,Xd.exports}x6();var Fd={exports:{}},m1;function w6(){return m1||(m1=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var h=Pp();Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return h.Konva}});const x=Pp();t.exports=x.Konva})(Fd,Fd.exports)),Fd.exports}var _6=w6();const hh=dh(_6);var Fg={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig,v1;function b6(){return v1||(v1=1,Ig=function(e){var h={},x=fh(),v=Ep(),S=Object.assign;function _(p){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+p,j=1;j<arguments.length;j++)y+="&args[]="+encodeURIComponent(arguments[j]);return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),d=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),C=Symbol.iterator;function P(p){return p===null||typeof p!="object"?null:(p=C&&p[C]||p["@@iterator"],typeof p=="function"?p:null)}function M(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case r:return"Fragment";case d:return"Portal";case l:return"Profiler";case c:return"StrictMode";case a:return"Suspense";case m:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case s:return(p.displayName||"Context")+".Consumer";case i:return(p._context.displayName||"Context")+".Provider";case o:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case f:return y=p.displayName||null,y!==null?y:M(p.type)||"Memo";case g:y=p._payload,p=p._init;try{return M(p(y))}catch{}}return null}function L(p){var y=p.type;switch(p.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=y.render,p=p.displayName||p.name||"",y.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(y);case 8:return y===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function B(p){var y=p,j=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(j=y.return),p=y.return;while(p)}return y.tag===3?j:null}function D(p){if(B(p)!==p)throw Error(_(188))}function H(p){var y=p.alternate;if(!y){if(y=B(p),y===null)throw Error(_(188));return y!==p?null:p}for(var j=p,N=y;;){var F=j.return;if(F===null)break;var G=F.alternate;if(G===null){if(N=F.return,N!==null){j=N;continue}break}if(F.child===G.child){for(G=F.child;G;){if(G===j)return D(F),p;if(G===N)return D(F),y;G=G.sibling}throw Error(_(188))}if(j.return!==N.return)j=F,N=G;else{for(var re=!1,xe=F.child;xe;){if(xe===j){re=!0,j=F,N=G;break}if(xe===N){re=!0,N=F,j=G;break}xe=xe.sibling}if(!re){for(xe=G.child;xe;){if(xe===j){re=!0,j=G,N=F;break}if(xe===N){re=!0,N=G,j=F;break}xe=xe.sibling}if(!re)throw Error(_(189))}}if(j.alternate!==N)throw Error(_(190))}if(j.tag!==3)throw Error(_(188));return j.stateNode.current===j?p:y}function Q(p){return p=H(p),p!==null?ee(p):null}function ee(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var y=ee(p);if(y!==null)return y;p=p.sibling}return null}function se(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var y=se(p);if(y!==null)return y}p=p.sibling}return null}var ie=Array.isArray,ue=e.getPublicInstance,U=e.getRootHostContext,X=e.getChildHostContext,Z=e.prepareForCommit,$=e.resetAfterCommit,R=e.createInstance,V=e.appendInitialChild,W=e.finalizeInitialChildren,q=e.prepareUpdate,oe=e.shouldSetTextContent,Y=e.createTextInstance,I=e.scheduleTimeout,K=e.cancelTimeout,ne=e.noTimeout,le=e.isPrimaryRenderer,he=e.supportsMutation,ve=e.supportsPersistence,ye=e.supportsHydration,Oe=e.getInstanceFromNode,pe=e.preparePortalMount,de=e.getCurrentEventPriority,Ce=e.detachDeletedInstance,te=e.supportsMicrotasks,fe=e.scheduleMicrotask,Se=e.supportsTestSelectors,je=e.findFiberRoot,Me=e.getBoundingRect,Le=e.getTextContent,_e=e.isHiddenSubtree,Ie=e.matchAccessibilityRole,He=e.setFocusIfFocusable,Je=e.setupIntersectionObserver,nt=e.appendChild,ot=e.appendChildToContainer,dt=e.commitTextUpdate,ut=e.commitMount,Bn=e.commitUpdate,Nr=e.insertBefore,dn=e.insertInContainerBefore,Da=e.removeChild,Si=e.removeChildFromContainer,Ms=e.resetTextContent,Fa=e.hideInstance,tu=e.hideTextInstance,nu=e.unhideInstance,As=e.unhideTextInstance,Rs=e.clearContainer,xh=e.cloneInstance,ru=e.createContainerChildSet,iu=e.appendChildToContainerChildSet,wh=e.finalizeContainerChildren,jo=e.replaceContainerChildren,Oo=e.cloneHiddenInstance,su=e.cloneHiddenTextInstance,Ia=e.canHydrateInstance,au=e.canHydrateTextInstance,Ba=e.canHydrateSuspenseInstance,_h=e.isSuspenseInstancePending,$i=e.isSuspenseInstanceFallback,No=e.getSuspenseInstanceFallbackErrorDetails,Lo=e.registerSuspenseInstanceRetry,Ds=e.getNextHydratableSibling,xf=e.getFirstHydratableChild,wf=e.getFirstHydratableChildWithinContainer,_f=e.getFirstHydratableChildWithinSuspenseInstance,Qi=e.hydrateInstance,bh=e.hydrateTextInstance,Sh=e.hydrateSuspenseInstance,bf=e.getNextHydratableInstanceAfterSuspenseInstance,Ch=e.commitHydratedContainer,kh=e.commitHydratedSuspenseInstance,Th=e.clearSuspenseBoundary,Ph=e.clearSuspenseBoundaryFromContainer,Sf=e.shouldDeleteUnhydratedTailInstances,Cf=e.didNotMatchHydratedContainerTextInstance,Wt=e.didNotMatchHydratedTextInstance,ou;function Ji(p){if(ou===void 0)try{throw Error()}catch(j){var y=j.stack.trim().match(/\n( *(at )?)/);ou=y&&y[1]||""}return`
`+ou+p}var Mo=!1;function Fs(p,y){if(!p||Mo)return"";Mo=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(Fe){var N=Fe}Reflect.construct(p,[],y)}else{try{y.call()}catch(Fe){N=Fe}p.call(y.prototype)}else{try{throw Error()}catch(Fe){N=Fe}p()}}catch(Fe){if(Fe&&N&&typeof Fe.stack=="string"){for(var F=Fe.stack.split(`
`),G=N.stack.split(`
`),re=F.length-1,xe=G.length-1;1<=re&&0<=xe&&F[re]!==G[xe];)xe--;for(;1<=re&&0<=xe;re--,xe--)if(F[re]!==G[xe]){if(re!==1||xe!==1)do if(re--,xe--,0>xe||F[re]!==G[xe]){var Ee=`
`+F[re].replace(" at new "," at ");return p.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",p.displayName)),Ee}while(1<=re&&0<=xe);break}}}finally{Mo=!1,Error.prepareStackTrace=j}return(p=p?p.displayName||p.name:"")?Ji(p):""}var kf=Object.prototype.hasOwnProperty,Ao=[],ii=-1;function _n(p){return{current:p}}function Lt(p){0>ii||(p.current=Ao[ii],Ao[ii]=null,ii--)}function ft(p,y){ii++,Ao[ii]=p.current,p.current=y}var Ci={},En=_n(Ci),Qn=_n(!1),zr=Ci;function si(p,y){var j=p.type.contextTypes;if(!j)return Ci;var N=p.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===y)return N.__reactInternalMemoizedMaskedChildContext;var F={},G;for(G in j)F[G]=y[G];return N&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=y,p.__reactInternalMemoizedMaskedChildContext=F),F}function fn(p){return p=p.childContextTypes,p!=null}function Zi(){Lt(Qn),Lt(En)}function Eh(p,y,j){if(En.current!==Ci)throw Error(_(168));ft(En,y),ft(Qn,j)}function jh(p,y,j){var N=p.stateNode;if(y=y.childContextTypes,typeof N.getChildContext!="function")return j;N=N.getChildContext();for(var F in N)if(!(F in y))throw Error(_(108,L(p)||"Unknown",F));return S({},j,N)}function Is(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Ci,zr=En.current,ft(En,p),ft(Qn,Qn.current),!0}function lu(p,y,j){var N=p.stateNode;if(!N)throw Error(_(169));j?(p=jh(p,y,zr),N.__reactInternalMemoizedMergedChildContext=p,Lt(Qn),Lt(En),ft(En,p)):Lt(Qn),ft(Qn,j)}var sr=Math.clz32?Math.clz32:uu,za=Math.log,Tf=Math.LN2;function uu(p){return p>>>=0,p===0?32:31-(za(p)/Tf|0)|0}var wt=64,Ua=4194304;function Bs(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function zs(p,y){var j=p.pendingLanes;if(j===0)return 0;var N=0,F=p.suspendedLanes,G=p.pingedLanes,re=j&268435455;if(re!==0){var xe=re&~F;xe!==0?N=Bs(xe):(G&=re,G!==0&&(N=Bs(G)))}else re=j&~F,re!==0?N=Bs(re):G!==0&&(N=Bs(G));if(N===0)return 0;if(y!==0&&y!==N&&(y&F)===0&&(F=N&-N,G=y&-y,F>=G||F===16&&(G&4194240)!==0))return y;if((N&4)!==0&&(N|=j&16),y=p.entangledLanes,y!==0)for(p=p.entanglements,y&=N;0<y;)j=31-sr(y),F=1<<j,N|=p[j],y&=~F;return N}function Oh(p,y){switch(p){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nh(p,y){for(var j=p.suspendedLanes,N=p.pingedLanes,F=p.expirationTimes,G=p.pendingLanes;0<G;){var re=31-sr(G),xe=1<<re,Ee=F[re];Ee===-1?((xe&j)===0||(xe&N)!==0)&&(F[re]=Oh(xe,y)):Ee<=y&&(p.expiredLanes|=xe),G&=~xe}}function Ro(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function Do(){var p=wt;return wt<<=1,(wt&4194240)===0&&(wt=64),p}function Us(p){for(var y=[],j=0;31>j;j++)y.push(p);return y}function xr(p,y,j){p.pendingLanes|=y,y!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,y=31-sr(y),p[y]=j}function ki(p,y){var j=p.pendingLanes&~y;p.pendingLanes=y,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=y,p.mutableReadLanes&=y,p.entangledLanes&=y,y=p.entanglements;var N=p.eventTimes;for(p=p.expirationTimes;0<j;){var F=31-sr(j),G=1<<F;y[F]=0,N[F]=-1,p[F]=-1,j&=~G}}function Ur(p,y){var j=p.entangledLanes|=y;for(p=p.entanglements;j;){var N=31-sr(j),F=1<<N;F&y|p[N]&y&&(p[N]|=y),j&=~F}}var gt=0;function Vs(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var Vr=v.unstable_scheduleCallback,Lh=v.unstable_cancelCallback,Mh=v.unstable_shouldYield,Va=v.unstable_requestPaint,gn=v.unstable_now,Fo=v.unstable_ImmediatePriority,Io=v.unstable_UserBlockingPriority,Bo=v.unstable_NormalPriority,Pf=v.unstable_IdlePriority,Ti=null,Jn=null;function Gs(p){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Ti,p,void 0,(p.current.flags&128)===128)}catch{}}function zo(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var Lr=typeof Object.is=="function"?Object.is:zo,ai=null,Hs=!1,Ws=!1;function Uo(p){ai===null?ai=[p]:ai.push(p)}function Ah(p){Hs=!0,Uo(p)}function bn(){if(!Ws&&ai!==null){Ws=!0;var p=0,y=gt;try{var j=ai;for(gt=1;p<j.length;p++){var N=j[p];do N=N(!0);while(N!==null)}ai=null,Hs=!1}catch(F){throw ai!==null&&(ai=ai.slice(p+1)),Vr(Fo,bn),F}finally{gt=y,Ws=!1}}return null}var Pi=[],oi=0,Ga=null,es=0,zn=[],ar=0,tn=null,Zn=1,Mr="";function Ar(p,y){Pi[oi++]=es,Pi[oi++]=Ga,Ga=p,es=y}function Rh(p,y,j){zn[ar++]=Zn,zn[ar++]=Mr,zn[ar++]=tn,tn=p;var N=Zn;p=Mr;var F=32-sr(N)-1;N&=~(1<<F),j+=1;var G=32-sr(y)+F;if(30<G){var re=F-F%5;G=(N&(1<<re)-1).toString(32),N>>=re,F-=re,Zn=1<<32-sr(y)+F|j<<F|N,Mr=G+p}else Zn=1<<G|j<<F|N,Mr=p}function Ha(p){p.return!==null&&(Ar(p,1),Rh(p,1,0))}function Wa(p){for(;p===Ga;)Ga=Pi[--oi],Pi[oi]=null,es=Pi[--oi],Pi[oi]=null;for(;p===tn;)tn=zn[--ar],zn[ar]=null,Mr=zn[--ar],zn[ar]=null,Zn=zn[--ar],zn[ar]=null}var Sn=null,Un=null,Mt=!1,Xa=!1,Rr=null;function Dh(p,y){var j=mr(5,null,null,0);j.elementType="DELETED",j.stateNode=y,j.return=p,y=p.deletions,y===null?(p.deletions=[j],p.flags|=16):y.push(j)}function Vo(p,y){switch(p.tag){case 5:return y=Ia(y,p.type,p.pendingProps),y!==null?(p.stateNode=y,Sn=p,Un=xf(y),!0):!1;case 6:return y=au(y,p.pendingProps),y!==null?(p.stateNode=y,Sn=p,Un=null,!0):!1;case 13:if(y=Ba(y),y!==null){var j=tn!==null?{id:Zn,overflow:Mr}:null;return p.memoizedState={dehydrated:y,treeContext:j,retryLane:1073741824},j=mr(18,null,null,0),j.stateNode=y,j.return=p,p.child=j,Sn=p,Un=null,!0}return!1;default:return!1}}function cu(p){return(p.mode&1)!==0&&(p.flags&128)===0}function hu(p){if(Mt){var y=Un;if(y){var j=y;if(!Vo(p,y)){if(cu(p))throw Error(_(418));y=Ds(j);var N=Sn;y&&Vo(p,y)?Dh(N,j):(p.flags=p.flags&-4097|2,Mt=!1,Sn=p)}}else{if(cu(p))throw Error(_(418));p.flags=p.flags&-4097|2,Mt=!1,Sn=p}}}function Fh(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;Sn=p}function Go(p){if(!ye||p!==Sn)return!1;if(!Mt)return Fh(p),Mt=!0,!1;if(p.tag!==3&&(p.tag!==5||Sf(p.type)&&!oe(p.type,p.memoizedProps))){var y=Un;if(y){if(cu(p))throw Ih(),Error(_(418));for(;y;)Dh(p,y),y=Ds(y)}}if(Fh(p),p.tag===13){if(!ye)throw Error(_(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(_(317));Un=bf(p)}else Un=Sn?Ds(p.stateNode):null;return!0}function Ih(){for(var p=Un;p;)p=Ds(p)}function ts(){ye&&(Un=Sn=null,Xa=Mt=!1)}function du(p){Rr===null?Rr=[p]:Rr.push(p)}var Ef=T.ReactCurrentBatchConfig;function Ho(p,y){if(Lr(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var j=Object.keys(p),N=Object.keys(y);if(j.length!==N.length)return!1;for(N=0;N<j.length;N++){var F=j[N];if(!kf.call(y,F)||!Lr(p[F],y[F]))return!1}return!0}function jf(p){switch(p.tag){case 5:return Ji(p.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 2:case 15:return p=Fs(p.type,!1),p;case 11:return p=Fs(p.type.render,!1),p;case 1:return p=Fs(p.type,!0),p;default:return""}}function ns(p,y,j){if(p=j.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(j._owner){if(j=j._owner,j){if(j.tag!==1)throw Error(_(309));var N=j.stateNode}if(!N)throw Error(_(147,p));var F=N,G=""+p;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===G?y.ref:(y=function(re){var xe=F.refs;re===null?delete xe[G]:xe[G]=re},y._stringRef=G,y)}if(typeof p!="string")throw Error(_(284));if(!j._owner)throw Error(_(290,p))}return p}function Wo(p,y){throw p=Object.prototype.toString.call(y),Error(_(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p))}function Bh(p){var y=p._init;return y(p._payload)}function zh(p){function y(Te,we){if(p){var Ne=Te.deletions;Ne===null?(Te.deletions=[we],Te.flags|=16):Ne.push(we)}}function j(Te,we){if(!p)return null;for(;we!==null;)y(Te,we),we=we.sibling;return null}function N(Te,we){for(Te=new Map;we!==null;)we.key!==null?Te.set(we.key,we):Te.set(we.index,we),we=we.sibling;return Te}function F(Te,we){return Te=Wi(Te,we),Te.index=0,Te.sibling=null,Te}function G(Te,we,Ne){return Te.index=Ne,p?(Ne=Te.alternate,Ne!==null?(Ne=Ne.index,Ne<we?(Te.flags|=2,we):Ne):(Te.flags|=2,we)):(Te.flags|=1048576,we)}function re(Te){return p&&Te.alternate===null&&(Te.flags|=2),Te}function xe(Te,we,Ne,Ve){return we===null||we.tag!==6?(we=ma(Ne,Te.mode,Ve),we.return=Te,we):(we=F(we,Ne),we.return=Te,we)}function Ee(Te,we,Ne,Ve){var Qe=Ne.type;return Qe===r?We(Te,we,Ne.props.children,Ve,Ne.key):we!==null&&(we.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===g&&Bh(Qe)===we.type)?(Ve=F(we,Ne.props),Ve.ref=ns(Te,we,Ne),Ve.return=Te,Ve):(Ve=Sl(Ne.type,Ne.key,Ne.props,null,Te.mode,Ve),Ve.ref=ns(Te,we,Ne),Ve.return=Te,Ve)}function Fe(Te,we,Ne,Ve){return we===null||we.tag!==4||we.stateNode.containerInfo!==Ne.containerInfo||we.stateNode.implementation!==Ne.implementation?(we=Cl(Ne,Te.mode,Ve),we.return=Te,we):(we=F(we,Ne.children||[]),we.return=Te,we)}function We(Te,we,Ne,Ve,Qe){return we===null||we.tag!==7?(we=Tn(Ne,Te.mode,Ve,Qe),we.return=Te,we):(we=F(we,Ne),we.return=Te,we)}function it(Te,we,Ne){if(typeof we=="string"&&we!==""||typeof we=="number")return we=ma(""+we,Te.mode,Ne),we.return=Te,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case E:return Ne=Sl(we.type,we.key,we.props,null,Te.mode,Ne),Ne.ref=ns(Te,null,we),Ne.return=Te,Ne;case d:return we=Cl(we,Te.mode,Ne),we.return=Te,we;case g:var Ve=we._init;return it(Te,Ve(we._payload),Ne)}if(ie(we)||P(we))return we=Tn(we,Te.mode,Ne,null),we.return=Te,we;Wo(Te,we)}return null}function Ue(Te,we,Ne,Ve){var Qe=we!==null?we.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Qe!==null?null:xe(Te,we,""+Ne,Ve);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case E:return Ne.key===Qe?Ee(Te,we,Ne,Ve):null;case d:return Ne.key===Qe?Fe(Te,we,Ne,Ve):null;case g:return Qe=Ne._init,Ue(Te,we,Qe(Ne._payload),Ve)}if(ie(Ne)||P(Ne))return Qe!==null?null:We(Te,we,Ne,Ve,null);Wo(Te,Ne)}return null}function Nt(Te,we,Ne,Ve,Qe){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return Te=Te.get(Ne)||null,xe(we,Te,""+Ve,Qe);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case E:return Te=Te.get(Ve.key===null?Ne:Ve.key)||null,Ee(we,Te,Ve,Qe);case d:return Te=Te.get(Ve.key===null?Ne:Ve.key)||null,Fe(we,Te,Ve,Qe);case g:var ct=Ve._init;return Nt(Te,we,Ne,ct(Ve._payload),Qe)}if(ie(Ve)||P(Ve))return Te=Te.get(Ne)||null,We(we,Te,Ve,Qe,null);Wo(we,Ve)}return null}function Ct(Te,we,Ne,Ve){for(var Qe=null,ct=null,st=we,yt=we=0,on=null;st!==null&&yt<Ne.length;yt++){st.index>yt?(on=st,st=null):on=st.sibling;var mt=Ue(Te,st,Ne[yt],Ve);if(mt===null){st===null&&(st=on);break}p&&st&&mt.alternate===null&&y(Te,st),we=G(mt,we,yt),ct===null?Qe=mt:ct.sibling=mt,ct=mt,st=on}if(yt===Ne.length)return j(Te,st),Mt&&Ar(Te,yt),Qe;if(st===null){for(;yt<Ne.length;yt++)st=it(Te,Ne[yt],Ve),st!==null&&(we=G(st,we,yt),ct===null?Qe=st:ct.sibling=st,ct=st);return Mt&&Ar(Te,yt),Qe}for(st=N(Te,st);yt<Ne.length;yt++)on=Nt(st,Te,yt,Ne[yt],Ve),on!==null&&(p&&on.alternate!==null&&st.delete(on.key===null?yt:on.key),we=G(on,we,yt),ct===null?Qe=on:ct.sibling=on,ct=on);return p&&st.forEach(function(An){return y(Te,An)}),Mt&&Ar(Te,yt),Qe}function Yn(Te,we,Ne,Ve){var Qe=P(Ne);if(typeof Qe!="function")throw Error(_(150));if(Ne=Qe.call(Ne),Ne==null)throw Error(_(151));for(var ct=Qe=null,st=we,yt=we=0,on=null,mt=Ne.next();st!==null&&!mt.done;yt++,mt=Ne.next()){st.index>yt?(on=st,st=null):on=st.sibling;var An=Ue(Te,st,mt.value,Ve);if(An===null){st===null&&(st=on);break}p&&st&&An.alternate===null&&y(Te,st),we=G(An,we,yt),ct===null?Qe=An:ct.sibling=An,ct=An,st=on}if(mt.done)return j(Te,st),Mt&&Ar(Te,yt),Qe;if(st===null){for(;!mt.done;yt++,mt=Ne.next())mt=it(Te,mt.value,Ve),mt!==null&&(we=G(mt,we,yt),ct===null?Qe=mt:ct.sibling=mt,ct=mt);return Mt&&Ar(Te,yt),Qe}for(st=N(Te,st);!mt.done;yt++,mt=Ne.next())mt=Nt(st,Te,yt,mt.value,Ve),mt!==null&&(p&&mt.alternate!==null&&st.delete(mt.key===null?yt:mt.key),we=G(mt,we,yt),ct===null?Qe=mt:ct.sibling=mt,ct=mt);return p&&st.forEach(function(Af){return y(Te,Af)}),Mt&&Ar(Te,yt),Qe}function Qr(Te,we,Ne,Ve){if(typeof Ne=="object"&&Ne!==null&&Ne.type===r&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case E:e:{for(var Qe=Ne.key,ct=we;ct!==null;){if(ct.key===Qe){if(Qe=Ne.type,Qe===r){if(ct.tag===7){j(Te,ct.sibling),we=F(ct,Ne.props.children),we.return=Te,Te=we;break e}}else if(ct.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===g&&Bh(Qe)===ct.type){j(Te,ct.sibling),we=F(ct,Ne.props),we.ref=ns(Te,ct,Ne),we.return=Te,Te=we;break e}j(Te,ct);break}else y(Te,ct);ct=ct.sibling}Ne.type===r?(we=Tn(Ne.props.children,Te.mode,Ve,Ne.key),we.return=Te,Te=we):(Ve=Sl(Ne.type,Ne.key,Ne.props,null,Te.mode,Ve),Ve.ref=ns(Te,we,Ne),Ve.return=Te,Te=Ve)}return re(Te);case d:e:{for(ct=Ne.key;we!==null;){if(we.key===ct)if(we.tag===4&&we.stateNode.containerInfo===Ne.containerInfo&&we.stateNode.implementation===Ne.implementation){j(Te,we.sibling),we=F(we,Ne.children||[]),we.return=Te,Te=we;break e}else{j(Te,we);break}else y(Te,we);we=we.sibling}we=Cl(Ne,Te.mode,Ve),we.return=Te,Te=we}return re(Te);case g:return ct=Ne._init,Qr(Te,we,ct(Ne._payload),Ve)}if(ie(Ne))return Ct(Te,we,Ne,Ve);if(P(Ne))return Yn(Te,we,Ne,Ve);Wo(Te,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,we!==null&&we.tag===6?(j(Te,we.sibling),we=F(we,Ne),we.return=Te,Te=we):(j(Te,we),we=ma(Ne,Te.mode,Ve),we.return=Te,Te=we),re(Te)):j(Te,we)}return Qr}var rs=zh(!0),Uh=zh(!1),Xo=_n(null),Yo=null,Xs=null,fu=null;function gu(){fu=Xs=Yo=null}function Vh(p,y,j){le?(ft(Xo,y._currentValue),y._currentValue=j):(ft(Xo,y._currentValue2),y._currentValue2=j)}function Ya(p){var y=Xo.current;Lt(Xo),le?p._currentValue=y:p._currentValue2=y}function is(p,y,j){for(;p!==null;){var N=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,N!==null&&(N.childLanes|=y)):N!==null&&(N.childLanes&y)!==y&&(N.childLanes|=y),p===j)break;p=p.return}}function Ys(p,y){Yo=p,fu=Xs=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&y)!==0&&(rn=!0),p.firstContext=null)}function or(p){var y=le?p._currentValue:p._currentValue2;if(fu!==p)if(p={context:p,memoizedValue:y,next:null},Xs===null){if(Yo===null)throw Error(_(308));Xs=p,Yo.dependencies={lanes:0,firstContext:p}}else Xs=Xs.next=p;return y}var Ei=null;function qo(p){Ei===null?Ei=[p]:Ei.push(p)}function pu(p,y,j,N){var F=y.interleaved;return F===null?(j.next=j,qo(y)):(j.next=F.next,F.next=j),y.interleaved=j,Dr(p,N)}function Dr(p,y){p.lanes|=y;var j=p.alternate;for(j!==null&&(j.lanes|=y),j=p,p=p.return;p!==null;)p.childLanes|=y,j=p.alternate,j!==null&&(j.childLanes|=y),j=p,p=p.return;return j.tag===3?j.stateNode:null}var lr=!1;function mu(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gh(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function li(p,y){return{eventTime:p,lane:y,tag:0,payload:null,callback:null,next:null}}function ui(p,y,j){var N=p.updateQueue;if(N===null)return null;if(N=N.shared,(lt&2)!==0){var F=N.pending;return F===null?y.next=y:(y.next=F.next,F.next=y),N.pending=y,Dr(p,j)}return F=N.interleaved,F===null?(y.next=y,qo(N)):(y.next=F.next,F.next=y),N.interleaved=y,Dr(p,j)}function qa(p,y,j){if(y=y.updateQueue,y!==null&&(y=y.shared,(j&4194240)!==0)){var N=y.lanes;N&=p.pendingLanes,j|=N,y.lanes=j,Ur(p,j)}}function qs(p,y){var j=p.updateQueue,N=p.alternate;if(N!==null&&(N=N.updateQueue,j===N)){var F=null,G=null;if(j=j.firstBaseUpdate,j!==null){do{var re={eventTime:j.eventTime,lane:j.lane,tag:j.tag,payload:j.payload,callback:j.callback,next:null};G===null?F=G=re:G=G.next=re,j=j.next}while(j!==null);G===null?F=G=y:G=G.next=y}else F=G=y;j={baseState:N.baseState,firstBaseUpdate:F,lastBaseUpdate:G,shared:N.shared,effects:N.effects},p.updateQueue=j;return}p=j.lastBaseUpdate,p===null?j.firstBaseUpdate=y:p.next=y,j.lastBaseUpdate=y}function ji(p,y,j,N){var F=p.updateQueue;lr=!1;var G=F.firstBaseUpdate,re=F.lastBaseUpdate,xe=F.shared.pending;if(xe!==null){F.shared.pending=null;var Ee=xe,Fe=Ee.next;Ee.next=null,re===null?G=Fe:re.next=Fe,re=Ee;var We=p.alternate;We!==null&&(We=We.updateQueue,xe=We.lastBaseUpdate,xe!==re&&(xe===null?We.firstBaseUpdate=Fe:xe.next=Fe,We.lastBaseUpdate=Ee))}if(G!==null){var it=F.baseState;re=0,We=Fe=Ee=null,xe=G;do{var Ue=xe.lane,Nt=xe.eventTime;if((N&Ue)===Ue){We!==null&&(We=We.next={eventTime:Nt,lane:0,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null});e:{var Ct=p,Yn=xe;switch(Ue=y,Nt=j,Yn.tag){case 1:if(Ct=Yn.payload,typeof Ct=="function"){it=Ct.call(Nt,it,Ue);break e}it=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Yn.payload,Ue=typeof Ct=="function"?Ct.call(Nt,it,Ue):Ct,Ue==null)break e;it=S({},it,Ue);break e;case 2:lr=!0}}xe.callback!==null&&xe.lane!==0&&(p.flags|=64,Ue=F.effects,Ue===null?F.effects=[xe]:Ue.push(xe))}else Nt={eventTime:Nt,lane:Ue,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},We===null?(Fe=We=Nt,Ee=it):We=We.next=Nt,re|=Ue;if(xe=xe.next,xe===null){if(xe=F.shared.pending,xe===null)break;Ue=xe,xe=Ue.next,Ue.next=null,F.lastBaseUpdate=Ue,F.shared.pending=null}}while(!0);if(We===null&&(Ee=it),F.baseState=Ee,F.firstBaseUpdate=Fe,F.lastBaseUpdate=We,y=F.shared.interleaved,y!==null){F=y;do re|=F.lane,F=F.next;while(F!==y)}else G===null&&(F.shared.lanes=0);gi|=re,p.lanes=re,p.memoizedState=it}}function Hh(p,y,j){if(p=y.effects,y.effects=null,p!==null)for(y=0;y<p.length;y++){var N=p[y],F=N.callback;if(F!==null){if(N.callback=null,N=j,typeof F!="function")throw Error(_(191,F));F.call(N)}}}var Oi={},wr=_n(Oi),Ks=_n(Oi),Ni=_n(Oi);function _r(p){if(p===Oi)throw Error(_(174));return p}function Ko(p,y){ft(Ni,y),ft(Ks,p),ft(wr,Oi),p=U(y),Lt(wr),ft(wr,p)}function ss(){Lt(wr),Lt(Ks),Lt(Ni)}function vu(p){var y=_r(Ni.current),j=_r(wr.current);y=X(j,p.type,y),j!==y&&(ft(Ks,p),ft(wr,y))}function yu(p){Ks.current===p&&(Lt(wr),Lt(Ks))}var zt=_n(0);function $o(p){for(var y=p;y!==null;){if(y.tag===13){var j=y.memoizedState;if(j!==null&&(j=j.dehydrated,j===null||_h(j)||$i(j)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var xu=[];function wu(){for(var p=0;p<xu.length;p++){var y=xu[p];le?y._workInProgressVersionPrimary=null:y._workInProgressVersionSecondary=null}xu.length=0}var er=T.ReactCurrentDispatcher,as=T.ReactCurrentBatchConfig,Li=0,Dt=null,Kt=null,nn=null,$s=!1,Ka=!1,$a=0,Qs=0;function pn(){throw Error(_(321))}function os(p,y){if(y===null)return!1;for(var j=0;j<y.length&&j<p.length;j++)if(!Lr(p[j],y[j]))return!1;return!0}function Qa(p,y,j,N,F,G){if(Li=G,Dt=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,er.current=p===null||p.memoizedState===null?Ou:Nu,p=j(N,F),Ka){G=0;do{if(Ka=!1,$a=0,25<=G)throw Error(_(301));G+=1,nn=Kt=null,y.updateQueue=null,er.current=Lu,p=j(N,F)}while(Ka)}if(er.current=ds,y=Kt!==null&&Kt.next!==null,Li=0,nn=Kt=Dt=null,$s=!1,y)throw Error(_(300));return p}function Qo(){var p=$a!==0;return $a=0,p}function ur(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Dt.memoizedState=nn=p:nn=nn.next=p,nn}function Cn(){if(Kt===null){var p=Dt.alternate;p=p!==null?p.memoizedState:null}else p=Kt.next;var y=nn===null?Dt.memoizedState:nn.next;if(y!==null)nn=y,Kt=p;else{if(p===null)throw Error(_(310));Kt=p,p={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},nn===null?Dt.memoizedState=nn=p:nn=nn.next=p}return nn}function ls(p,y){return typeof y=="function"?y(p):y}function Jo(p){var y=Cn(),j=y.queue;if(j===null)throw Error(_(311));j.lastRenderedReducer=p;var N=Kt,F=N.baseQueue,G=j.pending;if(G!==null){if(F!==null){var re=F.next;F.next=G.next,G.next=re}N.baseQueue=F=G,j.pending=null}if(F!==null){G=F.next,N=N.baseState;var xe=re=null,Ee=null,Fe=G;do{var We=Fe.lane;if((Li&We)===We)Ee!==null&&(Ee=Ee.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),N=Fe.hasEagerState?Fe.eagerState:p(N,Fe.action);else{var it={lane:We,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};Ee===null?(xe=Ee=it,re=N):Ee=Ee.next=it,Dt.lanes|=We,gi|=We}Fe=Fe.next}while(Fe!==null&&Fe!==G);Ee===null?re=N:Ee.next=xe,Lr(N,y.memoizedState)||(rn=!0),y.memoizedState=N,y.baseState=re,y.baseQueue=Ee,j.lastRenderedState=N}if(p=j.interleaved,p!==null){F=p;do G=F.lane,Dt.lanes|=G,gi|=G,F=F.next;while(F!==p)}else F===null&&(j.lanes=0);return[y.memoizedState,j.dispatch]}function Js(p){var y=Cn(),j=y.queue;if(j===null)throw Error(_(311));j.lastRenderedReducer=p;var N=j.dispatch,F=j.pending,G=y.memoizedState;if(F!==null){j.pending=null;var re=F=F.next;do G=p(G,re.action),re=re.next;while(re!==F);Lr(G,y.memoizedState)||(rn=!0),y.memoizedState=G,y.baseQueue===null&&(y.baseState=G),j.lastRenderedState=G}return[G,N]}function _u(){}function bu(p,y){var j=Dt,N=Cn(),F=y(),G=!Lr(N.memoizedState,F);if(G&&(N.memoizedState=F,rn=!0),N=N.queue,tl(ku.bind(null,j,N,p),[p]),N.getSnapshot!==y||G||nn!==null&&nn.memoizedState.tag&1){if(j.flags|=2048,us(9,Cu.bind(null,j,N,F,y),void 0,null),Pt===null)throw Error(_(349));(Li&30)!==0||Su(j,y,F)}return F}function Su(p,y,j){p.flags|=16384,p={getSnapshot:y,value:j},y=Dt.updateQueue,y===null?(y={lastEffect:null,stores:null},Dt.updateQueue=y,y.stores=[p]):(j=y.stores,j===null?y.stores=[p]:j.push(p))}function Cu(p,y,j,N){y.value=j,y.getSnapshot=N,Tu(y)&&ci(p)}function ku(p,y,j){return j(function(){Tu(y)&&ci(p)})}function Tu(p){var y=p.getSnapshot;p=p.value;try{var j=y();return!Lr(p,j)}catch{return!0}}function ci(p){var y=Dr(p,1);y!==null&&Ln(y,p,1,-1)}function Zo(p){var y=ur();return typeof p=="function"&&(p=p()),y.memoizedState=y.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:p},y.queue=p,p=p.dispatch=Of.bind(null,Dt,p),[y.memoizedState,p]}function us(p,y,j,N){return p={tag:p,create:y,destroy:j,deps:N,next:null},y=Dt.updateQueue,y===null?(y={lastEffect:null,stores:null},Dt.updateQueue=y,y.lastEffect=p.next=p):(j=y.lastEffect,j===null?y.lastEffect=p.next=p:(N=j.next,j.next=p,p.next=N,y.lastEffect=p)),p}function Wh(){return Cn().memoizedState}function el(p,y,j,N){var F=ur();Dt.flags|=p,F.memoizedState=us(1|y,j,void 0,N===void 0?null:N)}function Mi(p,y,j,N){var F=Cn();N=N===void 0?null:N;var G=void 0;if(Kt!==null){var re=Kt.memoizedState;if(G=re.destroy,N!==null&&os(N,re.deps)){F.memoizedState=us(y,j,G,N);return}}Dt.flags|=p,F.memoizedState=us(1|y,j,G,N)}function Xh(p,y){return el(8390656,8,p,y)}function tl(p,y){return Mi(2048,8,p,y)}function Pu(p,y){return Mi(4,2,p,y)}function Et(p,y){return Mi(4,4,p,y)}function nl(p,y){if(typeof y=="function")return p=p(),y(p),function(){y(null)};if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function Ja(p,y,j){return j=j!=null?j.concat([p]):null,Mi(4,4,nl.bind(null,y,p),j)}function cs(){}function Eu(p,y){var j=Cn();y=y===void 0?null:y;var N=j.memoizedState;return N!==null&&y!==null&&os(y,N[1])?N[0]:(j.memoizedState=[p,y],p)}function rl(p,y){var j=Cn();y=y===void 0?null:y;var N=j.memoizedState;return N!==null&&y!==null&&os(y,N[1])?N[0]:(p=p(),j.memoizedState=[p,y],p)}function Zs(p,y,j){return(Li&21)===0?(p.baseState&&(p.baseState=!1,rn=!0),p.memoizedState=j):(Lr(j,y)||(j=Do(),Dt.lanes|=j,gi|=j,p.baseState=!0),y)}function il(p,y){var j=gt;gt=j!==0&&4>j?j:4,p(!0);var N=as.transition;as.transition={};try{p(!1),y()}finally{gt=j,as.transition=N}}function hs(){return Cn().memoizedState}function Yh(p,y,j){var N=an(p);if(j={lane:N,action:j,hasEagerState:!1,eagerState:null,next:null},qh(p))ju(y,j);else if(j=pu(p,y,j,N),j!==null){var F=At();Ln(j,p,N,F),Za(j,y,N)}}function Of(p,y,j){var N=an(p),F={lane:N,action:j,hasEagerState:!1,eagerState:null,next:null};if(qh(p))ju(y,F);else{var G=p.alternate;if(p.lanes===0&&(G===null||G.lanes===0)&&(G=y.lastRenderedReducer,G!==null))try{var re=y.lastRenderedState,xe=G(re,j);if(F.hasEagerState=!0,F.eagerState=xe,Lr(xe,re)){var Ee=y.interleaved;Ee===null?(F.next=F,qo(y)):(F.next=Ee.next,Ee.next=F),y.interleaved=F;return}}catch{}finally{}j=pu(p,y,F,N),j!==null&&(F=At(),Ln(j,p,N,F),Za(j,y,N))}}function qh(p){var y=p.alternate;return p===Dt||y!==null&&y===Dt}function ju(p,y){Ka=$s=!0;var j=p.pending;j===null?y.next=y:(y.next=j.next,j.next=y),p.pending=y}function Za(p,y,j){if((j&4194240)!==0){var N=y.lanes;N&=p.pendingLanes,j|=N,y.lanes=j,Ur(p,j)}}var ds={readContext:or,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},Ou={readContext:or,useCallback:function(p,y){return ur().memoizedState=[p,y===void 0?null:y],p},useContext:or,useEffect:Xh,useImperativeHandle:function(p,y,j){return j=j!=null?j.concat([p]):null,el(4194308,4,nl.bind(null,y,p),j)},useLayoutEffect:function(p,y){return el(4194308,4,p,y)},useInsertionEffect:function(p,y){return el(4,2,p,y)},useMemo:function(p,y){var j=ur();return y=y===void 0?null:y,p=p(),j.memoizedState=[p,y],p},useReducer:function(p,y,j){var N=ur();return y=j!==void 0?j(y):y,N.memoizedState=N.baseState=y,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:y},N.queue=p,p=p.dispatch=Yh.bind(null,Dt,p),[N.memoizedState,p]},useRef:function(p){var y=ur();return p={current:p},y.memoizedState=p},useState:Zo,useDebugValue:cs,useDeferredValue:function(p){return ur().memoizedState=p},useTransition:function(){var p=Zo(!1),y=p[0];return p=il.bind(null,p[1]),ur().memoizedState=p,[y,p]},useMutableSource:function(){},useSyncExternalStore:function(p,y,j){var N=Dt,F=ur();if(Mt){if(j===void 0)throw Error(_(407));j=j()}else{if(j=y(),Pt===null)throw Error(_(349));(Li&30)!==0||Su(N,y,j)}F.memoizedState=j;var G={value:j,getSnapshot:y};return F.queue=G,Xh(ku.bind(null,N,G,p),[p]),N.flags|=2048,us(9,Cu.bind(null,N,G,j,y),void 0,null),j},useId:function(){var p=ur(),y=Pt.identifierPrefix;if(Mt){var j=Mr,N=Zn;j=(N&~(1<<32-sr(N)-1)).toString(32)+j,y=":"+y+"R"+j,j=$a++,0<j&&(y+="H"+j.toString(32)),y+=":"}else j=Qs++,y=":"+y+"r"+j.toString(32)+":";return p.memoizedState=y},unstable_isNewReconciler:!1},Nu={readContext:or,useCallback:Eu,useContext:or,useEffect:tl,useImperativeHandle:Ja,useInsertionEffect:Pu,useLayoutEffect:Et,useMemo:rl,useReducer:Jo,useRef:Wh,useState:function(){return Jo(ls)},useDebugValue:cs,useDeferredValue:function(p){var y=Cn();return Zs(y,Kt.memoizedState,p)},useTransition:function(){var p=Jo(ls)[0],y=Cn().memoizedState;return[p,y]},useMutableSource:_u,useSyncExternalStore:bu,useId:hs,unstable_isNewReconciler:!1},Lu={readContext:or,useCallback:Eu,useContext:or,useEffect:tl,useImperativeHandle:Ja,useInsertionEffect:Pu,useLayoutEffect:Et,useMemo:rl,useReducer:Js,useRef:Wh,useState:function(){return Js(ls)},useDebugValue:cs,useDeferredValue:function(p){var y=Cn();return Kt===null?y.memoizedState=p:Zs(y,Kt.memoizedState,p)},useTransition:function(){var p=Js(ls)[0],y=Cn().memoizedState;return[p,y]},useMutableSource:_u,useSyncExternalStore:bu,useId:hs,unstable_isNewReconciler:!1};function cr(p,y){if(p&&p.defaultProps){y=S({},y),p=p.defaultProps;for(var j in p)y[j]===void 0&&(y[j]=p[j]);return y}return y}function Mu(p,y,j,N){y=p.memoizedState,j=j(N,y),j=j==null?y:S({},y,j),p.memoizedState=j,p.lanes===0&&(p.updateQueue.baseState=j)}var eo={isMounted:function(p){return(p=p._reactInternals)?B(p)===p:!1},enqueueSetState:function(p,y,j){p=p._reactInternals;var N=At(),F=an(p),G=li(N,F);G.payload=y,j!=null&&(G.callback=j),y=ui(p,G,F),y!==null&&(Ln(y,p,F,N),qa(y,p,F))},enqueueReplaceState:function(p,y,j){p=p._reactInternals;var N=At(),F=an(p),G=li(N,F);G.tag=1,G.payload=y,j!=null&&(G.callback=j),y=ui(p,G,F),y!==null&&(Ln(y,p,F,N),qa(y,p,F))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var j=At(),N=an(p),F=li(j,N);F.tag=2,y!=null&&(F.callback=y),y=ui(p,F,N),y!==null&&(Ln(y,p,N,j),qa(y,p,N))}};function Kh(p,y,j,N,F,G,re){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(N,G,re):y.prototype&&y.prototype.isPureReactComponent?!Ho(j,N)||!Ho(F,G):!0}function $h(p,y,j){var N=!1,F=Ci,G=y.contextType;return typeof G=="object"&&G!==null?G=or(G):(F=fn(y)?zr:En.current,N=y.contextTypes,G=(N=N!=null)?si(p,F):Ci),y=new y(j,G),p.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=eo,p.stateNode=y,y._reactInternals=p,N&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=F,p.__reactInternalMemoizedMaskedChildContext=G),y}function sl(p,y,j,N){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(j,N),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(j,N),y.state!==p&&eo.enqueueReplaceState(y,y.state,null)}function Gr(p,y,j,N){var F=p.stateNode;F.props=j,F.state=p.memoizedState,F.refs={},mu(p);var G=y.contextType;typeof G=="object"&&G!==null?F.context=or(G):(G=fn(y)?zr:En.current,F.context=si(p,G)),F.state=p.memoizedState,G=y.getDerivedStateFromProps,typeof G=="function"&&(Mu(p,y,G,j),F.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(y=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),y!==F.state&&eo.enqueueReplaceState(F,F.state,null),ji(p,j,F,N),F.state=p.memoizedState),typeof F.componentDidMount=="function"&&(p.flags|=4194308)}function fs(p,y){try{var j="",N=y;do j+=jf(N),N=N.return;while(N);var F=j}catch(G){F=`
Error generating stack: `+G.message+`
`+G.stack}return{value:p,source:y,stack:F,digest:null}}function Ai(p,y,j){return{value:p,source:null,stack:j??null,digest:y??null}}function br(p,y){try{console.error(y.value)}catch(j){setTimeout(function(){throw j})}}var to=typeof WeakMap=="function"?WeakMap:Map;function Hr(p,y,j){j=li(-1,j),j.tag=3,j.payload={element:null};var N=y.value;return j.callback=function(){Vt||(Vt=!0,$t=N),br(p,y)},j}function al(p,y,j){j=li(-1,j),j.tag=3;var N=p.type.getDerivedStateFromError;if(typeof N=="function"){var F=y.value;j.payload=function(){return N(F)},j.callback=function(){br(p,y)}}var G=p.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(j.callback=function(){br(p,y),typeof N!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var re=y.stack;this.componentDidCatch(y.value,{componentStack:re!==null?re:""})}),j}function Qh(p,y,j){var N=p.pingCache;if(N===null){N=p.pingCache=new to;var F=new Set;N.set(y,F)}else F=N.get(y),F===void 0&&(F=new Set,N.set(y,F));F.has(j)||(F.add(j),p=sd.bind(null,p,y,j),y.then(p,p))}function Jh(p){do{var y;if((y=p.tag===13)&&(y=p.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return p;p=p.return}while(p!==null);return null}function Ri(p,y,j,N,F){return(p.mode&1)===0?(p===y?p.flags|=65536:(p.flags|=128,j.flags|=131072,j.flags&=-52805,j.tag===1&&(j.alternate===null?j.tag=17:(y=li(-1,1),y.tag=2,ui(j,y,1))),j.lanes|=1),p):(p.flags|=65536,p.lanes=F,p)}var no=T.ReactCurrentOwner,rn=!1;function mn(p,y,j,N){y.child=p===null?Uh(y,null,j,N):rs(y,p.child,j,N)}function ol(p,y,j,N,F){j=j.render;var G=y.ref;return Ys(y,F),N=Qa(p,y,j,N,G,F),j=Qo(),p!==null&&!rn?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~F,di(p,y,F)):(Mt&&j&&Ha(y),y.flags|=1,mn(p,y,N,F),y.child)}function gs(p,y,j,N,F){if(p===null){var G=j.type;return typeof G=="function"&&!ga(G)&&G.defaultProps===void 0&&j.compare===null&&j.defaultProps===void 0?(y.tag=15,y.type=G,hi(p,y,G,N,F)):(p=Sl(j.type,null,N,y,y.mode,F),p.ref=y.ref,p.return=y,y.child=p)}if(G=p.child,(p.lanes&F)===0){var re=G.memoizedProps;if(j=j.compare,j=j!==null?j:Ho,j(re,N)&&p.ref===y.ref)return di(p,y,F)}return y.flags|=1,p=Wi(G,N),p.ref=y.ref,p.return=y,y.child=p}function hi(p,y,j,N,F){if(p!==null){var G=p.memoizedProps;if(Ho(G,N)&&p.ref===y.ref)if(rn=!1,y.pendingProps=N=G,(p.lanes&F)!==0)(p.flags&131072)!==0&&(rn=!0);else return y.lanes=p.lanes,di(p,y,F)}return Wr(p,y,j,N,F)}function jt(p,y,j){var N=y.pendingProps,F=N.children,G=p!==null?p.memoizedState:null;if(N.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Ui,sn),sn|=j;else{if((j&1073741824)===0)return p=G!==null?G.baseLanes|j:j,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:p,cachePool:null,transitions:null},y.updateQueue=null,ft(Ui,sn),sn|=p,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=G!==null?G.baseLanes:j,ft(Ui,sn),sn|=N}else G!==null?(N=G.baseLanes|j,y.memoizedState=null):N=j,ft(Ui,sn),sn|=N;return mn(p,y,F,j),y.child}function Tt(p,y){var j=y.ref;(p===null&&j!==null||p!==null&&p.ref!==j)&&(y.flags|=512,y.flags|=2097152)}function Wr(p,y,j,N,F){var G=fn(j)?zr:En.current;return G=si(y,G),Ys(y,F),j=Qa(p,y,j,N,G,F),N=Qo(),p!==null&&!rn?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~F,di(p,y,F)):(Mt&&N&&Ha(y),y.flags|=1,mn(p,y,j,F),y.child)}function kn(p,y,j,N,F){if(fn(j)){var G=!0;Is(y)}else G=!1;if(Ys(y,F),y.stateNode===null)ro(p,y),$h(y,j,N),Gr(y,j,N,F),N=!0;else if(p===null){var re=y.stateNode,xe=y.memoizedProps;re.props=xe;var Ee=re.context,Fe=j.contextType;typeof Fe=="object"&&Fe!==null?Fe=or(Fe):(Fe=fn(j)?zr:En.current,Fe=si(y,Fe));var We=j.getDerivedStateFromProps,it=typeof We=="function"||typeof re.getSnapshotBeforeUpdate=="function";it||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(xe!==N||Ee!==Fe)&&sl(y,re,N,Fe),lr=!1;var Ue=y.memoizedState;re.state=Ue,ji(y,N,re,F),Ee=y.memoizedState,xe!==N||Ue!==Ee||Qn.current||lr?(typeof We=="function"&&(Mu(y,j,We,N),Ee=y.memoizedState),(xe=lr||Kh(y,j,xe,N,Ue,Ee,Fe))?(it||typeof re.UNSAFE_componentWillMount!="function"&&typeof re.componentWillMount!="function"||(typeof re.componentWillMount=="function"&&re.componentWillMount(),typeof re.UNSAFE_componentWillMount=="function"&&re.UNSAFE_componentWillMount()),typeof re.componentDidMount=="function"&&(y.flags|=4194308)):(typeof re.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=N,y.memoizedState=Ee),re.props=N,re.state=Ee,re.context=Fe,N=xe):(typeof re.componentDidMount=="function"&&(y.flags|=4194308),N=!1)}else{re=y.stateNode,Gh(p,y),xe=y.memoizedProps,Fe=y.type===y.elementType?xe:cr(y.type,xe),re.props=Fe,it=y.pendingProps,Ue=re.context,Ee=j.contextType,typeof Ee=="object"&&Ee!==null?Ee=or(Ee):(Ee=fn(j)?zr:En.current,Ee=si(y,Ee));var Nt=j.getDerivedStateFromProps;(We=typeof Nt=="function"||typeof re.getSnapshotBeforeUpdate=="function")||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(xe!==it||Ue!==Ee)&&sl(y,re,N,Ee),lr=!1,Ue=y.memoizedState,re.state=Ue,ji(y,N,re,F);var Ct=y.memoizedState;xe!==it||Ue!==Ct||Qn.current||lr?(typeof Nt=="function"&&(Mu(y,j,Nt,N),Ct=y.memoizedState),(Fe=lr||Kh(y,j,Fe,N,Ue,Ct,Ee)||!1)?(We||typeof re.UNSAFE_componentWillUpdate!="function"&&typeof re.componentWillUpdate!="function"||(typeof re.componentWillUpdate=="function"&&re.componentWillUpdate(N,Ct,Ee),typeof re.UNSAFE_componentWillUpdate=="function"&&re.UNSAFE_componentWillUpdate(N,Ct,Ee)),typeof re.componentDidUpdate=="function"&&(y.flags|=4),typeof re.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof re.componentDidUpdate!="function"||xe===p.memoizedProps&&Ue===p.memoizedState||(y.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||xe===p.memoizedProps&&Ue===p.memoizedState||(y.flags|=1024),y.memoizedProps=N,y.memoizedState=Ct),re.props=N,re.state=Ct,re.context=Ee,N=Fe):(typeof re.componentDidUpdate!="function"||xe===p.memoizedProps&&Ue===p.memoizedState||(y.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||xe===p.memoizedProps&&Ue===p.memoizedState||(y.flags|=1024),N=!1)}return jn(p,y,j,N,G,F)}function jn(p,y,j,N,F,G){Tt(p,y);var re=(y.flags&128)!==0;if(!N&&!re)return F&&lu(y,j,!1),di(p,y,G);N=y.stateNode,no.current=y;var xe=re&&typeof j.getDerivedStateFromError!="function"?null:N.render();return y.flags|=1,p!==null&&re?(y.child=rs(y,p.child,null,G),y.child=rs(y,null,xe,G)):mn(p,y,xe,G),y.memoizedState=N.state,F&&lu(y,j,!0),y.child}function Di(p){var y=p.stateNode;y.pendingContext?Eh(p,y.pendingContext,y.pendingContext!==y.context):y.context&&Eh(p,y.context,!1),Ko(p,y.containerInfo)}function ps(p,y,j,N,F){return ts(),du(F),y.flags|=256,mn(p,y,j,N),y.child}var On={dehydrated:null,treeContext:null,retryLane:0};function ea(p){return{baseLanes:p,cachePool:null,transitions:null}}function Au(p,y,j){var N=y.pendingProps,F=zt.current,G=!1,re=(y.flags&128)!==0,xe;if((xe=re)||(xe=p!==null&&p.memoizedState===null?!1:(F&2)!==0),xe?(G=!0,y.flags&=-129):(p===null||p.memoizedState!==null)&&(F|=1),ft(zt,F&1),p===null)return hu(y),p=y.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((y.mode&1)===0?y.lanes=1:$i(p)?y.lanes=8:y.lanes=1073741824,null):(re=N.children,p=N.fallback,G?(N=y.mode,G=y.child,re={mode:"hidden",children:re},(N&1)===0&&G!==null?(G.childLanes=0,G.pendingProps=re):G=pa(re,N,0,null),p=Tn(p,N,j,null),G.return=y,p.return=y,G.sibling=p,y.child=G,y.child.memoizedState=ea(j),y.memoizedState=On,p):ll(y,re));if(F=p.memoizedState,F!==null&&(xe=F.dehydrated,xe!==null))return Zh(p,y,re,N,xe,F,j);if(G){G=N.fallback,re=y.mode,F=p.child,xe=F.sibling;var Ee={mode:"hidden",children:N.children};return(re&1)===0&&y.child!==F?(N=y.child,N.childLanes=0,N.pendingProps=Ee,y.deletions=null):(N=Wi(F,Ee),N.subtreeFlags=F.subtreeFlags&14680064),xe!==null?G=Wi(xe,G):(G=Tn(G,re,j,null),G.flags|=2),G.return=y,N.return=y,N.sibling=G,y.child=N,N=G,G=y.child,re=p.child.memoizedState,re=re===null?ea(j):{baseLanes:re.baseLanes|j,cachePool:null,transitions:re.transitions},G.memoizedState=re,G.childLanes=p.childLanes&~j,y.memoizedState=On,N}return G=p.child,p=G.sibling,N=Wi(G,{mode:"visible",children:N.children}),(y.mode&1)===0&&(N.lanes=j),N.return=y,N.sibling=null,p!==null&&(j=y.deletions,j===null?(y.deletions=[p],y.flags|=16):j.push(p)),y.child=N,y.memoizedState=null,N}function ll(p,y){return y=pa({mode:"visible",children:y},p.mode,0,null),y.return=p,p.child=y}function ms(p,y,j,N){return N!==null&&du(N),rs(y,p.child,null,j),p=ll(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function Zh(p,y,j,N,F,G,re){if(j)return y.flags&256?(y.flags&=-257,N=Ai(Error(_(422))),ms(p,y,re,N)):y.memoizedState!==null?(y.child=p.child,y.flags|=128,null):(G=N.fallback,F=y.mode,N=pa({mode:"visible",children:N.children},F,0,null),G=Tn(G,F,re,null),G.flags|=2,N.return=y,G.return=y,N.sibling=G,y.child=N,(y.mode&1)!==0&&rs(y,p.child,null,re),y.child.memoizedState=ea(re),y.memoizedState=On,G);if((y.mode&1)===0)return ms(p,y,re,null);if($i(F))return N=No(F).digest,G=Error(_(419)),N=Ai(G,N,void 0),ms(p,y,re,N);if(j=(re&p.childLanes)!==0,rn||j){if(N=Pt,N!==null){switch(re&-re){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}F=(F&(N.suspendedLanes|re))!==0?0:F,F!==0&&F!==G.retryLane&&(G.retryLane=F,Dr(p,F),Ln(N,p,F,-1))}return fa(),N=Ai(Error(_(421))),ms(p,y,re,N)}return _h(F)?(y.flags|=128,y.child=p.child,y=od.bind(null,p),Lo(F,y),null):(p=G.treeContext,ye&&(Un=_f(F),Sn=y,Mt=!0,Rr=null,Xa=!1,p!==null&&(zn[ar++]=Zn,zn[ar++]=Mr,zn[ar++]=tn,Zn=p.id,Mr=p.overflow,tn=y)),y=ll(y,N.children),y.flags|=4096,y)}function Xr(p,y,j){p.lanes|=y;var N=p.alternate;N!==null&&(N.lanes|=y),is(p.return,y,j)}function ta(p,y,j,N,F){var G=p.memoizedState;G===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:N,tail:j,tailMode:F}:(G.isBackwards=y,G.rendering=null,G.renderingStartTime=0,G.last=N,G.tail=j,G.tailMode=F)}function ul(p,y,j){var N=y.pendingProps,F=N.revealOrder,G=N.tail;if(mn(p,y,N.children,j),N=zt.current,(N&2)!==0)N=N&1|2,y.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Xr(p,j,y);else if(p.tag===19)Xr(p,j,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}N&=1}if(ft(zt,N),(y.mode&1)===0)y.memoizedState=null;else switch(F){case"forwards":for(j=y.child,F=null;j!==null;)p=j.alternate,p!==null&&$o(p)===null&&(F=j),j=j.sibling;j=F,j===null?(F=y.child,y.child=null):(F=j.sibling,j.sibling=null),ta(y,!1,F,j,G);break;case"backwards":for(j=null,F=y.child,y.child=null;F!==null;){if(p=F.alternate,p!==null&&$o(p)===null){y.child=F;break}p=F.sibling,F.sibling=j,j=F,F=p}ta(y,!0,j,null,G);break;case"together":ta(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function ro(p,y){(y.mode&1)===0&&p!==null&&(p.alternate=null,y.alternate=null,y.flags|=2)}function di(p,y,j){if(p!==null&&(y.dependencies=p.dependencies),gi|=y.lanes,(j&y.childLanes)===0)return null;if(p!==null&&y.child!==p.child)throw Error(_(153));if(y.child!==null){for(p=y.child,j=Wi(p,p.pendingProps),y.child=j,j.return=y;p.sibling!==null;)p=p.sibling,j=j.sibling=Wi(p,p.pendingProps),j.return=y;j.sibling=null}return y.child}function Fi(p,y,j){switch(y.tag){case 3:Di(y),ts();break;case 5:vu(y);break;case 1:fn(y.type)&&Is(y);break;case 4:Ko(y,y.stateNode.containerInfo);break;case 10:Vh(y,y.type._context,y.memoizedProps.value);break;case 13:var N=y.memoizedState;if(N!==null)return N.dehydrated!==null?(ft(zt,zt.current&1),y.flags|=128,null):(j&y.child.childLanes)!==0?Au(p,y,j):(ft(zt,zt.current&1),p=di(p,y,j),p!==null?p.sibling:null);ft(zt,zt.current&1);break;case 19:if(N=(j&y.childLanes)!==0,(p.flags&128)!==0){if(N)return ul(p,y,j);y.flags|=128}var F=y.memoizedState;if(F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),ft(zt,zt.current),N)break;return null;case 22:case 23:return y.lanes=0,jt(p,y,j)}return di(p,y,j)}function Vn(p){p.flags|=4}function vs(p,y){if(p!==null&&p.child===y.child)return!0;if((y.flags&16)!==0)return!1;for(p=y.child;p!==null;){if((p.flags&12854)!==0||(p.subtreeFlags&12854)!==0)return!1;p=p.sibling}return!0}var Ii,Bi,Gn,Hn;if(he)Ii=function(p,y){for(var j=y.child;j!==null;){if(j.tag===5||j.tag===6)V(p,j.stateNode);else if(j.tag!==4&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===y)break;for(;j.sibling===null;){if(j.return===null||j.return===y)return;j=j.return}j.sibling.return=j.return,j=j.sibling}},Bi=function(){},Gn=function(p,y,j,N,F){if(p=p.memoizedProps,p!==N){var G=y.stateNode,re=_r(wr.current);j=q(G,j,p,N,F,re),(y.updateQueue=j)&&Vn(y)}},Hn=function(p,y,j,N){j!==N&&Vn(y)};else if(ve){Ii=function(p,y,j,N){for(var F=y.child;F!==null;){if(F.tag===5){var G=F.stateNode;j&&N&&(G=Oo(G,F.type,F.memoizedProps,F)),V(p,G)}else if(F.tag===6)G=F.stateNode,j&&N&&(G=su(G,F.memoizedProps,F)),V(p,G);else if(F.tag!==4){if(F.tag===22&&F.memoizedState!==null)G=F.child,G!==null&&(G.return=F),Ii(p,F,!0,!0);else if(F.child!==null){F.child.return=F,F=F.child;continue}}if(F===y)break;for(;F.sibling===null;){if(F.return===null||F.return===y)return;F=F.return}F.sibling.return=F.return,F=F.sibling}};var zi=function(p,y,j,N){for(var F=y.child;F!==null;){if(F.tag===5){var G=F.stateNode;j&&N&&(G=Oo(G,F.type,F.memoizedProps,F)),iu(p,G)}else if(F.tag===6)G=F.stateNode,j&&N&&(G=su(G,F.memoizedProps,F)),iu(p,G);else if(F.tag!==4){if(F.tag===22&&F.memoizedState!==null)G=F.child,G!==null&&(G.return=F),zi(p,F,!0,!0);else if(F.child!==null){F.child.return=F,F=F.child;continue}}if(F===y)break;for(;F.sibling===null;){if(F.return===null||F.return===y)return;F=F.return}F.sibling.return=F.return,F=F.sibling}};Bi=function(p,y){var j=y.stateNode;if(!vs(p,y)){p=j.containerInfo;var N=ru(p);zi(N,y,!1,!1),j.pendingChildren=N,Vn(y),wh(p,N)}},Gn=function(p,y,j,N,F){var G=p.stateNode,re=p.memoizedProps;if((p=vs(p,y))&&re===N)y.stateNode=G;else{var xe=y.stateNode,Ee=_r(wr.current),Fe=null;re!==N&&(Fe=q(xe,j,re,N,F,Ee)),p&&Fe===null?y.stateNode=G:(G=xh(G,Fe,j,re,N,y,p,xe),W(G,j,N,F,Ee)&&Vn(y),y.stateNode=G,p?Vn(y):Ii(G,y,!1,!1))}},Hn=function(p,y,j,N){j!==N?(p=_r(Ni.current),j=_r(wr.current),y.stateNode=Y(N,p,j,y),Vn(y)):y.stateNode=p.stateNode}}else Bi=function(){},Gn=function(){},Hn=function(){};function hr(p,y){if(!Mt)switch(p.tailMode){case"hidden":y=p.tail;for(var j=null;y!==null;)y.alternate!==null&&(j=y),y=y.sibling;j===null?p.tail=null:j.sibling=null;break;case"collapsed":j=p.tail;for(var N=null;j!==null;)j.alternate!==null&&(N=j),j=j.sibling;N===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:N.sibling=null}}function Ft(p){var y=p.alternate!==null&&p.alternate.child===p.child,j=0,N=0;if(y)for(var F=p.child;F!==null;)j|=F.lanes|F.childLanes,N|=F.subtreeFlags&14680064,N|=F.flags&14680064,F.return=p,F=F.sibling;else for(F=p.child;F!==null;)j|=F.lanes|F.childLanes,N|=F.subtreeFlags,N|=F.flags,F.return=p,F=F.sibling;return p.subtreeFlags|=N,p.childLanes=j,y}function ys(p,y,j){var N=y.pendingProps;switch(Wa(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(y),null;case 1:return fn(y.type)&&Zi(),Ft(y),null;case 3:return j=y.stateNode,ss(),Lt(Qn),Lt(En),wu(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(p===null||p.child===null)&&(Go(y)?Vn(y):p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Rr!==null&&(_l(Rr),Rr=null))),Bi(p,y),Ft(y),null;case 5:yu(y),j=_r(Ni.current);var F=y.type;if(p!==null&&y.stateNode!=null)Gn(p,y,F,N,j),p.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!N){if(y.stateNode===null)throw Error(_(166));return Ft(y),null}if(p=_r(wr.current),Go(y)){if(!ye)throw Error(_(175));p=Qi(y.stateNode,y.type,y.memoizedProps,j,p,y,!Xa),y.updateQueue=p,p!==null&&Vn(y)}else{var G=R(F,N,j,p,y);Ii(G,y,!1,!1),y.stateNode=G,W(G,F,N,j,p)&&Vn(y)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Ft(y),null;case 6:if(p&&y.stateNode!=null)Hn(p,y,p.memoizedProps,N);else{if(typeof N!="string"&&y.stateNode===null)throw Error(_(166));if(p=_r(Ni.current),j=_r(wr.current),Go(y)){if(!ye)throw Error(_(176));if(p=y.stateNode,j=y.memoizedProps,(N=bh(p,j,y,!Xa))&&(F=Sn,F!==null))switch(F.tag){case 3:Cf(F.stateNode.containerInfo,p,j,(F.mode&1)!==0);break;case 5:Wt(F.type,F.memoizedProps,F.stateNode,p,j,(F.mode&1)!==0)}N&&Vn(y)}else y.stateNode=Y(N,p,j,y)}return Ft(y),null;case 13:if(Lt(zt),N=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Mt&&Un!==null&&(y.mode&1)!==0&&(y.flags&128)===0)Ih(),ts(),y.flags|=98560,F=!1;else if(F=Go(y),N!==null&&N.dehydrated!==null){if(p===null){if(!F)throw Error(_(318));if(!ye)throw Error(_(344));if(F=y.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(_(317));Sh(F,y)}else ts(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;Ft(y),F=!1}else Rr!==null&&(_l(Rr),Rr=null),F=!0;if(!F)return y.flags&65536?y:null}return(y.flags&128)!==0?(y.lanes=j,y):(j=N!==null,j!==(p!==null&&p.memoizedState!==null)&&j&&(y.child.flags|=8192,(y.mode&1)!==0&&(p===null||(zt.current&1)!==0?Bt===0&&(Bt=3):fa())),y.updateQueue!==null&&(y.flags|=4),Ft(y),null);case 4:return ss(),Bi(p,y),p===null&&pe(y.stateNode.containerInfo),Ft(y),null;case 10:return Ya(y.type._context),Ft(y),null;case 17:return fn(y.type)&&Zi(),Ft(y),null;case 19:if(Lt(zt),F=y.memoizedState,F===null)return Ft(y),null;if(N=(y.flags&128)!==0,G=F.rendering,G===null)if(N)hr(F,!1);else{if(Bt!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(G=$o(p),G!==null){for(y.flags|=128,hr(F,!1),p=G.updateQueue,p!==null&&(y.updateQueue=p,y.flags|=4),y.subtreeFlags=0,p=j,j=y.child;j!==null;)N=j,F=p,N.flags&=14680066,G=N.alternate,G===null?(N.childLanes=0,N.lanes=F,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=G.childLanes,N.lanes=G.lanes,N.child=G.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=G.memoizedProps,N.memoizedState=G.memoizedState,N.updateQueue=G.updateQueue,N.type=G.type,F=G.dependencies,N.dependencies=F===null?null:{lanes:F.lanes,firstContext:F.firstContext}),j=j.sibling;return ft(zt,zt.current&1|2),y.child}p=p.sibling}F.tail!==null&&gn()>co&&(y.flags|=128,N=!0,hr(F,!1),y.lanes=4194304)}else{if(!N)if(p=$o(G),p!==null){if(y.flags|=128,N=!0,p=p.updateQueue,p!==null&&(y.updateQueue=p,y.flags|=4),hr(F,!0),F.tail===null&&F.tailMode==="hidden"&&!G.alternate&&!Mt)return Ft(y),null}else 2*gn()-F.renderingStartTime>co&&j!==1073741824&&(y.flags|=128,N=!0,hr(F,!1),y.lanes=4194304);F.isBackwards?(G.sibling=y.child,y.child=G):(p=F.last,p!==null?p.sibling=G:y.child=G,F.last=G)}return F.tail!==null?(y=F.tail,F.rendering=y,F.tail=y.sibling,F.renderingStartTime=gn(),y.sibling=null,p=zt.current,ft(zt,N?p&1|2:p&1),y):(Ft(y),null);case 22:case 23:return bl(),j=y.memoizedState!==null,p!==null&&p.memoizedState!==null!==j&&(y.flags|=8192),j&&(y.mode&1)!==0?(sn&1073741824)!==0&&(Ft(y),he&&y.subtreeFlags&6&&(y.flags|=8192)):Ft(y),null;case 24:return null;case 25:return null}throw Error(_(156,y.tag))}function ed(p,y){switch(Wa(y),y.tag){case 1:return fn(y.type)&&Zi(),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return ss(),Lt(Qn),Lt(En),wu(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 5:return yu(y),null;case 13:if(Lt(zt),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(_(340));ts()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return Lt(zt),null;case 4:return ss(),null;case 10:return Ya(y.type._context),null;case 22:case 23:return bl(),null;case 24:return null;default:return null}}var na=!1,vn=!1,dr=typeof WeakSet=="function"?WeakSet:Set,ze=null;function St(p,y){var j=p.ref;if(j!==null)if(typeof j=="function")try{j(null)}catch(N){Rt(p,y,N)}else j.current=null}function fr(p,y,j){try{j()}catch(N){Rt(p,y,N)}}var Ru=!1;function td(p,y){for(Z(p.containerInfo),ze=y;ze!==null;)if(p=ze,y=p.child,(p.subtreeFlags&1028)!==0&&y!==null)y.return=p,ze=y;else for(;ze!==null;){p=ze;try{var j=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var N=j.memoizedProps,F=j.memoizedState,G=p.stateNode,re=G.getSnapshotBeforeUpdate(p.elementType===p.type?N:cr(p.type,N),F);G.__reactInternalSnapshotBeforeUpdate=re}break;case 3:he&&Rs(p.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(xe){Rt(p,p.return,xe)}if(y=p.sibling,y!==null){y.return=p.return,ze=y;break}ze=p.return}return j=Ru,Ru=!1,j}function xs(p,y,j){var N=y.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var F=N=N.next;do{if((F.tag&p)===p){var G=F.destroy;F.destroy=void 0,G!==void 0&&fr(y,j,G)}F=F.next}while(F!==N)}}function ra(p,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var j=y=y.next;do{if((j.tag&p)===p){var N=j.create;j.destroy=N()}j=j.next}while(j!==y)}}function cl(p){var y=p.ref;if(y!==null){var j=p.stateNode;switch(p.tag){case 5:p=ue(j);break;default:p=j}typeof y=="function"?y(p):y.current=p}}function io(p){var y=p.alternate;y!==null&&(p.alternate=null,io(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&Ce(y)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Du(p){return p.tag===5||p.tag===3||p.tag===4}function ws(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Du(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function so(p,y,j){var N=p.tag;if(N===5||N===6)p=p.stateNode,y?dn(j,p,y):ot(j,p);else if(N!==4&&(p=p.child,p!==null))for(so(p,y,j),p=p.sibling;p!==null;)so(p,y,j),p=p.sibling}function Fu(p,y,j){var N=p.tag;if(N===5||N===6)p=p.stateNode,y?Nr(j,p,y):nt(j,p);else if(N!==4&&(p=p.child,p!==null))for(Fu(p,y,j),p=p.sibling;p!==null;)Fu(p,y,j),p=p.sibling}var Xt=null,tr=!1;function Fr(p,y,j){for(j=j.child;j!==null;)hl(p,y,j),j=j.sibling}function hl(p,y,j){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Ti,j)}catch{}switch(j.tag){case 5:vn||St(j,y);case 6:if(he){var N=Xt,F=tr;Xt=null,Fr(p,y,j),Xt=N,tr=F,Xt!==null&&(tr?Si(Xt,j.stateNode):Da(Xt,j.stateNode))}else Fr(p,y,j);break;case 18:he&&Xt!==null&&(tr?Ph(Xt,j.stateNode):Th(Xt,j.stateNode));break;case 4:he?(N=Xt,F=tr,Xt=j.stateNode.containerInfo,tr=!0,Fr(p,y,j),Xt=N,tr=F):(ve&&(N=j.stateNode.containerInfo,F=ru(N),jo(N,F)),Fr(p,y,j));break;case 0:case 11:case 14:case 15:if(!vn&&(N=j.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){F=N=N.next;do{var G=F,re=G.destroy;G=G.tag,re!==void 0&&((G&2)!==0||(G&4)!==0)&&fr(j,y,re),F=F.next}while(F!==N)}Fr(p,y,j);break;case 1:if(!vn&&(St(j,y),N=j.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=j.memoizedProps,N.state=j.memoizedState,N.componentWillUnmount()}catch(xe){Rt(j,y,xe)}Fr(p,y,j);break;case 21:Fr(p,y,j);break;case 22:j.mode&1?(vn=(N=vn)||j.memoizedState!==null,Fr(p,y,j),vn=N):Fr(p,y,j);break;default:Fr(p,y,j)}}function _s(p){var y=p.updateQueue;if(y!==null){p.updateQueue=null;var j=p.stateNode;j===null&&(j=p.stateNode=new dr),y.forEach(function(N){var F=Nf.bind(null,p,N);j.has(N)||(j.add(N),N.then(F,F))})}}function Sr(p,y){var j=y.deletions;if(j!==null)for(var N=0;N<j.length;N++){var F=j[N];try{var G=p,re=y;if(he){var xe=re;e:for(;xe!==null;){switch(xe.tag){case 5:Xt=xe.stateNode,tr=!1;break e;case 3:Xt=xe.stateNode.containerInfo,tr=!0;break e;case 4:Xt=xe.stateNode.containerInfo,tr=!0;break e}xe=xe.return}if(Xt===null)throw Error(_(160));hl(G,re,F),Xt=null,tr=!1}else hl(G,re,F);var Ee=F.alternate;Ee!==null&&(Ee.return=null),F.return=null}catch(Fe){Rt(F,y,Fe)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)ao(y,p),y=y.sibling}function ao(p,y){var j=p.alternate,N=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Sr(y,p),gr(p),N&4){try{xs(3,p,p.return),ra(3,p)}catch(Ue){Rt(p,p.return,Ue)}try{xs(5,p,p.return)}catch(Ue){Rt(p,p.return,Ue)}}break;case 1:Sr(y,p),gr(p),N&512&&j!==null&&St(j,j.return);break;case 5:if(Sr(y,p),gr(p),N&512&&j!==null&&St(j,j.return),he){if(p.flags&32){var F=p.stateNode;try{Ms(F)}catch(Ue){Rt(p,p.return,Ue)}}if(N&4&&(F=p.stateNode,F!=null)){var G=p.memoizedProps;if(j=j!==null?j.memoizedProps:G,N=p.type,y=p.updateQueue,p.updateQueue=null,y!==null)try{Bn(F,y,N,j,G,p)}catch(Ue){Rt(p,p.return,Ue)}}}break;case 6:if(Sr(y,p),gr(p),N&4&&he){if(p.stateNode===null)throw Error(_(162));F=p.stateNode,G=p.memoizedProps,j=j!==null?j.memoizedProps:G;try{dt(F,j,G)}catch(Ue){Rt(p,p.return,Ue)}}break;case 3:if(Sr(y,p),gr(p),N&4){if(he&&ye&&j!==null&&j.memoizedState.isDehydrated)try{Ch(y.containerInfo)}catch(Ue){Rt(p,p.return,Ue)}if(ve){F=y.containerInfo,G=y.pendingChildren;try{jo(F,G)}catch(Ue){Rt(p,p.return,Ue)}}}break;case 4:if(Sr(y,p),gr(p),N&4&&ve){G=p.stateNode,F=G.containerInfo,G=G.pendingChildren;try{jo(F,G)}catch(Ue){Rt(p,p.return,Ue)}}break;case 13:Sr(y,p),gr(p),F=p.child,F.flags&8192&&(G=F.memoizedState!==null,F.stateNode.isHidden=G,!G||F.alternate!==null&&F.alternate.memoizedState!==null||(ua=gn())),N&4&&_s(p);break;case 22:var re=j!==null&&j.memoizedState!==null;if(p.mode&1?(vn=(j=vn)||re,Sr(y,p),vn=j):Sr(y,p),gr(p),N&8192){if(j=p.memoizedState!==null,(p.stateNode.isHidden=j)&&!re&&(p.mode&1)!==0)for(ze=p,N=p.child;N!==null;){for(y=ze=N;ze!==null;){re=ze;var xe=re.child;switch(re.tag){case 0:case 11:case 14:case 15:xs(4,re,re.return);break;case 1:St(re,re.return);var Ee=re.stateNode;if(typeof Ee.componentWillUnmount=="function"){var Fe=re,We=re.return;try{var it=Fe;Ee.props=it.memoizedProps,Ee.state=it.memoizedState,Ee.componentWillUnmount()}catch(Ue){Rt(Fe,We,Ue)}}break;case 5:St(re,re.return);break;case 22:if(re.memoizedState!==null){gl(y);continue}}xe!==null?(xe.return=re,ze=xe):gl(y)}N=N.sibling}if(he){e:if(N=null,he)for(y=p;;){if(y.tag===5){if(N===null){N=y;try{F=y.stateNode,j?Fa(F):nu(y.stateNode,y.memoizedProps)}catch(Ue){Rt(p,p.return,Ue)}}}else if(y.tag===6){if(N===null)try{G=y.stateNode,j?tu(G):As(G,y.memoizedProps)}catch(Ue){Rt(p,p.return,Ue)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===p)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break e;for(;y.sibling===null;){if(y.return===null||y.return===p)break e;N===y&&(N=null),y=y.return}N===y&&(N=null),y.sibling.return=y.return,y=y.sibling}}}break;case 19:Sr(y,p),gr(p),N&4&&_s(p);break;case 21:break;default:Sr(y,p),gr(p)}}function gr(p){var y=p.flags;if(y&2){try{if(he){e:{for(var j=p.return;j!==null;){if(Du(j)){var N=j;break e}j=j.return}throw Error(_(160))}switch(N.tag){case 5:var F=N.stateNode;N.flags&32&&(Ms(F),N.flags&=-33);var G=ws(p);Fu(p,G,F);break;case 3:case 4:var re=N.stateNode.containerInfo,xe=ws(p);so(p,xe,re);break;default:throw Error(_(161))}}}catch(Ee){Rt(p,p.return,Ee)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function ia(p,y,j){ze=p,dl(p)}function dl(p,y,j){for(var N=(p.mode&1)!==0;ze!==null;){var F=ze,G=F.child;if(F.tag===22&&N){var re=F.memoizedState!==null||na;if(!re){var xe=F.alternate,Ee=xe!==null&&xe.memoizedState!==null||vn;xe=na;var Fe=vn;if(na=re,(vn=Ee)&&!Fe)for(ze=F;ze!==null;)re=ze,Ee=re.child,re.tag===22&&re.memoizedState!==null?pl(F):Ee!==null?(Ee.return=re,ze=Ee):pl(F);for(;G!==null;)ze=G,dl(G),G=G.sibling;ze=F,na=xe,vn=Fe}fl(p)}else(F.subtreeFlags&8772)!==0&&G!==null?(G.return=F,ze=G):fl(p)}}function fl(p){for(;ze!==null;){var y=ze;if((y.flags&8772)!==0){var j=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:vn||ra(5,y);break;case 1:var N=y.stateNode;if(y.flags&4&&!vn)if(j===null)N.componentDidMount();else{var F=y.elementType===y.type?j.memoizedProps:cr(y.type,j.memoizedProps);N.componentDidUpdate(F,j.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var G=y.updateQueue;G!==null&&Hh(y,G,N);break;case 3:var re=y.updateQueue;if(re!==null){if(j=null,y.child!==null)switch(y.child.tag){case 5:j=ue(y.child.stateNode);break;case 1:j=y.child.stateNode}Hh(y,re,j)}break;case 5:var xe=y.stateNode;j===null&&y.flags&4&&ut(xe,y.type,y.memoizedProps,y);break;case 6:break;case 4:break;case 12:break;case 13:if(ye&&y.memoizedState===null){var Ee=y.alternate;if(Ee!==null){var Fe=Ee.memoizedState;if(Fe!==null){var We=Fe.dehydrated;We!==null&&kh(We)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}vn||y.flags&512&&cl(y)}catch(it){Rt(y,y.return,it)}}if(y===p){ze=null;break}if(j=y.sibling,j!==null){j.return=y.return,ze=j;break}ze=y.return}}function gl(p){for(;ze!==null;){var y=ze;if(y===p){ze=null;break}var j=y.sibling;if(j!==null){j.return=y.return,ze=j;break}ze=y.return}}function pl(p){for(;ze!==null;){var y=ze;try{switch(y.tag){case 0:case 11:case 15:var j=y.return;try{ra(4,y)}catch(Ee){Rt(y,j,Ee)}break;case 1:var N=y.stateNode;if(typeof N.componentDidMount=="function"){var F=y.return;try{N.componentDidMount()}catch(Ee){Rt(y,F,Ee)}}var G=y.return;try{cl(y)}catch(Ee){Rt(y,G,Ee)}break;case 5:var re=y.return;try{cl(y)}catch(Ee){Rt(y,re,Ee)}}}catch(Ee){Rt(y,y.return,Ee)}if(y===p){ze=null;break}var xe=y.sibling;if(xe!==null){xe.return=y.return,ze=xe;break}ze=y.return}}var fi=0,Wn=1,Yr=2,sa=3,oo=4;if(typeof Symbol=="function"&&Symbol.for){var pr=Symbol.for;fi=pr("selector.component"),Wn=pr("selector.has_pseudo_class"),Yr=pr("selector.role"),sa=pr("selector.test_id"),oo=pr("selector.text")}function qr(p){var y=Oe(p);if(y!=null){if(typeof y.memoizedProps["data-testname"]!="string")throw Error(_(364));return y}if(p=je(p),p===null)throw Error(_(362));return p.stateNode.current}function lo(p,y){switch(y.$$typeof){case fi:if(p.type===y.value)return!0;break;case Wn:e:{y=y.value,p=[p,0];for(var j=0;j<p.length;){var N=p[j++],F=p[j++],G=y[F];if(N.tag!==5||!_e(N)){for(;G!=null&&lo(N,G);)F++,G=y[F];if(F===y.length){y=!0;break e}else for(N=N.child;N!==null;)p.push(N,F),N=N.sibling}}y=!1}return y;case Yr:if(p.tag===5&&Ie(p.stateNode,y.value))return!0;break;case oo:if((p.tag===5||p.tag===6)&&(p=Le(p),p!==null&&0<=p.indexOf(y.value)))return!0;break;case sa:if(p.tag===5&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===y.value.toLowerCase()))return!0;break;default:throw Error(_(365))}return!1}function ml(p){switch(p.$$typeof){case fi:return"<"+(M(p.value)||"Unknown")+">";case Wn:return":has("+(ml(p)||"")+")";case Yr:return'[role="'+p.value+'"]';case oo:return'"'+p.value+'"';case sa:return'[data-testname="'+p.value+'"]';default:throw Error(_(365))}}function Kr(p,y){var j=[];p=[p,0];for(var N=0;N<p.length;){var F=p[N++],G=p[N++],re=y[G];if(F.tag!==5||!_e(F)){for(;re!=null&&lo(F,re);)G++,re=y[G];if(G===y.length)j.push(F);else for(F=F.child;F!==null;)p.push(F,G),F=F.sibling}}return j}function $r(p,y){if(!Se)throw Error(_(363));p=qr(p),p=Kr(p,y),y=[],p=Array.from(p);for(var j=0;j<p.length;){var N=p[j++];if(N.tag===5)_e(N)||y.push(N.stateNode);else for(N=N.child;N!==null;)p.push(N),N=N.sibling}return y}var vl=Math.ceil,uo=T.ReactCurrentDispatcher,aa=T.ReactCurrentOwner,Ut=T.ReactCurrentBatchConfig,lt=0,Pt=null,It=null,Yt=0,sn=0,Ui=_n(0),Bt=0,oa=null,gi=0,Ot=0,la=0,bs=null,Nn=null,ua=0,co=1/0,Xn=null;function kt(){co=gn()+500}var Vt=!1,$t=null,Ir=null,Vi=!1,Cr=null,yl=0,Qt=0,ho=null,ca=-1,ha=0;function At(){return(lt&6)!==0?gn():ca!==-1?ca:ca=gn()}function an(p){return(p.mode&1)===0?1:(lt&2)!==0&&Yt!==0?Yt&-Yt:Ef.transition!==null?(ha===0&&(ha=Do()),ha):(p=gt,p!==0?p:de())}function Ln(p,y,j,N){if(50<Qt)throw Qt=0,ho=null,Error(_(185));xr(p,j,N),((lt&2)===0||p!==Pt)&&(p===Pt&&((lt&2)===0&&(Ot|=j),Bt===4&&pi(p,Yt)),Mn(p,N),j===1&&lt===0&&(y.mode&1)===0&&(kt(),Hs&&bn()))}function Mn(p,y){var j=p.callbackNode;Nh(p,y);var N=zs(p,p===Pt?Yt:0);if(N===0)j!==null&&Lh(j),p.callbackNode=null,p.callbackPriority=0;else if(y=N&-N,p.callbackPriority!==y){if(j!=null&&Lh(j),y===1)p.tag===0?Ah(Iu.bind(null,p)):Uo(Iu.bind(null,p)),te?fe(function(){(lt&6)===0&&bn()}):Vr(Fo,bn),j=null;else{switch(Vs(N)){case 1:j=Fo;break;case 4:j=Io;break;case 16:j=Bo;break;case 536870912:j=Pf;break;default:j=Bo}j=Wu(j,xl.bind(null,p))}p.callbackPriority=y,p.callbackNode=j}}function xl(p,y){if(ca=-1,ha=0,(lt&6)!==0)throw Error(_(327));var j=p.callbackNode;if(mi()&&p.callbackNode!==j)return null;var N=zs(p,p===Pt?Yt:0);if(N===0)return null;if((N&30)!==0||(N&p.expiredLanes)!==0||y)y=Ss(p,N);else{y=N;var F=lt;lt|=2;var G=zu();(Pt!==p||Yt!==y)&&(Xn=null,kt(),Gi(p,y));do try{Uu();break}catch(xe){da(p,xe)}while(!0);gu(),uo.current=G,lt=F,It!==null?y=0:(Pt=null,Yt=0,y=Bt)}if(y!==0){if(y===2&&(F=Ro(p),F!==0&&(N=F,y=wl(p,F))),y===1)throw j=oa,Gi(p,0),pi(p,N),Mn(p,gn()),j;if(y===6)pi(p,N);else{if(F=p.current.alternate,(N&30)===0&&!nd(F)&&(y=Ss(p,N),y===2&&(G=Ro(p),G!==0&&(N=G,y=wl(p,G))),y===1))throw j=oa,Gi(p,0),pi(p,N),Mn(p,gn()),j;switch(p.finishedWork=F,p.finishedLanes=N,y){case 0:case 1:throw Error(_(345));case 2:Hi(p,Nn,Xn);break;case 3:if(pi(p,N),(N&130023424)===N&&(y=ua+500-gn(),10<y)){if(zs(p,0)!==0)break;if(F=p.suspendedLanes,(F&N)!==N){At(),p.pingedLanes|=p.suspendedLanes&F;break}p.timeoutHandle=I(Hi.bind(null,p,Nn,Xn),y);break}Hi(p,Nn,Xn);break;case 4:if(pi(p,N),(N&4194240)===N)break;for(y=p.eventTimes,F=-1;0<N;){var re=31-sr(N);G=1<<re,re=y[re],re>F&&(F=re),N&=~G}if(N=F,N=gn()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*vl(N/1960))-N,10<N){p.timeoutHandle=I(Hi.bind(null,p,Nn,Xn),N);break}Hi(p,Nn,Xn);break;case 5:Hi(p,Nn,Xn);break;default:throw Error(_(329))}}}return Mn(p,gn()),p.callbackNode===j?xl.bind(null,p):null}function wl(p,y){var j=bs;return p.current.memoizedState.isDehydrated&&(Gi(p,y).flags|=256),p=Ss(p,y),p!==2&&(y=Nn,Nn=j,y!==null&&_l(y)),p}function _l(p){Nn===null?Nn=p:Nn.push.apply(Nn,p)}function nd(p){for(var y=p;;){if(y.flags&16384){var j=y.updateQueue;if(j!==null&&(j=j.stores,j!==null))for(var N=0;N<j.length;N++){var F=j[N],G=F.getSnapshot;F=F.value;try{if(!Lr(G(),F))return!1}catch{return!1}}}if(j=y.child,y.subtreeFlags&16384&&j!==null)j.return=y,y=j;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function pi(p,y){for(y&=~la,y&=~Ot,p.suspendedLanes|=y,p.pingedLanes&=~y,p=p.expirationTimes;0<y;){var j=31-sr(y),N=1<<j;p[j]=-1,y&=~N}}function Iu(p){if((lt&6)!==0)throw Error(_(327));mi();var y=zs(p,0);if((y&1)===0)return Mn(p,gn()),null;var j=Ss(p,y);if(p.tag!==0&&j===2){var N=Ro(p);N!==0&&(y=N,j=wl(p,N))}if(j===1)throw j=oa,Gi(p,0),pi(p,y),Mn(p,gn()),j;if(j===6)throw Error(_(345));return p.finishedWork=p.current.alternate,p.finishedLanes=y,Hi(p,Nn,Xn),Mn(p,gn()),null}function Bu(p){Cr!==null&&Cr.tag===0&&(lt&6)===0&&mi();var y=lt;lt|=1;var j=Ut.transition,N=gt;try{if(Ut.transition=null,gt=1,p)return p()}finally{gt=N,Ut.transition=j,lt=y,(lt&6)===0&&bn()}}function bl(){sn=Ui.current,Lt(Ui)}function Gi(p,y){p.finishedWork=null,p.finishedLanes=0;var j=p.timeoutHandle;if(j!==ne&&(p.timeoutHandle=ne,K(j)),It!==null)for(j=It.return;j!==null;){var N=j;switch(Wa(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&Zi();break;case 3:ss(),Lt(Qn),Lt(En),wu();break;case 5:yu(N);break;case 4:ss();break;case 13:Lt(zt);break;case 19:Lt(zt);break;case 10:Ya(N.type._context);break;case 22:case 23:bl()}j=j.return}if(Pt=p,It=p=Wi(p.current,null),Yt=sn=y,Bt=0,oa=null,la=Ot=gi=0,Nn=bs=null,Ei!==null){for(y=0;y<Ei.length;y++)if(j=Ei[y],N=j.interleaved,N!==null){j.interleaved=null;var F=N.next,G=j.pending;if(G!==null){var re=G.next;G.next=F,N.next=re}j.pending=N}Ei=null}return p}function da(p,y){do{var j=It;try{if(gu(),er.current=ds,$s){for(var N=Dt.memoizedState;N!==null;){var F=N.queue;F!==null&&(F.pending=null),N=N.next}$s=!1}if(Li=0,nn=Kt=Dt=null,Ka=!1,$a=0,aa.current=null,j===null||j.return===null){Bt=1,oa=y,It=null;break}e:{var G=p,re=j.return,xe=j,Ee=y;if(y=Yt,xe.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Fe=Ee,We=xe,it=We.tag;if((We.mode&1)===0&&(it===0||it===11||it===15)){var Ue=We.alternate;Ue?(We.updateQueue=Ue.updateQueue,We.memoizedState=Ue.memoizedState,We.lanes=Ue.lanes):(We.updateQueue=null,We.memoizedState=null)}var Nt=Jh(re);if(Nt!==null){Nt.flags&=-257,Ri(Nt,re,xe,G,y),Nt.mode&1&&Qh(G,Fe,y),y=Nt,Ee=Fe;var Ct=y.updateQueue;if(Ct===null){var Yn=new Set;Yn.add(Ee),y.updateQueue=Yn}else Ct.add(Ee);break e}else{if((y&1)===0){Qh(G,Fe,y),fa();break e}Ee=Error(_(426))}}else if(Mt&&xe.mode&1){var Qr=Jh(re);if(Qr!==null){(Qr.flags&65536)===0&&(Qr.flags|=256),Ri(Qr,re,xe,G,y),du(fs(Ee,xe));break e}}G=Ee=fs(Ee,xe),Bt!==4&&(Bt=2),bs===null?bs=[G]:bs.push(G),G=re;do{switch(G.tag){case 3:G.flags|=65536,y&=-y,G.lanes|=y;var Te=Hr(G,Ee,y);qs(G,Te);break e;case 1:xe=Ee;var we=G.type,Ne=G.stateNode;if((G.flags&128)===0&&(typeof we.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(Ir===null||!Ir.has(Ne)))){G.flags|=65536,y&=-y,G.lanes|=y;var Ve=al(G,xe,y);qs(G,Ve);break e}}G=G.return}while(G!==null)}Gu(j)}catch(Qe){y=Qe,It===j&&j!==null&&(It=j=j.return);continue}break}while(!0)}function zu(){var p=uo.current;return uo.current=ds,p===null?ds:p}function fa(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Pt===null||(gi&268435455)===0&&(Ot&268435455)===0||pi(Pt,Yt)}function Ss(p,y){var j=lt;lt|=2;var N=zu();(Pt!==p||Yt!==y)&&(Xn=null,Gi(p,y));do try{rd();break}catch(F){da(p,F)}while(!0);if(gu(),lt=j,uo.current=N,It!==null)throw Error(_(261));return Pt=null,Yt=0,Bt}function rd(){for(;It!==null;)Vu(It)}function Uu(){for(;It!==null&&!Mh();)Vu(It)}function Vu(p){var y=ld(p.alternate,p,sn);p.memoizedProps=p.pendingProps,y===null?Gu(p):It=y,aa.current=null}function Gu(p){var y=p;do{var j=y.alternate;if(p=y.return,(y.flags&32768)===0){if(j=ys(j,y,sn),j!==null){It=j;return}}else{if(j=ed(j,y),j!==null){j.flags&=32767,It=j;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Bt=6,It=null;return}}if(y=y.sibling,y!==null){It=y;return}It=y=p}while(y!==null);Bt===0&&(Bt=5)}function Hi(p,y,j){var N=gt,F=Ut.transition;try{Ut.transition=null,gt=1,id(p,y,j,N)}finally{Ut.transition=F,gt=N}return null}function id(p,y,j,N){do mi();while(Cr!==null);if((lt&6)!==0)throw Error(_(327));j=p.finishedWork;var F=p.finishedLanes;if(j===null)return null;if(p.finishedWork=null,p.finishedLanes=0,j===p.current)throw Error(_(177));p.callbackNode=null,p.callbackPriority=0;var G=j.lanes|j.childLanes;if(ki(p,G),p===Pt&&(It=Pt=null,Yt=0),(j.subtreeFlags&2064)===0&&(j.flags&2064)===0||Vi||(Vi=!0,Wu(Bo,function(){return mi(),null})),G=(j.flags&15990)!==0,(j.subtreeFlags&15990)!==0||G){G=Ut.transition,Ut.transition=null;var re=gt;gt=1;var xe=lt;lt|=4,aa.current=null,td(p,j),ao(j,p),$(p.containerInfo),p.current=j,ia(j),Va(),lt=xe,gt=re,Ut.transition=G}else p.current=j;if(Vi&&(Vi=!1,Cr=p,yl=F),G=p.pendingLanes,G===0&&(Ir=null),Gs(j.stateNode),Mn(p,gn()),y!==null)for(N=p.onRecoverableError,j=0;j<y.length;j++)F=y[j],N(F.value,{componentStack:F.stack,digest:F.digest});if(Vt)throw Vt=!1,p=$t,$t=null,p;return(yl&1)!==0&&p.tag!==0&&mi(),G=p.pendingLanes,(G&1)!==0?p===ho?Qt++:(Qt=0,ho=p):Qt=0,bn(),null}function mi(){if(Cr!==null){var p=Vs(yl),y=Ut.transition,j=gt;try{if(Ut.transition=null,gt=16>p?16:p,Cr===null)var N=!1;else{if(p=Cr,Cr=null,yl=0,(lt&6)!==0)throw Error(_(331));var F=lt;for(lt|=4,ze=p.current;ze!==null;){var G=ze,re=G.child;if((ze.flags&16)!==0){var xe=G.deletions;if(xe!==null){for(var Ee=0;Ee<xe.length;Ee++){var Fe=xe[Ee];for(ze=Fe;ze!==null;){var We=ze;switch(We.tag){case 0:case 11:case 15:xs(8,We,G)}var it=We.child;if(it!==null)it.return=We,ze=it;else for(;ze!==null;){We=ze;var Ue=We.sibling,Nt=We.return;if(io(We),We===Fe){ze=null;break}if(Ue!==null){Ue.return=Nt,ze=Ue;break}ze=Nt}}}var Ct=G.alternate;if(Ct!==null){var Yn=Ct.child;if(Yn!==null){Ct.child=null;do{var Qr=Yn.sibling;Yn.sibling=null,Yn=Qr}while(Yn!==null)}}ze=G}}if((G.subtreeFlags&2064)!==0&&re!==null)re.return=G,ze=re;else e:for(;ze!==null;){if(G=ze,(G.flags&2048)!==0)switch(G.tag){case 0:case 11:case 15:xs(9,G,G.return)}var Te=G.sibling;if(Te!==null){Te.return=G.return,ze=Te;break e}ze=G.return}}var we=p.current;for(ze=we;ze!==null;){re=ze;var Ne=re.child;if((re.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=re,ze=Ne;else e:for(re=we;ze!==null;){if(xe=ze,(xe.flags&2048)!==0)try{switch(xe.tag){case 0:case 11:case 15:ra(9,xe)}}catch(Qe){Rt(xe,xe.return,Qe)}if(xe===re){ze=null;break e}var Ve=xe.sibling;if(Ve!==null){Ve.return=xe.return,ze=Ve;break e}ze=xe.return}}if(lt=F,bn(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Ti,p)}catch{}N=!0}return N}finally{gt=j,Ut.transition=y}}return!1}function Hu(p,y,j){y=fs(j,y),y=Hr(p,y,1),p=ui(p,y,1),y=At(),p!==null&&(xr(p,1,y),Mn(p,y))}function Rt(p,y,j){if(p.tag===3)Hu(p,p,j);else for(;y!==null;){if(y.tag===3){Hu(y,p,j);break}else if(y.tag===1){var N=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Ir===null||!Ir.has(N))){p=fs(j,p),p=al(y,p,1),y=ui(y,p,1),p=At(),y!==null&&(xr(y,1,p),Mn(y,p));break}}y=y.return}}function sd(p,y,j){var N=p.pingCache;N!==null&&N.delete(y),y=At(),p.pingedLanes|=p.suspendedLanes&j,Pt===p&&(Yt&j)===j&&(Bt===4||Bt===3&&(Yt&130023424)===Yt&&500>gn()-ua?Gi(p,0):la|=j),Mn(p,y)}function ad(p,y){y===0&&((p.mode&1)===0?y=1:(y=Ua,Ua<<=1,(Ua&130023424)===0&&(Ua=4194304)));var j=At();p=Dr(p,y),p!==null&&(xr(p,y,j),Mn(p,j))}function od(p){var y=p.memoizedState,j=0;y!==null&&(j=y.retryLane),ad(p,j)}function Nf(p,y){var j=0;switch(p.tag){case 13:var N=p.stateNode,F=p.memoizedState;F!==null&&(j=F.retryLane);break;case 19:N=p.stateNode;break;default:throw Error(_(314))}N!==null&&N.delete(y),ad(p,j)}var ld;ld=function(p,y,j){if(p!==null)if(p.memoizedProps!==y.pendingProps||Qn.current)rn=!0;else{if((p.lanes&j)===0&&(y.flags&128)===0)return rn=!1,Fi(p,y,j);rn=(p.flags&131072)!==0}else rn=!1,Mt&&(y.flags&1048576)!==0&&Rh(y,es,y.index);switch(y.lanes=0,y.tag){case 2:var N=y.type;ro(p,y),p=y.pendingProps;var F=si(y,En.current);Ys(y,j),F=Qa(null,y,N,p,F,j);var G=Qo();return y.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,fn(N)?(G=!0,Is(y)):G=!1,y.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,mu(y),F.updater=eo,y.stateNode=F,F._reactInternals=y,Gr(y,N,p,j),y=jn(null,y,N,!0,G,j)):(y.tag=0,Mt&&G&&Ha(y),mn(null,y,F,j),y=y.child),y;case 16:N=y.elementType;e:{switch(ro(p,y),p=y.pendingProps,F=N._init,N=F(N._payload),y.type=N,F=y.tag=Lf(N),p=cr(N,p),F){case 0:y=Wr(null,y,N,p,j);break e;case 1:y=kn(null,y,N,p,j);break e;case 11:y=ol(null,y,N,p,j);break e;case 14:y=gs(null,y,N,cr(N.type,p),j);break e}throw Error(_(306,N,""))}return y;case 0:return N=y.type,F=y.pendingProps,F=y.elementType===N?F:cr(N,F),Wr(p,y,N,F,j);case 1:return N=y.type,F=y.pendingProps,F=y.elementType===N?F:cr(N,F),kn(p,y,N,F,j);case 3:e:{if(Di(y),p===null)throw Error(_(387));N=y.pendingProps,G=y.memoizedState,F=G.element,Gh(p,y),ji(y,N,null,j);var re=y.memoizedState;if(N=re.element,ye&&G.isDehydrated)if(G={element:N,isDehydrated:!1,cache:re.cache,pendingSuspenseBoundaries:re.pendingSuspenseBoundaries,transitions:re.transitions},y.updateQueue.baseState=G,y.memoizedState=G,y.flags&256){F=fs(Error(_(423)),y),y=ps(p,y,N,j,F);break e}else if(N!==F){F=fs(Error(_(424)),y),y=ps(p,y,N,j,F);break e}else for(ye&&(Un=wf(y.stateNode.containerInfo),Sn=y,Mt=!0,Rr=null,Xa=!1),j=Uh(y,null,N,j),y.child=j;j;)j.flags=j.flags&-3|4096,j=j.sibling;else{if(ts(),N===F){y=di(p,y,j);break e}mn(p,y,N,j)}y=y.child}return y;case 5:return vu(y),p===null&&hu(y),N=y.type,F=y.pendingProps,G=p!==null?p.memoizedProps:null,re=F.children,oe(N,F)?re=null:G!==null&&oe(N,G)&&(y.flags|=32),Tt(p,y),mn(p,y,re,j),y.child;case 6:return p===null&&hu(y),null;case 13:return Au(p,y,j);case 4:return Ko(y,y.stateNode.containerInfo),N=y.pendingProps,p===null?y.child=rs(y,null,N,j):mn(p,y,N,j),y.child;case 11:return N=y.type,F=y.pendingProps,F=y.elementType===N?F:cr(N,F),ol(p,y,N,F,j);case 7:return mn(p,y,y.pendingProps,j),y.child;case 8:return mn(p,y,y.pendingProps.children,j),y.child;case 12:return mn(p,y,y.pendingProps.children,j),y.child;case 10:e:{if(N=y.type._context,F=y.pendingProps,G=y.memoizedProps,re=F.value,Vh(y,N,re),G!==null)if(Lr(G.value,re)){if(G.children===F.children&&!Qn.current){y=di(p,y,j);break e}}else for(G=y.child,G!==null&&(G.return=y);G!==null;){var xe=G.dependencies;if(xe!==null){re=G.child;for(var Ee=xe.firstContext;Ee!==null;){if(Ee.context===N){if(G.tag===1){Ee=li(-1,j&-j),Ee.tag=2;var Fe=G.updateQueue;if(Fe!==null){Fe=Fe.shared;var We=Fe.pending;We===null?Ee.next=Ee:(Ee.next=We.next,We.next=Ee),Fe.pending=Ee}}G.lanes|=j,Ee=G.alternate,Ee!==null&&(Ee.lanes|=j),is(G.return,j,y),xe.lanes|=j;break}Ee=Ee.next}}else if(G.tag===10)re=G.type===y.type?null:G.child;else if(G.tag===18){if(re=G.return,re===null)throw Error(_(341));re.lanes|=j,xe=re.alternate,xe!==null&&(xe.lanes|=j),is(re,j,y),re=G.sibling}else re=G.child;if(re!==null)re.return=G;else for(re=G;re!==null;){if(re===y){re=null;break}if(G=re.sibling,G!==null){G.return=re.return,re=G;break}re=re.return}G=re}mn(p,y,F.children,j),y=y.child}return y;case 9:return F=y.type,N=y.pendingProps.children,Ys(y,j),F=or(F),N=N(F),y.flags|=1,mn(p,y,N,j),y.child;case 14:return N=y.type,F=cr(N,y.pendingProps),F=cr(N.type,F),gs(p,y,N,F,j);case 15:return hi(p,y,y.type,y.pendingProps,j);case 17:return N=y.type,F=y.pendingProps,F=y.elementType===N?F:cr(N,F),ro(p,y),y.tag=1,fn(N)?(p=!0,Is(y)):p=!1,Ys(y,j),$h(y,N,F),Gr(y,N,F,j),jn(null,y,N,!0,p,j);case 19:return ul(p,y,j);case 22:return jt(p,y,j)}throw Error(_(156,y.tag))};function Wu(p,y){return Vr(p,y)}function ud(p,y,j,N){this.tag=p,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(p,y,j,N){return new ud(p,y,j,N)}function ga(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Lf(p){if(typeof p=="function")return ga(p)?1:0;if(p!=null){if(p=p.$$typeof,p===o)return 11;if(p===f)return 14}return 2}function Wi(p,y){var j=p.alternate;return j===null?(j=mr(p.tag,y,p.key,p.mode),j.elementType=p.elementType,j.type=p.type,j.stateNode=p.stateNode,j.alternate=p,p.alternate=j):(j.pendingProps=y,j.type=p.type,j.flags=0,j.subtreeFlags=0,j.deletions=null),j.flags=p.flags&14680064,j.childLanes=p.childLanes,j.lanes=p.lanes,j.child=p.child,j.memoizedProps=p.memoizedProps,j.memoizedState=p.memoizedState,j.updateQueue=p.updateQueue,y=p.dependencies,j.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},j.sibling=p.sibling,j.index=p.index,j.ref=p.ref,j}function Sl(p,y,j,N,F,G){var re=2;if(N=p,typeof p=="function")ga(p)&&(re=1);else if(typeof p=="string")re=5;else e:switch(p){case r:return Tn(j.children,F,G,y);case c:re=8,F|=8;break;case l:return p=mr(12,j,y,F|2),p.elementType=l,p.lanes=G,p;case a:return p=mr(13,j,y,F),p.elementType=a,p.lanes=G,p;case m:return p=mr(19,j,y,F),p.elementType=m,p.lanes=G,p;case w:return pa(j,F,G,y);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case i:re=10;break e;case s:re=9;break e;case o:re=11;break e;case f:re=14;break e;case g:re=16,N=null;break e}throw Error(_(130,p==null?p:typeof p,""))}return y=mr(re,j,y,F),y.elementType=p,y.type=N,y.lanes=G,y}function Tn(p,y,j,N){return p=mr(7,p,N,y),p.lanes=j,p}function pa(p,y,j,N){return p=mr(22,p,N,y),p.elementType=w,p.lanes=j,p.stateNode={isHidden:!1},p}function ma(p,y,j){return p=mr(6,p,null,y),p.lanes=j,p}function Cl(p,y,j){return y=mr(4,p.children!==null?p.children:[],p.key,y),y.lanes=j,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}function cd(p,y,j,N,F){this.tag=y,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ne,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Us(0),this.expirationTimes=Us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.identifierPrefix=N,this.onRecoverableError=F,ye&&(this.mutableSourceEagerHydrationData=null)}function Xu(p,y,j,N,F,G,re,xe,Ee){return p=new cd(p,y,j,xe,Ee),y===1?(y=1,G===!0&&(y|=8)):y=0,G=mr(3,null,null,y),p.current=G,G.stateNode=p,G.memoizedState={element:N,isDehydrated:j,cache:null,transitions:null,pendingSuspenseBoundaries:null},mu(G),p}function kl(p){if(!p)return Ci;p=p._reactInternals;e:{if(B(p)!==p||p.tag!==1)throw Error(_(170));var y=p;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(fn(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(_(171))}if(p.tag===1){var j=p.type;if(fn(j))return jh(p,j,y)}return y}function Cs(p){var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(_(188)):(p=Object.keys(p).join(","),Error(_(268,p)));return p=Q(y),p===null?null:p.stateNode}function Tl(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var j=p.retryLane;p.retryLane=j!==0&&j<y?j:y}}function va(p,y){Tl(p,y),(p=p.alternate)&&Tl(p,y)}function Mf(p){return p=Q(p),p===null?null:p.stateNode}function hd(){return null}return h.attemptContinuousHydration=function(p){if(p.tag===13){var y=Dr(p,134217728);if(y!==null){var j=At();Ln(y,p,134217728,j)}va(p,134217728)}},h.attemptDiscreteHydration=function(p){if(p.tag===13){var y=Dr(p,1);if(y!==null){var j=At();Ln(y,p,1,j)}va(p,1)}},h.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var y=an(p),j=Dr(p,y);if(j!==null){var N=At();Ln(j,p,y,N)}va(p,y)}},h.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var y=p.stateNode;if(y.current.memoizedState.isDehydrated){var j=Bs(y.pendingLanes);j!==0&&(Ur(y,j|1),Mn(y,gn()),(lt&6)===0&&(kt(),bn()))}break;case 13:Bu(function(){var N=Dr(p,1);if(N!==null){var F=At();Ln(N,p,1,F)}}),va(p,1)}},h.batchedUpdates=function(p,y){var j=lt;lt|=1;try{return p(y)}finally{lt=j,lt===0&&(kt(),Hs&&bn())}},h.createComponentSelector=function(p){return{$$typeof:fi,value:p}},h.createContainer=function(p,y,j,N,F,G,re){return Xu(p,y,!1,null,j,N,F,G,re)},h.createHasPseudoClassSelector=function(p){return{$$typeof:Wn,value:p}},h.createHydrationContainer=function(p,y,j,N,F,G,re,xe,Ee){return p=Xu(j,N,!0,p,F,G,re,xe,Ee),p.context=kl(null),j=p.current,N=At(),F=an(j),G=li(N,F),G.callback=y??null,ui(j,G,F),p.current.lanes=F,xr(p,F,N),Mn(p,N),p},h.createPortal=function(p,y,j){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:N==null?null:""+N,children:p,containerInfo:y,implementation:j}},h.createRoleSelector=function(p){return{$$typeof:Yr,value:p}},h.createTestNameSelector=function(p){return{$$typeof:sa,value:p}},h.createTextSelector=function(p){return{$$typeof:oo,value:p}},h.deferredUpdates=function(p){var y=gt,j=Ut.transition;try{return Ut.transition=null,gt=16,p()}finally{gt=y,Ut.transition=j}},h.discreteUpdates=function(p,y,j,N,F){var G=gt,re=Ut.transition;try{return Ut.transition=null,gt=1,p(y,j,N,F)}finally{gt=G,Ut.transition=re,lt===0&&kt()}},h.findAllNodes=$r,h.findBoundingRects=function(p,y){if(!Se)throw Error(_(363));y=$r(p,y),p=[];for(var j=0;j<y.length;j++)p.push(Me(y[j]));for(y=p.length-1;0<y;y--){j=p[y];for(var N=j.x,F=N+j.width,G=j.y,re=G+j.height,xe=y-1;0<=xe;xe--)if(y!==xe){var Ee=p[xe],Fe=Ee.x,We=Fe+Ee.width,it=Ee.y,Ue=it+Ee.height;if(N>=Fe&&G>=it&&F<=We&&re<=Ue){p.splice(y,1);break}else if(N!==Fe||j.width!==Ee.width||Ue<G||it>re){if(!(G!==it||j.height!==Ee.height||We<N||Fe>F)){Fe>N&&(Ee.width+=Fe-N,Ee.x=N),We<F&&(Ee.width=F-Fe),p.splice(y,1);break}}else{it>G&&(Ee.height+=it-G,Ee.y=G),Ue<re&&(Ee.height=re-it),p.splice(y,1);break}}}return p},h.findHostInstance=Cs,h.findHostInstanceWithNoPortals=function(p){return p=H(p),p=p!==null?se(p):null,p===null?null:p.stateNode},h.findHostInstanceWithWarning=function(p){return Cs(p)},h.flushControlled=function(p){var y=lt;lt|=1;var j=Ut.transition,N=gt;try{Ut.transition=null,gt=1,p()}finally{gt=N,Ut.transition=j,lt=y,lt===0&&(kt(),bn())}},h.flushPassiveEffects=mi,h.flushSync=Bu,h.focusWithin=function(p,y){if(!Se)throw Error(_(363));for(p=qr(p),y=Kr(p,y),y=Array.from(y),p=0;p<y.length;){var j=y[p++];if(!_e(j)){if(j.tag===5&&He(j.stateNode))return!0;for(j=j.child;j!==null;)y.push(j),j=j.sibling}}return!1},h.getCurrentUpdatePriority=function(){return gt},h.getFindAllNodesFailureDescription=function(p,y){if(!Se)throw Error(_(363));var j=0,N=[];p=[qr(p),0];for(var F=0;F<p.length;){var G=p[F++],re=p[F++],xe=y[re];if((G.tag!==5||!_e(G))&&(lo(G,xe)&&(N.push(ml(xe)),re++,re>j&&(j=re)),re<y.length))for(G=G.child;G!==null;)p.push(G,re),G=G.sibling}if(j<y.length){for(p=[];j<y.length;j++)p.push(ml(y[j]));return`findAllNodes was able to match part of the selector:
  `+(N.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},h.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return ue(p.child.stateNode);default:return p.child.stateNode}},h.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:Mf,findFiberByHostInstance:p.findFiberByHostInstance||hd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(y.isDisabled||!y.supportsFiber)p=!0;else{try{Ti=y.inject(p),Jn=y}catch{}p=!!y.checkDCE}}return p},h.isAlreadyRendering=function(){return!1},h.observeVisibleRects=function(p,y,j,N){if(!Se)throw Error(_(363));p=$r(p,y);var F=Je(p,j,N).disconnect;return{disconnect:function(){F()}}},h.registerMutableSourceForHydration=function(p,y){var j=y._getVersion;j=j(y._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[y,j]:p.mutableSourceEagerHydrationData.push(y,j)},h.runWithPriority=function(p,y){var j=gt;try{return gt=p,y()}finally{gt=j}},h.shouldError=function(){return null},h.shouldSuspend=function(){return!1},h.updateContainer=function(p,y,j,N){var F=y.current,G=At(),re=an(F);return j=kl(j),y.context===null?y.context=j:y.pendingContext=j,y=li(G,re),y.payload={element:p},N=N===void 0?null:N,N!==null&&(y.callback=N),p=ui(F,y,re),p!==null&&(Ln(p,F,re,G),qa(p,F,re)),re},h}),Ig}var y1;function S6(){return y1||(y1=1,Fg.exports=b6()),Fg.exports}var C6=S6();const k6=dh(C6);var Bg={exports:{}},Ta={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1;function T6(){return x1||(x1=1,Ta.ConcurrentRoot=1,Ta.ContinuousEventPriority=4,Ta.DefaultEventPriority=16,Ta.DiscreteEventPriority=1,Ta.IdleEventPriority=536870912,Ta.LegacyRoot=0),Ta}var w1;function P6(){return w1||(w1=1,Bg.exports=T6()),Bg.exports}var nw=P6(),E6=ht();const _1={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let b1=!1,S1=!1;const wm=".react-konva-event",j6=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,O6=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,N6={};function yf(t,e,h=N6){if(!b1&&"zIndex"in e&&(console.warn(O6),b1=!0),!S1&&e.draggable){var x=e.x!==void 0||e.y!==void 0,v=e.onDragEnd||e.onDragMove;x&&!v&&(console.warn(j6),S1=!0)}for(var S in h)if(!_1[S]){var _=S.slice(0,2)==="on",T=h[S]!==e[S];if(_&&T){var E=S.substr(2).toLowerCase();E.substr(0,7)==="content"&&(E="content"+E.substr(7,1).toUpperCase()+E.substr(8)),t.off(E,h[S])}var d=!e.hasOwnProperty(S);d&&t.setAttr(S,void 0)}var r=e._useStrictMode,c={},l=!1;const i={};for(var S in e)if(!_1[S]){var _=S.slice(0,2)==="on",s=h[S]!==e[S];if(_&&s){var E=S.substr(2).toLowerCase();E.substr(0,7)==="content"&&(E="content"+E.substr(7,1).toUpperCase()+E.substr(8)),e[S]&&(i[E]=e[S])}!_&&(e[S]!==h[S]||r&&e[S]!==t.getAttr(S))&&(l=!0,c[S]=e[S])}l&&(t.setAttrs(c),Ra(t));for(var E in i)t.on(E+wm,i[E])}function Ra(t){if(!E6.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}var zg=Ep();const rw={},L6={};hh.Node.prototype._applyProps=yf;function M6(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),Ra(t)}function A6(t,e,h){let x=hh[t];x||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),x=hh.Group);const v={},S={};for(var _ in e){var T=_.slice(0,2)==="on";T?S[_]=e[_]:v[_]=e[_]}const E=new x(v);return yf(E,S),E}function R6(t,e,h){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function D6(t,e,h){return!1}function F6(t){return t}function I6(){return null}function B6(){return null}function z6(t,e,h,x){return L6}function U6(){}function V6(t){}function G6(t,e){return!1}function H6(){return rw}function W6(){return rw}const X6=setTimeout,Y6=clearTimeout,q6=-1;function K6(t,e){return!1}const $6=!1,Q6=!0,J6=!0;function Z6(t,e){e.parent===t?e.moveToTop():t.add(e),Ra(t)}function eT(t,e){e.parent===t?e.moveToTop():t.add(e),Ra(t)}function iw(t,e,h){e._remove(),t.add(e),e.setZIndex(h.getZIndex()),Ra(t)}function tT(t,e,h){iw(t,e,h)}function nT(t,e){e.destroy(),e.off(wm),Ra(t)}function rT(t,e){e.destroy(),e.off(wm),Ra(t)}function iT(t,e,h){console.error(`Text components are not yet supported in ReactKonva. You text is: "${h}"`)}function sT(t,e,h){}function aT(t,e,h,x,v){yf(t,v,x)}function oT(t){t.hide(),Ra(t)}function lT(t){}function uT(t,e){(e.visible==null||e.visible)&&t.show()}function cT(t,e){}function hT(t){}function dT(){}const fT=()=>nw.DefaultEventPriority,gT=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Z6,appendChildToContainer:eT,appendInitialChild:M6,cancelTimeout:Y6,clearContainer:hT,commitMount:sT,commitTextUpdate:iT,commitUpdate:aT,createInstance:A6,createTextInstance:R6,detachDeletedInstance:dT,finalizeInitialChildren:D6,getChildHostContext:W6,getCurrentEventPriority:fT,getPublicInstance:F6,getRootHostContext:H6,hideInstance:oT,hideTextInstance:lT,idlePriority:zg.unstable_IdlePriority,insertBefore:iw,insertInContainerBefore:tT,isPrimaryRenderer:$6,noTimeout:q6,now:zg.unstable_now,prepareForCommit:I6,preparePortalMount:B6,prepareUpdate:z6,removeChild:nT,removeChildFromContainer:rT,resetAfterCommit:U6,resetTextContent:V6,run:zg.unstable_runWithPriority,scheduleTimeout:X6,shouldDeprioritizeSubtree:G6,shouldSetTextContent:K6,supportsMutation:J6,unhideInstance:uT,unhideTextInstance:cT,warnsIfNotActing:Q6},Symbol.toStringTag,{value:"Module"}));var pT=Object.defineProperty,mT=Object.defineProperties,vT=Object.getOwnPropertyDescriptors,C1=Object.getOwnPropertySymbols,yT=Object.prototype.hasOwnProperty,xT=Object.prototype.propertyIsEnumerable,k1=(t,e,h)=>e in t?pT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:h}):t[e]=h,T1=(t,e)=>{for(var h in e||(e={}))yT.call(e,h)&&k1(t,h,e[h]);if(C1)for(var h of C1(e))xT.call(e,h)&&k1(t,h,e[h]);return t},wT=(t,e)=>mT(t,vT(e)),P1,E1;typeof window<"u"&&((P1=window.document)!=null&&P1.createElement||((E1=window.navigator)==null?void 0:E1.product)==="ReactNative")?ae.useLayoutEffect:ae.useEffect;function sw(t,e,h){if(!t)return;if(h(t)===!0)return t;let x=t.child;for(;x;){const v=sw(x,e,h);if(v)return v;x=x.sibling}}function aw(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const j1=console.error;console.error=function(){const t=[...arguments].join("");if(t?.startsWith("Warning:")&&t.includes("useContext")){console.error=j1;return}return j1.apply(this,arguments)};const _m=aw(ae.createContext(null));class ow extends ae.Component{render(){return ae.createElement(_m.Provider,{value:this._reactInternals},this.props.children)}}function _T(){const t=ae.useContext(_m);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ae.useId();return ae.useMemo(()=>{for(const x of[t,t?.alternate]){if(!x)continue;const v=sw(x,!1,S=>{let _=S.memoizedState;for(;_;){if(_.memoizedState===e)return!0;_=_.next}});if(v)return v}},[t,e])}function bT(){const t=_T(),[e]=ae.useState(()=>new Map);e.clear();let h=t;for(;h;){if(h.type&&typeof h.type=="object"){const v=h.type._context===void 0&&h.type.Provider===h.type?h.type:h.type._context;v&&v!==_m&&!e.has(v)&&e.set(v,ae.useContext(aw(v)))}h=h.return}return e}function ST(){const t=bT();return ae.useMemo(()=>Array.from(t.keys()).reduce((e,h)=>x=>ae.createElement(e,null,ae.createElement(h.Provider,wT(T1({},x),{value:t.get(h)}))),e=>ae.createElement(ow,T1({},e))),[t])}function CT(t){const e=Fn.useRef({});return Fn.useLayoutEffect(()=>{e.current=t}),Fn.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const kT=t=>{const e=Fn.useRef(null),h=Fn.useRef(null),x=Fn.useRef(null),v=CT(t),S=ST(),_=T=>{const{forwardedRef:E}=t;E&&(typeof E=="function"?E(T):E.current=T)};return Fn.useLayoutEffect(()=>(h.current=new hh.Stage({width:t.width,height:t.height,container:e.current}),_(h.current),x.current=Wc.createContainer(h.current,nw.LegacyRoot,!1,null),Wc.updateContainer(Fn.createElement(S,{},t.children),x.current),()=>{hh.isBrowser&&(_(null),Wc.updateContainer(null,x.current,null),h.current.destroy())}),[]),Fn.useLayoutEffect(()=>{_(h.current),yf(h.current,t,v),Wc.updateContainer(Fn.createElement(S,{},t.children),x.current,null)}),Fn.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},TT="Layer",O1="Image",PT="Transformer",Wc=k6(gT);Wc.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Fn.version,rendererPackageName:"react-konva"});const ET=Fn.forwardRef((t,e)=>Fn.createElement(ow,{},Fn.createElement(kT,{...t,forwardedRef:e})));var Ug,N1;function jT(){if(N1)return Ug;N1=1;var t=fh();return Ug=function(h,x,v){const S=t.useRef("loading"),_=t.useRef(),[T,E]=t.useState(0),d=t.useRef(),r=t.useRef(),c=t.useRef();return(d.current!==h||r.current!==x||c.current!==v)&&(S.current="loading",_.current=void 0,d.current=h,r.current=x,c.current=v),t.useLayoutEffect(function(){if(!h)return;var l=document.createElement("img");function i(){l.decode().catch(()=>{}).finally(()=>{S.current="loaded",_.current=l,E(Math.random())})}function s(){S.current="failed",_.current=void 0,E(Math.random())}return l.addEventListener("load",i),l.addEventListener("error",s),x&&(l.crossOrigin=x),v&&(l.referrerPolicy=v),l.src=h,function(){l.removeEventListener("load",i),l.removeEventListener("error",s)}},[h,x,v]),[_.current,S.current]},Ug}var OT=jT();const L1=dh(OT),NT=({baseImageUrl:t,name:e,price:h,minOrder:x})=>{const[v,S]=ae.useState(null),[_]=L1(t),[T]=L1(v),[E,d]=ae.useState(null),r=i=>{const s=i.target.files[0];if(s){const o=new FileReader;o.onload=()=>S(o.result),o.readAsDataURL(s)}},l=e.includes("")?{x:80,y:50,width:100,height:60}:e.includes("")?{x:120,y:80,width:80,height:80}:e.includes("")?{x:70,y:70,width:150,height:100}:{x:100,y:100,width:100,height:100};return k.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 flex flex-col items-center",children:[k.jsxs("h3",{className:"text-lg font-bold mb-2",children:[e,"  "]}),k.jsx(ET,{width:300,height:300,children:k.jsxs(TT,{children:[k.jsx(O1,{image:_,width:300,height:300}),T&&k.jsx(O1,{image:T,...l,draggable:!0,opacity:.85,globalCompositeOperation:"multiply",onClick:i=>d(i.target),onTap:i=>d(i.target)}),E&&k.jsx(PT,{nodes:[E],rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:(i,s)=>s.width<30||s.height<30?i:s})]})}),k.jsx("input",{type:"file",accept:"image/*",onChange:r,className:"mt-2 text-sm"}),k.jsxs("button",{className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:["  (. ",x," )"]})]})},LT="https://my-backend-production-3416.up.railway.app",MT=({img:t,alt:e="",className:h="",priority:x=!1,contain:v=!0})=>{const[S,_]=ae.useState(!1),T=v?"object-contain":"object-cover",E=t?.url||"https://via.placeholder.com/800x600?text=No+Image",d=t?.sources?.avif,r=t?.sources?.webp,c=t?.sources?.jpg||E,l=t?.thumb||t?.lqip;return k.jsxs("div",{className:`relative w-full h-full ${h}`,children:[l&&k.jsx("img",{src:l,alt:"","aria-hidden":!0,className:`absolute inset-0 w-full h-full ${T} blur-md scale-105 opacity-70 transition-opacity duration-300 ${S?"opacity-0":"opacity-100"}`,loading:"eager",decoding:"async"}),k.jsxs("picture",{children:[d&&k.jsx("source",{srcSet:d,type:"image/avif"}),r&&k.jsx("source",{srcSet:r,type:"image/webp"}),k.jsx("img",{src:c,alt:e,className:`w-full h-full ${T} transition-opacity duration-300 ${S?"opacity-100":"opacity-0"}`,onLoad:()=>_(!0),onError:i=>{i.currentTarget.src="https://via.placeholder.com/800x600?text=No+Image",_(!0)},loading:x?"eager":"lazy",fetchpriority:x?"high":"auto",decoding:"async"})]})]})},AT=({images:t,productName:e,onImageClick:h})=>{const[x,v]=ae.useState(0),S=ae.useRef(null),_=Array.isArray(t)&&t.length>0?t:[{url:"https://via.placeholder.com/800x600?text=No+Image"}];ae.useEffect(()=>{if(!_.length)return;const c=new Image;c.src=_[(x+1)%_.length].url},[x,_]),ae.useEffect(()=>{const c=S.current;if(!c)return;const l=()=>{const i=c.clientWidth,s=Math.round(c.scrollLeft/i);s!==x&&v(s)};return c.addEventListener("scroll",l,{passive:!0}),()=>c.removeEventListener("scroll",l)},[x]);const T=c=>{const l=S.current;if(!l)return;const i=l.clientWidth;l.scrollTo({left:c*i,behavior:"smooth"})},E=c=>{c.stopPropagation(),T((x+1)%_.length)},d=c=>{c.stopPropagation(),T((x-1+_.length)%_.length)},r=c=>{const l=S.current;if(!l)return;const i=Math.abs(c.deltaX)>Math.abs(c.deltaY)?c.deltaX:c.deltaY;i!==0&&(c.preventDefault(),l.scrollBy({left:i,behavior:"auto"}))};return k.jsxs("div",{className:"relative w-full h-48 bg-gray-100 dark:bg-gray-700 overflow-hidden group rounded-t-2xl",children:[k.jsx("div",{ref:S,onWheel:r,onClick:h,className:"w-full h-full flex overflow-x-auto overscroll-x-contain scroll-smooth snap-x snap-mandatory scrollbar-none cursor-pointer",children:_.map((c,l)=>k.jsx("div",{className:"w-full h-full shrink-0 snap-center flex items-center justify-center",children:k.jsx(MT,{img:c,alt:`${e} - ${l+1}`,className:"p-4",contain:!0,priority:l===0})},l))}),_.length>1&&k.jsxs(k.Fragment,{children:[k.jsx("button",{onClick:d,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100",children:k.jsx(Mp,{className:"w-4 h-4"})}),k.jsx("button",{onClick:E,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-1 rounded-full opacity-0 group-hover:opacity-100",children:k.jsx(Gl,{className:"w-4 h-4"})})]})]})},RT=({product:t,onImageClick:e,onAddToCart:h})=>{const[x,v]=ae.useState(!1),{t:S,i18n:_}=cn(),T=_.language.split("-")[0],E=t[`name_${T}`]||t.name_ru||t.name,d=t[`description_${T}`]||t.description_ru||t.description,r=t[`specifications_${T}`]||t.specifications_ru||t.specifications,c=i=>{i.stopPropagation(),v(s=>!s)},l=i=>{i.stopPropagation(),h(t)};return k.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 flex flex-col h-full border border-gray-200 dark:border-gray-700",children:[k.jsx(AT,{images:t.images,productName:E,onImageClick:e}),k.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[k.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300 leading-tight mb-3",children:E}),k.jsxs("div",{className:"mb-4 flex-grow",children:[k.jsx("p",{className:`text-gray-600 dark:text-gray-300 text-sm leading-relaxed transition-all duration-300 ${x?"max-h-none":"line-clamp-6 min-h-[60px]"}`,children:d}),d&&d.length>120&&k.jsx("button",{onClick:c,className:"mt-2 text-blue-600 dark:text-blue-400 text-sm font-medium hover:underline transition-colors",children:S(x?"product.showLess":"product.showMore")})]}),k.jsxs("div",{className:"space-y-2 mb-4",children:[r&&k.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[k.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300 block mb-1",children:[S("product.characteristics"),":"]}),k.jsx("span",{children:r})]}),t.package&&k.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[k.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[S("product.package"),":"]}),k.jsx("span",{className:"ml-1",children:t.package})]}),t.weight&&k.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[k.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[S("product.weight"),":"]}),k.jsx("span",{className:"ml-1",children:t.weight})]})]}),k.jsxs("div",{className:"flex items-center justify-between mt-auto pt-4 border-t border-gray-100 dark:border-gray-700",children:[k.jsxs("div",{className:"flex flex-col",children:[k.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap",children:t.price}),k.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.unit||S("product.perUnit")})]}),k.jsxs("button",{onClick:l,className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-3 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-blue-500/25 flex items-center gap-2 font-semibold group",children:[k.jsx($l,{className:"w-5 h-5 transform group-hover:scale-110 transition-transform duration-300"}),S("cart.addToCart")]})]})]})]})},DT=()=>{const{t,i18n:e}=cn(),h=e.language.split("-")[0],{addToCart:x}=Ls(),v=Ns(),[S,_]=rS(),T=q=>{x(q)},[E,d]=ae.useState([]),[r,c]=ae.useState([]),[l,i]=ae.useState(!0),[s,o]=ae.useState(""),[a,m]=ae.useState(""),[f,g]=ae.useState(null),[w,C]=ae.useState(null),[P,M]=ae.useState(null),[L,B]=ae.useState(1),D=12,[H,Q]=ae.useState(0);ae.useEffect(()=>{const q=()=>Q(oe=>oe+1);return e.on("languageChanged",q),()=>e.off("languageChanged",q)},[e]),ae.useEffect(()=>{B(1)},[P,a]);const ee=Fn.useMemo(()=>[{id:"textile",name:t("categories.textile.name"),description:t("categories.textile.description"),icon:"",color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",image:"https://storage.imgbly.com/imgbly/0UaWbTOauX.jpg",subcategories:[{id:"towels",name:t("categories.textile.sub.towels")},{id:"slippers",name:t("categories.textile.sub.slippers")},{id:"robes",name:t("categories.textile.sub.robes")},{id:"pillowcases",name:t("categories.textile.sub.pillowcases")},{id:"sheets",name:t("categories.textile.sub.sheets")},{id:"duvet_covers",name:t("categories.textile.sub.duvet_covers")},{id:"mattress_covers",name:t("categories.textile.sub.mattress_covers")},{id:"double_set",name:t("categories.textile.sub.double_set")},{id:"single_set",name:t("categories.textile.sub.single_set")},{id:"pillows",name:t("categories.textile.sub.pillows")},{id:"blankets",name:t("categories.textile.sub.blankets")}]},{id:"accessories",name:t("categories.accessories.name"),description:t("categories.accessories.description"),icon:"",color:"from-green-500 to-green-600",bgColor:"bg-green-50 dark:bg-green-900/20",image:"https://storage.imgbly.com/imgbly/8gFbZlvhas.jpg",subcategories:[{id:"standard",name:t("categories.accessories.sub.standard")},{id:"eco",name:t("categories.accessories.sub.eco")},{id:"lumiere_business",name:t("categories.accessories.sub.lumiere_business")},{id:"lumiere_standard",name:t("categories.accessories.sub.lumiere_standard")},{id:"lumiere_econom",name:t("categories.accessories.sub.lumiere_econom")}]},{id:"cosmetics",name:t("categories.cosmetics.name"),description:t("categories.cosmetics.description"),icon:"",color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",image:"https://storage.imgbly.com/imgbly/uFxUssU4tF.jpg",groupedSubcategories:[{title:t("categories.cosmetics.groups.greenery"),items:[{id:"shampoo_greenery",name:t("categories.cosmetics.items.shampoo")},{id:"showerGel_greenery",name:t("categories.cosmetics.items.showerGel")},{id:"lotion_greenery",name:t("categories.cosmetics.items.lotion")},{id:"conditioner_greenery",name:t("categories.cosmetics.items.conditioner")}]},{title:t("categories.cosmetics.groups.comfort"),items:[{id:"shampoo_comfort_line",name:t("categories.cosmetics.items.shampoo")},{id:"showerGel_comfort_line",name:t("categories.cosmetics.items.showerGel")},{id:"lotion_comfort_line",name:t("categories.cosmetics.items.lotion")},{id:"conditioner_comfort_line",name:t("categories.cosmetics.items.conditioner")}]},{title:t("categories.cosmetics.groups.aroma"),items:[{id:"shampoo_aroma_garden",name:t("categories.cosmetics.items.shampoo")},{id:"showerGel_aroma_garden",name:t("categories.cosmetics.items.showerGel")},{id:"lotion_aroma_garden",name:t("categories.cosmetics.items.lotion")},{id:"conditioner_aroma_garden",name:t("categories.cosmetics.items.conditioner")}]},{title:t("categories.cosmetics.groups.allegrini"),items:[{id:"allegrini_one_for_you",name:t("categories.cosmetics.items.allegrini_one_for_you")},{id:"allegrini_bamboo",name:t("categories.cosmetics.items.allegrini_bamboo")},{id:"allegrini_aloesir",name:t("categories.cosmetics.items.allegrini_aloesir")},{id:"allegrini_acqua",name:t("categories.cosmetics.items.allegrini_acqua")},{id:"allegrini_havana",name:t("categories.cosmetics.items.allegrini_havana")},{id:"allegrini_natura_siberica",name:t("categories.cosmetics.items.allegrini_natura_siberica")},{id:"allegrini_argan",name:t("categories.cosmetics.items.allegrini_argan")},{id:"allegrini_kid_set",name:t("categories.cosmetics.items.allegrini_kid_set")},{id:"allegrini_skinus",name:t("categories.cosmetics.items.allegrini_skinus")},{id:"allegrini_accessories",name:t("categories.cosmetics.items.allegrini_accessories")}]},{title:t("categories.cosmetics.groups.ada"),items:[{id:"ada_lifestyle",name:t("categories.cosmetics.items.ada_lifestyle")},{id:"ada_luxury",name:t("categories.cosmetics.items.ada_luxury")},{id:"ada_300ml",name:t("categories.cosmetics.items.ada_300ml")}]},{title:t("categories.cosmetics.groups.mezo"),items:[{id:"mezo_hotel_collection",name:t("categories.cosmetics.items.mezo_hotel_collection")},{id:"mezo_all_for_you",name:t("categories.cosmetics.items.mezo_all_for_you")},{id:"mezo_lucio",name:t("categories.cosmetics.items.mezo_lucio")},{id:"mezo_argana",name:t("categories.cosmetics.items.mezo_argana")},{id:"mezo_lavender",name:t("categories.cosmetics.items.mezo_lavender")},{id:"mezo_rumah",name:t("categories.cosmetics.items.mezo_rumah")},{id:"mezo_marrone",name:t("categories.cosmetics.items.mezo_marrone")},{id:"mezo_basic",name:t("categories.cosmetics.items.mezo_basic")},{id:"mezo_kids",name:t("categories.cosmetics.items.mezo_kids")}]}]},{id:"minibars",name:t("categories.minibars.name"),description:t("categories.minibars.description"),icon:"",color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20",image:"https://storage.imgbly.com/imgbly/WUKapqx9Qr.jpg",subcategories:[{id:"minibar",name:t("categories.minibars.name")}]},{id:"custom_logo",name:t("categories.custom_logo.name"),description:t("categories.custom_logo.description"),icon:"",color:"from-pink-500 to-pink-600",bgColor:"bg-pink-50 dark:bg-pink-900/20",image:"https://storage.imgbly.com/imgbly/S7uosnybvx.png",subcategories:[{id:"robes",name:t("categories.custom_logo.sub.robes")},{id:"slippers",name:t("categories.custom_logo.sub.slippers")},{id:"boxes",name:t("categories.custom_logo.sub.boxes")},{id:"pillowcases",name:t("categories.textile.sub.pillowcases")}]}],[t,H]),se=async()=>{try{o("");const oe=await(await fetch(`${LT}/api/products?lng=${h}`)).json();await new Promise(Y=>setTimeout(Y,100)),oe.success&&Array.isArray(oe.products)?d(oe.products):d([])}catch{o(t("catalog.loadError"))}finally{i(!1)}},ie=()=>{i(!0),se()};ae.useEffect(()=>{E.length>0||i(!0),se()},[h]),ae.useEffect(()=>{const q=S.get("cat"),oe=S.get("sub");q?(C(q),M(oe||null)):(C(null),M(null))},[S]);const ue=q=>{if(q.id==="custom_logo"){v("/custom-logo");return}C(q.id),M(null),_({cat:q.id})},U=q=>{M(q.id),_({cat:w,sub:q.id})},X=()=>{C(null),M(null),_({}),m("")},Z=()=>{M(null),_({cat:w}),m("")};ae.useEffect(()=>{d(q=>[...q])},[e.language]);const $=E.map(q=>({...q,category:q.category?.toLowerCase?.().trim(),subcategory:q.subcategory?.toLowerCase?.().trim()})),R=w?$.filter(q=>{const oe=q.category?.toLowerCase()?.trim()||"",Y=q.subcategory?.toLowerCase()?.trim()||"",I=w?.toLowerCase()?.trim(),K=P?.toLowerCase()?.trim(),ne=oe===I,le=!K||Y===K,he=q[`name_${h}`]&&q[`name_${h}`].trim()||q.name_ru||q.name||"",ve=q[`description_${h}`]&&q[`description_${h}`].trim()||q.description_ru||q.description||"",ye=a===""||he.toLowerCase().includes(a.toLowerCase())||ve.toLowerCase().includes(a.toLowerCase());return ne&&le&&ye}):[],V=ee.find(q=>q.id===w),W=V?.subcategories?.find(q=>q.id===P)||V?.groupedSubcategories?.flatMap(q=>q.items).find(q=>q.id===P)||null;return l&&!r.length?k.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsx(Ak,{count:6})})}):k.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:[k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"flex justify-between items-center mb-8",children:[V?k.jsx("div",{className:"flex-1",children:k.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[k.jsxs("button",{onClick:W?Z:X,className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:[k.jsx(Lp,{className:"w-5 h-5"}),W?t("catalog.backToX",{name:V.name}):t("catalog.backToCategories")]}),k.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600"}),k.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:W?W.name:V.name})]})}):k.jsxs("div",{className:"flex-1 text-center",children:[k.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4",children:t("catalog.title")}),k.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:t("catalog.description")})]}),k.jsxs("button",{onClick:ie,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[k.jsx(fx,{className:"w-4 h-4"}),k.jsx("span",{className:"hidden sm:inline",children:t("catalog.refreshBtn")})]})]}),s&&k.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg mb-6",children:k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("span",{children:s}),k.jsx("button",{onClick:ie,className:"text-red-700 hover:text-red-800 font-medium",children:t("catalog.tryAgain")})]})}),V&&k.jsx("div",{className:"mb-8",children:k.jsxs("div",{className:"relative max-w-md mx-auto",children:[k.jsx(gx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),k.jsx("input",{type:"text",placeholder:W?t("catalog.searchIn",{name:W.name}):t("catalog.searchIn",{name:V.name}),value:a,onChange:q=>m(q.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})}),!V&&k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:ee.map(q=>k.jsxs("div",{onClick:()=>ue(q),className:"group relative bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden cursor-pointer transform transition-all duration-500 hover:scale-105 hover:shadow-2xl border border-gray-200 dark:border-gray-700",role:"button",tabIndex:0,children:[k.jsxs("div",{className:"relative h-48 overflow-hidden",children:[k.jsx("img",{src:q.image,alt:q.name,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"}),k.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${q.color} opacity-80`}),k.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white p-6 text-center",children:[k.jsx("span",{className:"text-4xl mb-3 transform group-hover:scale-110 transition-transform duration-300",children:q.icon}),k.jsx("h3",{className:"text-2xl font-bold mb-2",children:q.name}),k.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:q.description})]})]}),k.jsx("div",{className:`p-6 ${q.bgColor} border-t border-gray-200 dark:border-gray-700`,children:k.jsx("div",{className:"flex items-center justify-between",children:k.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 group-hover:gap-3 transition-all duration-300",children:[k.jsx("span",{className:"font-semibold",children:t("catalog.view")}),k.jsx(Gl,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})]})})})]},q.id))}),V&&!W&&k.jsxs("div",{className:"mb-8",children:[k.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center",children:t("catalog.subcategoriesOf",{name:V.name})}),V.groupedSubcategories?k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:V.groupedSubcategories.map((q,oe)=>(E.filter(Y=>Y.category===V.id&&q.items.some(I=>I.id===Y.subcategory)),k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[k.jsx("h3",{className:"text-xl font-bold text-center text-gray-900 dark:text-white mb-4 pb-3 border-b border-gray-200 dark:border-gray-600",children:q.title}),k.jsx("div",{className:"space-y-3",children:q.items.map(Y=>(E.filter(I=>I.category===V.id&&I.subcategory===Y.id),k.jsx("button",{onClick:()=>U({id:Y.id,name:`${Y.name} - ${q.title}`}),className:"w-full group bg-gray-50 dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl p-4 transition-all duration-300 transform hover:-translate-y-1 text-left border border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-600",children:k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("div",{children:k.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:Y.name})}),k.jsx(Gl,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 transform group-hover:translate-x-1 transition-all"})]})},Y.id)))}),k.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-600 text-center"})]},oe)))}):k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:V.subcategories.map(q=>(E.filter(oe=>oe.category===V.id&&oe.subcategory===q.id),k.jsx("button",{onClick:()=>U(q),className:"group bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 text-left",children:k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:q.name},`${q.id}-${H}`),k.jsx(Gl,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600 transform group-hover:translate-x-1 transition-all"})]})},q.id)))})]}),V&&W&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"mb-6 text-center",children:k.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[t("catalog.foundIn",{count:R.length,name:W.name}),a&&t("catalog.querySuffix",{q:a})]})}),V.id==="custom_logo"?(()=>{const q=E.filter(oe=>oe.category==="custom_logo"&&oe.subcategory===W.id);return q.length===0?k.jsxs("div",{className:"text-center py-10",children:[k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t("catalog.templatesEmpty",{name:W.name})}),k.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t("catalog.templatesEmptyHint")})]}):k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(oe=>{const Y=oe.images?.[0]?.url||"",I=parseInt(oe.dimensions||"3000",10)||3e3;return k.jsx(NT,{baseImageUrl:Y,name:oe[`name_${h}`]||oe.name_ru||oe.name,price:Number(String(oe.price).replace(/[^\d]/g,""))||1,minOrder:I},oe.id)})})})():k.jsx("div",{className:"relative transition-all duration-500",children:(()=>{const q=Math.ceil(R.length/D),oe=R.slice((L-1)*D,L*D);return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:`transition-opacity duration-300 ${l?"opacity-0":"opacity-100"}`,children:k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:(l?r:oe).map(Y=>k.jsx(RT,{product:Y,onImageClick:()=>g(Y),onAddToCart:T},Y.id))})}),!l&&R.length===0&&k.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:t("catalog.notFound")}),!l&&q>1&&k.jsxs("div",{className:"flex justify-center mt-10 mb-6 gap-2 flex-wrap",children:[k.jsx("button",{onClick:()=>B(Y=>Math.max(1,Y-1)),disabled:L===1,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${L===1?"bg-gray-200 dark:bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 dark:hover:bg-blue-500"}`,children:""}),Array.from({length:q},(Y,I)=>I+1).map(Y=>k.jsx("button",{onClick:()=>{B(Y),window.scrollTo({top:0,behavior:"smooth"})},className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all duration-300 ${L===Y?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-blue-900/30"}`,children:Y},Y)),k.jsx("button",{onClick:()=>B(Y=>Math.min(q,Y+1)),disabled:L===q,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${L===q?"bg-gray-200 dark:bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 dark:hover:bg-blue-500"}`,children:""})]})]})})()})]})]}),f&&k.jsx(Mk,{product:f,isOpen:!!f,onClose:()=>g(null)})]})},FT=()=>{const{t}=cn(),e=[{icon:px,title:t("about.features.reliability.title"),description:t("about.features.reliability.desc")},{icon:Rp,title:t("about.features.delivery.title"),description:t("about.features.delivery.desc")},{icon:mx,title:t("about.features.clients.title"),description:t("about.features.clients.desc")},{icon:pS,title:t("about.features.quality.title"),description:t("about.features.quality.desc")}],h=[{number:"10+",label:t("about.stats.years")},{number:"100+",label:t("about.stats.clients")},{number:"100+",label:t("about.stats.products")},{number:"24/7",label:t("about.stats.support")}];return k.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6",children:[t("about.title")," ",k.jsx("span",{className:"text-blue-600",children:"Salt Lake"})]}),k.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:t("about.subtitle")})]}),k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-16",children:h.map((x,v)=>k.jsxs("div",{className:"text-center p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg",children:[k.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:x.number}),k.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:x.label})]},v))}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:e.map((x,v)=>{const S=x.icon;return k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[k.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-12 h-12 rounded-xl flex items-center justify-center mb-4",children:k.jsx(S,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),k.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:x.title}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:x.description})]},v)})}),k.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-8 text-white mb-16",children:[k.jsx("h2",{className:"text-3xl font-bold mb-4",children:t("about.mission.title")}),k.jsx("p",{className:"text-lg opacity-90 leading-relaxed",children:t("about.mission.text")})]}),k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg",children:[k.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:t("about.values.title")}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k.jsxs("div",{className:"space-y-4",children:[k.jsx("h3",{className:"text-xl font-semibold text-blue-600",children:t("about.values.quality.title")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t("about.values.quality.text")})]}),k.jsxs("div",{className:"space-y-4",children:[k.jsx("h3",{className:"text-xl font-semibold text-blue-600",children:t("about.values.reliability.title")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t("about.values.reliability.text")})]}),k.jsxs("div",{className:"space-y-4",children:[k.jsx("h3",{className:"text-xl font-semibold text-blue-600",children:t("about.values.support.title")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t("about.values.support.text")})]}),k.jsxs("div",{className:"space-y-4",children:[k.jsx("h3",{className:"text-xl font-semibold text-blue-600",children:t("about.values.development.title")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t("about.values.development.text")})]})]})]})]})})},IT=()=>{const{t}=cn(),e=[{icon:V0,title:t("contacts.address"),content:t("contacts.addressValue"),description:t("contacts.addressDescription")},{icon:Fl,title:t("contacts.phone"),content:"+7 (775) 701-62-66",description:t("contacts.phoneDescription")},{icon:V0,title:t("contacts.branchAddress"),content:t("contacts.branchAddressValue"),description:t("contacts.branchAddressDescription")},{icon:Fl,title:t("contacts.branchPhone"),content:t("contacts.branchPhoneNumber"),description:t("contacts.branchPhoneDescription")},{icon:PS,title:t("contacts.email"),content:"saltlake.kz@gmail.com",description:t("contacts.emailDescription")},{icon:xS,title:t("contacts.workingHours"),content:t("contacts.weekdays"),description:t("contacts.weekend")}],h=()=>{const v="77757016266",S=t("contacts.whatsappMessage"),_=`https://wa.me/${v}?text=${encodeURIComponent(S)}`;window.open(_,"_blank")},x=()=>{window.location.href="tel:+77757016266"};return k.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"text-center mb-16",children:[k.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-6",children:t("contacts.title")}),k.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:t("contacts.subtitle")})]}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[k.jsx("div",{className:"space-y-8",children:k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg",children:[k.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:t("contacts.contactInfo")}),k.jsx("div",{className:"space-y-6",children:e.map((v,S)=>{const _=v.icon;return k.jsxs("div",{className:"flex items-start space-x-4",children:[k.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-xl flex-shrink-0",children:k.jsx(_,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),k.jsxs("div",{children:[k.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:v.title}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg font-medium",children:v.content}),k.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:v.description})]})]},S)})})]})}),k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg",children:[k.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:t("contacts.quickContact")}),k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-6",children:[k.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[k.jsx(Gc,{className:"w-6 h-6 text-green-500"}),k.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"WhatsApp"})]}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:t("contacts.whatsappDescription")}),k.jsxs("button",{onClick:h,className:"w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg transition-colors font-medium flex items-center justify-center space-x-2",children:[k.jsx(Gc,{className:"w-5 h-5"}),k.jsx("span",{children:t("contacts.whatsappButton")})]})]}),k.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6",children:[k.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[k.jsx(Fl,{className:"w-6 h-6 text-blue-600"}),k.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t("contacts.phone")})]}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:t("contacts.phoneDescription")}),k.jsxs("button",{onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg transition-colors font-medium flex items-center justify-center space-x-2",children:[k.jsx(Fl,{className:"w-5 h-5"}),k.jsx("span",{children:"+7 (775) 701-62-66"})]})]}),k.jsxs("div",{className:"bg-sky-50 dark:bg-sky-900/20 rounded-xl p-6",children:[k.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[k.jsx(Gc,{className:"w-6 h-6 text-sky-500"}),k.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t("contacts.telegramTitle")})]}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:t("contacts.telegramDescription")}),k.jsxs("button",{onClick:()=>window.open("https://t.me/SaltLakeManagerbot","_blank"),className:"w-full bg-sky-500 hover:bg-sky-600 text-white py-3 px-4 rounded-lg transition-colors font-medium flex items-center justify-center space-x-2",children:[k.jsx(Gc,{className:"w-5 h-5"}),k.jsx("span",{children:t("contacts.telegramButton")})]})]})]})]})]})]})})},BT=()=>{const{t}=cn(),{cartItems:e,getCartTotal:h,clearCart:x}=Ls(),{user:v}=Kl(),S=Ns(),[_,T]=ae.useState({name:v?.name||"",phone:v?.phone||"",company:"",address:"",city:t("checkout.defaultCity"),notes:"",payment_method:"cash"}),[E,d]=ae.useState(!1),[r,c]=ae.useState(!1),[l,i]=ae.useState(""),[s,o]=ae.useState(!0);ae.useEffect(()=>{const g=setTimeout(()=>o(!1),600);return()=>clearTimeout(g)},[]);const a=g=>{const{name:w,value:C}=g.target;T(P=>({...P,[w]:C}))},m=g=>parseFloat(g.replace(/[^\d]/g,"")).toLocaleString("ru-RU")+" ",f=async g=>{if(g.preventDefault(),!v){alert(t("checkout.loginRequired")),S("/");return}d(!0);const w={customer_name:_.name,customer_email:v?.email||null,customer_phone:_.phone,customer_company:_.company||null,customer_address:_.address,customer_city:_.city,notes:_.notes||null,items:e.map(C=>({id:C.id,name:C.name,quantity:C.quantity,price:C.price,image:C.image||null,designId:C.designId||null})),total_amount:h(),payment_method:_.payment_method};try{const P=await fetch("https://my-backend-production-3416.up.railway.app/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!P.ok)throw new Error(t("checkout.orderError"));const M=await P.json();i(M.order_number||"SL-"+Date.now().toString().slice(-6)),c(!0),x();const L=localStorage.getItem("orders"),B=L?JSON.parse(L):[];B.unshift({...w,order_number:M.order_number,created_at:new Date().toISOString()}),localStorage.setItem("orders",JSON.stringify(B))}catch{const C="SL-"+Date.now().toString().slice(-6);i(C),c(!0),x();const P=localStorage.getItem("orders"),M=P?JSON.parse(P):[];M.unshift({...w,order_number:C,created_at:new Date().toISOString()}),localStorage.setItem("orders",JSON.stringify(M))}finally{d(!1)}};return s?k.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:k.jsx(ih,{size:"large",text:t("checkout.loading")})}):r?k.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:k.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center border border-gray-200 dark:border-gray-700",children:[k.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-6",children:k.jsx(yS,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),k.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:t("checkout.orderComplete")}),k.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-6",children:[t("checkout.orderNumber")," ",k.jsxs("strong",{className:"text-blue-600 dark:text-blue-400",children:["#",l]})," ",t("checkout.successMessage")]}),k.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 max-w-xl mx-auto",children:t("checkout.thankYouMessage")}),k.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-8",children:[k.jsx("p",{className:"text-blue-800 dark:text-blue-300 mb-2",children:k.jsx("strong",{children:t("checkout.nextSteps")})}),k.jsxs("ul",{className:"text-blue-700 dark:text-blue-400 text-sm space-y-1",children:[k.jsxs("li",{children:[" ",t("checkout.contactYou")]}),k.jsxs("li",{children:[" ",t("checkout.confirmDetails")]}),k.jsxs("li",{children:[" ",t("checkout.deliveryTime")]}),k.jsxs("li",{children:[" ",t("checkout.paymentTerms")]})]})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsx("button",{onClick:()=>S("/catalog"),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:t("checkout.continueShopping")}),k.jsx("button",{onClick:()=>S("/"),className:"w-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 px-6 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:t("checkout.goHome")})]})]})})}):e.length===0?k.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:k.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:t("cart.empty")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8",children:t("checkout.addProductsToCart")}),k.jsx("button",{onClick:()=>S("/catalog"),className:"bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:t("home.startShopping")})]})}):k.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:k.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsx("div",{className:"mb-6",children:k.jsxs("button",{onClick:()=>S(-1),className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:[k.jsx(Lp,{className:"w-5 h-5 mr-2"}),t("common.back")]})}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[k.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:t("checkout.title")}),k.jsxs("form",{onSubmit:f,className:"space-y-4",children:[k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t("checkout.name")," *"]}),k.jsx("input",{type:"text",name:"name",value:_.name,onChange:a,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t("checkout.namePlaceholder")})]}),k.jsxs("div",{children:[k.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t("checkout.phone")," *"]}),k.jsx("input",{type:"tel",name:"phone",value:_.phone,onChange:a,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t("checkout.phonePlaceholder")})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t("checkout.company")}),k.jsx("input",{type:"text",name:"company",value:_.company,onChange:a,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t("checkout.companyPlaceholder")})]}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t("checkout.city")," *"]}),k.jsx("input",{type:"text",name:"city",value:_.city,onChange:a,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),k.jsxs("div",{children:[k.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t("checkout.address")," *"]}),k.jsx("input",{type:"text",name:"address",value:_.address,onChange:a,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t("checkout.addressPlaceholder")})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t("checkout.paymentMethod")}),k.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[k.jsxs("label",{className:`flex items-center justify-center border rounded-lg py-2 cursor-pointer select-none transition ${_.payment_method==="cash"?"border-blue-600 text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[k.jsx("input",{type:"radio",name:"payment_method",value:"cash",checked:_.payment_method==="cash",onChange:a,className:"hidden"}),t("checkout.cash")]}),k.jsxs("label",{className:`flex items-center justify-center border rounded-lg py-2 cursor-pointer select-none transition ${_.payment_method==="card"?"border-blue-600 text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[k.jsx("input",{type:"radio",name:"payment_method",value:"card",checked:_.payment_method==="card",onChange:a,className:"hidden"}),t("checkout.card")]})]})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t("checkout.notes")}),k.jsx("textarea",{name:"notes",value:_.notes,onChange:a,rows:"3",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:t("checkout.notesPlaceholder")})]}),k.jsx("button",{type:"submit",disabled:E,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:t(E?"checkout.processing":"checkout.placeOrder")})]})]}),k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 h-fit border border-gray-200 dark:border-gray-700",children:[k.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:t("checkout.orderDetails")}),k.jsx("div",{className:"space-y-4 mb-6",children:e.map(g=>k.jsxs("div",{className:"flex items-center space-x-3",children:[k.jsx("img",{src:g.image||"https://via.placeholder.com/100x100?text=No+Image",alt:g.name,className:"w-12 h-12 object-cover rounded-lg",onError:w=>{w.target.src="https://via.placeholder.com/100x100?text=No+Image"}}),k.jsxs("div",{className:"flex-1",children:[k.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:g.name}),k.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[m(g.price),"  ",g.quantity]})]}),k.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:m((parseFloat(g.price.replace(/[^\d]/g,""))*g.quantity).toString())})]},g.id))}),k.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:k.jsxs("div",{className:"flex justify-between items-center text-xl font-bold",children:[k.jsx("span",{className:"text-gray-900 dark:text-white",children:t("cart.total")}),k.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[h().toLocaleString("ru-RU")," "]})]})}),k.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[k.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:t("checkout.paymentConditions")}),k.jsxs("ul",{className:"text-blue-700 dark:text-blue-400 text-sm space-y-1",children:[k.jsxs("li",{children:[" ",t("checkout.postPayment")]}),k.jsxs("li",{children:[" ",t("checkout.delivery")]}),k.jsxs("li",{children:[" ",t("checkout.pricesIncludeVAT")]})]})]})]})]})]})})},zT="https://my-backend-production-3416.up.railway.app",UT=()=>{const{t}=cn(),{user:e}=Kl(),{clearCart:h,addToCart:x,updateQuantity:v}=Ls(),S=Ns(),[_,T]=ae.useState([]),[E,d]=ae.useState(!0),[r,c]=ae.useState(!0);ae.useEffect(()=>{const o=setTimeout(async()=>{if(!e){d(!1),c(!1);return}try{d(!0);const a=await fetch(`${zT}/api/orders`,{credentials:"include"});if(a.ok){const m=await a.json();if(m.success&&Array.isArray(m.orders)){const f=m.orders.filter(g=>g.customer_email===e.email);T(f)}else T([])}else T([])}catch{T([])}finally{d(!1),c(!1)}},800);return()=>clearTimeout(o)},[e]);const l=s=>{!s.items||!Array.isArray(s.items)||(h(),s.items.forEach(o=>{const a={id:o.productId||o.id,name:o.name,price:o.price,image:o.image,category:""};x(a),o.quantity&&v(a.id,o.quantity)}),S("/checkout"))},i=s=>typeof s=="number"?s.toLocaleString("ru-RU")+" ":String(s||"0");return r?k.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:k.jsx(ih,{size:"large",text:t("profile.loadingProfile")})}):k.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 transition-colors duration-300",children:k.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[k.jsxs("div",{className:"mb-8",children:[k.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:t("profile.title")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("profile.manageYourAccount")})]}),e?k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[k.jsx("div",{className:"lg:col-span-1",children:k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:t("profile.personalData")}),k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:t("auth.name")}),k.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name})]}),k.jsxs("div",{children:[k.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:t("auth.email")}),k.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.email})]}),e.phone&&k.jsxs("div",{children:[k.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:t("auth.phone")}),k.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.phone})]}),k.jsxs("div",{children:[k.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:t("profile.role")}),k.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:k.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${e.role==="admin"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:e.role})})]})]})]})}),k.jsx("div",{className:"lg:col-span-2",children:k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[k.jsxs("div",{className:"flex items-center justify-between mb-6",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t("profile.orderHistory")}),k.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[k.jsx(RS,{className:"w-4 h-4"}),k.jsxs("span",{children:[_.length," ",t("profile.orders")]})]})]}),E?k.jsx(ih,{size:"medium",text:t("profile.loadingOrders")}):_.length===0?k.jsxs("div",{className:"text-center py-12",children:[k.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:k.jsx(Jd,{className:"w-12 h-12 text-gray-400"})}),k.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("profile.noOrders")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:t("profile.noOrdersDescription")}),k.jsx("button",{onClick:()=>S("/catalog"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:t("home.startShopping")})]}):k.jsx("div",{className:"space-y-4",children:_.map((s,o)=>k.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-6 hover:shadow-md transition-shadow",children:[k.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4",children:[k.jsxs("div",{children:[k.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[k.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t("profile.orderNumber")," ",s.order_number]}),k.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:s.status||t("profile.processing")})]}),k.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[k.jsxs("div",{className:"flex items-center space-x-1",children:[k.jsx(rh,{className:"w-4 h-4"}),k.jsx("span",{children:new Date(s.created_at||Date.now()).toLocaleDateString("ru-RU")})]}),k.jsxs("div",{className:"flex items-center space-x-1",children:[k.jsx(wS,{className:"w-4 h-4"}),k.jsx("span",{className:"font-semibold",children:i(s.total_amount)})]})]})]}),k.jsx("button",{onClick:()=>l(s),className:"mt-3 sm:mt-0 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:t("profile.repeatOrder")})]}),s.items&&s.items.length>0&&k.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[k.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:[t("profile.orderItems")," (",s.items.length,")"]}),k.jsx("div",{className:"space-y-3",children:s.items.map((a,m)=>k.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[k.jsx("img",{src:a.image||"https://via.placeholder.com/60x60?text=No+Image",alt:a.name,className:"w-12 h-12 object-cover rounded-lg"}),k.jsxs("div",{className:"flex-1",children:[k.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:a.name}),k.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i(a.price),"  ",a.quantity," ",t("profile.pcs")]})]}),k.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:i(parseInt(a.price.replace(/[^\d]/g,"")||0)*a.quantity)})]},a.id||m))})]}),k.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4",children:k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[k.jsxs("div",{children:[k.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:t("checkout.deliveryAddress")}),k.jsxs("div",{className:"text-gray-900 dark:text-white",children:[s.customer_city,", ",s.customer_address]})]}),k.jsxs("div",{children:[k.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:t("checkout.paymentMethod")}),k.jsx("div",{className:"text-gray-900 dark:text-white",children:s.payment_method==="card"?t("checkout.card"):t("checkout.cash")})]})]})})]},s.id||s.order_number||o))})]})})]}):k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 text-center",children:[k.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:k.jsx(Jd,{className:"w-12 h-12 text-gray-400"})}),k.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:t("profile.accessDenied")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t("profile.loginToView")})]})]})})},_i="https://my-backend-production-3416.up.railway.app".replace(/\/$/,"")||"https://my-backend-production-3416.up.railway.app",of=t=>{if(!t||typeof t!="string")return"";const e=t.trim();return e?!e.startsWith("http://")&&!e.startsWith("https://")?`https://${e}`:e:""},lf=t=>{try{const e=new URL(of(t));return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},Id=t=>t?t.startsWith("http")?t:`${_i}${t.startsWith("/")?"":"/"}${t}`:"/placeholder.png",VT=({images:t,onImagesChange:e})=>{const{t:h}=cn(),[x,v]=ae.useState({}),[S,_]=ae.useState({}),T=()=>{e([...t,""])},E=s=>{const o=t.filter((f,g)=>g!==s);e(o);const a={...x};delete a[s],v(a);const m={...S};delete m[s],_(m)},d=(s,o)=>{const a=t.map((m,f)=>f===s?o:m);if(e(a),x[s]){const m={...x};delete m[s],v(m)}o.trim()&&lf(o)&&_(m=>({...m,[s]:!0}))},r=(s,o)=>{if(o<0||o>=t.length)return;const a=[...t],[m]=a.splice(s,1);a.splice(o,0,m),e(a);const f=g=>{const w={};return Object.keys(g).forEach(C=>{const P=parseInt(C);P===s?w[o]=g[P]:P>s&&P<=o?w[P-1]=g[P]:P<s&&P>=o?w[P+1]=g[P]:w[P]=g[P]}),w};v(f(x)),_(f(S))},c=s=>{v(o=>({...o,[s]:!0})),_(o=>({...o,[s]:!1}))},l=s=>{v(o=>{const a={...o};return delete a[s],a}),_(o=>({...o,[s]:!1}))},i=s=>s.trim()?lf(s)?{isValid:!0,message:""}:{isValid:!1,message:h("admin.imageManager.errors.invalidUrl")}:{isValid:!1,message:h("admin.imageManager.errors.emptyUrl")};return k.jsxs("div",{className:"space-y-3",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:h("admin.imageManager.title")}),t.map((s,o)=>{const a=i(s),m=x[o]||!a.isValid,f=S[o];return k.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-gray-50",children:[k.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[k.jsx("button",{type:"button",onClick:()=>r(o,o-1),disabled:o===0,className:"p-1 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",children:""}),k.jsx("button",{type:"button",onClick:()=>r(o,o+1),disabled:o===t.length-1,className:"p-1 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",children:""})]}),k.jsxs("div",{className:"flex-1",children:[k.jsxs("div",{className:"relative",children:[k.jsx("input",{type:"text",value:s,onChange:g=>d(o,g.target.value),className:`w-full px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none ${m?"border-red-300":"border-gray-300"}`,placeholder:h("admin.imageManager.placeholder")}),!a.isValid&&s.trim()&&k.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:k.jsx(hx,{className:"w-4 h-4 text-red-500"})}),a.isValid&&s.trim()&&!m&&k.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:k.jsx(dx,{className:"w-4 h-4 text-green-500"})})]}),!a.isValid&&s.trim()&&k.jsx("p",{className:"text-xs text-red-500 mt-1",children:a.message})]}),k.jsx("div",{className:"w-16 h-16 bg-white border rounded overflow-hidden flex-shrink-0 relative",children:s&&!m?k.jsxs(k.Fragment,{children:[f&&k.jsx("div",{className:"absolute inset-0 bg-gray-200 flex items-center justify-center",children:k.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}),k.jsx("img",{src:of(s),alt:`Preview ${o+1}`,className:`w-full h-full object-cover ${f?"opacity-0":"opacity-100"}`,onError:()=>c(o),onLoad:()=>l(o),onLoadStart:()=>_(g=>({...g,[o]:!0}))})]}):k.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400 text-xs text-center p-1",children:h(m?"admin.imageManager.error":"admin.imageManager.noImage")})}),k.jsx("button",{type:"button",onClick:()=>E(o),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:k.jsx(hf,{className:"w-4 h-4"})})]},o)}),k.jsxs("button",{type:"button",onClick:T,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm flex items-center",children:[k.jsx(Zd,{className:"w-4 h-4 mr-2"}),h("admin.imageManager.addButton")]}),k.jsx("p",{className:"text-xs text-gray-500",children:h("admin.imageManager.helpText")})]})},GT=()=>{const{t}=cn(),{user:e,logout:h}=Kl(),x=Ns(),[v,S]=ae.useState([]),[_,T]=ae.useState([]),[E,d]=ae.useState([]),[r,c]=ae.useState(""),[l,i]=ae.useState(!0),[s,o]=ae.useState(null),[a,m]=ae.useState("products"),[f,g]=ae.useState("checking"),[w,C]=ae.useState({show:!1,message:"",type:""}),[P,M]=ae.useState("all"),[L,B]=ae.useState("all"),[D,H]=ae.useState([]),[Q,ee]=ae.useState(!1),[se,ie]=ae.useState(!1),[ue,U]=ae.useState(!1),[X,Z]=ae.useState([]),$=(te,fe="info")=>{C({show:!0,message:te,type:fe}),setTimeout(()=>{C({show:!1,message:"",type:""})},5e3)},R={textile:[{value:"towels",label:t("admin.categories.subcategories.towels")},{value:"slippers",label:t("admin.categories.subcategories.slippers")},{value:"robes",label:t("admin.categories.subcategories.robes")},{value:"pillowcases",label:t("admin.categories.subcategories.pillowcases")},{value:"sheets",label:t("admin.categories.subcategories.sheets")},{value:"duvet_covers",label:t("admin.categories.subcategories.duvet_covers")},{value:"mattress_covers",label:t("admin.categories.subcategories.mattress_covers")},{value:"double_set",label:t("admin.categories.subcategories.double_set")},{value:"single_set",label:t("admin.categories.subcategories.single_set")},{value:"pillows",label:t("admin.categories.subcategories.pillows")},{value:"blankets",label:t("admin.categories.subcategories.blankets")}],accessories:[{value:"standard",label:t("admin.categories.subcategories.standard")},{value:"eco",label:t("admin.categories.subcategories.eco")},{value:"shoes",label:t("admin.categories.subcategories.shoes")},{value:"razor",label:t("admin.categories.subcategories.razor")},{value:"cosmetic",label:t("admin.categories.subcategories.cosmetic")},{value:"tooth",label:t("admin.categories.subcategories.tooth")},{value:"lumiere_business",label:t("categories.cosmetics.items.lumiere_business")},{value:"lumiere_standard",label:t("categories.cosmetics.items.lumiere_standard")},{value:"lumiere_econom",label:t("categories.cosmetics.items.lumiere_econom")}],cosmetics:[{value:"shampoo_greenery",label:t("admin.categories.subcategories.shampoo_greenery")},{value:"showerGel_greenery",label:t("admin.categories.subcategories.gel_greenery")},{value:"lotion_greenery",label:t("admin.categories.subcategories.lotion_greenery")},{value:"conditioner_greenery",label:t("admin.categories.subcategories.conditioner_greenery")},{value:"shampoo_comfort",label:t("admin.categories.subcategories.shampoo_comfort")},{value:"showerGel_comfort",label:t("admin.categories.subcategories.gel_comfort")},{value:"lotion_comfort",label:t("admin.categories.subcategories.lotion_comfort")},{value:"conditioner_comfort",label:t("admin.categories.subcategories.conditioner_comfort")},{value:"shampoo_aroma",label:t("admin.categories.subcategories.shampoo_aroma")},{value:"showerGel_aroma",label:t("admin.categories.subcategories.gel_aroma")},{value:"lotion_aroma",label:t("admin.categories.subcategories.lotion_aroma")},{value:"conditioner_aroma",label:t("admin.categories.subcategories.conditioner_aroma")},{value:"allegrini_one_for_you",label:t("categories.cosmetics.items.allegrini_one_for_you")},{value:"allegrini_bamboo",label:t("categories.cosmetics.items.allegrini_bamboo")},{value:"allegrini_aloesir",label:t("categories.cosmetics.items.allegrini_aloesir")},{value:"allegrini_acqua",label:t("categories.cosmetics.items.allegrini_acqua")},{value:"allegrini_havana",label:t("categories.cosmetics.items.allegrini_havana")},{value:"allegrini_natura_siberica",label:t("categories.cosmetics.items.allegrini_natura_siberica")},{value:"allegrini_argan",label:t("categories.cosmetics.items.allegrini_argan")},{value:"allegrini_kid_set",label:t("categories.cosmetics.items.allegrini_kid_set")},{value:"allegrini_skinus",label:t("categories.cosmetics.items.allegrini_skinus")},{value:"allegrini_accessories",label:t("categories.cosmetics.items.allegrini_accessories")},{value:"ada_lifestyle",label:t("categories.cosmetics.items.ada_lifestyle")},{value:"ada_luxury",label:t("categories.cosmetics.items.ada_luxury")},{value:"ada_300ml",label:t("categories.cosmetics.items.ada_300ml")},{value:"mezo_hotel_collection",label:t("categories.cosmetics.items.mezo_hotel_collection")},{value:"mezo_all_for_you",label:t("categories.cosmetics.items.mezo_all_for_you")},{value:"mezo_no_name",label:t("categories.cosmetics.items.mezo_no_name")},{value:"mezo_lucio",label:t("categories.cosmetics.items.mezo_lucio")},{value:"mezo_argana",label:t("categories.cosmetics.items.mezo_argana")},{value:"mezo_amber_wood",label:t("categories.cosmetics.items.mezo_amber_wood")},{value:"mezo_lavender",label:t("categories.cosmetics.items.mezo_lavender")},{value:"mezo_rumah",label:t("categories.cosmetics.items.mezo_rumah")},{value:"mezo_marrone",label:t("categories.cosmetics.items.mezo_marrone")},{value:"mezo_basic",label:t("categories.cosmetics.items.mezo_basic")},{value:"mezo_kids",label:t("categories.cosmetics.items.mezo_kids")},{value:"mezo_canisters5",label:t("categories.cosmetics.items.mezo_canisters5")},{value:"mezo_additional",label:t("categories.cosmetics.items.mezo_additional")},{value:"mezo_wall_cosmetics",label:t("categories.cosmetics.items.mezo_wall_cosmetics")}],minibars:[{value:"accessories",label:t("admin.categories.subcategories.minibars")}],custom_logo:[{value:"robes",label:t("admin.categories.subcategories.logo_robes")},{value:"slippers",label:t("admin.categories.subcategories.logo_slippers")},{value:"boxes",label:t("admin.categories.subcategories.boxes")}]},[V,W]=ae.useState({name:"",description:"",price:"",category:"",subcategory:"",brand:"",images:[""],dimensions:""}),q=async(te="all")=>{try{const fe=await fetch(`${_i}/api/subcategories?category=${te}`);if(fe.ok){const Se=await fe.json();H(Se.subcategories||[])}}catch(fe){console.error(" Error fetching subcategories:",fe),H([])}},oe=te=>{M(te),B("all"),q(te),ee(!1)},Y=()=>{M("all"),B("all"),c(""),ee(!1),ie(!1),q("all")};ae.useEffect(()=>{(async()=>{try{const fe=await fetch(`${_i}/api/health`);g(fe.ok?"healthy":"unhealthy")}catch{g("unreachable")}})()},[]),ae.useEffect(()=>{if(!e||e.role!=="admin"){x("/");return}I()},[e,x]),ae.useEffect(()=>{a==="products"&&q(P)},[a,P]);const I=async()=>{try{i(!0),console.log("    ...");const[te,fe,Se,je]=await Promise.all([fetch(`${_i}/api/orders`,{credentials:"include",headers:{"Content-Type":"application/json"}}),fetch(`${_i}/api/users`,{credentials:"include",headers:{"Content-Type":"application/json"}}),fetch(`${_i}/api/products`),fetch(`${_i}/api/designs`)]);let Me={orders:[]},Le={users:[]},_e={products:[]};if(te.ok&&(Me=await te.json(),console.log("  :",Me.orders?.length||0),S(Me.orders||[])),fe.ok&&(Le=await fe.json(),console.log("  :",Le.users?.length||0),T(Le.users||[])),Se.ok&&(_e=await Se.json(),console.log("  :",_e.products?.length||0),d(_e.products||[])),je.ok){const Ie=await je.json();console.log("  :",Ie.designs?.length||0),Z(Ie.designs||[])}else console.error("   :",je.status)}catch(te){console.error("   :",te),$(t("admin.notifications.loadError"),"error")}finally{i(!1)}},K=E.filter(te=>{const fe=r===""||te.name?.toLowerCase().includes(r.toLowerCase())||te.description?.toLowerCase().includes(r.toLowerCase()),Se=P==="all"||te.category===P,je=L==="all"||te.subcategory===L;return fe&&Se&&je}),ne=async te=>{if(te.preventDefault(),!V.name?.trim()){$(t("admin.productForm.validation.name"),"error");return}if(!V.price){$(t("admin.productForm.validation.price"),"error");return}if(!V.category){$(t("admin.productForm.validation.category"),"error");return}if(V.category==="custom_logo"&&!V.dimensions){$(t("admin.productForm.validation.dimensions"),"error");return}const fe=V.images.filter(je=>je.trim()!=="").map(je=>of(je.trim()));if(fe.length===0){$(t("admin.productForm.validation.images"),"error");return}if(fe.filter(je=>!lf(je)).length>0){$(t("admin.productForm.validation.invalidImages"),"error");return}try{console.log("    :",V);const je={name:V.name.trim(),description:V.description?.trim()||"",price:V.price.toString().trim(),category:V.category,subcategory:V.subcategory||"",brand:V.brand?.trim()||null,images:fe,dimensions:V.dimensions?.toString().trim()||""};console.log("  :",je);const Me=await fetch(`${_i}/api/products`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(je)});let Le;try{Le=await Me.json()}catch(_e){throw console.error("   :",_e),new Error(t("admin.notifications.parseError"))}if(console.log("  :",Le),Me.ok&&Le.success)d(_e=>[Le.product,..._e]),W({name:"",description:"",price:"",category:"",subcategory:"",brand:"",images:[""],dimensions:""}),$(t("admin.notifications.successAdd"),"success");else{const _e=Le.error||` ${Me.status}`;console.error("    :",_e),$(`${t("admin.notifications.addError")}: ${_e}`,"error")}}catch(je){console.error("   :",je),$(`${t("admin.notifications.addError")}: ${je.message}`,"error")}},le=te=>{o(te),W({name:te.name,description:te.description||"",price:te.price,category:te.category,subcategory:te.subcategory||"",brand:te.brand||"",dimensions:te.dimensions||"",images:te.images&&te.images.length>0?te.images.map(fe=>fe.url):[""]})},he=()=>{o(null),W({name:"",description:"",price:"",category:"",subcategory:"",brand:"",images:[""],dimensions:""})},ve=async te=>{if(te.preventDefault(),!s){$(t("admin.productForm.validation.noProduct"),"error");return}if(!V.name?.trim()){$(t("admin.productForm.validation.name"),"error");return}if(!V.price){$(t("admin.productForm.validation.price"),"error");return}if(!V.category){$(t("admin.productForm.validation.category"),"error");return}if(V.category==="custom_logo"&&!V.dimensions){$(t("admin.productForm.validation.dimensions"),"error");return}const fe=V.images.filter(je=>je.trim()!=="").map(je=>of(je.trim()));if(fe.length===0){$(t("admin.productForm.validation.images"),"error");return}if(fe.filter(je=>!lf(je)).length>0){$(t("admin.productForm.validation.invalidImages"),"error");return}try{console.log("  :",s.id,V);const je={name:V.name.trim(),description:V.description?.trim()||"",price:V.price.toString().trim(),category:V.category,subcategory:V.subcategory||"",brand:V.brand?.trim()||null,images:fe,dimensions:V.dimensions?.toString().trim()||""};console.log("  :",je);const Me=await fetch(`${_i}/api/products/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(je)});let Le;try{Le=await Me.json()}catch(_e){throw console.error("   :",_e),new Error(t("admin.notifications.parseError"))}if(console.log("    :",Le),Me.ok&&Le.success)d(_e=>_e.map(Ie=>Ie.id===s.id?Le.product:Ie)),he(),$(t("admin.notifications.successUpdate"),"success");else{const _e=Le.error||` ${Me.status}`;console.error("    :",_e),$(`${t("admin.notifications.updateError")}: ${_e}`,"error")}}catch(je){console.error("   :",je),$(`${t("admin.notifications.updateError")}: ${je.message}`,"error")}},ye=async te=>{if(confirm(t("admin.productForm.deleteConfirmation")))try{console.log("    ID:",te);const fe=await fetch(`${_i}/api/products/${te}`,{method:"DELETE",credentials:"include"});if(console.log("    :",fe.status),fe.ok)d(Se=>Se.filter(je=>je.id!==te)),$(t("admin.notifications.successDelete"),"success");else{const je=(await fe.json().catch(()=>({error:t("admin.notifications.unknownError")}))).error||` ${fe.status}`;console.error("    :",je),$(`${t("admin.notifications.deleteError")}: ${je}`,"error")}}catch(fe){console.error("   :",fe),$(t("admin.notifications.deleteError"),"error")}},Oe={totalUsers:_.length,totalOrders:v.length,totalProducts:E.length,totalRevenue:v.reduce((te,fe)=>te+(fe.total_amount||0),0)},pe=[{id:"products",name:t("admin.tabs.products"),icon:Jd,count:E.length},{id:"designs",name:t("admin.tabs.designs"),icon:rp},{id:"orders",name:t("admin.tabs.orders"),icon:$l,count:v.length},{id:"users",name:t("admin.tabs.users"),icon:mx,count:_.length},{id:"statistics",name:t("admin.tabs.statistics"),icon:mS}],de=[{id:"all",name:t("admin.categories.all")},{id:"textile",name:t("admin.categories.textile")},{id:"accessories",name:t("admin.categories.accessories")},{id:"cosmetics",name:t("admin.categories.cosmetics")},{id:"minibars",name:t("admin.categories.minibars")},{id:"custom_logo",name:t("admin.categories.custom_logo")}],Ce=()=>k.jsxs("form",{onSubmit:s?ve:ne,children:[k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[k.jsxs("div",{children:[k.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("admin.productForm.name")," *"]}),k.jsx("input",{type:"text",value:V.name,onChange:te=>W({...V,name:te.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white text-gray-900",placeholder:t("admin.productForm.namePlaceholder"),required:!0})]}),k.jsxs("div",{children:[k.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("admin.productForm.category")," *"]}),k.jsxs("select",{value:V.category,onChange:te=>W({...V,category:te.target.value,subcategory:""}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white text-gray-900",required:!0,children:[k.jsx("option",{value:"",children:t("admin.productForm.categoryPlaceholder")}),k.jsx("option",{value:"custom_logo",children:t("admin.categories.custom_logo")}),k.jsx("option",{value:"textile",children:t("admin.categories.textile")}),k.jsx("option",{value:"accessories",children:t("admin.categories.accessories")}),k.jsx("option",{value:"cosmetics",children:t("admin.categories.cosmetics")}),k.jsx("option",{value:"minibars",children:t("admin.categories.minibars")})]})]})]}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[k.jsxs("div",{children:[k.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("admin.productForm.price")," *"]}),k.jsx("input",{type:"text",value:V.price,onChange:te=>W({...V,price:te.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white text-gray-900",placeholder:t("admin.productForm.pricePlaceholder"),required:!0})]}),V.category==="custom_logo"&&k.jsxs("div",{children:[k.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t("admin.productForm.dimensions")," *"]}),k.jsx("input",{type:"number",min:1,value:V.dimensions,onChange:te=>W({...V,dimensions:te.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white text-gray-900",placeholder:t("admin.productForm.dimensionsPlaceholder"),required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("admin.productForm.subcategory")}),k.jsxs("select",{value:V.subcategory,onChange:te=>W({...V,subcategory:te.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white text-gray-900",children:[k.jsx("option",{value:"",children:t("admin.productForm.subcategoryPlaceholder")}),V.category&&R[V.category]?.map(te=>k.jsx("option",{value:te.value,children:te.label},te.value))]})]})]}),k.jsxs("div",{className:"mb-3 sm:mb-4",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("admin.productForm.brand")}),k.jsx("input",{type:"text",value:V.brand,onChange:te=>W({...V,brand:te.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white text-gray-900",placeholder:t("admin.productForm.brandPlaceholder")})]}),k.jsxs("div",{className:"mb-3 sm:mb-4",children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t("admin.productForm.description")}),k.jsx("textarea",{rows:"3",value:V.description,onChange:te=>W({...V,description:te.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white text-gray-900",placeholder:t("admin.productForm.descriptionPlaceholder")})]}),k.jsx(VT,{images:V.images,onImagesChange:te=>W({...V,images:te})}),k.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[k.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center text-sm sm:text-base",children:s?k.jsxs(k.Fragment,{children:[k.jsx(MS,{className:"w-4 h-4 mr-2"}),t("admin.productForm.saveButton")]}):k.jsxs(k.Fragment,{children:[k.jsx(Zd,{className:"w-4 h-4 mr-2"}),t("admin.productForm.addButton")]})}),s&&k.jsxs("button",{type:"button",onClick:he,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors flex items-center justify-center text-sm sm:text-base",children:[k.jsx(Ql,{className:"w-4 h-4 mr-2"}),t("admin.productForm.cancelButton")]})]})]});return l?k.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:k.jsx(ih,{size:"large",text:t("admin.loading")})}):k.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[w.show&&k.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm ${w.type==="success"?"bg-green-500 text-white":w.type==="error"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:k.jsxs("div",{className:"flex items-center",children:[w.type==="success"&&k.jsx(dx,{className:"w-5 h-5 mr-2"}),w.type==="error"&&k.jsx(hx,{className:"w-5 h-5 mr-2"}),k.jsx("span",{children:w.message})]})}),k.jsx("div",{className:"bg-white shadow-sm border-b",children:k.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6",children:[k.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center py-4 space-y-3 sm:space-y-0",children:[k.jsxs("div",{className:"flex items-center space-x-3",children:[k.jsx("button",{onClick:()=>x("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:k.jsx(Lp,{className:"w-5 h-5"})}),k.jsxs("div",{className:"min-w-0 flex-1",children:[k.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:t("admin.title")}),k.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:t("admin.welcome",{name:e?.name})})]})]}),k.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.jsx("button",{onClick:I,className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors text-xs sm:text-sm flex-1 sm:flex-none text-center min-w-[120px]",children:t("admin.refresh")}),k.jsx("button",{onClick:h,className:"bg-gray-200 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-300 transition-colors text-xs sm:text-sm flex-1 sm:flex-none text-center min-w-[120px]",children:t("admin.logout")})]})]}),k.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 py-3 sm:py-4",children:[k.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg border shadow-sm text-center",children:[k.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-600",children:Oe.totalUsers}),k.jsx("div",{className:"text-xs sm:text-sm text-gray-600 truncate",children:t("admin.stats.users")})]}),k.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg border shadow-sm text-center",children:[k.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-600",children:Oe.totalOrders}),k.jsx("div",{className:"text-xs sm:text-sm text-gray-600 truncate",children:t("admin.stats.orders")})]}),k.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg border shadow-sm text-center",children:[k.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-purple-600",children:Oe.totalProducts}),k.jsx("div",{className:"text-xs sm:text-sm text-gray-600 truncate",children:t("admin.stats.products")})]}),k.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg border shadow-sm text-center",children:[k.jsxs("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-orange-600 truncate",children:[Oe.totalRevenue.toLocaleString("ru-RU")," "]}),k.jsx("div",{className:"text-xs sm:text-sm text-gray-600 truncate",children:t("admin.stats.revenue")})]})]}),k.jsx("div",{className:"block sm:hidden border-t pt-3",children:k.jsx("select",{value:a,onChange:te=>m(te.target.value),className:"w-full p-2 border rounded-lg bg-white text-gray-900 text-sm",children:pe.map(te=>(te.icon,k.jsxs("option",{value:te.id,className:"text-gray-900",children:[te.name," ",te.count!==void 0&&`(${te.count})`]},te.id)))})}),k.jsx("div",{className:"hidden sm:block border-t",children:k.jsx("nav",{className:"-mb-px flex space-x-4 lg:space-x-8 overflow-x-auto",children:pe.map(te=>{const fe=te.icon;return k.jsxs("button",{onClick:()=>m(te.id),className:`flex items-center space-x-1 lg:space-x-2 py-3 px-1 border-b-2 font-medium text-sm whitespace-nowrap flex-shrink-0 ${a===te.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[k.jsx(fe,{className:"w-4 h-4"}),k.jsx("span",{children:te.name}),te.count!==void 0&&k.jsx("span",{className:"bg-gray-100 text-gray-900 px-1.5 py-0.5 rounded-full text-xs",children:te.count})]},te.id)})})})]})}),k.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-4 sm:py-6",children:[k.jsxs("div",{className:"mb-4 sm:mb-6",children:[k.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[k.jsx("div",{className:"flex-1",children:k.jsxs("div",{className:"relative",children:[k.jsx(gx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),k.jsx("input",{type:"text",placeholder:t("admin.search.placeholder"),value:r,onChange:te=>c(te.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent outline-none bg-white text-gray-900"})]})}),k.jsx("div",{className:"block lg:hidden",children:k.jsxs("button",{onClick:()=>U(!ue),className:"w-full flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-700 hover:bg-gray-50",children:[k.jsx(SS,{className:"w-4 h-4"}),t("admin.filters.title"),ue?k.jsx(hg,{className:"w-4 h-4"}):k.jsx(Ud,{className:"w-4 h-4"})]})}),k.jsxs("div",{className:"hidden lg:flex gap-4",children:[k.jsxs("div",{className:"relative",children:[k.jsxs("button",{onClick:()=>ee(!Q),className:`flex items-center gap-2 px-4 py-2 border rounded-lg bg-white text-sm min-w-[160px] justify-between ${P!=="all"?"border-blue-500 text-blue-600":"border-gray-300 text-gray-700"}`,children:[k.jsx("span",{children:de.find(te=>te.id===P)?.name||t("admin.categories.all")}),Q?k.jsx(hg,{className:"w-4 h-4"}):k.jsx(Ud,{className:"w-4 h-4"})]}),Q&&k.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10",children:de.map(te=>k.jsx("button",{onClick:()=>oe(te.id),className:`w-full text-left px-4 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg ${P===te.id?"bg-blue-50 text-blue-600":"text-gray-700"}`,children:te.name},te.id))})]}),k.jsxs("div",{className:"relative",children:[k.jsxs("button",{onClick:()=>ie(!se),disabled:P==="all"||D.length===0,className:`flex items-center gap-2 px-4 py-2 border rounded-lg bg-white text-sm min-w-[160px] justify-between ${L!=="all"?"border-blue-500 text-blue-600":"border-gray-300 text-gray-700"} ${P==="all"||D.length===0?"opacity-50 cursor-not-allowed":""}`,children:[k.jsx("span",{children:L==="all"?t("admin.filters.allSubcategories"):D.find(te=>te===L)||t("admin.filters.subcategory")}),se?k.jsx(hg,{className:"w-4 h-4"}):k.jsx(Ud,{className:"w-4 h-4"})]}),se&&P!=="all"&&D.length>0&&k.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto",children:[k.jsx("button",{onClick:()=>{B("all"),ie(!1)},className:`w-full text-left px-4 py-2 hover:bg-gray-50 rounded-t-lg ${L==="all"?"bg-blue-50 text-blue-600":"text-gray-700"}`,children:t("admin.filters.allSubcategories")}),D.map(te=>k.jsx("button",{onClick:()=>{B(te),ie(!1)},className:`w-full text-left px-4 py-2 hover:bg-gray-50 last:rounded-b-lg ${L===te?"bg-blue-50 text-blue-600":"text-gray-700"}`,children:te},te))]})]}),(P!=="all"||L!=="all"||r)&&k.jsx("button",{onClick:Y,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg bg-white hover:bg-gray-50",children:t("admin.filters.clear")})]})]}),ue&&k.jsxs("div",{className:"lg:hidden mt-4 p-4 bg-white border border-gray-300 rounded-lg space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("admin.filters.category")}),k.jsx("select",{value:P,onChange:te=>oe(te.target.value),className:"w-full p-2 border border-gray-300 rounded-lg bg-white text-gray-900",children:de.map(te=>k.jsx("option",{value:te.id,children:te.name},te.id))})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("admin.filters.subcategory")}),k.jsxs("select",{value:L,onChange:te=>B(te.target.value),disabled:P==="all"||D.length===0,className:"w-full p-2 border border-gray-300 rounded-lg bg-white text-gray-900 disabled:opacity-50",children:[k.jsx("option",{value:"all",children:t("admin.filters.allSubcategories")}),D.map(te=>k.jsx("option",{value:te,children:te},te))]})]}),(P!=="all"||L!=="all"||r)&&k.jsx("button",{onClick:Y,className:"w-full px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg bg-white hover:bg-gray-50",children:t("admin.filters.clearAll")})]}),k.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[t("admin.filters.showing",{count:K.length,total:E.length}),(P!=="all"||L!=="all")&&k.jsxs("span",{className:"ml-2",children:[" ",de.find(te=>te.id===P)?.name,L!=="all"&&`  ${L}`]})]})]}),a==="products"&&k.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 sm:p-6",children:[k.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center",children:[s?k.jsx(H0,{className:"w-5 h-5 mr-2"}):k.jsx(Zd,{className:"w-5 h-5 mr-2"}),t(s?"admin.productForm.editTitle":"admin.productForm.addTitle")]}),Ce()]}),k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[k.jsxs("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("admin.products.title",{count:K.length,total:E.length})}),(P!=="all"||L!=="all")&&k.jsx("button",{onClick:Y,className:"mt-2 sm:mt-0 text-sm text-blue-600 hover:text-blue-800",children:t("admin.filters.clear")})]}),k.jsx("div",{className:"divide-y",children:K.map(te=>k.jsxs("div",{className:"p-4 sm:p-6 flex flex-col sm:flex-row sm:items-center sm:justify-between hover:bg-gray-50 space-y-3 sm:space-y-0",children:[k.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0",children:[k.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-100 rounded-lg flex-shrink-0 overflow-hidden",children:k.jsx("img",{src:te.images&&te.images.length>0?te.images[0].url:"https://via.placeholder.com/60x60?text=No+Image",alt:te.name,className:"w-full h-full object-cover",onError:fe=>{fe.target.src="https://via.placeholder.com/60x60?text=Error"}})}),k.jsxs("div",{className:"min-w-0 flex-1",children:[k.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:te.name}),k.jsxs("p",{className:"text-sm text-gray-600 truncate",children:[te.price,"  ",te.category,te.subcategory&&`  ${te.subcategory}`,te.brand&&`  ${te.brand}`,te.category==="custom_logo"&&te.dimensions&&`  ${t("admin.productForm.minOrder")}: ${te.dimensions} ${t("admin.productForm.pcs")}`]}),te.description&&k.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:te.description}),k.jsx("p",{className:"text-xs text-gray-400 mt-1",children:t("admin.products.imagesCount",{count:te.images?.length||0})})]})]}),k.jsxs("div",{className:"flex space-x-2 self-end sm:self-auto",children:[k.jsx("button",{onClick:()=>le(te),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:t("admin.products.edit"),children:k.jsx(H0,{className:"w-4 h-4"})}),k.jsx("button",{onClick:()=>ye(te.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:t("admin.products.delete"),children:k.jsx(hf,{className:"w-4 h-4"})})]})]},te.id))})]})]}),a==="orders"&&k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[k.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b",children:k.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("admin.orders.title",{count:v.length})})}),k.jsx("div",{className:"divide-y",children:v.map(te=>k.jsxs("div",{className:"p-4 sm:p-6 hover:bg-gray-50",children:[k.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-2 sm:space-y-0 mb-3",children:[k.jsxs("div",{className:"flex-1 min-w-0",children:[k.jsxs("h4",{className:"font-semibold text-gray-900 truncate",children:["#",te.order_number," - ",te.customer_name||t("admin.orders.noName")]}),k.jsxs("p",{className:"text-sm text-gray-600 truncate",children:[te.customer_phone,"  ",te.customer_email]})]}),k.jsxs("div",{className:"text-right",children:[k.jsxs("div",{className:"text-lg font-bold text-blue-600 whitespace-nowrap",children:[te.total_amount?.toLocaleString("ru-RU")," "]}),k.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:new Date(te.created_at).toLocaleString("ru-RU")})]})]}),te.items&&te.items.length>0&&k.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[k.jsxs("h5",{className:"font-medium mb-2 text-sm text-gray-900",children:[t("admin.orders.items"),":"]}),k.jsx("div",{className:"space-y-1",children:te.items.map((fe,Se)=>k.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[k.jsxs("span",{className:"truncate flex-1 mr-2 text-gray-900",children:[fe.name,"  ",fe.quantity]}),k.jsx("span",{className:"font-medium whitespace-nowrap text-gray-900",children:fe.price})]},Se))})]})]},te.id))})]}),a==="users"&&k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[k.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b",children:k.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("admin.users.title",{count:_.length})})}),k.jsx("div",{className:"divide-y",children:_.map(te=>k.jsxs("div",{className:"p-4 sm:p-6 flex flex-col sm:flex-row sm:justify-between sm:items-center hover:bg-gray-50 space-y-2 sm:space-y-0",children:[k.jsxs("div",{className:"flex-1 min-w-0",children:[k.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:te.name}),k.jsx("p",{className:"text-sm text-gray-600 truncate",children:te.email}),te.phone&&k.jsx("p",{className:"text-xs text-gray-500 truncate",children:te.phone})]}),k.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[k.jsx("span",{className:`px-2 py-1 rounded-full text-xs whitespace-nowrap ${te.role==="admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:te.role==="admin"?t("admin.users.roleAdmin"):t("admin.users.roleUser")}),k.jsx("span",{className:"text-xs sm:text-sm text-gray-500 whitespace-nowrap",children:new Date(te.createdAt).toLocaleDateString("ru-RU")})]})]},te.id))})]}),a==="designs"&&k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[k.jsxs("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b flex justify-between items-center",children:[k.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[k.jsx(rp,{className:"w-5 h-5 text-blue-600"}),t("admin.designs.title",{count:X.length})]}),k.jsx("button",{onClick:I,className:"bg-blue-600 text-white text-sm px-3 py-1.5 rounded-lg hover:bg-blue-700 transition-colors",children:t("admin.refresh")})]}),X.length===0?k.jsx("div",{className:"text-center py-10 text-gray-500",children:t("admin.designs.empty")}):k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5 p-5",children:X.map(te=>k.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 overflow-hidden shadow hover:shadow-md transition-shadow",children:[k.jsxs("div",{className:"bg-white h-52 flex items-center justify-center border-b relative",children:[k.jsx("img",{src:te.thumbUrl?.startsWith("http")?te.thumbUrl:te.thumbUrl?Id(te.thumbUrl||te.mockupUrl):te.mockupUrl?.startsWith("http")?te.mockupUrl:te.mockupUrl?Id(te.thumbUrl||te.mockupUrl):"/placeholder.png",alt:te.productType||"Design preview",className:"w-full h-48 object-contain bg-white"}),k.jsxs("div",{className:"absolute top-2 right-2 bg-white bg-opacity-80 rounded-full px-2 py-1 text-xs text-gray-600",children:["#",te.id]})]}),k.jsxs("div",{className:"p-4 flex flex-col justify-between h-[140px]",children:[k.jsxs("div",{children:[k.jsx("h4",{className:"font-semibold text-gray-800 truncate",children:te.name||t("admin.designs.noName")}),k.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(te.createdAt).toLocaleString("ru-RU")})]}),k.jsxs("div",{className:"flex gap-2 mt-3",children:[k.jsx("a",{href:te.mockupUrl?.startsWith("http")?te.mockupUrl:te.mockupUrl?Id(te.mockupUrl||te.thumbUrl):te.thumbUrl?.startsWith("http")?te.thumbUrl:te.thumbUrl?Id(te.mockupUrl||te.thumbUrl):"#",target:"_blank",rel:"noreferrer",className:"flex-1 bg-blue-600 text-white text-center text-sm py-1.5 rounded-lg hover:bg-blue-700 transition",children:t("admin.designs.view")}),k.jsx("button",{onClick:async()=>{try{const fe=te.mockupUrl||te.thumbUrl;if(!fe){alert(t("admin.designs.noImageError"));return}const Se=await fetch(fe);if(!Se.ok)throw new Error(t("admin.designs.downloadError"));const je=await Se.blob(),Me=document.createElement("a");Me.href=URL.createObjectURL(je),Me.download=`${te.id}.png`,document.body.appendChild(Me),Me.click(),Me.remove(),URL.revokeObjectURL(Me.href)}catch(fe){console.error(" :",fe),alert(t("admin.designs.downloadFailed"))}},className:"flex-1 bg-green-600 text-white text-center text-sm py-1.5 rounded-lg hover:bg-green-700 transition",children:t("admin.designs.download")})]}),k.jsx("button",{onClick:async()=>{confirm(t("admin.designs.deleteConfirmation"))&&(await fetch(`${_i}/api/designs/${te.id}`,{method:"DELETE",credentials:"include"}),Z(fe=>fe.filter(Se=>Se.id!==te.id)))},className:"mt-2 bg-red-100 text-red-600 text-sm rounded-lg py-1 hover:bg-red-200 transition",children:t("admin.designs.delete")})]})]},te.id))})]}),a==="statistics"&&k.jsx("div",{className:"space-y-4 sm:space-y-6",children:k.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 sm:p-6",children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3 sm:mb-4",children:t("admin.statistics.title")}),(()=>{const te={};let fe=0,Se=0;v.forEach(Me=>{(Me.items||[]).forEach(Le=>{const _e=Le.productId+"|"+Le.name;te[_e]||(te[_e]={id:Le.productId,name:Le.name,quantity:0,revenue:0});const Ie=Number(Le.quantity)||0,Je=(parseInt(String(Le.price||"0").replace(/[^\d]/g,""))||0)*Ie;te[_e].quantity+=Ie,te[_e].revenue+=Je,fe+=Je,Se+=Ie})});const je=Object.values(te).sort((Me,Le)=>Le.revenue-Me.revenue);return k.jsxs("div",{children:[k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[k.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4 text-center",children:[k.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:v.length}),k.jsx("div",{className:"text-xs sm:text-sm text-blue-800",children:t("admin.statistics.totalOrders")})]}),k.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4 text-center",children:[k.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-600",children:Se}),k.jsx("div",{className:"text-xs sm:text-sm text-green-800",children:t("admin.statistics.itemsSold")})]}),k.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 sm:p-4 text-center",children:[k.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-purple-600 truncate",children:[fe.toLocaleString("ru-RU")," "]}),k.jsx("div",{className:"text-xs sm:text-sm text-purple-800",children:t("admin.statistics.totalRevenue")})]})]}),je.length===0?k.jsx("div",{className:"text-center py-6 sm:py-8 text-gray-500",children:t("admin.statistics.noData")}):k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[k.jsx("thead",{children:k.jsxs("tr",{className:"border-b",children:[k.jsx("th",{className:"text-left py-2 sm:py-3 font-medium",children:t("admin.statistics.table.product")}),k.jsx("th",{className:"text-left py-2 sm:py-3 font-medium",children:t("admin.statistics.table.quantity")}),k.jsx("th",{className:"text-left py-2 sm:py-3 font-medium",children:t("admin.statistics.table.revenue")}),k.jsx("th",{className:"text-left py-2 sm:py-3 font-medium",children:t("admin.statistics.table.share")})]})}),k.jsx("tbody",{children:je.map((Me,Le)=>{const _e=fe>0?(Me.revenue/fe*100).toFixed(1):0;return k.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[k.jsxs("td",{className:"py-2 sm:py-3",children:[k.jsx("div",{className:"font-medium truncate max-w-[120px] sm:max-w-none",children:Me.name}),k.jsxs("div",{className:"text-gray-500 text-xs",children:["ID: ",Me.id]})]}),k.jsxs("td",{className:"py-2 sm:py-3",children:[Me.quantity," ",t("admin.statistics.table.pcs")]}),k.jsxs("td",{className:"py-2 sm:py-3 font-medium whitespace-nowrap",children:[Me.revenue.toLocaleString("ru-RU")," "]}),k.jsx("td",{className:"py-2 sm:py-3",children:k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx("div",{className:"w-12 sm:w-16 bg-gray-200 rounded-full h-2",children:k.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${_e}%`}})}),k.jsxs("span",{className:"text-gray-600 text-xs sm:text-sm",children:[_e,"%"]})]})})]},Me.id)})})]})})]})})()]})})]})]})},HT=()=>{const{t,i18n:e}=cn(),[h,x]=ae.useState([]),[v,S]=ae.useState(!0),[_,T]=ae.useState(null);ae.useEffect(()=>{const d=async()=>{try{const c=(e.language||"ru").split("-")[0],i=await(await fetch(`${Np}/api/news?lng=${c}`,{headers:{"Accept-Language":c}})).json();i.success&&Array.isArray(i.news)&&x(i.news)}catch(c){console.error(t("news.errorLoad"),c)}finally{S(!1)}};d();const r=setTimeout(()=>{e.language&&d()},400);return()=>clearTimeout(r)},[e.language]);const E=d=>{const r={ru:"ru-RU",kk:"kk-KZ",en:"en-US"},c=(e.language||"ru").split("-")[0];return new Date(d).toLocaleDateString(r[c]||"ru-RU",{year:"numeric",month:"long",day:"numeric"})};return v?k.jsx("div",{className:"p-8 text-center",children:t("news.loading")}):k.jsxs("div",{className:"max-w-6xl mx-auto p-8",children:[k.jsx("h1",{className:"text-4xl font-bold mb-10 text-gray-900 dark:text-white",children:t("news.title")}),h.length===0?k.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t("news.empty")}):k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map(d=>{const r=e.language?.split("-")[0]||"ru",c=d[`title_${r}`]||d.title_ru||d.title||t("news.noTitle"),l=d[`excerpt_${r}`]||d.excerpt||(d.content?.slice(0,150)||"")+"...";return d[`content_${r}`]||d.content_ru||d.content,k.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 cursor-pointer",onClick:()=>T(d),children:[k.jsxs("div",{className:"relative overflow-hidden",children:[k.jsx("img",{src:af(d.imageUrl),alt:c,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500",onError:i=>{i.currentTarget.src="/news-fallback.jpg"}}),k.jsx("div",{className:"absolute top-4 left-4",children:k.jsx("span",{className:"bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:t("news.tag")})})]}),k.jsxs("div",{className:"p-6",children:[k.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-3",children:[k.jsx(rh,{className:"w-4 h-4"}),k.jsx("span",{children:E(d.publishedAt)})]}),k.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors line-clamp-2",children:c}),k.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 line-clamp-3",children:l}),k.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 font-semibold group-hover:gap-3 transition-all",children:[k.jsx("span",{children:t("news.readMore")}),k.jsx(np,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})]})]})]},d.id)})}),_&&k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:k.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-4xl max-h-[90vh] overflow-y-auto",children:[k.jsxs("div",{className:"relative",children:[k.jsx("img",{src:af(_.imageUrl),alt:_.title,className:"w-full h-64 object-cover",onError:d=>{d.currentTarget.src="/news-fallback.jpg"}}),k.jsx("button",{onClick:()=>T(null),className:"absolute top-4 right-4 bg-white dark:bg-gray-800 rounded-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":t("news.close"),children:""})]}),k.jsx("div",{className:"p-8",children:(()=>{const d=e.language?.split("-")[0]||"ru",r=_[`title_${d}`]||_.title_ru||_.title||t("news.noTitle"),c=_[`content_${d}`]||_.content_ru||_.content||"";return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[k.jsx(rh,{className:"w-4 h-4"}),k.jsx("span",{children:E(_.publishedAt)}),_.author&&k.jsxs("span",{children:[" ",_.author]})]}),k.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:r}),k.jsx("div",{className:"prose dark:prose-invert max-w-none",children:c.split(`
`).map((l,i)=>k.jsx("p",{className:"mb-4 text-gray-700 dark:text-gray-300 leading-relaxed",children:l},i))})]})})()})]})})]})};function WT(){const{t}=cn(),e=Ns();return k.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white",children:[k.jsxs("section",{className:"relative bg-gradient-to-br from-blue-700 via-blue-600 to-blue-500 text-white py-24 overflow-hidden",children:[k.jsx("div",{className:"absolute inset-0 bg-black/30"}),k.jsxs("div",{className:"relative max-w-6xl mx-auto px-6 text-center",children:[k.jsx("h1",{className:"text-5xl font-bold mb-4 drop-shadow-md",children:t("logoLanding.hero.title")}),k.jsx("p",{className:"text-lg md:text-xl mb-10 max-w-2xl mx-auto opacity-90 leading-relaxed",children:t("logoLanding.hero.subtitle")}),k.jsxs("button",{onClick:()=>e("/logo-editor"),className:"bg-white text-blue-700 font-semibold px-6 py-3 rounded-xl shadow-lg hover:bg-gray-100 transition transform hover:-translate-y-1 flex items-center justify-center mx-auto gap-2",children:[k.jsx(Ap,{className:"w-5 h-5"}),t("logoLanding.hero.button")]})]})]}),k.jsxs("section",{className:"max-w-6xl mx-auto px-6 py-20 text-center",children:[k.jsx("h2",{className:"text-3xl font-bold mb-12 text-blue-700 dark:text-blue-400",children:t("logoLanding.process.title")}),k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[k.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 hover:-translate-y-1 transition",children:[k.jsx(OS,{className:"w-10 h-10 text-blue-600 mx-auto mb-4"}),k.jsx("h3",{className:"text-xl font-semibold mb-2",children:t("logoLanding.process.step1.title")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("logoLanding.process.step1.text")})]}),k.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 hover:-translate-y-1 transition",children:[k.jsx(Jd,{className:"w-10 h-10 text-blue-600 mx-auto mb-4"}),k.jsx("h3",{className:"text-xl font-semibold mb-2",children:t("logoLanding.process.step2.title")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("logoLanding.process.step2.text")})]}),k.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 hover:-translate-y-1 transition",children:[k.jsx(Rp,{className:"w-10 h-10 text-blue-600 mx-auto mb-4"}),k.jsx("h3",{className:"text-xl font-semibold mb-2",children:t("logoLanding.process.step3.title")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t("logoLanding.process.step3.text")})]})]})]}),k.jsx("section",{className:"bg-gray-100 dark:bg-gray-800 py-20",children:k.jsxs("div",{className:"max-w-6xl mx-auto px-6 text-center",children:[k.jsx("h2",{className:"text-3xl font-bold mb-10 text-blue-700 dark:text-blue-400",children:t("logoLanding.cases.title")}),k.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-10 max-w-2xl mx-auto",children:t("logoLanding.cases.subtitle")}),k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{name:t("logoLanding.cases.project1"),img:"/images/logo1.jpg"},{name:t("logoLanding.cases.project2"),img:"/images/logo2.jpg"},{name:t("logoLanding.cases.project3"),img:"/images/logo3.jpg"}].map((h,x)=>k.jsxs("div",{className:"rounded-2xl overflow-hidden bg-white dark:bg-gray-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition",children:[k.jsx("img",{src:h.img,alt:h.name,className:"w-full h-56 object-cover"}),k.jsxs("div",{className:"p-4",children:[k.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:h.name}),k.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:t("logoLanding.cases.description")})]})]},x))})]})})]})}var Vg={};const XT={},YT=Object.freeze(Object.defineProperty({__proto__:null,default:XT},Symbol.toStringTag,{value:"Module"})),Gg=Nw(YT);var M1;function qT(){return M1||(M1=1,(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"4.5.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var h=Gg,x=new h.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=x.document,e.jsdomImplForWrapper=Gg.implForWrapper,e.nodeCanvas=Gg.Canvas,e.window=x,DOMParser=e.window.DOMParser}if(e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),typeof v>"u")var v={};if((function(d){d.modifyEventListener=!1,d.modifySelectors=!1,d.configure=function(D){isFinite(D.modifyEventListener)&&(d.modifyEventListener=D.modifyEventListener),isFinite(D.modifySelectors)&&(d.modifySelectors=D.modifySelectors),P===!1&&d.modifyEventListener&&M(),L===!1&&d.modifySelectors&&B()},d.add=function(D,H,Q,ee){return c(D,H,Q,ee,"add")},d.remove=function(D,H,Q,ee){return c(D,H,Q,ee,"remove")},d.returnFalse=function(D){return!1},d.stop=function(D){D&&(D.stopPropagation&&D.stopPropagation(),D.cancelBubble=!0,D.cancelBubbleCount=0)},d.prevent=function(D){D&&(D.preventDefault?D.preventDefault():D.preventManipulation?D.preventManipulation():D.returnValue=!1)},d.cancel=function(D){d.stop(D),d.prevent(D)},d.blur=function(){var D=document.activeElement;if(D){var H=document.activeElement.nodeName;(H==="INPUT"||H==="TEXTAREA"||D.contentEditable==="true")&&D.blur&&D.blur()}},d.getEventSupport=function(D,H){if(typeof D=="string"&&(H=D,D=window),H="on"+H,H in D)return!0;if(D.setAttribute||(D=document.createElement("div")),D.setAttribute&&D.removeAttribute){D.setAttribute(H,"");var Q=typeof D[H]=="function";return typeof D[H]<"u"&&(D[H]=null),D.removeAttribute(H),Q}};var r=function(D){if(!D||typeof D!="object")return D;var H=new D.constructor;for(var Q in D)!D[Q]||typeof D[Q]!="object"?H[Q]=D[Q]:H[Q]=r(D[Q]);return H},c=function(D,H,Q,ee,se,ie){if(ee=ee||{},String(D)==="[object Object]"){var ue=D;if(D=ue.target,delete ue.target,ue.type&&ue.listener){H=ue.type,delete ue.type,Q=ue.listener,delete ue.listener;for(var U in ue)ee[U]=ue[U]}else{for(var X in ue){var Z=ue[X];typeof Z!="function"&&(ee[X]=Z)}var $={};for(var U in ue){var X=U.split(","),R=ue[U],V={};for(var W in ee)V[W]=ee[W];if(typeof R=="function")var Q=R;else if(typeof R.listener=="function"){var Q=R.listener;for(var W in R)typeof R[W]!="function"&&(V[W]=R[W])}else continue;for(var q=0;q<X.length;q++)$[U]=v.add(D,X[q],Q,V,se)}return $}}if(!(!D||!H||!Q)){if(typeof D=="string"&&H==="ready")if(window.eventjs_stallOnReady)H="load",D=window;else{var oe=new Date().getTime(),Y=ee.timeout,I=ee.interval||1e3/60,K=window.setInterval(function(){new Date().getTime()-oe>Y&&window.clearInterval(K),document.querySelector(D)&&(window.clearInterval(K),setTimeout(Q,1))},I);return}if(typeof D=="string"){if(D=document.querySelectorAll(D),D.length===0)return i("Missing target on listener!",arguments);D.length===1&&(D=D[0])}var ne,le={};if(D.length>0&&D!==window){for(var he=0,ve=D.length;he<ve;he++)ne=c(D[he],H,Q,r(ee),se),ne&&(le[he]=ne);return l(le)}if(typeof H=="string"&&(H=H.toLowerCase(),H.indexOf(" ")!==-1?H=H.split(" "):H.indexOf(",")!==-1&&(H=H.split(","))),typeof H!="string"){if(typeof H.length=="number")for(var ye=0,Oe=H.length;ye<Oe;ye++)ne=c(D,H[ye],Q,r(ee),se),ne&&(le[H[ye]]=ne);else for(var U in H)typeof H[U]=="function"?ne=c(D,U,H[U],r(ee),se):ne=c(D,U,H[U].listener,r(H[U]),se),ne&&(le[U]=ne);return l(le)}else H.indexOf("on")===0&&(H=H.substr(2));if(typeof D!="object")return i("Target is not defined!",arguments);if(typeof Q!="function")return i("Listener is not a function!",arguments);var pe=ee.useCapture||!1,de=g(D)+"."+g(Q)+"."+(pe?1:0);if(d.Gesture&&d.Gesture._gestureHandlers[H]){if(de=H+de,se==="remove"){if(!m[de])return;m[de].remove(),delete m[de]}else if(se==="add"){if(m[de])return m[de].add(),m[de];if(ee.useCall&&!d.modifyEventListener){var Ce=Q;Q=function(Se,je){for(var Me in je)Se[Me]=je[Me];return Ce.call(D,Se)}}ee.gesture=H,ee.target=D,ee.listener=Q,ee.fromOverwrite=ie,m[de]=d.proxy[H](ee)}return m[de]}else{for(var te=a(H),q=0,fe;q<te.length;q++)if(H=te[q],fe=H+"."+de,se==="remove"){if(!m[fe])continue;D[C](H,Q,pe),delete m[fe]}else if(se==="add"){if(m[fe])return m[fe];D[w](H,Q,pe),m[fe]={id:fe,type:H,target:D,listener:Q,remove:function(){for(var je=0;je<te.length;je++)d.remove(D,te[je],Q,ee)}}}return m[fe]}}},l=function(D){return{remove:function(){for(var H in D)D[H].remove()},add:function(){for(var H in D)D[H].add()}}},i=function(D,H){typeof console>"u"||typeof console.error>"u"||console.error(D,H)},s={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},o={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,mouseup:2};(function(){d.supports={},window.navigator.msPointerEnabled&&(d.supports.msPointer=!0),d.getEventSupport("touchstart")&&(d.supports.touch=!0),d.getEventSupport("mousedown")&&(d.supports.mouse=!0)})();var a=(function(){return function(D){var H=document.addEventListener?"":"on",Q=o[D];if(isFinite(Q)){var ee=[];for(var se in d.supports)ee.push(H+s[se][Q]);return ee}else return[H+D]}})(),m={},f=0,g=function(D){return D===window?"#window":D===document?"#document":(D.uniqueID||(D.uniqueID="e"+f++),D.uniqueID)},w=document.addEventListener?"addEventListener":"attachEvent",C=document.removeEventListener?"removeEventListener":"detachEvent";d.createPointerEvent=function(D,H,Q){var ee=H.gesture,se=H.target,ie=D.changedTouches||d.proxy.getCoords(D);if(ie.length){var ue=ie[0];H.pointers=Q?[]:ie,H.pageX=ue.pageX,H.pageY=ue.pageY,H.x=H.pageX,H.y=H.pageY}var U=document.createEvent("Event");U.initEvent(ee,!0,!0),U.originalEvent=D;for(var X in H)X!=="target"&&(U[X]=H[X]);var Z=U.type;d.Gesture&&d.Gesture._gestureHandlers[Z]&&H.oldListener.call(se,U,H,!1)};var P=!1,M=function(){if(window.HTMLElement){var D=function(H){var Q=function(ee){var se=ee+"EventListener",ie=H[se];H[se]=function(ue,U,X){if(d.Gesture&&d.Gesture._gestureHandlers[ue]){var Z=X;typeof X=="object"?Z.useCall=!0:Z={useCall:!0,useCapture:X},c(this,ue,U,Z,ee,!0)}else for(var $=a(ue),R=0;R<$.length;R++)ie.call(this,$[R],U,X)}};Q("add"),Q("remove")};navigator.userAgent.match(/Firefox/)?(D(HTMLDivElement.prototype),D(HTMLCanvasElement.prototype)):D(HTMLElement.prototype),D(document),D(window)}},L=!1,B=function(){var D=NodeList.prototype;D.removeEventListener=function(H,Q,ee){for(var se=0,ie=this.length;se<ie;se++)this[se].removeEventListener(H,Q,ee)},D.addEventListener=function(H,Q,ee){for(var se=0,ie=this.length;se<ie;se++)this[se].addEventListener(H,Q,ee)}};return d})(v),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){d.pointerSetup=function(l,i){l.target=l.target||window,l.doc=l.target.ownerDocument||l.target,l.minFingers=l.minFingers||l.fingers||1,l.maxFingers=l.maxFingers||l.fingers||1/0,l.position=l.position||"relative",delete l.fingers,i=i||{},i.enabled=!0,i.gesture=l.gesture,i.target=l.target,i.env=l.env,v.modifyEventListener&&l.fromOverwrite&&(l.oldListener=l.listener,l.listener=v.createPointerEvent);var s=0,o=i.gesture.indexOf("pointer")===0&&v.modifyEventListener?"pointer":"mouse";return l.oldListener&&(i.oldListener=l.oldListener),i.listener=l.listener,i.proxy=function(a){i.defaultListener=l.listener,l.listener=a,a(l.event,i)},i.add=function(){i.enabled!==!0&&(l.onPointerDown&&v.add(l.target,o+"down",l.onPointerDown),l.onPointerMove&&v.add(l.doc,o+"move",l.onPointerMove),l.onPointerUp&&v.add(l.doc,o+"up",l.onPointerUp),i.enabled=!0)},i.remove=function(){i.enabled!==!1&&(l.onPointerDown&&v.remove(l.target,o+"down",l.onPointerDown),l.onPointerMove&&v.remove(l.doc,o+"move",l.onPointerMove),l.onPointerUp&&v.remove(l.doc,o+"up",l.onPointerUp),i.reset(),i.enabled=!1)},i.pause=function(a){l.onPointerMove&&(!a||a.move)&&v.remove(l.doc,o+"move",l.onPointerMove),l.onPointerUp&&(!a||a.up)&&v.remove(l.doc,o+"up",l.onPointerUp),s=l.fingers,l.fingers=0},i.resume=function(a){l.onPointerMove&&(!a||a.move)&&v.add(l.doc,o+"move",l.onPointerMove),l.onPointerUp&&(!a||a.up)&&v.add(l.doc,o+"up",l.onPointerUp),l.fingers=s},i.reset=function(){l.tracker={},l.fingers=0},i};var r=v.supports;v.isMouse=!!r.mouse,v.isMSPointer=!!r.touch,v.isTouch=!!r.msPointer,d.pointerStart=function(l,i,s){var o=(l.type||"mousedown").toUpperCase();o.indexOf("MOUSE")===0?(v.isMouse=!0,v.isTouch=!1,v.isMSPointer=!1):o.indexOf("TOUCH")===0?(v.isMouse=!1,v.isTouch=!0,v.isMSPointer=!1):o.indexOf("MSPOINTER")===0&&(v.isMouse=!1,v.isTouch=!1,v.isMSPointer=!0);var a=function(D,H){var Q=s.bbox,ee=f[H]={};switch(s.position){case"absolute":ee.offsetX=0,ee.offsetY=0;break;case"differenceFromLast":ee.offsetX=D.pageX,ee.offsetY=D.pageY;break;case"difference":ee.offsetX=D.pageX,ee.offsetY=D.pageY;break;case"move":ee.offsetX=D.pageX-Q.x1,ee.offsetY=D.pageY-Q.y1;break;default:ee.offsetX=Q.x1-Q.scrollLeft,ee.offsetY=Q.y1-Q.scrollTop;break}var se=D.pageX-ee.offsetX,ie=D.pageY-ee.offsetY;ee.rotation=0,ee.scale=1,ee.startTime=ee.moveTime=new Date().getTime(),ee.move={x:se,y:ie},ee.start={x:se,y:ie},s.fingers++};s.event=l,i.defaultListener&&(s.listener=i.defaultListener,delete i.defaultListener);for(var m=!s.fingers,f=s.tracker,g=l.changedTouches||d.getCoords(l),w=g.length,C=0;C<w;C++){var P=g[C],M=P.identifier||1/0;if(s.fingers){if(s.fingers>=s.maxFingers){var B=[];for(var M in s.tracker)B.push(M);return i.identifier=B.join(","),m}for(var L in f)if(f[L].up){delete f[L],a(P,M),s.cancel=!0;break}if(f[M])continue;a(P,M)}else f=s.tracker={},i.bbox=s.bbox=d.getBoundingBox(s.target),s.fingers=0,s.cancel=!1,a(P,M)}var B=[];for(var M in s.tracker)B.push(M);return i.identifier=B.join(","),m},d.pointerEnd=function(l,i,s,o){for(var a=l.touches||[],m=a.length,f={},g=0;g<m;g++){var w=a[g],C=w.identifier;f[C||1/0]=!0}for(var C in s.tracker){var P=s.tracker[C];f[C]||P.up||(o&&o({pageX:P.pageX,pageY:P.pageY,changedTouches:[{pageX:P.pageX,pageY:P.pageY,identifier:C==="Infinity"?1/0:C}]},"up"),P.up=!0,s.fingers--)}if(s.fingers!==0)return!1;var M=[];s.gestureFingers=0;for(var C in s.tracker)s.gestureFingers++,M.push(C);return i.identifier=M.join(","),!0},d.getCoords=function(l){return typeof l.pageX<"u"?d.getCoords=function(i){return Array({type:"mouse",x:i.pageX,y:i.pageY,pageX:i.pageX,pageY:i.pageY,identifier:i.pointerId||1/0})}:d.getCoords=function(i){var s=document.documentElement;return i=i||window.event,Array({type:"mouse",x:i.clientX+s.scrollLeft,y:i.clientY+s.scrollTop,pageX:i.clientX+s.scrollLeft,pageY:i.clientY+s.scrollTop,identifier:1/0})},d.getCoords(l)},d.getCoord=function(l){if("ontouchstart"in window){var i=0,s=0;d.getCoord=function(o){var a=o.changedTouches;return a&&a.length?{x:i=a[0].pageX,y:s=a[0].pageY}:{x:i,y:s}}}else typeof l.pageX<"u"&&typeof l.pageY<"u"?d.getCoord=function(o){return{x:o.pageX,y:o.pageY}}:d.getCoord=function(o){var a=document.documentElement;return o=o||window.event,{x:o.clientX+a.scrollLeft,y:o.clientY+a.scrollTop}};return d.getCoord(l)};var c=function(l,i){var s=parseFloat(l.getPropertyValue(i),10);return isFinite(s)?s:0};return d.getBoundingBox=function(l){(l===window||l===document)&&(l=document.body);var i={},s=l.getBoundingClientRect();i.width=s.width,i.height=s.height,i.x1=s.left,i.y1=s.top,i.scaleX=s.width/l.offsetWidth||1,i.scaleY=s.height/l.offsetHeight||1,i.scrollLeft=0,i.scrollTop=0;var o=window.getComputedStyle(l),a=o.getPropertyValue("box-sizing")==="border-box";if(a===!1){var m=c(o,"border-left-width"),f=c(o,"border-right-width"),g=c(o,"border-bottom-width"),w=c(o,"border-top-width");i.border=[m,f,w,g],i.x1+=m,i.y1+=w,i.width-=f+m,i.height-=g+w}i.x2=i.x1+i.width,i.y2=i.y1+i.height;for(var C=o.getPropertyValue("position"),P=C==="fixed"?l:l.parentNode;P!==null&&!(P===document.body||P.scrollTop===void 0);){var o=window.getComputedStyle(P),C=o.getPropertyValue("position");if(C!=="absolute")if(C==="fixed"){i.scrollTop-=P.parentNode.scrollTop,i.scrollLeft-=P.parentNode.scrollLeft;break}else i.scrollLeft+=P.scrollLeft,i.scrollTop+=P.scrollTop;P=P.parentNode}return i.scrollBodyLeft=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,i.scrollBodyTop=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,i.scrollLeft-=i.scrollBodyLeft,i.scrollTop-=i.scrollBodyTop,i},(function(){var l=navigator.userAgent.toLowerCase(),i=l.indexOf("macintosh")!==-1,s;i&&l.indexOf("khtml")!==-1?s={91:!0,93:!0}:i&&l.indexOf("firefox")!==-1?s={224:!0}:s={17:!0},(d.metaTrackerReset=function(){v.fnKey=d.fnKey=!1,v.metaKey=d.metaKey=!1,v.escKey=d.escKey=!1,v.ctrlKey=d.ctrlKey=!1,v.shiftKey=d.shiftKey=!1,v.altKey=d.altKey=!1})(),d.metaTracker=function(o){var a=o.type==="keydown";o.keyCode===27&&(v.escKey=d.escKey=a),s[o.keyCode]&&(v.metaKey=d.metaKey=a),v.ctrlKey=d.ctrlKey=o.ctrlKey,v.shiftKey=d.shiftKey=o.shiftKey,v.altKey=d.altKey=o.altKey}})(),d})(v.proxy),typeof v>"u")var v={};if(v.MutationObserver=(function(){var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,r=!d&&(function(){var c=document.createElement("p"),l=!1,i=function(){l=!0};if(c.addEventListener)c.addEventListener("DOMAttrModified",i,!1);else if(c.attachEvent)c.attachEvent("onDOMAttrModified",i);else return!1;return c.setAttribute("id","target"),l})();return function(c,l){if(d){var i={subtree:!1,attributes:!0},s=new d(function(o){o.forEach(function(a){l.call(a.target,a.attributeName)})});s.observe(c,i)}else r?v.add(c,"DOMAttrModified",function(o){l.call(c,o.attrName)}):"onpropertychange"in document.body&&v.add(c,"propertychange",function(o){l.call(c,window.event.propertyName)})}})(),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){return d.click=function(r){r.gesture=r.gesture||"click",r.maxFingers=r.maxFingers||r.fingers||1,r.onPointerDown=function(l){d.pointerStart(l,c,r)&&v.add(r.target,"mouseup",r.onPointerUp)},r.onPointerUp=function(l){if(d.pointerEnd(l,c,r)){v.remove(r.target,"mouseup",r.onPointerUp);var i=l.changedTouches||d.getCoords(l),s=i[0],o=r.bbox,a=d.getBoundingBox(r.target),m=s.pageY-a.scrollBodyTop,f=s.pageX-a.scrollBodyLeft;if(f>o.x1&&m>o.y1&&f<o.x2&&m<o.y2&&o.scrollTop===a.scrollTop){for(var g in r.tracker)break;var w=r.tracker[g];c.x=w.start.x,c.y=w.start.y,r.listener(l,c)}}};var c=d.pointerSetup(r);return c.state="click",v.add(r.target,"mousedown",r.onPointerDown),c},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.click=d.click,d})(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){return d.dbltap=d.dblclick=function(r){r.gesture=r.gesture||"dbltap",r.maxFingers=r.maxFingers||r.fingers||1;var c=700,l,i,s,o,a;r.onPointerDown=function(f){var g=f.changedTouches||d.getCoords(f);l&&!i?(a=g[0],i=new Date().getTime()-l):(o=g[0],l=new Date().getTime(),i=0,clearTimeout(s),s=setTimeout(function(){l=0},c)),d.pointerStart(f,m,r)&&(v.add(r.target,"mousemove",r.onPointerMove).listener(f),v.add(r.target,"mouseup",r.onPointerUp))},r.onPointerMove=function(f){if(l&&!i){var g=f.changedTouches||d.getCoords(f);a=g[0]}var w=r.bbox,C=a.pageX-w.x1,P=a.pageY-w.y1;C>0&&C<w.width&&P>0&&P<w.height&&Math.abs(a.pageX-o.pageX)<=25&&Math.abs(a.pageY-o.pageY)<=25||(v.remove(r.target,"mousemove",r.onPointerMove),clearTimeout(s),l=i=0)},r.onPointerUp=function(f){if(d.pointerEnd(f,m,r)&&(v.remove(r.target,"mousemove",r.onPointerMove),v.remove(r.target,"mouseup",r.onPointerUp)),l&&i){if(i<=c){m.state=r.gesture;for(var g in r.tracker)break;var w=r.tracker[g];m.x=w.start.x,m.y=w.start.y,r.listener(f,m)}clearTimeout(s),l=i=0}};var m=d.pointerSetup(r);return m.state="dblclick",v.add(r.target,"mousedown",r.onPointerDown),m},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.dbltap=d.dbltap,v.Gesture._gestureHandlers.dblclick=d.dblclick,d})(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){return d.dragElement=function(r,c){d.drag({event:c,target:r,position:"move",listener:function(l,i){r.style.left=i.x+"px",r.style.top=i.y+"px",v.prevent(l)}})},d.drag=function(r){r.gesture="drag",r.onPointerDown=function(l){d.pointerStart(l,c,r)&&(r.monitor||(v.add(r.doc,"mousemove",r.onPointerMove),v.add(r.doc,"mouseup",r.onPointerUp))),r.onPointerMove(l,"down")},r.onPointerMove=function(l,i){if(!r.tracker)return r.onPointerDown(l);r.bbox;for(var s=l.changedTouches||d.getCoords(l),o=s.length,a=0;a<o;a++){var m=s[a],f=m.identifier||1/0,g=r.tracker[f];g&&(g.pageX=m.pageX,g.pageY=m.pageY,c.state=i||"move",c.identifier=f,c.start=g.start,c.fingers=r.fingers,r.position==="differenceFromLast"?(c.x=g.pageX-g.offsetX,c.y=g.pageY-g.offsetY,g.offsetX=g.pageX,g.offsetY=g.pageY):(c.x=g.pageX-g.offsetX,c.y=g.pageY-g.offsetY),r.listener(l,c))}},r.onPointerUp=function(l){d.pointerEnd(l,c,r,r.onPointerMove)&&(r.monitor||(v.remove(r.doc,"mousemove",r.onPointerMove),v.remove(r.doc,"mouseup",r.onPointerUp)))};var c=d.pointerSetup(r);return r.event?r.onPointerDown(r.event):(v.add(r.target,"mousedown",r.onPointerDown),r.monitor&&(v.add(r.doc,"mousemove",r.onPointerMove),v.add(r.doc,"mouseup",r.onPointerUp))),c},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.drag=d.drag,d})(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){var r=Math.PI/180,c=function(l,i){var s=0,o=0,a=0;for(var m in i){var f=i[m];f.up||(s+=f.move.x,o+=f.move.y,a++)}return l.x=s/=a,l.y=o/=a,l};return d.gesture=function(l){l.gesture=l.gesture||"gesture",l.minFingers=l.minFingers||l.fingers||2,l.onPointerDown=function(s){var o=l.fingers;if(d.pointerStart(s,i,l)&&(v.add(l.doc,"mousemove",l.onPointerMove),v.add(l.doc,"mouseup",l.onPointerUp)),l.fingers===l.minFingers&&o!==l.fingers){i.fingers=l.minFingers,i.scale=1,i.rotation=0,i.state="start";var a="";for(var m in l.tracker)a+=m;i.identifier=parseInt(a),c(i,l.tracker),l.listener(s,i)}},l.onPointerMove=function(s,o){for(var a=l.bbox,m=l.tracker,M=s.changedTouches||d.getCoords(s),f=M.length,g=0;g<f;g++){var w=M[g],C=w.identifier||1/0,P=m[C];P&&(P.move.x=w.pageX-a.x1,P.move.y=w.pageY-a.y1)}if(!(l.fingers<l.minFingers)){var M=[],L=0,B=0;c(i,m);for(var C in m){var w=m[C];if(!w.up){var D=w.start;if(!D.distance){var H=D.x-i.x,Q=D.y-i.y;D.distance=Math.sqrt(H*H+Q*Q),D.angle=Math.atan2(H,Q)/r}var H=w.move.x-i.x,Q=w.move.y-i.y,ee=Math.sqrt(H*H+Q*Q);L+=ee/D.distance;var se=Math.atan2(H,Q)/r,ie=(D.angle-se+360)%360-180;w.DEG2=w.DEG1,w.DEG1=ie>0?ie:-ie,typeof w.DEG2<"u"&&(ie>0?w.rotation+=w.DEG1-w.DEG2:w.rotation-=w.DEG1-w.DEG2,B+=w.rotation),M.push(w.move)}}i.touches=M,i.fingers=l.fingers,i.scale=L/l.fingers,i.rotation=B/l.fingers,i.state="change",l.listener(s,i)}},l.onPointerUp=function(s){var o=l.fingers;d.pointerEnd(s,i,l)&&(v.remove(l.doc,"mousemove",l.onPointerMove),v.remove(l.doc,"mouseup",l.onPointerUp)),o===l.minFingers&&l.fingers<l.minFingers&&(i.fingers=l.fingers,i.state="end",l.listener(s,i))};var i=d.pointerSetup(l);return v.add(l.target,"mousedown",l.onPointerDown),i},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.gesture=d.gesture,d})(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){return d.pointerdown=d.pointermove=d.pointerup=function(r){if(r.gesture=r.gesture||"pointer",!r.target.isPointerEmitter){var c=!0;r.onPointerDown=function(i){c=!1,l.gesture="pointerdown",r.listener(i,l)},r.onPointerMove=function(i){l.gesture="pointermove",r.listener(i,l,c)},r.onPointerUp=function(i){c=!0,l.gesture="pointerup",r.listener(i,l,!0)};var l=d.pointerSetup(r);return v.add(r.target,"mousedown",r.onPointerDown),v.add(r.target,"mousemove",r.onPointerMove),v.add(r.doc,"mouseup",r.onPointerUp),r.target.isPointerEmitter=!0,l}},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.pointerdown=d.pointerdown,v.Gesture._gestureHandlers.pointermove=d.pointermove,v.Gesture._gestureHandlers.pointerup=d.pointerup,d})(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){return d.shake=function(r){var c={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:r.target,listener:r.listener,remove:function(){window.removeEventListener("devicemotion",g,!1)}},l=4,i=1e3,s=200,o=3,a=new Date().getTime(),m={x:0,y:0,z:0},f={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},g=function(w){var C=.8,P=w.accelerationIncludingGravity;if(m.x=C*m.x+(1-C)*P.x,m.y=C*m.y+(1-C)*P.y,m.z=C*m.z+(1-C)*P.z,c.accelerationIncludingGravity=m,c.acceleration.x=P.x-m.x,c.acceleration.y=P.y-m.y,c.acceleration.z=P.z-m.z,r.gesture==="devicemotion"){r.listener(w,c);return}for(var M="xyz",L=new Date().getTime(),B=0,D=M.length;B<D;B++){var H=M[B],Q=c.acceleration[H],ee=f[H],se=Math.abs(Q);if(!(L-a<i)&&se>l){var ie=L*Q/se,ue=Math.abs(ie+ee.value);ee.value&&ue<s?(ee.value=ie,ee.count++,ee.count===o&&(r.listener(w,c),a=L,ee.value=0,ee.count=0)):(ee.value=ie,ee.count=1)}}};if(window.addEventListener)return window.addEventListener("devicemotion",g,!1),c},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.shake=d.shake,d})(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){var r=Math.PI/180;return d.swipe=function(c){c.snap=c.snap||90,c.threshold=c.threshold||1,c.gesture=c.gesture||"swipe",c.onPointerDown=function(i){d.pointerStart(i,l,c)&&(v.add(c.doc,"mousemove",c.onPointerMove).listener(i),v.add(c.doc,"mouseup",c.onPointerUp))},c.onPointerMove=function(i){for(var s=i.changedTouches||d.getCoords(i),o=s.length,a=0;a<o;a++){var m=s[a],f=m.identifier||1/0,g=c.tracker[f];g&&(g.move.x=m.pageX,g.move.y=m.pageY,g.moveTime=new Date().getTime())}},c.onPointerUp=function(i){if(d.pointerEnd(i,l,c)){v.remove(c.doc,"mousemove",c.onPointerMove),v.remove(c.doc,"mouseup",c.onPointerUp);var s,o,a,m,f={x:0,y:0},g=0,w=0,C=0;for(var P in c.tracker){var M=c.tracker[P],L=M.move.x-M.start.x,B=M.move.y-M.start.y;g+=M.move.x,w+=M.move.y,f.x+=M.start.x,f.y+=M.start.y,C++;var D=Math.sqrt(L*L+B*B),H=M.moveTime-M.startTime,m=Math.atan2(L,B)/r+180,o=H?D/H:0;if(typeof a>"u")a=m,s=o;else if(Math.abs(m-a)<=20)a=(a+m)/2,s=(s+o)/2;else return}var Q=c.gestureFingers;c.minFingers<=Q&&c.maxFingers>=Q&&s>c.threshold&&(f.x/=C,f.y/=C,l.start=f,l.x=g/C,l.y=w/C,l.angle=-(((a/c.snap+.5>>0)*c.snap||360)-360),l.velocity=s,l.fingers=Q,l.state="swipe",c.listener(i,l))}};var l=d.pointerSetup(c);return v.add(c.target,"mousedown",c.onPointerDown),l},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.swipe=d.swipe,d})(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){return d.longpress=function(r){return r.gesture="longpress",d.tap(r)},d.tap=function(r){r.delay=r.delay||500,r.timeout=r.timeout||250,r.driftDeviance=r.driftDeviance||10,r.gesture=r.gesture||"tap";var c,l;r.onPointerDown=function(s){if(d.pointerStart(s,i,r)){if(c=new Date().getTime(),v.add(r.doc,"mousemove",r.onPointerMove).listener(s),v.add(r.doc,"mouseup",r.onPointerUp),r.gesture!=="longpress")return;l=setTimeout(function(){if(!(s.cancelBubble&&++s.cancelBubbleCount>1)){var o=0;for(var a in r.tracker){var m=r.tracker[a];if(m.end===!0||r.cancel)return;o++}r.minFingers<=o&&r.maxFingers>=o&&(i.state="start",i.fingers=o,i.x=m.start.x,i.y=m.start.y,r.listener(s,i))}},r.delay)}},r.onPointerMove=function(s){for(var o=r.bbox,a=s.changedTouches||d.getCoords(s),m=a.length,f=0;f<m;f++){var g=a[f],w=g.identifier||1/0,C=r.tracker[w];if(C){var P=g.pageX-o.x1,M=g.pageY-o.y1,L=P-C.start.x,B=M-C.start.y,D=Math.sqrt(L*L+B*B);if(!(P>0&&P<o.width&&M>0&&M<o.height&&D<=r.driftDeviance)){v.remove(r.doc,"mousemove",r.onPointerMove),r.cancel=!0;return}}}},r.onPointerUp=function(s){if(d.pointerEnd(s,i,r)){if(clearTimeout(l),v.remove(r.doc,"mousemove",r.onPointerMove),v.remove(r.doc,"mouseup",r.onPointerUp),s.cancelBubble&&++s.cancelBubbleCount>1)return;if(r.gesture==="longpress"){i.state==="start"&&(i.state="end",r.listener(s,i));return}if(r.cancel||new Date().getTime()-c>r.timeout)return;var o=r.gestureFingers;r.minFingers<=o&&r.maxFingers>=o&&(i.state="tap",i.fingers=r.gestureFingers,r.listener(s,i))}};var i=d.pointerSetup(r);return v.add(r.target,"mousedown",r.onPointerDown),i},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.tap=d.tap,v.Gesture._gestureHandlers.longpress=d.longpress,d})(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=(function(d){return d.wheelPreventElasticBounce=function(r){r&&(typeof r=="string"&&(r=document.querySelector(r)),v.add(r,"wheel",function(c,l){l.preventElasticBounce(),v.stop(c)}))},d.wheel=function(r){var c,l=r.timeout||150,i=0,s={gesture:"wheel",state:"start",wheelDelta:0,target:r.target,listener:r.listener,preventElasticBounce:function(g){var w=this.target,C=w.scrollTop,P=C+w.offsetHeight,M=w.scrollHeight;(P===M&&this.wheelDelta<=0||C===0&&this.wheelDelta>=0)&&v.cancel(g),v.stop(g)},add:function(){r.target[a](f,o,!1)},remove:function(){r.target[m](f,o,!1)}},o=function(g){g=g||window.event,s.state=i++?"change":"start",s.wheelDelta=g.detail?g.detail*-20:g.wheelDelta,r.listener(g,s),clearTimeout(c),c=setTimeout(function(){i=0,s.state="end",s.wheelDelta=0,r.listener(g,s)},l)},a=document.addEventListener?"addEventListener":"attachEvent",m=document.removeEventListener?"removeEventListener":"detachEvent",f=v.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";return r.target[a](f,o,!1),s},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.wheel=d.wheel,d})(v.proxy),typeof S>"u")var S={};typeof S.proxy>"u"&&(S.proxy={}),S.proxy=(function(d){return d.orientation=function(r){var c={gesture:"orientationchange",previous:null,current:window.orientation,target:r.target,listener:r.listener,remove:function(){window.removeEventListener("orientationchange",l,!1)}},l=function(i){if(c.previous=c.current,c.current=window.orientation,c.previous!==null&&c.previous!=c.current){r.listener(i,c);return}};return window.DeviceOrientationEvent&&window.addEventListener("orientationchange",l,!1),c},S.Gesture=S.Gesture||{},S.Gesture._gestureHandlers=S.Gesture._gestureHandlers||{},S.Gesture._gestureHandlers.orientation=d.orientation,d})(S.proxy),(function(){function d(i,s){if(this.__eventListeners[i]){var o=this.__eventListeners[i];s?o[o.indexOf(s)]=!1:e.util.array.fill(o,!1)}}function r(i,s){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var o in i)this.on(o,i[o]);else this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(s);return this}function c(i,s){if(!this.__eventListeners)return this;if(arguments.length===0)for(i in this.__eventListeners)d.call(this,i);else if(arguments.length===1&&typeof arguments[0]=="object")for(var o in i)d.call(this,o,i[o]);else d.call(this,i,s);return this}function l(i,s){if(!this.__eventListeners)return this;var o=this.__eventListeners[i];if(!o)return this;for(var a=0,m=o.length;a<m;a++)o[a]&&o[a].call(this,s||{});return this.__eventListeners[i]=o.filter(function(f){return f!==!1}),this}e.Observable={fire:l,on:r,off:c}})(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var d=0,r=arguments.length;d<r;d++)this._onObjectAdded(arguments[d]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(d,r,c){var l=this._objects;return c?l[r]=d:l.splice(r,0,d),this._onObjectAdded&&this._onObjectAdded(d),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var d=this._objects,r,c=!1,l=0,i=arguments.length;l<i;l++)r=d.indexOf(arguments[l]),r!==-1&&(c=!0,d.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[l]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(d,r){for(var c=this.getObjects(),l=0,i=c.length;l<i;l++)d.call(r,c[l],l,c);return this},getObjects:function(d){return typeof d>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===d})},item:function(d){return this._objects[d]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(d){return this._objects.indexOf(d)>-1},complexity:function(){return this._objects.reduce(function(d,r){return d+=r.complexity?r.complexity():0,d},0)}},e.CommonMethods={_setOptions:function(d){for(var r in d)this.set(r,d[r])},_initGradient:function(d,r){d&&d.colorStops&&!(d instanceof e.Gradient)&&this.set(r,new e.Gradient(d))},_initPattern:function(d,r,c){d&&d.source&&!(d instanceof e.Pattern)?this.set(r,new e.Pattern(d,c)):c&&c()},_setObject:function(d){for(var r in d)this._set(r,d[r])},set:function(d,r){return typeof d=="object"?this._setObject(d):this._set(d,r),this},_set:function(d,r){this[d]=r},toggle:function(d){var r=this.get(d);return typeof r=="boolean"&&this.set(d,!r),this},get:function(d){return this[d]}},(function(d){var r=Math.sqrt,c=Math.atan2,l=Math.pow,i=Math.PI/180,s=Math.PI/2;e.util={cos:function(o){if(o===0)return 1;o<0&&(o=-o);var a=o/s;switch(a){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},sin:function(o){if(o===0)return 0;var a=o/s,m=1;switch(o<0&&(m=-1),a){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(o)},removeFromArray:function(o,a){var m=o.indexOf(a);return m!==-1&&o.splice(m,1),o},getRandomInt:function(o,a){return Math.floor(Math.random()*(a-o+1))+o},degreesToRadians:function(o){return o*i},radiansToDegrees:function(o){return o/i},rotatePoint:function(o,a,m){o.subtractEquals(a);var f=e.util.rotateVector(o,m);return new e.Point(f.x,f.y).addEquals(a)},rotateVector:function(o,a){var m=e.util.sin(a),f=e.util.cos(a),g=o.x*f-o.y*m,w=o.x*m+o.y*f;return{x:g,y:w}},transformPoint:function(o,a,m){return m?new e.Point(a[0]*o.x+a[2]*o.y,a[1]*o.x+a[3]*o.y):new e.Point(a[0]*o.x+a[2]*o.y+a[4],a[1]*o.x+a[3]*o.y+a[5])},makeBoundingBoxFromPoints:function(o,a){if(a)for(var m=0;m<o.length;m++)o[m]=e.util.transformPoint(o[m],a);var f=[o[0].x,o[1].x,o[2].x,o[3].x],g=e.util.array.min(f),w=e.util.array.max(f),C=w-g,P=[o[0].y,o[1].y,o[2].y,o[3].y],M=e.util.array.min(P),L=e.util.array.max(P),B=L-M;return{left:g,top:M,width:C,height:B}},invertTransform:function(o){var a=1/(o[0]*o[3]-o[1]*o[2]),m=[a*o[3],-a*o[1],-a*o[2],a*o[0]],f=e.util.transformPoint({x:o[4],y:o[5]},m,!0);return m[4]=-f.x,m[5]=-f.y,m},toFixed:function(o,a){return parseFloat(Number(o).toFixed(a))},parseUnit:function(o,a){var m=/\D{0,2}$/.exec(o),f=parseFloat(o);switch(a||(a=e.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return f*e.DPI/25.4;case"cm":return f*e.DPI/2.54;case"in":return f*e.DPI;case"pt":return f*e.DPI/72;case"pc":return f*e.DPI/72*12;case"em":return f*a;default:return f}},falseFunction:function(){return!1},getKlass:function(o,a){return o=e.util.string.camelize(o.charAt(0).toUpperCase()+o.slice(1)),e.util.resolveNamespace(a)[o]},getSvgAttributes:function(o){var a=["instantiated_by_use","style","id","class"];switch(o){case"linearGradient":a=a.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":a=a.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":a=a.concat(["offset","stop-color","stop-opacity"]);break}return a},resolveNamespace:function(o){if(!o)return e;var a=o.split("."),m=a.length,f,g=d||e.window;for(f=0;f<m;++f)g=g[a[f]];return g},loadImage:function(o,a,m,f){if(!o){a&&a.call(m,o);return}var g=e.util.createImage(),w=function(){a&&a.call(m,g,!1),g=g.onload=g.onerror=null};g.onload=w,g.onerror=function(){e.log("Error loading "+g.src),a&&a.call(m,null,!0),g=g.onload=g.onerror=null},o.indexOf("data")!==0&&f!==void 0&&f!==null&&(g.crossOrigin=f),o.substring(0,14)==="data:image/svg"&&(g.onload=null,e.util.loadImageInDom(g,w)),g.src=o},loadImageInDom:function(o,a){var m=e.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(o),e.document.querySelector("body").appendChild(m),o.onload=function(){a(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(o,a,m,f){o=o||[];var g=[],w=0,C=o.length;function P(){++w===C&&a&&a(g.filter(function(M){return M}))}if(!C){a&&a(g);return}o.forEach(function(M,L){if(!M||!M.type){P();return}var B=e.util.getKlass(M.type,m);B.fromObject(M,function(D,H){H||(g[L]=D),f&&f(M,D,H),P()})})},enlivenPatterns:function(o,a){o=o||[];function m(){++g===w&&a&&a(f)}var f=[],g=0,w=o.length;if(!w){a&&a(f);return}o.forEach(function(C,P){C&&C.source?new e.Pattern(C,function(M){f[P]=M,m()}):(f[P]=C,m())})},groupSVGElements:function(o,a,m){var f;return o&&o.length===1?o[0]:(a&&(a.width&&a.height?a.centerPoint={x:a.width/2,y:a.height/2}:(delete a.width,delete a.height)),f=new e.Group(o,a),typeof m<"u"&&(f.sourcePath=m),f)},populateWithProperties:function(o,a,m){if(m&&Object.prototype.toString.call(m)==="[object Array]")for(var f=0,g=m.length;f<g;f++)m[f]in o&&(a[m[f]]=o[m[f]])},drawDashedLine:function(o,a,m,f,g,w){var C=f-a,P=g-m,M=r(C*C+P*P),L=c(P,C),B=w.length,D=0,H=!0;for(o.save(),o.translate(a,m),o.moveTo(0,0),o.rotate(L),a=0;M>a;)a+=w[D++%B],a>M&&(a=M),o[H?"lineTo":"moveTo"](a,0),H=!H;o.restore()},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(o){var a=e.util.createCanvasElement();return a.width=o.width,a.height=o.height,a.getContext("2d").drawImage(o,0,0),a},toDataURL:function(o,a,m){return o.toDataURL("image/"+a,m)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(o,a,m){return[o[0]*a[0]+o[2]*a[1],o[1]*a[0]+o[3]*a[1],o[0]*a[2]+o[2]*a[3],o[1]*a[2]+o[3]*a[3],m?0:o[0]*a[4]+o[2]*a[5]+o[4],m?0:o[1]*a[4]+o[3]*a[5]+o[5]]},qrDecompose:function(o){var a=c(o[1],o[0]),m=l(o[0],2)+l(o[1],2),f=r(m),g=(o[0]*o[3]-o[2]*o[1])/f,w=c(o[0]*o[2]+o[1]*o[3],m);return{angle:a/i,scaleX:f,scaleY:g,skewX:w/i,skewY:0,translateX:o[4],translateY:o[5]}},calcRotateMatrix:function(o){if(!o.angle)return e.iMatrix.concat();var a=e.util.degreesToRadians(o.angle),m=e.util.cos(a),f=e.util.sin(a);return[m,f,-f,m,0,0]},calcDimensionsMatrix:function(o){var a=typeof o.scaleX>"u"?1:o.scaleX,m=typeof o.scaleY>"u"?1:o.scaleY,f=[o.flipX?-a:a,0,0,o.flipY?-m:m,0,0],g=e.util.multiplyTransformMatrices,w=e.util.degreesToRadians;return o.skewX&&(f=g(f,[1,0,Math.tan(w(o.skewX)),1],!0)),o.skewY&&(f=g(f,[1,Math.tan(w(o.skewY)),0,1],!0)),f},composeMatrix:function(o){var a=[1,0,0,1,o.translateX||0,o.translateY||0],m=e.util.multiplyTransformMatrices;return o.angle&&(a=m(a,e.util.calcRotateMatrix(o))),(o.scaleX!==1||o.scaleY!==1||o.skewX||o.skewY||o.flipX||o.flipY)&&(a=m(a,e.util.calcDimensionsMatrix(o))),a},resetObjectTransform:function(o){o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},saveObjectTransform:function(o){return{scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}},isTransparent:function(o,a,m,f){f>0&&(a>f?a-=f:a=0,m>f?m-=f:m=0);var g=!0,w,C,P=o.getImageData(a,m,f*2||1,f*2||1),M=P.data.length;for(w=3;w<M&&(C=P.data[w],g=C<=0,g!==!1);w+=4);return P=null,g},parsePreserveAspectRatioAttribute:function(o){var a="meet",m="Mid",f="Mid",g=o.split(" "),w;return g&&g.length&&(a=g.pop(),a!=="meet"&&a!=="slice"?(w=a,a="meet"):g.length&&(w=g.pop())),m=w!=="none"?w.slice(1,4):"none",f=w!=="none"?w.slice(5,8):"none",{meetOrSlice:a,alignX:m,alignY:f}},clearFabricFontCache:function(o){o=(o||"").toLowerCase(),o?e.charWidthsCache[o]&&delete e.charWidthsCache[o]:e.charWidthsCache={}},limitDimsByArea:function(o,a){var m=Math.sqrt(a*o),f=Math.floor(a/m);return{x:Math.floor(m),y:f}},capValue:function(o,a,m){return Math.max(o,Math.min(a,m))},findScaleToFit:function(o,a){return Math.min(a.width/o.width,a.height/o.height)},findScaleToCover:function(o,a){return Math.max(a.width/o.width,a.height/o.height)},matrixToSVG:function(o){return"matrix("+o.map(function(a){return e.util.toFixed(a,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(o,a){var m=e.util.invertTransform(a),f=e.util.multiplyTransformMatrices(m,o.calcOwnMatrix());e.util.applyTransformToObject(o,f)},addTransformToObject:function(o,a){e.util.applyTransformToObject(o,e.util.multiplyTransformMatrices(a,o.calcOwnMatrix()))},applyTransformToObject:function(o,a){var m=e.util.qrDecompose(a),f=new e.Point(m.translateX,m.translateY);o.flipX=!1,o.flipY=!1,o.set("scaleX",m.scaleX),o.set("scaleY",m.scaleY),o.skewX=m.skewX,o.skewY=m.skewY,o.angle=m.angle,o.setPositionByOrigin(f,"center","center")},sizeAfterTransform:function(o,a,m){var f=o/2,g=a/2,w=[{x:-f,y:-g},{x:f,y:-g},{x:-f,y:g},{x:f,y:g}],C=e.util.calcDimensionsMatrix(m),P=e.util.makeBoundingBoxFromPoints(w,C);return{x:P.width,y:P.height}}}})(t),(function(){var d=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function l(R,V,W,q,oe,Y,I,K,ne,le,he){var ve=e.util.cos(R),ye=e.util.sin(R),Oe=e.util.cos(V),pe=e.util.sin(V),de=W*oe*Oe-q*Y*pe+I,Ce=q*oe*Oe+W*Y*pe+K,te=le+ne*(-W*oe*ye-q*Y*ve),fe=he+ne*(-q*oe*ye+W*Y*ve),Se=de+ne*(W*oe*pe+q*Y*Oe),je=Ce+ne*(q*oe*pe-W*Y*Oe);return["C",te,fe,Se,je,de,Ce]}function i(R,V,W,q,oe,Y,I){var K=Math.PI,ne=I*K/180,le=e.util.sin(ne),he=e.util.cos(ne),ve=0,ye=0;W=Math.abs(W),q=Math.abs(q);var Oe=-he*R*.5-le*V*.5,pe=-he*V*.5+le*R*.5,de=W*W,Ce=q*q,te=pe*pe,fe=Oe*Oe,Se=de*Ce-de*te-Ce*fe,je=0;if(Se<0){var Me=Math.sqrt(1-Se/(de*Ce));W*=Me,q*=Me}else je=(oe===Y?-1:1)*Math.sqrt(Se/(de*te+Ce*fe));var Le=je*W*pe/q,_e=-je*q*Oe/W,Ie=he*Le-le*_e+R*.5,He=le*Le+he*_e+V*.5,Je=s(1,0,(Oe-Le)/W,(pe-_e)/q),nt=s((Oe-Le)/W,(pe-_e)/q,(-Oe-Le)/W,(-pe-_e)/q);Y===0&&nt>0?nt-=2*K:Y===1&&nt<0&&(nt+=2*K);for(var ot=Math.ceil(Math.abs(nt/K*2)),dt=[],ut=nt/ot,Bn=8/3*Math.sin(ut/4)*Math.sin(ut/4)/Math.sin(ut/2),Nr=Je+ut,dn=0;dn<ot;dn++)dt[dn]=l(Je,Nr,he,le,W,q,Ie,He,Bn,ve,ye),ve=dt[dn][5],ye=dt[dn][6],Je=Nr,Nr+=ut;return dt}function s(R,V,W,q){var oe=Math.atan2(V,R),Y=Math.atan2(q,W);return Y>=oe?Y-oe:2*Math.PI-(oe-Y)}function o(R,V,W,q,oe,Y,I,K){var ne;if(e.cachesBoundsOfCurve&&(ne=d.call(arguments),e.boundsOfCurveCache[ne]))return e.boundsOfCurveCache[ne];var le=Math.sqrt,he=Math.min,ve=Math.max,ye=Math.abs,Oe=[],pe=[[],[]],de,Ce,te,fe,Se,je,Me,Le;Ce=6*R-12*W+6*oe,de=-3*R+9*W-9*oe+3*I,te=3*W-3*R;for(var _e=0;_e<2;++_e){if(_e>0&&(Ce=6*V-12*q+6*Y,de=-3*V+9*q-9*Y+3*K,te=3*q-3*V),ye(de)<1e-12){if(ye(Ce)<1e-12)continue;fe=-te/Ce,0<fe&&fe<1&&Oe.push(fe);continue}Me=Ce*Ce-4*te*de,!(Me<0)&&(Le=le(Me),Se=(-Ce+Le)/(2*de),0<Se&&Se<1&&Oe.push(Se),je=(-Ce-Le)/(2*de),0<je&&je<1&&Oe.push(je))}for(var Ie,He,Je=Oe.length,nt=Je,ot;Je--;)fe=Oe[Je],ot=1-fe,Ie=ot*ot*ot*R+3*ot*ot*fe*W+3*ot*fe*fe*oe+fe*fe*fe*I,pe[0][Je]=Ie,He=ot*ot*ot*V+3*ot*ot*fe*q+3*ot*fe*fe*Y+fe*fe*fe*K,pe[1][Je]=He;pe[0][nt]=R,pe[1][nt]=V,pe[0][nt+1]=I,pe[1][nt+1]=K;var dt=[{x:he.apply(null,pe[0]),y:he.apply(null,pe[1])},{x:ve.apply(null,pe[0]),y:ve.apply(null,pe[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[ne]=dt),dt}function a(R,V,W){for(var q=W[1],oe=W[2],Y=W[3],I=W[4],K=W[5],ne=W[6],le=W[7],he=i(ne-R,le-V,q,oe,I,K,Y),ve=0,ye=he.length;ve<ye;ve++)he[ve][1]+=R,he[ve][2]+=V,he[ve][3]+=R,he[ve][4]+=V,he[ve][5]+=R,he[ve][6]+=V;return he}function m(R){var V=0,W=0,q=R.length,oe=0,Y=0,I,K,ne,le=[],he,ve,ye;for(K=0;K<q;++K){switch(ne=!1,I=R[K].slice(0),I[0]){case"l":I[0]="L",I[1]+=V,I[2]+=W;case"L":V=I[1],W=I[2];break;case"h":I[1]+=V;case"H":I[0]="L",I[2]=W,V=I[1];break;case"v":I[1]+=W;case"V":I[0]="L",W=I[1],I[1]=V,I[2]=W;break;case"m":I[0]="M",I[1]+=V,I[2]+=W;case"M":V=I[1],W=I[2],oe=I[1],Y=I[2];break;case"c":I[0]="C",I[1]+=V,I[2]+=W,I[3]+=V,I[4]+=W,I[5]+=V,I[6]+=W;case"C":ve=I[3],ye=I[4],V=I[5],W=I[6];break;case"s":I[0]="S",I[1]+=V,I[2]+=W,I[3]+=V,I[4]+=W;case"S":he==="C"?(ve=2*V-ve,ye=2*W-ye):(ve=V,ye=W),V=I[3],W=I[4],I[0]="C",I[5]=I[3],I[6]=I[4],I[3]=I[1],I[4]=I[2],I[1]=ve,I[2]=ye,ve=I[3],ye=I[4];break;case"q":I[0]="Q",I[1]+=V,I[2]+=W,I[3]+=V,I[4]+=W;case"Q":ve=I[1],ye=I[2],V=I[3],W=I[4];break;case"t":I[0]="T",I[1]+=V,I[2]+=W;case"T":he==="Q"?(ve=2*V-ve,ye=2*W-ye):(ve=V,ye=W),I[0]="Q",V=I[1],W=I[2],I[1]=ve,I[2]=ye,I[3]=V,I[4]=W;break;case"a":I[0]="A",I[6]+=V,I[7]+=W;case"A":ne=!0,le=le.concat(a(V,W,I)),V=I[6],W=I[7];break;case"z":case"Z":V=oe,W=Y;break}ne||le.push(I),he=I[0]}return le}function f(R,V,W,q){return Math.sqrt((W-R)*(W-R)+(q-V)*(q-V))}function g(R){return R*R*R}function w(R){return 3*R*R*(1-R)}function C(R){return 3*R*(1-R)*(1-R)}function P(R){return(1-R)*(1-R)*(1-R)}function M(R,V,W,q,oe,Y,I,K){return function(ne){var le=g(ne),he=w(ne),ve=C(ne),ye=P(ne);return{x:I*le+oe*he+W*ve+R*ye,y:K*le+Y*he+q*ve+V*ye}}}function L(R,V,W,q,oe,Y,I,K){return function(ne){var le=1-ne,he=3*le*le*(W-R)+6*le*ne*(oe-W)+3*ne*ne*(I-oe),ve=3*le*le*(q-V)+6*le*ne*(Y-q)+3*ne*ne*(K-Y);return Math.atan2(ve,he)}}function B(R){return R*R}function D(R){return 2*R*(1-R)}function H(R){return(1-R)*(1-R)}function Q(R,V,W,q,oe,Y){return function(I){var K=B(I),ne=D(I),le=H(I);return{x:oe*K+W*ne+R*le,y:Y*K+q*ne+V*le}}}function ee(R,V,W,q,oe,Y){return function(I){var K=1-I,ne=2*K*(W-R)+2*I*(oe-W),le=2*K*(q-V)+2*I*(Y-q);return Math.atan2(le,ne)}}function se(R,V,W){var q={x:V,y:W},oe,Y=0,I;for(I=.01;I<=1;I+=.01)oe=R(I),Y+=f(q.x,q.y,oe.x,oe.y),q=oe;return Y}function ie(R,V){for(var W=0,q=0,oe=R.iterator,Y={x:R.x,y:R.y},I,K,ne=.01,le=R.angleFinder,he;q<V&&W<=1&&ne>1e-4;)I=oe(W),he=W,K=f(Y.x,Y.y,I.x,I.y),K+q>V?(ne/=2,W-=ne):(Y=I,W+=ne,q+=K);return I.angle=le(he),I}function ue(R){for(var V=0,W=R.length,q,oe=0,Y=0,I=0,K=0,ne=[],le,he,ve,ye=0;ye<W;ye++){switch(q=R[ye],he={x:oe,y:Y,command:q[0]},q[0]){case"M":he.length=0,I=oe=q[1],K=Y=q[2];break;case"L":he.length=f(oe,Y,q[1],q[2]),oe=q[1],Y=q[2];break;case"C":le=M(oe,Y,q[1],q[2],q[3],q[4],q[5],q[6]),ve=L(oe,Y,q[1],q[2],q[3],q[4],q[5],q[6]),he.iterator=le,he.angleFinder=ve,he.length=se(le,oe,Y),oe=q[5],Y=q[6];break;case"Q":le=Q(oe,Y,q[1],q[2],q[3],q[4]),ve=ee(oe,Y,q[1],q[2],q[3],q[4]),he.iterator=le,he.angleFinder=ve,he.length=se(le,oe,Y),oe=q[3],Y=q[4];break;case"Z":case"z":he.destX=I,he.destY=K,he.length=f(oe,Y,I,K),oe=I,Y=K;break}V+=he.length,ne.push(he)}return ne.push({length:V,x:oe,y:Y}),ne}function U(R,V,W){W||(W=ue(R));for(var q=0;V-W[q].length>0&&q<W.length-2;)V-=W[q].length,q++;var oe=W[q],Y=V/oe.length,I=oe.command,K=R[q],ne;switch(I){case"M":return{x:oe.x,y:oe.y,angle:0};case"Z":case"z":return ne=new e.Point(oe.x,oe.y).lerp(new e.Point(oe.destX,oe.destY),Y),ne.angle=Math.atan2(oe.destY-oe.y,oe.destX-oe.x),ne;case"L":return ne=new e.Point(oe.x,oe.y).lerp(new e.Point(K[1],K[2]),Y),ne.angle=Math.atan2(K[2]-oe.y,K[1]-oe.x),ne;case"C":return ie(oe,V);case"Q":return ie(oe,V)}}function X(R){var V=[],W=[],q,oe,Y=e.rePathCommand,I="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",K="("+I+")"+e.commaWsp,ne="([01])"+e.commaWsp+"?",le=K+"?"+K+"?"+K+ne+ne+K+"?("+I+")",he=new RegExp(le,"g"),ve,ye,Oe;if(!R||!R.match)return V;Oe=R.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var pe=0,de,Ce=Oe.length;pe<Ce;pe++){q=Oe[pe],ye=q.slice(1).trim(),W.length=0;var te=q.charAt(0);if(de=[te],te.toLowerCase()==="a")for(var fe;fe=he.exec(ye);)for(var Se=1;Se<fe.length;Se++)W.push(fe[Se]);else for(;ve=Y.exec(ye);)W.push(ve[0]);for(var Se=0,je=W.length;Se<je;Se++)oe=parseFloat(W[Se]),isNaN(oe)||de.push(oe);var Me=r[te.toLowerCase()],Le=c[te]||te;if(de.length-1>Me)for(var _e=1,Ie=de.length;_e<Ie;_e+=Me)V.push([te].concat(de.slice(_e,_e+Me))),te=Le;else V.push(de)}return V}function Z(R,V,W,q,oe,Y,I,K,ne){for(var le=0,he=0,ve,ye=[],Oe=i(K-R,ne-V,W,q,Y,I,oe),pe=0,de=Oe.length;pe<de;pe++)ve=o(le,he,Oe[pe][1],Oe[pe][2],Oe[pe][3],Oe[pe][4],Oe[pe][5],Oe[pe][6]),ye.push({x:ve[0].x+R,y:ve[0].y+V}),ye.push({x:ve[1].x+R,y:ve[1].y+V}),le=Oe[pe][5],he=Oe[pe][6];return ye}function $(R,V,W,q){q=q.slice(0).unshift("X");var oe=a(V,W,q);oe.forEach(function(Y){R.bezierCurveTo.apply(R,Y.slice(1))})}e.util.parsePath=X,e.util.makePathSimpler=m,e.util.getPathSegmentsInfo=ue,e.util.fromArcToBeziers=a,e.util.fromArcToBeizers=a,e.util.getBoundsOfCurve=o,e.util.getPointOnPath=U,e.util.getBoundsOfArc=Z,e.util.drawArc=$})(),(function(){var d=Array.prototype.slice;function r(o,a){for(var m=d.call(arguments,2),f=[],g=0,w=o.length;g<w;g++)f[g]=m.length?o[g][a].apply(o[g],m):o[g][a].call(o[g]);return f}function c(o,a){return s(o,a,function(m,f){return m>=f})}function l(o,a){return s(o,a,function(m,f){return m<f})}function i(o,a){for(var m=o.length;m--;)o[m]=a;return o}function s(o,a,m){if(!(!o||o.length===0)){var f=o.length-1,g=a?o[f][a]:o[f];if(a)for(;f--;)m(o[f][a],g)&&(g=o[f][a]);else for(;f--;)m(o[f],g)&&(g=o[f]);return g}}e.util.array={fill:i,invoke:r,min:l,max:c}})(),(function(){function d(c,l,i){if(i)if(!e.isLikelyNode&&l instanceof Element)c=l;else if(l instanceof Array){c=[];for(var s=0,o=l.length;s<o;s++)c[s]=d({},l[s],i)}else if(l&&typeof l=="object")for(var a in l)a==="canvas"||a==="group"?c[a]=null:l.hasOwnProperty(a)&&(c[a]=d({},l[a],i));else c=l;else for(var a in l)c[a]=l[a];return c}function r(c,l){return d({},c,l)}e.util.object={extend:d,clone:r},e.util.object.extend(e.util,e.Observable)})(),(function(){function d(s){return s.replace(/-+(.)?/g,function(o,a){return a?a.toUpperCase():""})}function r(s,o){return s.charAt(0).toUpperCase()+(o?s.slice(1):s.slice(1).toLowerCase())}function c(s){return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(s){var o=0,a,m=[];for(o=0,a;o<s.length;o++)(a=i(s,o))!==!1&&m.push(a);return m}function i(s,o){var a=s.charCodeAt(o);if(isNaN(a))return"";if(a<55296||a>57343)return s.charAt(o);if(55296<=a&&a<=56319){if(s.length<=o+1)throw"High surrogate without following low surrogate";var m=s.charCodeAt(o+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return s.charAt(o)+s.charAt(o+1)}if(o===0)throw"Low surrogate without preceding high surrogate";var f=s.charCodeAt(o-1);if(55296>f||f>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:d,capitalize:r,escapeXml:c,graphemeSplit:l}})(),(function(){var d=Array.prototype.slice,r=function(){},c=(function(){for(var a in{toString:1})if(a==="toString")return!1;return!0})(),l=function(a,m,f){for(var g in m)g in a.prototype&&typeof a.prototype[g]=="function"&&(m[g]+"").indexOf("callSuper")>-1?a.prototype[g]=(function(w){return function(){var C=this.constructor.superclass;this.constructor.superclass=f;var P=m[w].apply(this,arguments);if(this.constructor.superclass=C,w!=="initialize")return P}})(g):a.prototype[g]=m[g],c&&(m.toString!==Object.prototype.toString&&(a.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(a.prototype.valueOf=m.valueOf))};function i(){}function s(a){for(var m=null,f=this;f.constructor.superclass;){var g=f.constructor.superclass.prototype[a];if(f[a]!==g){m=g;break}f=f.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,d.call(arguments,1)):m.call(this):console.log("tried to callSuper "+a+", method not found in prototype chain",this)}function o(){var a=null,m=d.call(arguments,0);typeof m[0]=="function"&&(a=m.shift());function f(){this.initialize.apply(this,arguments)}f.superclass=a,f.subclasses=[],a&&(i.prototype=a.prototype,f.prototype=new i,a.subclasses.push(f));for(var g=0,w=m.length;g<w;g++)l(f,m[g],a);return f.prototype.initialize||(f.prototype.initialize=r),f.prototype.constructor=f,f.prototype.callSuper=s,f}e.util.createClass=o})(),(function(){var d=!!e.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];e.util.addListener=function(l,i,s,o){l&&l.addEventListener(i,s,d?!1:o)},e.util.removeListener=function(l,i,s,o){l&&l.removeEventListener(i,s,d?!1:o)};function c(l){var i=l.changedTouches;return i&&i[0]?i[0]:l}e.util.getPointer=function(l){var i=l.target,s=e.util.getScrollLeftTop(i),o=c(l);return{x:o.clientX+s.left,y:o.clientY+s.top}},e.util.isTouchEvent=function(l){return r.indexOf(l.type)>-1||l.pointerType==="touch"}})(),(function(){function d(o,a){var m=o.style;if(!m)return o;if(typeof a=="string")return o.style.cssText+=";"+a,a.indexOf("opacity")>-1?s(o,a.match(/opacity:\s*(\d?\.?\d*)/)[1]):o;for(var f in a)if(f==="opacity")s(o,a[f]);else{var g=f==="float"||f==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":f;m[g]=a[f]}return o}var r=e.document.createElement("div"),c=typeof r.style.opacity=="string",l=typeof r.style.filter=="string",i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(o){return o};c?s=function(o,a){return o.style.opacity=a,o}:l&&(s=function(o,a){var m=o.style;return o.currentStyle&&!o.currentStyle.hasLayout&&(m.zoom=1),i.test(m.filter)?(a=a>=.9999?"":"alpha(opacity="+a*100+")",m.filter=m.filter.replace(i,a)):m.filter+=" alpha(opacity="+a*100+")",o}),e.util.setStyle=d})(),(function(){var d=Array.prototype.slice;function r(P){return typeof P=="string"?e.document.getElementById(P):P}var c,l=function(P){return d.call(P,0)};try{c=l(e.document.childNodes)instanceof Array}catch{}c||(l=function(P){for(var M=new Array(P.length),L=P.length;L--;)M[L]=P[L];return M});function i(P,M){var L=e.document.createElement(P);for(var B in M)B==="class"?L.className=M[B]:B==="for"?L.htmlFor=M[B]:L.setAttribute(B,M[B]);return L}function s(P,M){P&&(" "+P.className+" ").indexOf(" "+M+" ")===-1&&(P.className+=(P.className?" ":"")+M)}function o(P,M,L){return typeof M=="string"&&(M=i(M,L)),P.parentNode&&P.parentNode.replaceChild(M,P),M.appendChild(P),M}function a(P){for(var M=0,L=0,B=e.document.documentElement,D=e.document.body||{scrollLeft:0,scrollTop:0};P&&(P.parentNode||P.host)&&(P=P.parentNode||P.host,P===e.document?(M=D.scrollLeft||B.scrollLeft||0,L=D.scrollTop||B.scrollTop||0):(M+=P.scrollLeft||0,L+=P.scrollTop||0),!(P.nodeType===1&&P.style.position==="fixed")););return{left:M,top:L}}function m(P){var M,L=P&&P.ownerDocument,B={left:0,top:0},D={left:0,top:0},H,Q={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!L)return D;for(var ee in Q)D[Q[ee]]+=parseInt(f(P,ee),10)||0;return M=L.documentElement,typeof P.getBoundingClientRect<"u"&&(B=P.getBoundingClientRect()),H=a(P),{left:B.left+H.left-(M.clientLeft||0)+D.left,top:B.top+H.top-(M.clientTop||0)+D.top}}var f;e.document.defaultView&&e.document.defaultView.getComputedStyle?f=function(P,M){var L=e.document.defaultView.getComputedStyle(P,null);return L?L[M]:void 0}:f=function(P,M){var L=P.style[M];return!L&&P.currentStyle&&(L=P.currentStyle[M]),L},(function(){var P=e.document.documentElement.style,M="userSelect"in P?"userSelect":"MozUserSelect"in P?"MozUserSelect":"WebkitUserSelect"in P?"WebkitUserSelect":"KhtmlUserSelect"in P?"KhtmlUserSelect":"";function L(D){return typeof D.onselectstart<"u"&&(D.onselectstart=e.util.falseFunction),M?D.style[M]="none":typeof D.unselectable=="string"&&(D.unselectable="on"),D}function B(D){return typeof D.onselectstart<"u"&&(D.onselectstart=null),M?D.style[M]="":typeof D.unselectable=="string"&&(D.unselectable=""),D}e.util.makeElementUnselectable=L,e.util.makeElementSelectable=B})();function g(P){var M=e.jsdomImplForWrapper(P);return M._canvas||M._image}function w(P){if(e.isLikelyNode){var M=e.jsdomImplForWrapper(P);M&&(M._image=null,M._canvas=null,M._currentSrc=null,M._attributes=null,M._classList=null)}}function C(P,M){P.imageSmoothingEnabled=P.imageSmoothingEnabled||P.webkitImageSmoothingEnabled||P.mozImageSmoothingEnabled||P.msImageSmoothingEnabled||P.oImageSmoothingEnabled,P.imageSmoothingEnabled=M}e.util.setImageSmoothing=C,e.util.getById=r,e.util.toArray=l,e.util.addClass=s,e.util.makeElement=i,e.util.wrapElement=o,e.util.getScrollLeftTop=a,e.util.getElementOffset=m,e.util.getNodeCanvas=g,e.util.cleanUpJsdomNode=w})(),(function(){function d(l,i){return l+(/\?/.test(l)?"&":"?")+i}function r(){}function c(l,i){i||(i={});var s=i.method?i.method.toUpperCase():"GET",o=i.onComplete||function(){},a=new e.window.XMLHttpRequest,m=i.body||i.parameters;return a.onreadystatechange=function(){a.readyState===4&&(o(a),a.onreadystatechange=r)},s==="GET"&&(m=null,typeof i.parameters=="string"&&(l=d(l,i.parameters))),a.open(s,l,!0),(s==="POST"||s==="PUT")&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(m),a}e.util.request=c})(),e.log=console.log,e.warn=console.warn,(function(){function d(){return!1}function r(a,m,f,g){return-f*Math.cos(a/g*(Math.PI/2))+f+m}function c(a){s(function(m){a||(a={});var f=m||+new Date,g=a.duration||500,w=f+g,C,P=a.onChange||d,M=a.abort||d,L=a.onComplete||d,B=a.easing||r,D="startValue"in a?a.startValue:0,H="endValue"in a?a.endValue:100,Q=a.byValue||H-D;a.onStart&&a.onStart(),(function ee(se){C=se||+new Date;var ie=C>w?g:C-f,ue=ie/g,U=B(ie,D,Q,g),X=Math.abs((U-D)/Q);if(M()){L(H,1,1);return}if(C>w){P(H,1,1),L(H,1,1);return}else P(U,X,ue),s(ee)})(f)})}var l=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(a){return e.window.setTimeout(a,1e3/60)},i=e.window.cancelAnimationFrame||e.window.clearTimeout;function s(){return l.apply(e.window,arguments)}function o(){return i.apply(e.window,arguments)}e.util.animate=c,e.util.requestAnimFrame=s,e.util.cancelAnimFrame=o})(),(function(){function d(c,l,i){var s="rgba("+parseInt(c[0]+i*(l[0]-c[0]),10)+","+parseInt(c[1]+i*(l[1]-c[1]),10)+","+parseInt(c[2]+i*(l[2]-c[2]),10);return s+=","+(c&&l?parseFloat(c[3]+i*(l[3]-c[3])):1),s+=")",s}function r(c,l,i,s){var o=new e.Color(c).getSource(),a=new e.Color(l).getSource(),m=s.onComplete,f=s.onChange;s=s||{},e.util.animate(e.util.object.extend(s,{duration:i||500,startValue:o,endValue:a,byValue:a,easing:function(g,w,C,P){var M=s.colorEasing?s.colorEasing(g,P):1-Math.cos(g/P*(Math.PI/2));return d(w,C,M)},onComplete:function(g,w,C){if(m)return m(d(a,a,0),w,C)},onChange:function(g,w,C){if(f){if(Array.isArray(g))return f(d(g,g,0),w,C);f(g,w,C)}}}))}e.util.animateColor=r})(),(function(){function d(R,V,W,q){return R<Math.abs(V)?(R=V,q=W/4):V===0&&R===0?q=W/(2*Math.PI)*Math.asin(1):q=W/(2*Math.PI)*Math.asin(V/R),{a:R,c:V,p:W,s:q}}function r(R,V,W){return R.a*Math.pow(2,10*(V-=1))*Math.sin((V*W-R.s)*(2*Math.PI)/R.p)}function c(R,V,W,q){return W*((R=R/q-1)*R*R+1)+V}function l(R,V,W,q){return R/=q/2,R<1?W/2*R*R*R+V:W/2*((R-=2)*R*R+2)+V}function i(R,V,W,q){return W*(R/=q)*R*R*R+V}function s(R,V,W,q){return-W*((R=R/q-1)*R*R*R-1)+V}function o(R,V,W,q){return R/=q/2,R<1?W/2*R*R*R*R+V:-W/2*((R-=2)*R*R*R-2)+V}function a(R,V,W,q){return W*(R/=q)*R*R*R*R+V}function m(R,V,W,q){return W*((R=R/q-1)*R*R*R*R+1)+V}function f(R,V,W,q){return R/=q/2,R<1?W/2*R*R*R*R*R+V:W/2*((R-=2)*R*R*R*R+2)+V}function g(R,V,W,q){return-W*Math.cos(R/q*(Math.PI/2))+W+V}function w(R,V,W,q){return W*Math.sin(R/q*(Math.PI/2))+V}function C(R,V,W,q){return-W/2*(Math.cos(Math.PI*R/q)-1)+V}function P(R,V,W,q){return R===0?V:W*Math.pow(2,10*(R/q-1))+V}function M(R,V,W,q){return R===q?V+W:W*(-Math.pow(2,-10*R/q)+1)+V}function L(R,V,W,q){return R===0?V:R===q?V+W:(R/=q/2,R<1?W/2*Math.pow(2,10*(R-1))+V:W/2*(-Math.pow(2,-10*--R)+2)+V)}function B(R,V,W,q){return-W*(Math.sqrt(1-(R/=q)*R)-1)+V}function D(R,V,W,q){return W*Math.sqrt(1-(R=R/q-1)*R)+V}function H(R,V,W,q){return R/=q/2,R<1?-W/2*(Math.sqrt(1-R*R)-1)+V:W/2*(Math.sqrt(1-(R-=2)*R)+1)+V}function Q(R,V,W,q){var oe=1.70158,Y=0,I=W;if(R===0)return V;if(R/=q,R===1)return V+W;Y||(Y=q*.3);var K=d(I,W,Y,oe);return-r(K,R,q)+V}function ee(R,V,W,q){var oe=1.70158,Y=0,I=W;if(R===0)return V;if(R/=q,R===1)return V+W;Y||(Y=q*.3);var K=d(I,W,Y,oe);return K.a*Math.pow(2,-10*R)*Math.sin((R*q-K.s)*(2*Math.PI)/K.p)+K.c+V}function se(R,V,W,q){var oe=1.70158,Y=0,I=W;if(R===0)return V;if(R/=q/2,R===2)return V+W;Y||(Y=q*(.3*1.5));var K=d(I,W,Y,oe);return R<1?-.5*r(K,R,q)+V:K.a*Math.pow(2,-10*(R-=1))*Math.sin((R*q-K.s)*(2*Math.PI)/K.p)*.5+K.c+V}function ie(R,V,W,q,oe){return oe===void 0&&(oe=1.70158),W*(R/=q)*R*((oe+1)*R-oe)+V}function ue(R,V,W,q,oe){return oe===void 0&&(oe=1.70158),W*((R=R/q-1)*R*((oe+1)*R+oe)+1)+V}function U(R,V,W,q,oe){return oe===void 0&&(oe=1.70158),R/=q/2,R<1?W/2*(R*R*(((oe*=1.525)+1)*R-oe))+V:W/2*((R-=2)*R*(((oe*=1.525)+1)*R+oe)+2)+V}function X(R,V,W,q){return W-Z(q-R,0,W,q)+V}function Z(R,V,W,q){return(R/=q)<1/2.75?W*(7.5625*R*R)+V:R<2/2.75?W*(7.5625*(R-=1.5/2.75)*R+.75)+V:R<2.5/2.75?W*(7.5625*(R-=2.25/2.75)*R+.9375)+V:W*(7.5625*(R-=2.625/2.75)*R+.984375)+V}function $(R,V,W,q){return R<q/2?X(R*2,0,W,q)*.5+V:Z(R*2-q,0,W,q)*.5+W*.5+V}e.util.ease={easeInQuad:function(R,V,W,q){return W*(R/=q)*R+V},easeOutQuad:function(R,V,W,q){return-W*(R/=q)*(R-2)+V},easeInOutQuad:function(R,V,W,q){return R/=q/2,R<1?W/2*R*R+V:-W/2*(--R*(R-2)-1)+V},easeInCubic:function(R,V,W,q){return W*(R/=q)*R*R+V},easeOutCubic:c,easeInOutCubic:l,easeInQuart:i,easeOutQuart:s,easeInOutQuart:o,easeInQuint:a,easeOutQuint:m,easeInOutQuint:f,easeInSine:g,easeOutSine:w,easeInOutSine:C,easeInExpo:P,easeOutExpo:M,easeInOutExpo:L,easeInCirc:B,easeOutCirc:D,easeInOutCirc:H,easeInElastic:Q,easeOutElastic:ee,easeInOutElastic:se,easeInBack:ie,easeOutBack:ue,easeInOutBack:U,easeInBounce:X,easeOutBounce:Z,easeInOutBounce:$}})(),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.object.extend,l=r.util.object.clone,i=r.util.toFixed,s=r.util.parseUnit,o=r.util.multiplyTransformMatrices,a=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],f=["pattern","defs","symbol","metadata","clipPath","mask","desc"],g=["symbol","g","a","svg","clipPath","defs"],w={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},C={stroke:"strokeOpacity",fill:"fillOpacity"},P="font-size",M="clip-path";r.svgValidTagNamesRegEx=D(a),r.svgViewBoxElementsRegEx=D(m),r.svgInvalidAncestorsRegEx=D(f),r.svgValidParentsRegEx=D(g),r.cssRules={},r.gradientDefs={},r.clipPaths={};function L(Y){return Y in w?w[Y]:Y}function B(Y,I,K,ne){var le=Object.prototype.toString.call(I)==="[object Array]",he;if((Y==="fill"||Y==="stroke")&&I==="none")I="";else{if(Y==="strokeUniform")return I==="non-scaling-stroke";if(Y==="strokeDashArray")I==="none"?I=null:I=I.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(Y==="transformMatrix")K&&K.transformMatrix?I=o(K.transformMatrix,r.parseTransformAttribute(I)):I=r.parseTransformAttribute(I);else if(Y==="visible")I=I!=="none"&&I!=="hidden",K&&K.visible===!1&&(I=!1);else if(Y==="opacity")I=parseFloat(I),K&&typeof K.opacity<"u"&&(I*=K.opacity);else if(Y==="textAnchor")I=I==="start"?"left":I==="end"?"right":"center";else if(Y==="charSpacing")he=s(I,ne)/ne*1e3;else if(Y==="paintFirst"){var ve=I.indexOf("fill"),ye=I.indexOf("stroke"),I="fill";(ve>-1&&ye>-1&&ye<ve||ve===-1&&ye>-1)&&(I="stroke")}else{if(Y==="href"||Y==="xlink:href"||Y==="font")return I;if(Y==="imageSmoothing")return I==="optimizeQuality";he=le?I.map(s):s(I,ne)}}return!le&&isNaN(he)?I:he}function D(Y){return new RegExp("^("+Y.join("|")+")\\b","i")}function H(Y){for(var I in C)if(!(typeof Y[C[I]]>"u"||Y[I]==="")){if(typeof Y[I]>"u"){if(!r.Object.prototype[I])continue;Y[I]=r.Object.prototype[I]}if(Y[I].indexOf("url(")!==0){var K=new r.Color(Y[I]);Y[I]=K.setAlpha(i(K.getAlpha()*Y[C[I]],2)).toRgba()}}return Y}function Q(Y,I){var K,ne=[],le,he,ve;for(he=0,ve=I.length;he<ve;he++)K=I[he],le=Y.getElementsByTagName(K),ne=ne.concat(Array.prototype.slice.call(le));return ne}r.parseTransformAttribute=(function(){function Y(_e,Ie){var He=r.util.cos(Ie[0]),Je=r.util.sin(Ie[0]),nt=0,ot=0;Ie.length===3&&(nt=Ie[1],ot=Ie[2]),_e[0]=He,_e[1]=Je,_e[2]=-Je,_e[3]=He,_e[4]=nt-(He*nt-Je*ot),_e[5]=ot-(Je*nt+He*ot)}function I(_e,Ie){var He=Ie[0],Je=Ie.length===2?Ie[1]:Ie[0];_e[0]=He,_e[3]=Je}function K(_e,Ie,He){_e[He]=Math.tan(r.util.degreesToRadians(Ie[0]))}function ne(_e,Ie){_e[4]=Ie[0],Ie.length===2&&(_e[5]=Ie[1])}var le=r.iMatrix,he=r.reNum,ve=r.commaWsp,ye="(?:(skewX)\\s*\\(\\s*("+he+")\\s*\\))",Oe="(?:(skewY)\\s*\\(\\s*("+he+")\\s*\\))",pe="(?:(rotate)\\s*\\(\\s*("+he+")(?:"+ve+"("+he+")"+ve+"("+he+"))?\\s*\\))",de="(?:(scale)\\s*\\(\\s*("+he+")(?:"+ve+"("+he+"))?\\s*\\))",Ce="(?:(translate)\\s*\\(\\s*("+he+")(?:"+ve+"("+he+"))?\\s*\\))",te="(?:(matrix)\\s*\\(\\s*("+he+")"+ve+"("+he+")"+ve+"("+he+")"+ve+"("+he+")"+ve+"("+he+")"+ve+"("+he+")\\s*\\))",fe="(?:"+te+"|"+Ce+"|"+de+"|"+pe+"|"+ye+"|"+Oe+")",Se="(?:"+fe+"(?:"+ve+"*"+fe+")*)",je="^\\s*(?:"+Se+"?)\\s*$",Me=new RegExp(je),Le=new RegExp(fe,"g");return function(_e){var Ie=le.concat(),He=[];if(!_e||_e&&!Me.test(_e))return Ie;_e.replace(Le,function(nt){var ot=new RegExp(fe).exec(nt).filter(function(Bn){return!!Bn}),dt=ot[1],ut=ot.slice(2).map(parseFloat);switch(dt){case"translate":ne(Ie,ut);break;case"rotate":ut[0]=r.util.degreesToRadians(ut[0]),Y(Ie,ut);break;case"scale":I(Ie,ut);break;case"skewX":K(Ie,ut,2);break;case"skewY":K(Ie,ut,1);break;case"matrix":Ie=ut;break}He.push(Ie.concat()),Ie=le.concat()});for(var Je=He[0];He.length>1;)He.shift(),Je=r.util.multiplyTransformMatrices(Je,He[0]);return Je}})();function ee(Y,I){var K,ne;Y.replace(/;\s*$/,"").split(";").forEach(function(le){var he=le.split(":");K=he[0].trim().toLowerCase(),ne=he[1].trim(),I[K]=ne})}function se(Y,I){var K,ne;for(var le in Y)typeof Y[le]>"u"||(K=le.toLowerCase(),ne=Y[le],I[K]=ne)}function ie(Y,I){var K={};for(var ne in r.cssRules[I])if(ue(Y,ne.split(" ")))for(var le in r.cssRules[I][ne])K[le]=r.cssRules[I][ne][le];return K}function ue(Y,I){var K,ne=!0;return K=X(Y,I.pop()),K&&I.length&&(ne=U(Y,I)),K&&ne&&I.length===0}function U(Y,I){for(var K,ne=!0;Y.parentNode&&Y.parentNode.nodeType===1&&I.length;)ne&&(K=I.pop()),Y=Y.parentNode,ne=X(Y,K);return I.length===0}function X(Y,I){var K=Y.nodeName,ne=Y.getAttribute("class"),le=Y.getAttribute("id"),he,ve;if(he=new RegExp("^"+K,"i"),I=I.replace(he,""),le&&I.length&&(he=new RegExp("#"+le+"(?![a-zA-Z\\-]+)","i"),I=I.replace(he,"")),ne&&I.length)for(ne=ne.split(" "),ve=ne.length;ve--;)he=new RegExp("\\."+ne[ve]+"(?![a-zA-Z\\-]+)","i"),I=I.replace(he,"");return I.length===0}function Z(Y,I){var K;if(Y.getElementById&&(K=Y.getElementById(I)),K)return K;var ne,le,he,ve=Y.getElementsByTagName("*");for(le=0,he=ve.length;le<he;le++)if(ne=ve[le],I===ne.getAttribute("id"))return ne}function $(Y){for(var I=Q(Y,["use","svg:use"]),K=0;I.length&&K<I.length;){var ne=I[K],le=ne.getAttribute("xlink:href")||ne.getAttribute("href");if(le===null)return;var he=le.substr(1),ve=ne.getAttribute("x")||0,ye=ne.getAttribute("y")||0,Oe=Z(Y,he).cloneNode(!0),pe=(Oe.getAttribute("transform")||"")+" translate("+ve+", "+ye+")",de,Ce=I.length,te,fe,Se,je,Me=r.svgNS;if(V(Oe),/^svg$/i.test(Oe.nodeName)){var Le=Oe.ownerDocument.createElementNS(Me,"g");for(fe=0,Se=Oe.attributes,je=Se.length;fe<je;fe++)te=Se.item(fe),Le.setAttributeNS(Me,te.nodeName,te.nodeValue);for(;Oe.firstChild;)Le.appendChild(Oe.firstChild);Oe=Le}for(fe=0,Se=ne.attributes,je=Se.length;fe<je;fe++)te=Se.item(fe),!(te.nodeName==="x"||te.nodeName==="y"||te.nodeName==="xlink:href"||te.nodeName==="href")&&(te.nodeName==="transform"?pe=te.nodeValue+" "+pe:Oe.setAttribute(te.nodeName,te.nodeValue));Oe.setAttribute("transform",pe),Oe.setAttribute("instantiated_by_use","1"),Oe.removeAttribute("id"),de=ne.parentNode,de.replaceChild(Oe,ne),I.length===Ce&&K++}}var R=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function V(Y){if(r.svgViewBoxElementsRegEx.test(Y.nodeName)){var I=Y.getAttribute("viewBox"),K=1,ne=1,le=0,he=0,ve,ye,Oe,pe,de=Y.getAttribute("width"),Ce=Y.getAttribute("height"),te=Y.getAttribute("x")||0,fe=Y.getAttribute("y")||0,Se=Y.getAttribute("preserveAspectRatio")||"",je=!I||!(I=I.match(R)),Me=!de||!Ce||de==="100%"||Ce==="100%",Le=je&&Me,_e={},Ie="",He=0,Je=0;if(_e.width=0,_e.height=0,_e.toBeParsed=Le,je&&(te||fe)&&Y.parentNode&&Y.parentNode.nodeName!=="#document"&&(Ie=" translate("+s(te)+" "+s(fe)+") ",Oe=(Y.getAttribute("transform")||"")+Ie,Y.setAttribute("transform",Oe),Y.removeAttribute("x"),Y.removeAttribute("y")),Le)return _e;if(je)return _e.width=s(de),_e.height=s(Ce),_e;if(le=-parseFloat(I[1]),he=-parseFloat(I[2]),ve=parseFloat(I[3]),ye=parseFloat(I[4]),_e.minX=le,_e.minY=he,_e.viewBoxWidth=ve,_e.viewBoxHeight=ye,Me?(_e.width=ve,_e.height=ye):(_e.width=s(de),_e.height=s(Ce),K=_e.width/ve,ne=_e.height/ye),Se=r.util.parsePreserveAspectRatioAttribute(Se),Se.alignX!=="none"&&(Se.meetOrSlice==="meet"&&(ne=K=K>ne?ne:K),Se.meetOrSlice==="slice"&&(ne=K=K>ne?K:ne),He=_e.width-ve*K,Je=_e.height-ye*K,Se.alignX==="Mid"&&(He/=2),Se.alignY==="Mid"&&(Je/=2),Se.alignX==="Min"&&(He=0),Se.alignY==="Min"&&(Je=0)),K===1&&ne===1&&le===0&&he===0&&te===0&&fe===0)return _e;if((te||fe)&&Y.parentNode.nodeName!=="#document"&&(Ie=" translate("+s(te)+" "+s(fe)+") "),Oe=Ie+" matrix("+K+" 0 0 "+ne+" "+(le*K+He)+" "+(he*ne+Je)+") ",Y.nodeName==="svg"){for(pe=Y.ownerDocument.createElementNS(r.svgNS,"g");Y.firstChild;)pe.appendChild(Y.firstChild);Y.appendChild(pe)}else pe=Y,pe.removeAttribute("x"),pe.removeAttribute("y"),Oe=pe.getAttribute("transform")+Oe;return pe.setAttribute("transform",Oe),_e}}function W(Y,I){for(;Y&&(Y=Y.parentNode);)if(Y.nodeName&&I.test(Y.nodeName.replace("svg:",""))&&!Y.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(Y,I,K,ne){if(Y){$(Y);var le=r.Object.__uid++,he,ve,ye=V(Y),Oe=r.util.toArray(Y.getElementsByTagName("*"));if(ye.crossOrigin=ne&&ne.crossOrigin,ye.svgUid=le,Oe.length===0&&r.isLikelyNode){Oe=Y.selectNodes('//*[name(.)!="svg"]');var pe=[];for(he=0,ve=Oe.length;he<ve;he++)pe[he]=Oe[he];Oe=pe}var de=Oe.filter(function(te){return V(te),r.svgValidTagNamesRegEx.test(te.nodeName.replace("svg:",""))&&!W(te,r.svgInvalidAncestorsRegEx)});if(!de||de&&!de.length){I&&I([],{});return}var Ce={};Oe.filter(function(te){return te.nodeName.replace("svg:","")==="clipPath"}).forEach(function(te){var fe=te.getAttribute("id");Ce[fe]=r.util.toArray(te.getElementsByTagName("*")).filter(function(Se){return r.svgValidTagNamesRegEx.test(Se.nodeName.replace("svg:",""))})}),r.gradientDefs[le]=r.getGradientDefs(Y),r.cssRules[le]=r.getCSSRules(Y),r.clipPaths[le]=Ce,r.parseElements(de,function(te,fe){I&&(I(te,ye,fe,Oe),delete r.gradientDefs[le],delete r.cssRules[le],delete r.clipPaths[le])},l(ye),K,ne)}};function q(Y,I){var K=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],ne="xlink:href",le=I.getAttribute(ne).substr(1),he=Z(Y,le);if(he&&he.getAttribute(ne)&&q(Y,he),K.forEach(function(ye){he&&!I.hasAttribute(ye)&&he.hasAttribute(ye)&&I.setAttribute(ye,he.getAttribute(ye))}),!I.children.length)for(var ve=he.cloneNode(!0);ve.firstChild;)I.appendChild(ve.firstChild);I.removeAttribute(ne)}var oe=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");c(r,{parseFontDeclaration:function(Y,I){var K=Y.match(oe);if(K){var ne=K[1],le=K[3],he=K[4],ve=K[5],ye=K[6];ne&&(I.fontStyle=ne),le&&(I.fontWeight=isNaN(parseFloat(le))?le:parseFloat(le)),he&&(I.fontSize=s(he)),ye&&(I.fontFamily=ye),ve&&(I.lineHeight=ve==="normal"?1:ve)}},getGradientDefs:function(Y){var I=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],K=Q(Y,I),ne,le=0,he={};for(le=K.length;le--;)ne=K[le],ne.getAttribute("xlink:href")&&q(Y,ne),he[ne.getAttribute("id")]=ne;return he},parseAttributes:function(Y,I,K){if(Y){var ne,le={},he,ve;typeof K>"u"&&(K=Y.getAttribute("svgUid")),Y.parentNode&&r.svgValidParentsRegEx.test(Y.parentNode.nodeName)&&(le=r.parseAttributes(Y.parentNode,I,K));var ye=I.reduce(function(Se,je){return ne=Y.getAttribute(je),ne&&(Se[je]=ne),Se},{}),Oe=c(ie(Y,K),r.parseStyleAttribute(Y));ye=c(ye,Oe),Oe[M]&&Y.setAttribute(M,Oe[M]),he=ve=le.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,ye[P]&&(ye[P]=he=s(ye[P],ve));var pe,de,Ce={};for(var te in ye)pe=L(te),de=B(pe,ye[te],le,he),Ce[pe]=de;Ce&&Ce.font&&r.parseFontDeclaration(Ce.font,Ce);var fe=c(le,Ce);return r.svgValidParentsRegEx.test(Y.nodeName)?fe:H(fe)}},parseElements:function(Y,I,K,ne,le){new r.ElementsParser(Y,I,K,ne,le).parse()},parseStyleAttribute:function(Y){var I={},K=Y.getAttribute("style");return K&&(typeof K=="string"?ee(K,I):se(K,I)),I},parsePointsAttribute:function(Y){if(!Y)return null;Y=Y.replace(/,/g," ").trim(),Y=Y.split(/\s+/);var I=[],K,ne;for(K=0,ne=Y.length;K<ne;K+=2)I.push({x:parseFloat(Y[K]),y:parseFloat(Y[K+1])});return I},getCSSRules:function(Y){var I=Y.getElementsByTagName("style"),K,ne,le={},he;for(K=0,ne=I.length;K<ne;K++){var ve=I[K].textContent;ve=ve.replace(/\/\*[\s\S]*?\*\//g,""),ve.trim()!==""&&(he=ve.match(/[^{]*\{[\s\S]*?\}/g),he=he.map(function(ye){return ye.trim()}),he.forEach(function(ye){var Oe=ye.match(/([\s\S]*?)\s*\{([^}]*)\}/),pe={},de=Oe[2].trim(),Ce=de.replace(/;$/,"").split(/\s*;\s*/);for(K=0,ne=Ce.length;K<ne;K++){var te=Ce[K].split(/\s*:\s*/),fe=te[0],Se=te[1];pe[fe]=Se}ye=Oe[1],ye.split(",").forEach(function(je){je=je.replace(/^svg/i,"").trim(),je!==""&&(le[je]?r.util.object.extend(le[je],pe):le[je]=r.util.object.clone(pe))})}))}return le},loadSVGFromURL:function(Y,I,K,ne){Y=Y.replace(/^\n\s*/,"").trim(),new r.util.request(Y,{method:"get",onComplete:le});function le(he){var ve=he.responseXML;if(!ve||!ve.documentElement)return I&&I(null),!1;r.parseSVGDocument(ve.documentElement,function(ye,Oe,pe,de){I&&I(ye,Oe,pe,de)},K,ne)}},loadSVGFromString:function(Y,I,K,ne){var le=new r.window.DOMParser,he=le.parseFromString(Y.trim(),"text/xml");r.parseSVGDocument(he.documentElement,function(ve,ye,Oe,pe){I(ve,ye,Oe,pe)},K,ne)}})})(t),e.ElementsParser=function(d,r,c,l,i,s){this.elements=d,this.callback=r,this.options=c,this.reviver=l,this.svgUid=c&&c.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s},(function(d){d.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},d.createObjects=function(){var r=this;this.elements.forEach(function(c,l){c.setAttribute("svgUid",r.svgUid),r.createObject(c,l)})},d.findTag=function(r){return e[e.util.string.capitalize(r.tagName.replace("svg:",""))]},d.createObject=function(r,c){var l=this.findTag(r);if(l&&l.fromElement)try{l.fromElement(r,this.createCallback(c,r),this.options)}catch(i){e.log(i)}else this.checkIfDone()},d.createCallback=function(r,c){var l=this;return function(i){var s;l.resolveGradient(i,c,"fill"),l.resolveGradient(i,c,"stroke"),i instanceof e.Image&&i._originalElement&&(s=i.parsePreserveAspectRatioAttribute(c)),i._removeTransformMatrix(s),l.resolveClipPath(i,c),l.reviver&&l.reviver(c,i),l.instances[r]=i,l.checkIfDone()}},d.extractPropertyDefinition=function(r,c,l){var i=r[c],s=this.regexUrl;if(s.test(i)){s.lastIndex=0;var o=s.exec(i)[1];return s.lastIndex=0,e[l][this.svgUid][o]}},d.resolveGradient=function(r,c,l){var i=this.extractPropertyDefinition(r,l,"gradientDefs");if(i){var s=c.getAttribute(l+"-opacity"),o=e.Gradient.fromElement(i,r,s,this.options);r.set(l,o)}},d.createClipPathCallback=function(r,c){return function(l){l._removeTransformMatrix(),l.fillRule=l.clipRule,c.push(l)}},d.resolveClipPath=function(r,c){var l=this.extractPropertyDefinition(r,"clipPath","clipPaths"),i,s,o,a,m,f;if(l){a=[],o=e.util.invertTransform(r.calcTransformMatrix());for(var g=l[0].parentNode,w=c;w.parentNode&&w.getAttribute("clip-path")!==r.clipPath;)w=w.parentNode;w.parentNode.appendChild(g);for(var C=0;C<l.length;C++)i=l[C],s=this.findTag(i),s.fromElement(i,this.createClipPathCallback(r,a),this.options);a.length===1?l=a[0]:l=new e.Group(a),m=e.util.multiplyTransformMatrices(o,l.calcTransformMatrix()),l.clipPath&&this.resolveClipPath(l,w);var f=e.util.qrDecompose(m);l.flipX=!1,l.flipY=!1,l.set("scaleX",f.scaleX),l.set("scaleY",f.scaleY),l.angle=f.angle,l.skewX=f.skewX,l.skewY=0,l.setPositionByOrigin({x:f.translateX,y:f.translateY},"center","center"),r.clipPath=l}else delete r.clipPath},d.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}})(e.ElementsParser.prototype),(function(d){var r=d.fabric||(d.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=c;function c(l,i){this.x=l,this.y=i}c.prototype={type:"point",constructor:c,add:function(l){return new c(this.x+l.x,this.y+l.y)},addEquals:function(l){return this.x+=l.x,this.y+=l.y,this},scalarAdd:function(l){return new c(this.x+l,this.y+l)},scalarAddEquals:function(l){return this.x+=l,this.y+=l,this},subtract:function(l){return new c(this.x-l.x,this.y-l.y)},subtractEquals:function(l){return this.x-=l.x,this.y-=l.y,this},scalarSubtract:function(l){return new c(this.x-l,this.y-l)},scalarSubtractEquals:function(l){return this.x-=l,this.y-=l,this},multiply:function(l){return new c(this.x*l,this.y*l)},multiplyEquals:function(l){return this.x*=l,this.y*=l,this},divide:function(l){return new c(this.x/l,this.y/l)},divideEquals:function(l){return this.x/=l,this.y/=l,this},eq:function(l){return this.x===l.x&&this.y===l.y},lt:function(l){return this.x<l.x&&this.y<l.y},lte:function(l){return this.x<=l.x&&this.y<=l.y},gt:function(l){return this.x>l.x&&this.y>l.y},gte:function(l){return this.x>=l.x&&this.y>=l.y},lerp:function(l,i){return typeof i>"u"&&(i=.5),i=Math.max(Math.min(1,i),0),new c(this.x+(l.x-this.x)*i,this.y+(l.y-this.y)*i)},distanceFrom:function(l){var i=this.x-l.x,s=this.y-l.y;return Math.sqrt(i*i+s*s)},midPointFrom:function(l){return this.lerp(l)},min:function(l){return new c(Math.min(this.x,l.x),Math.min(this.y,l.y))},max:function(l){return new c(Math.max(this.x,l.x),Math.max(this.y,l.y))},toString:function(){return this.x+","+this.y},setXY:function(l,i){return this.x=l,this.y=i,this},setX:function(l){return this.x=l,this},setY:function(l){return this.y=l,this},setFromPoint:function(l){return this.x=l.x,this.y=l.y,this},swap:function(l){var i=this.x,s=this.y;this.x=l.x,this.y=l.y,l.x=i,l.y=s},clone:function(){return new c(this.x,this.y)}}})(t),(function(d){var r=d.fabric||(d.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function c(l){this.status=l,this.points=[]}r.Intersection=c,r.Intersection.prototype={constructor:c,appendPoint:function(l){return this.points.push(l),this},appendPoints:function(l){return this.points=this.points.concat(l),this}},r.Intersection.intersectLineLine=function(l,i,s,o){var a,m=(o.x-s.x)*(l.y-s.y)-(o.y-s.y)*(l.x-s.x),f=(i.x-l.x)*(l.y-s.y)-(i.y-l.y)*(l.x-s.x),g=(o.y-s.y)*(i.x-l.x)-(o.x-s.x)*(i.y-l.y);if(g!==0){var w=m/g,C=f/g;0<=w&&w<=1&&0<=C&&C<=1?(a=new c("Intersection"),a.appendPoint(new r.Point(l.x+w*(i.x-l.x),l.y+w*(i.y-l.y)))):a=new c}else m===0||f===0?a=new c("Coincident"):a=new c("Parallel");return a},r.Intersection.intersectLinePolygon=function(l,i,s){var o=new c,a=s.length,m,f,g,w;for(w=0;w<a;w++)m=s[w],f=s[(w+1)%a],g=c.intersectLineLine(l,i,m,f),o.appendPoints(g.points);return o.points.length>0&&(o.status="Intersection"),o},r.Intersection.intersectPolygonPolygon=function(l,i){var s=new c,o=l.length,a;for(a=0;a<o;a++){var m=l[a],f=l[(a+1)%o],g=c.intersectLinePolygon(m,f,i);s.appendPoints(g.points)}return s.points.length>0&&(s.status="Intersection"),s},r.Intersection.intersectPolygonRectangle=function(l,i,s){var o=i.min(s),a=i.max(s),m=new r.Point(a.x,o.y),f=new r.Point(o.x,a.y),g=c.intersectLinePolygon(o,m,l),w=c.intersectLinePolygon(m,a,l),C=c.intersectLinePolygon(a,f,l),P=c.intersectLinePolygon(f,o,l),M=new c;return M.appendPoints(g.points),M.appendPoints(w.points),M.appendPoints(C.points),M.appendPoints(P.points),M.points.length>0&&(M.status="Intersection"),M}})(t),(function(d){var r=d.fabric||(d.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function c(i){i?this._tryParsingColor(i):this.setSource([0,0,0,1])}r.Color=c,r.Color.prototype={_tryParsingColor:function(i){var s;i in c.colorNameMap&&(i=c.colorNameMap[i]),i==="transparent"&&(s=[255,255,255,0]),s||(s=c.sourceFromHex(i)),s||(s=c.sourceFromRgb(i)),s||(s=c.sourceFromHsl(i)),s||(s=[0,0,0,1]),s&&this.setSource(s)},_rgbToHsl:function(i,s,o){i/=255,s/=255,o/=255;var a,m,f,g=r.util.array.max([i,s,o]),w=r.util.array.min([i,s,o]);if(f=(g+w)/2,g===w)a=m=0;else{var C=g-w;switch(m=f>.5?C/(2-g-w):C/(g+w),g){case i:a=(s-o)/C+(s<o?6:0);break;case s:a=(o-i)/C+2;break;case o:a=(i-s)/C+4;break}a/=6}return[Math.round(a*360),Math.round(m*100),Math.round(f*100)]},getSource:function(){return this._source},setSource:function(i){this._source=i},toRgb:function(){var i=this.getSource();return"rgb("+i[0]+","+i[1]+","+i[2]+")"},toRgba:function(){var i=this.getSource();return"rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]+")"},toHsl:function(){var i=this.getSource(),s=this._rgbToHsl(i[0],i[1],i[2]);return"hsl("+s[0]+","+s[1]+"%,"+s[2]+"%)"},toHsla:function(){var i=this.getSource(),s=this._rgbToHsl(i[0],i[1],i[2]);return"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+i[3]+")"},toHex:function(){var i=this.getSource(),s,o,a;return s=i[0].toString(16),s=s.length===1?"0"+s:s,o=i[1].toString(16),o=o.length===1?"0"+o:o,a=i[2].toString(16),a=a.length===1?"0"+a:a,s.toUpperCase()+o.toUpperCase()+a.toUpperCase()},toHexa:function(){var i=this.getSource(),s;return s=Math.round(i[3]*255),s=s.toString(16),s=s.length===1?"0"+s:s,this.toHex()+s.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(i){var s=this.getSource();return s[3]=i,this.setSource(s),this},toGrayscale:function(){var i=this.getSource(),s=parseInt((i[0]*.3+i[1]*.59+i[2]*.11).toFixed(0),10),o=i[3];return this.setSource([s,s,s,o]),this},toBlackWhite:function(i){var s=this.getSource(),o=(s[0]*.3+s[1]*.59+s[2]*.11).toFixed(0),a=s[3];return i=i||127,o=Number(o)<Number(i)?0:255,this.setSource([o,o,o,a]),this},overlayWith:function(i){i instanceof c||(i=new c(i));var s=[],o=this.getAlpha(),a=.5,m=this.getSource(),f=i.getSource(),g;for(g=0;g<3;g++)s.push(Math.round(m[g]*(1-a)+f[g]*a));return s[3]=o,this.setSource(s),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function l(i,s,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?i+(s-i)*6*o:o<1/2?s:o<2/3?i+(s-i)*(2/3-o)*6:i}r.Color.fromRgb=function(i){return c.fromSource(c.sourceFromRgb(i))},r.Color.sourceFromRgb=function(i){var s=i.match(c.reRGBa);if(s){var o=parseInt(s[1],10)/(/%$/.test(s[1])?100:1)*(/%$/.test(s[1])?255:1),a=parseInt(s[2],10)/(/%$/.test(s[2])?100:1)*(/%$/.test(s[2])?255:1),m=parseInt(s[3],10)/(/%$/.test(s[3])?100:1)*(/%$/.test(s[3])?255:1);return[parseInt(o,10),parseInt(a,10),parseInt(m,10),s[4]?parseFloat(s[4]):1]}},r.Color.fromRgba=c.fromRgb,r.Color.fromHsl=function(i){return c.fromSource(c.sourceFromHsl(i))},r.Color.sourceFromHsl=function(i){var s=i.match(c.reHSLa);if(s){var o=(parseFloat(s[1])%360+360)%360/360,a=parseFloat(s[2])/(/%$/.test(s[2])?100:1),m=parseFloat(s[3])/(/%$/.test(s[3])?100:1),f,g,w;if(a===0)f=g=w=m;else{var C=m<=.5?m*(a+1):m+a-m*a,P=m*2-C;f=l(P,C,o+1/3),g=l(P,C,o),w=l(P,C,o-1/3)}return[Math.round(f*255),Math.round(g*255),Math.round(w*255),s[4]?parseFloat(s[4]):1]}},r.Color.fromHsla=c.fromHsl,r.Color.fromHex=function(i){return c.fromSource(c.sourceFromHex(i))},r.Color.sourceFromHex=function(i){if(i.match(c.reHex)){var s=i.slice(i.indexOf("#")+1),o=s.length===3||s.length===4,a=s.length===8||s.length===4,m=o?s.charAt(0)+s.charAt(0):s.substring(0,2),f=o?s.charAt(1)+s.charAt(1):s.substring(2,4),g=o?s.charAt(2)+s.charAt(2):s.substring(4,6),w=a?o?s.charAt(3)+s.charAt(3):s.substring(6,8):"FF";return[parseInt(m,16),parseInt(f,16),parseInt(g,16),parseFloat((parseInt(w,16)/255).toFixed(2))]}},r.Color.fromSource=function(i){var s=new c;return s.setSource(i),s}})(t),(function(d){var r=d.fabric||(d.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],l=["ns","nesw","ew","nwse"],i={},s="left",o="top",a="right",m="bottom",f="center",g={top:m,bottom:o,left:a,right:s,center:f},w=r.util.radiansToDegrees,C=Math.sign||function(pe){return(pe>0)-(pe<0)||+pe};function P(pe,de){var Ce=pe.angle+w(Math.atan2(de.y,de.x))+360;return Math.round(Ce%360/45)}function M(pe,de){var Ce=de.transform.target,te=Ce.canvas,fe=r.util.object.clone(de);fe.target=Ce,te&&te.fire("object:"+pe,fe),Ce.fire(pe,de)}function L(pe,de){var Ce=de.canvas,te=Ce.uniScaleKey,fe=pe[te];return Ce.uniformScaling&&!fe||!Ce.uniformScaling&&fe}function B(pe){return pe.originX===f&&pe.originY===f}function D(pe,de,Ce){var te=pe.lockScalingX,fe=pe.lockScalingY;return!!(te&&fe||!de&&(te||fe)&&Ce||te&&de==="x"||fe&&de==="y")}function H(pe,de,Ce){var te="not-allowed",fe=L(pe,Ce),Se="";if(de.x!==0&&de.y===0?Se="x":de.x===0&&de.y!==0&&(Se="y"),D(Ce,Se,fe))return te;var je=P(Ce,de);return c[je]+"-resize"}function Q(pe,de,Ce){var te="not-allowed";if(de.x!==0&&Ce.lockSkewingY||de.y!==0&&Ce.lockSkewingX)return te;var fe=P(Ce,de)%4;return l[fe]+"-resize"}function ee(pe,de,Ce){return pe[Ce.canvas.altActionKey]?i.skewCursorStyleHandler(pe,de,Ce):i.scaleCursorStyleHandler(pe,de,Ce)}function se(pe,de,Ce){var te=pe[Ce.canvas.altActionKey];if(de.x===0)return te?"skewX":"scaleY";if(de.y===0)return te?"skewY":"scaleX"}function ie(pe,de,Ce){return Ce.lockRotation?"not-allowed":de.cursorStyle}function ue(pe,de,Ce,te){return{e:pe,transform:de,pointer:{x:Ce,y:te}}}function U(pe){return function(de,Ce,te,fe){var Se=Ce.target,je=Se.getCenterPoint(),Me=Se.translateToOriginPoint(je,Ce.originX,Ce.originY),Le=pe(de,Ce,te,fe);return Se.setPositionByOrigin(Me,Ce.originX,Ce.originY),Le}}function X(pe,de){return function(Ce,te,fe,Se){var je=de(Ce,te,fe,Se);return je&&M(pe,ue(Ce,te,fe,Se)),je}}function Z(pe,de,Ce,te,fe){var Se=pe.target,je=Se.controls[pe.corner],Me=Se.canvas.getZoom(),Le=Se.padding/Me,_e=Se.toLocalPoint(new r.Point(te,fe),de,Ce);return _e.x>=Le&&(_e.x-=Le),_e.x<=-Le&&(_e.x+=Le),_e.y>=Le&&(_e.y-=Le),_e.y<=Le&&(_e.y+=Le),_e.x-=je.offsetX,_e.y-=je.offsetY,_e}function $(pe){return pe.flipX!==pe.flipY}function R(pe,de,Ce,te,fe){if(pe[de]!==0){var Se=pe._getTransformedDimensions()[te],je=fe/Se*pe[Ce];pe.set(Ce,je)}}function V(pe,de,Ce,te){var fe=de.target,Se=fe._getTransformedDimensions(0,fe.skewY),je=Z(de,de.originX,de.originY,Ce,te),Me=Math.abs(je.x*2)-Se.x,Le=fe.skewX,_e;Me<2?_e=0:(_e=w(Math.atan2(Me/fe.scaleX,Se.y/fe.scaleY)),de.originX===s&&de.originY===m&&(_e=-_e),de.originX===a&&de.originY===o&&(_e=-_e),$(fe)&&(_e=-_e));var Ie=Le!==_e;if(Ie){var He=fe._getTransformedDimensions().y;fe.set("skewX",_e),R(fe,"skewY","scaleY","y",He)}return Ie}function W(pe,de,Ce,te){var fe=de.target,Se=fe._getTransformedDimensions(fe.skewX,0),je=Z(de,de.originX,de.originY,Ce,te),Me=Math.abs(je.y*2)-Se.y,Le=fe.skewY,_e;Me<2?_e=0:(_e=w(Math.atan2(Me/fe.scaleY,Se.x/fe.scaleX)),de.originX===s&&de.originY===m&&(_e=-_e),de.originX===a&&de.originY===o&&(_e=-_e),$(fe)&&(_e=-_e));var Ie=Le!==_e;if(Ie){var He=fe._getTransformedDimensions().x;fe.set("skewY",_e),R(fe,"skewX","scaleX","x",He)}return Ie}function q(pe,de,Ce,te){var fe=de.target,Se=fe.skewX,je,Me=de.originY;if(fe.lockSkewingX)return!1;if(Se===0){var Le=Z(de,f,f,Ce,te);Le.x>0?je=s:je=a}else Se>0&&(je=Me===o?s:a),Se<0&&(je=Me===o?a:s),$(fe)&&(je=je===s?a:s);de.originX=je;var _e=X("skewing",U(V));return _e(pe,de,Ce,te)}function oe(pe,de,Ce,te){var fe=de.target,Se=fe.skewY,je,Me=de.originX;if(fe.lockSkewingY)return!1;if(Se===0){var Le=Z(de,f,f,Ce,te);Le.y>0?je=o:je=m}else Se>0&&(je=Me===s?o:m),Se<0&&(je=Me===s?m:o),$(fe)&&(je=je===o?m:o);de.originY=je;var _e=X("skewing",U(W));return _e(pe,de,Ce,te)}function Y(pe,de,Ce,te){var fe=de,Se=fe.target,je=Se.translateToOriginPoint(Se.getCenterPoint(),fe.originX,fe.originY);if(Se.lockRotation)return!1;var Me=Math.atan2(fe.ey-je.y,fe.ex-je.x),Le=Math.atan2(te-je.y,Ce-je.x),_e=w(Le-Me+fe.theta),Ie=!0;if(Se.snapAngle>0){var He=Se.snapAngle,Je=Se.snapThreshold||He,nt=Math.ceil(_e/He)*He,ot=Math.floor(_e/He)*He;Math.abs(_e-ot)<Je?_e=ot:Math.abs(_e-nt)<Je&&(_e=nt)}return _e<0&&(_e=360+_e),_e%=360,Ie=Se.angle!==_e,Se.angle=_e,Ie}function I(pe,de,Ce,te,fe){fe=fe||{};var Se=de.target,je=Se.lockScalingX,Me=Se.lockScalingY,Le=fe.by,_e,Ie,He,Je,nt=L(pe,Se),ot=D(Se,Le,nt),dt,ut,Bn=de.gestureScale;if(ot)return!1;if(Bn)Ie=de.scaleX*Bn,He=de.scaleY*Bn;else{if(_e=Z(de,de.originX,de.originY,Ce,te),dt=Le!=="y"?C(_e.x):1,ut=Le!=="x"?C(_e.y):1,de.signX||(de.signX=dt),de.signY||(de.signY=ut),Se.lockScalingFlip&&(de.signX!==dt||de.signY!==ut))return!1;if(Je=Se._getTransformedDimensions(),nt&&!Le){var Nr=Math.abs(_e.x)+Math.abs(_e.y),dn=de.original,Da=Math.abs(Je.x*dn.scaleX/Se.scaleX)+Math.abs(Je.y*dn.scaleY/Se.scaleY),Si=Nr/Da;Ie=dn.scaleX*Si,He=dn.scaleY*Si}else Ie=Math.abs(_e.x*Se.scaleX/Je.x),He=Math.abs(_e.y*Se.scaleY/Je.y);B(de)&&(Ie*=2,He*=2),de.signX!==dt&&Le!=="y"&&(de.originX=g[de.originX],Ie*=-1,de.signX=dt),de.signY!==ut&&Le!=="x"&&(de.originY=g[de.originY],He*=-1,de.signY=ut)}var Ms=Se.scaleX,Fa=Se.scaleY;return Le?(Le==="x"&&Se.set("scaleX",Ie),Le==="y"&&Se.set("scaleY",He)):(!je&&Se.set("scaleX",Ie),!Me&&Se.set("scaleY",He)),Ms!==Se.scaleX||Fa!==Se.scaleY}function K(pe,de,Ce,te){return I(pe,de,Ce,te)}function ne(pe,de,Ce,te){return I(pe,de,Ce,te,{by:"x"})}function le(pe,de,Ce,te){return I(pe,de,Ce,te,{by:"y"})}function he(pe,de,Ce,te){return pe[de.target.canvas.altActionKey]?i.skewHandlerX(pe,de,Ce,te):i.scalingY(pe,de,Ce,te)}function ve(pe,de,Ce,te){return pe[de.target.canvas.altActionKey]?i.skewHandlerY(pe,de,Ce,te):i.scalingX(pe,de,Ce,te)}function ye(pe,de,Ce,te){var fe=de.target,Se=Z(de,de.originX,de.originY,Ce,te),je=fe.strokeWidth/(fe.strokeUniform?fe.scaleX:1),Me=B(de)?2:1,Le=fe.width,_e=Math.abs(Se.x*Me/fe.scaleX)-je;return fe.set("width",Math.max(_e,0)),Le!==_e}function Oe(pe,de,Ce,te){var fe=de.target,Se=Ce-de.offsetX,je=te-de.offsetY,Me=!fe.get("lockMovementX")&&fe.left!==Se,Le=!fe.get("lockMovementY")&&fe.top!==je;return Me&&fe.set("left",Se),Le&&fe.set("top",je),(Me||Le)&&M("moving",ue(pe,de,Ce,te)),Me||Le}i.scaleCursorStyleHandler=H,i.skewCursorStyleHandler=Q,i.scaleSkewCursorStyleHandler=ee,i.rotationWithSnapping=X("rotating",U(Y)),i.scalingEqually=X("scaling",U(K)),i.scalingX=X("scaling",U(ne)),i.scalingY=X("scaling",U(le)),i.scalingYOrSkewingX=he,i.scalingXOrSkewingY=ve,i.changeWidth=X("resizing",U(ye)),i.skewHandlerX=q,i.skewHandlerY=oe,i.dragHandler=Oe,i.scaleOrSkewActionName=se,i.rotationStyleHandler=ie,i.fireEvent=M,i.wrapWithFixedAnchor=U,i.wrapWithFireEvent=X,i.getLocalPoint=Z,r.controlsUtils=i})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.degreesToRadians,l=r.controlsUtils;function i(o,a,m,f,g){f=f||{};var w=this.sizeX||f.cornerSize||g.cornerSize,C=this.sizeY||f.cornerSize||g.cornerSize,P=typeof f.transparentCorners<"u"?f.transparentCorners:g.transparentCorners,M=P?"stroke":"fill",L=!P&&(f.cornerStrokeColor||g.cornerStrokeColor),B=a,D=m,H;o.save(),o.fillStyle=f.cornerColor||g.cornerColor,o.strokeStyle=f.cornerStrokeColor||g.cornerStrokeColor,w>C?(H=w,o.scale(1,C/w),D=m*w/C):C>w?(H=C,o.scale(w/C,1),B=a*C/w):H=w,o.lineWidth=1,o.beginPath(),o.arc(B,D,H/2,0,2*Math.PI,!1),o[M](),L&&o.stroke(),o.restore()}function s(o,a,m,f,g){f=f||{};var w=this.sizeX||f.cornerSize||g.cornerSize,C=this.sizeY||f.cornerSize||g.cornerSize,P=typeof f.transparentCorners<"u"?f.transparentCorners:g.transparentCorners,M=P?"stroke":"fill",L=!P&&(f.cornerStrokeColor||g.cornerStrokeColor),B=w/2,D=C/2;o.save(),o.fillStyle=f.cornerColor||g.cornerColor,o.strokeStyle=f.cornerStrokeColor||g.cornerStrokeColor,o.lineWidth=1,o.translate(a,m),o.rotate(c(g.angle)),o[M+"Rect"](-B,-D,w,C),L&&o.strokeRect(-B,-D,w,C),o.restore()}l.renderCircleControl=i,l.renderSquareControl=s})(t),(function(d){var r=d.fabric||(d.fabric={});function c(l){for(var i in l)this[i]=l[i]}r.Control=c,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(l,i){return i.cursorStyle},getActionName:function(l,i){return i.actionName},getVisibility:function(l,i){var s=l._controlsVisibility;return s&&typeof s[i]<"u"?s[i]:this.visible},setVisibility:function(l){this.visible=l},positionHandler:function(l,i){var s=r.util.transformPoint({x:this.x*l.x+this.offsetX,y:this.y*l.y+this.offsetY},i);return s},calcCornerCoords:function(l,i,s,o,a){var m,f,g,w,C=a?this.touchSizeX:this.sizeX,P=a?this.touchSizeY:this.sizeY;if(C&&P&&C!==P){var M=Math.atan2(P,C),L=Math.sqrt(C*C+P*P)/2,B=M-r.util.degreesToRadians(l),D=Math.PI/2-M-r.util.degreesToRadians(l);m=L*r.util.cos(B),f=L*r.util.sin(B),g=L*r.util.cos(D),w=L*r.util.sin(D)}else{var H=C&&P?C:i;L=H*.7071067812;var B=r.util.degreesToRadians(45-l);m=g=L*r.util.cos(B),f=w=L*r.util.sin(B)}return{tl:{x:s-w,y:o-g},tr:{x:s+m,y:o-f},bl:{x:s-m,y:o+f},br:{x:s+w,y:o+g}}},render:function(l,i,s,o,a){switch(o=o||{},o.cornerStyle||a.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,l,i,s,o,a);break;default:r.controlsUtils.renderSquareControl.call(this,l,i,s,o,a)}}}})(t),(function(){function d(s,o){var a=s.getAttribute("style"),m=s.getAttribute("offset")||0,f,g,w,C;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,a){var P=a.split(/\s*;\s*/);for(P[P.length-1]===""&&P.pop(),C=P.length;C--;){var M=P[C].split(/\s*:\s*/),L=M[0].trim(),B=M[1].trim();L==="stop-color"?f=B:L==="stop-opacity"&&(w=B)}}return f||(f=s.getAttribute("stop-color")||"rgb(0,0,0)"),w||(w=s.getAttribute("stop-opacity")),f=new e.Color(f),g=f.getAlpha(),w=isNaN(parseFloat(w))?1:parseFloat(w),w*=g*o,{offset:m,color:f.toRgb(),opacity:w}}function r(s){return{x1:s.getAttribute("x1")||0,y1:s.getAttribute("y1")||0,x2:s.getAttribute("x2")||"100%",y2:s.getAttribute("y2")||0}}function c(s){return{x1:s.getAttribute("fx")||s.getAttribute("cx")||"50%",y1:s.getAttribute("fy")||s.getAttribute("cy")||"50%",r1:0,x2:s.getAttribute("cx")||"50%",y2:s.getAttribute("cy")||"50%",r2:s.getAttribute("r")||"50%"}}var l=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(s){s||(s={}),s.coords||(s.coords={});var o,a=this;Object.keys(s).forEach(function(m){a[m]=s[m]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,o={x1:s.coords.x1||0,y1:s.coords.y1||0,x2:s.coords.x2||0,y2:s.coords.y2||0},this.type==="radial"&&(o.r1=s.coords.r1||0,o.r2=s.coords.r2||0),this.coords=o,this.colorStops=s.colorStops.slice()},addColorStop:function(s){for(var o in s){var a=new e.Color(s[o]);this.colorStops.push({offset:parseFloat(o),color:a.toRgb(),opacity:a.getAlpha()})}return this},toObject:function(s){var o={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,o,s),o},toSVG:function(s,g){var a=l(this.coords,!0),m,f,g=g||{},w,C,P=l(this.colorStops,!0),M=a.r1>a.r2,L=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),B=-this.offsetX,D=-this.offsetY,H=!!g.additionalTransform,Q=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(P.sort(function(U,X){return U.offset-X.offset}),Q==="objectBoundingBox"?(B/=s.width,D/=s.height):(B+=s.width/2,D+=s.height/2),s.type==="path"&&this.gradientUnits!=="percentage"&&(B-=s.pathOffset.x,D-=s.pathOffset.y),L[4]-=B,L[5]-=D,C='id="SVGID_'+this.id+'" gradientUnits="'+Q+'"',C+=' gradientTransform="'+(H?g.additionalTransform+" ":"")+e.util.matrixToSVG(L)+'" ',this.type==="linear"?w=["<linearGradient ",C,' x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,`">
`]:this.type==="radial"&&(w=["<radialGradient ",C,' cx="',M?a.x1:a.x2,'" cy="',M?a.y1:a.y2,'" r="',M?a.r1:a.r2,'" fx="',M?a.x2:a.x1,'" fy="',M?a.y2:a.y1,`">
`]),this.type==="radial"){if(M)for(P=P.concat(),P.reverse(),m=0,f=P.length;m<f;m++)P[m].offset=1-P[m].offset;var ee=Math.min(a.r1,a.r2);if(ee>0){var se=Math.max(a.r1,a.r2),ie=ee/se;for(m=0,f=P.length;m<f;m++)P[m].offset+=ie*(1-P[m].offset)}}for(m=0,f=P.length;m<f;m++){var ue=P[m];w.push("<stop ",'offset="',ue.offset*100+"%",'" style="stop-color:',ue.color,typeof ue.opacity<"u"?";stop-opacity: "+ue.opacity:";",`"/>
`)}return w.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),w.join("")},toLive:function(s){var o,a=e.util.object.clone(this.coords),m,f;if(this.type){for(this.type==="linear"?o=s.createLinearGradient(a.x1,a.y1,a.x2,a.y2):this.type==="radial"&&(o=s.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2)),m=0,f=this.colorStops.length;m<f;m++){var g=this.colorStops[m].color,w=this.colorStops[m].opacity,C=this.colorStops[m].offset;typeof w<"u"&&(g=new e.Color(g).setAlpha(w).toRgba()),o.addColorStop(C,g)}return o}}}),e.util.object.extend(e.Gradient,{fromElement:function(s,o,a,m){var f=parseFloat(a)/(/%$/.test(a)?100:1);f=f<0?0:f>1?1:f,isNaN(f)&&(f=1);var g=s.getElementsByTagName("stop"),w,C=s.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",P=s.getAttribute("gradientTransform")||"",M=[],L,B,D=0,H=0,Q;for(s.nodeName==="linearGradient"||s.nodeName==="LINEARGRADIENT"?(w="linear",L=r(s)):(w="radial",L=c(s)),B=g.length;B--;)M.push(d(g[B],f));Q=e.parseTransformAttribute(P),i(o,L,m,C),C==="pixels"&&(D=-o.left,H=-o.top);var ee=new e.Gradient({id:s.getAttribute("id"),type:w,coords:L,colorStops:M,gradientUnits:C,gradientTransform:Q,offsetX:D,offsetY:H});return ee}});function i(s,o,a,m){var f,g;Object.keys(o).forEach(function(w){f=o[w],f==="Infinity"?g=1:f==="-Infinity"?g=0:(g=parseFloat(o[w],10),typeof f=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(f)&&(g*=.01,m==="pixels"&&((w==="x1"||w==="x2"||w==="r2")&&(g*=a.viewBoxWidth||a.width),(w==="y1"||w==="y2")&&(g*=a.viewBoxHeight||a.height)))),o[w]=g})}})(),(function(){var d=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,c){if(r||(r={}),this.id=e.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){c&&c(this);return}else{var l=this;this.source=e.util.createImage(),e.util.loadImage(r.source,function(i,s){l.source=i,c&&c(l,s)},null,this.crossOrigin)}},toObject:function(r){var c=e.Object.NUM_FRACTION_DIGITS,l,i;return typeof this.source.src=="string"?l=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(l=this.source.toDataURL()),i={type:"pattern",source:l,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:d(this.offsetX,c),offsetY:d(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,i,r),i},toSVG:function(r){var c=typeof this.source=="function"?this.source():this.source,l=c.width/r.width,i=c.height/r.height,s=this.offsetX/r.width,o=this.offsetY/r.height,a="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(i=1,o&&(i+=Math.abs(o))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(l=1,s&&(l+=Math.abs(s))),c.src?a=c.src:c.toDataURL&&(a=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+s+'" y="'+o+'" width="'+l+'" height="'+i+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+a+`"></image>
</pattern>
`},setOptions:function(r){for(var c in r)this[c]=r[c]},toLive:function(r){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":r.createPattern(c,this.repeat)}})})(),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(l){typeof l=="string"&&(l=this._parseShadow(l));for(var i in l)this[i]=l[i];this.id=r.Object.__uid++},_parseShadow:function(l){var i=l.trim(),s=r.Shadow.reOffsetsAndBlur.exec(i)||[],o=i.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:o.trim(),offsetX:parseFloat(s[1],10)||0,offsetY:parseFloat(s[2],10)||0,blur:parseFloat(s[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(l){var i=40,s=40,o=r.Object.NUM_FRACTION_DIGITS,a=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-l.angle)),m=20,f=new r.Color(this.color);return l.width&&l.height&&(i=c((Math.abs(a.x)+this.blur)/l.width,o)*100+m,s=c((Math.abs(a.y)+this.blur)/l.height,o)*100+m),l.flipX&&(a.x*=-1),l.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+s+'%" height="'+(100+2*s)+'%" x="-'+i+'%" width="'+(100+2*i)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,o)+`"></feGaussianBlur>
	<feOffset dx="`+c(a.x,o)+'" dy="'+c(a.y,o)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+f.toRgb()+'" flood-opacity="'+f.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var l={},i=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(s){this[s]!==i[s]&&(l[s]=this[s])},this),l}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/})(t),(function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var d=e.util.object.extend,r=e.util.getElementOffset,c=e.util.removeFromArray,l=e.util.toFixed,i=e.util.transformPoint,s=e.util.invertTransform,o=e.util.getNodeCanvas,a=e.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(f,g){g||(g={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(f,g)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(f,g){var w=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(f),this._initOptions(g),this.interactive||this._initRetinaScaling(),g.overlayImage&&this.setOverlayImage(g.overlayImage,w),g.backgroundImage&&this.setBackgroundImage(g.backgroundImage,w),g.backgroundColor&&this.setBackgroundColor(g.backgroundColor,w),g.overlayColor&&this.setOverlayColor(g.overlayColor,w),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?e.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var f=e.devicePixelRatio;this.__initRetinaScaling(f,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(f,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(f,g,w){g.setAttribute("width",this.width*f),g.setAttribute("height",this.height*f),w.scale(f,f)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(f,g,w){return this.__setBgOverlayImage("overlayImage",f,g,w)},setBackgroundImage:function(f,g,w){return this.__setBgOverlayImage("backgroundImage",f,g,w)},setOverlayColor:function(f,g){return this.__setBgOverlayColor("overlayColor",f,g)},setBackgroundColor:function(f,g){return this.__setBgOverlayColor("backgroundColor",f,g)},__setBgOverlayImage:function(f,g,w,C){return typeof g=="string"?e.util.loadImage(g,function(P,M){if(P){var L=new e.Image(P,C);this[f]=L,L.canvas=this}w&&w(P,M)},this,C&&C.crossOrigin):(C&&g.setOptions(C),this[f]=g,g&&(g.canvas=this),w&&w(g,!1)),this},__setBgOverlayColor:function(f,g,w){return this[f]=g,this._initGradient(g,f),this._initPattern(g,f,w),this},_createCanvasElement:function(){var f=a();if(!f||(f.style||(f.style={}),typeof f.getContext>"u"))throw m;return f},_initOptions:function(f){var g=this.lowerCanvasEl;this._setOptions(f),this.width=this.width||parseInt(g.width,10)||0,this.height=this.height||parseInt(g.height,10)||0,this.lowerCanvasEl.style&&(g.width=this.width,g.height=this.height,g.style.width=this.width+"px",g.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(f){f&&f.getContext?this.lowerCanvasEl=f:this.lowerCanvasEl=e.util.getById(f)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(f,g){return this.setDimensions({width:f},g)},setHeight:function(f,g){return this.setDimensions({height:f},g)},setDimensions:function(f,g){var w;g=g||{};for(var C in f)w=f[C],g.cssOnly||(this._setBackstoreDimension(C,f[C]),w+="px",this.hasLostContext=!0),g.backstoreOnly||this._setCssDimension(C,w);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),g.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(f,g){return this.lowerCanvasEl[f]=g,this.upperCanvasEl&&(this.upperCanvasEl[f]=g),this.cacheCanvasEl&&(this.cacheCanvasEl[f]=g),this[f]=g,this},_setCssDimension:function(f,g){return this.lowerCanvasEl.style[f]=g,this.upperCanvasEl&&(this.upperCanvasEl.style[f]=g),this.wrapperEl&&(this.wrapperEl.style[f]=g),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(f){var g=this._activeObject,w=this.backgroundImage,C=this.overlayImage,P,M,L;for(this.viewportTransform=f,M=0,L=this._objects.length;M<L;M++)P=this._objects[M],P.group||P.setCoords(!0);return g&&g.setCoords(),w&&w.setCoords(!0),C&&C.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(f,g){var w=f,C=this.viewportTransform.slice(0);f=i(f,s(this.viewportTransform)),C[0]=g,C[3]=g;var P=i(f,C);return C[4]+=w.x-P.x,C[5]+=w.y-P.y,this.setViewportTransform(C)},setZoom:function(f){return this.zoomToPoint(new e.Point(0,0),f),this},absolutePan:function(f){var g=this.viewportTransform.slice(0);return g[4]=-f.x,g[5]=-f.y,this.setViewportTransform(g)},relativePan:function(f){return this.absolutePan(new e.Point(-f.x-this.viewportTransform[4],-f.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(f){this.stateful&&f.setupState(),f._set("canvas",this),f.setCoords(),this.fire("object:added",{target:f}),f.fire("added")},_onObjectRemoved:function(f){this.fire("object:removed",{target:f}),f.fire("removed"),delete f.canvas},clearContext:function(f){return f.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var f=this.contextContainer;return this.renderCanvas(f,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var f={},g=this.width,w=this.height,C=s(this.viewportTransform);return f.tl=i({x:0,y:0},C),f.br=i({x:g,y:w},C),f.tr=new e.Point(f.br.x,f.tl.y),f.bl=new e.Point(f.tl.x,f.br.y),this.vptCoords=f,f},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(f,g){var w=this.viewportTransform,C=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(f),e.util.setImageSmoothing(f,this.imageSmoothingEnabled),this.fire("before:render",{ctx:f}),this._renderBackground(f),f.save(),f.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._renderObjects(f,g),f.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),C&&(C.canvas=this,C.shouldCache(),C._transformDone=!0,C.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(f)),this._renderOverlay(f),this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),this.fire("after:render",{ctx:f})},drawClipPathOnCanvas:function(f){var g=this.viewportTransform,w=this.clipPath;f.save(),f.transform(g[0],g[1],g[2],g[3],g[4],g[5]),f.globalCompositeOperation="destination-in",w.transform(f),f.scale(1/w.zoomX,1/w.zoomY),f.drawImage(w._cacheCanvas,-w.cacheTranslationX,-w.cacheTranslationY),f.restore()},_renderObjects:function(f,g){var w,C;for(w=0,C=g.length;w<C;++w)g[w]&&g[w].render(f)},_renderBackgroundOrOverlay:function(f,g){var w=this[g+"Color"],C=this[g+"Image"],P=this.viewportTransform,M=this[g+"Vpt"];if(!(!w&&!C)){if(w){f.save(),f.beginPath(),f.moveTo(0,0),f.lineTo(this.width,0),f.lineTo(this.width,this.height),f.lineTo(0,this.height),f.closePath(),f.fillStyle=w.toLive?w.toLive(f,this):w,M&&f.transform(P[0],P[1],P[2],P[3],P[4],P[5]),f.transform(1,0,0,1,w.offsetX||0,w.offsetY||0);var L=w.gradientTransform||w.patternTransform;L&&f.transform(L[0],L[1],L[2],L[3],L[4],L[5]),f.fill(),f.restore()}C&&(f.save(),M&&f.transform(P[0],P[1],P[2],P[3],P[4],P[5]),C.render(f),f.restore())}},_renderBackground:function(f){this._renderBackgroundOrOverlay(f,"background")},_renderOverlay:function(f){this._renderBackgroundOrOverlay(f,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(f){return this._centerObject(f,new e.Point(this.getCenter().left,f.getCenterPoint().y))},centerObjectV:function(f){return this._centerObject(f,new e.Point(f.getCenterPoint().x,this.getCenter().top))},centerObject:function(f){var g=this.getCenter();return this._centerObject(f,new e.Point(g.left,g.top))},viewportCenterObject:function(f){var g=this.getVpCenter();return this._centerObject(f,g)},viewportCenterObjectH:function(f){var g=this.getVpCenter();return this._centerObject(f,new e.Point(g.x,f.getCenterPoint().y)),this},viewportCenterObjectV:function(f){var g=this.getVpCenter();return this._centerObject(f,new e.Point(f.getCenterPoint().x,g.y))},getVpCenter:function(){var f=this.getCenter(),g=s(this.viewportTransform);return i({x:f.left,y:f.top},g)},_centerObject:function(f,g){return f.setPositionByOrigin(g,"center","center"),f.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(f){return this.toDatalessObject(f)},toObject:function(f){return this._toObjectMethod("toObject",f)},toDatalessObject:function(f){return this._toObjectMethod("toDatalessObject",f)},_toObjectMethod:function(f,g){var w=this.clipPath,C={version:e.version,objects:this._toObjects(f,g)};return w&&(C.clipPath=this._toObject(this.clipPath,f,g)),d(C,this.__serializeBgOverlay(f,g)),e.util.populateWithProperties(this,C,g),C},_toObjects:function(f,g){return this._objects.filter(function(w){return!w.excludeFromExport}).map(function(w){return this._toObject(w,f,g)},this)},_toObject:function(f,g,w){var C;this.includeDefaultValues||(C=f.includeDefaultValues,f.includeDefaultValues=!1);var P=f[g](w);return this.includeDefaultValues||(f.includeDefaultValues=C),P},__serializeBgOverlay:function(f,g){var w={},C=this.backgroundImage,P=this.overlayImage;return this.backgroundColor&&(w.background=this.backgroundColor.toObject?this.backgroundColor.toObject(g):this.backgroundColor),this.overlayColor&&(w.overlay=this.overlayColor.toObject?this.overlayColor.toObject(g):this.overlayColor),C&&!C.excludeFromExport&&(w.backgroundImage=this._toObject(C,f,g)),P&&!P.excludeFromExport&&(w.overlayImage=this._toObject(P,f,g)),w},svgViewportTransformation:!0,toSVG:function(f,g){f||(f={}),f.reviver=g;var w=[];return this._setSVGPreamble(w,f),this._setSVGHeader(w,f),this.clipPath&&w.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(w,"background"),this._setSVGBgOverlayImage(w,"backgroundImage",g),this._setSVGObjects(w,g),this.clipPath&&w.push(`</g>
`),this._setSVGBgOverlayColor(w,"overlay"),this._setSVGBgOverlayImage(w,"overlayImage",g),w.push("</svg>"),w.join("")},_setSVGPreamble:function(f,g){g.suppressPreamble||f.push('<?xml version="1.0" encoding="',g.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(f,g){var w=g.width||this.width,C=g.height||this.height,P,M='viewBox="0 0 '+this.width+" "+this.height+'" ',L=e.Object.NUM_FRACTION_DIGITS;g.viewBox?M='viewBox="'+g.viewBox.x+" "+g.viewBox.y+" "+g.viewBox.width+" "+g.viewBox.height+'" ':this.svgViewportTransformation&&(P=this.viewportTransform,M='viewBox="'+l(-P[4]/P[0],L)+" "+l(-P[5]/P[3],L)+" "+l(this.width/P[0],L)+" "+l(this.height/P[3],L)+'" '),f.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',w,'" ','height="',C,'" ',M,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(g),`</defs>
`)},createSVGClipPathMarkup:function(f){var g=this.clipPath;return g?(g.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+g.clipPathId+`" >
`+this.clipPath.toClipPathSVG(f.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var f=this,g=["background","overlay"].map(function(w){var C=f[w+"Color"];if(C&&C.toLive){var P=f[w+"Vpt"],M=f.viewportTransform,L={width:f.width/(P?M[0]:1),height:f.height/(P?M[3]:1)};return C.toSVG(L,{additionalTransform:P?e.util.matrixToSVG(M):""})}});return g.join("")},createSVGFontFacesMarkup:function(){var f="",g={},w,C,P,M,L,B,D,H,Q,ee=e.fontPaths,se=[];for(this._objects.forEach(function ue(U){se.push(U),U._objects&&U._objects.forEach(ue)}),H=0,Q=se.length;H<Q;H++)if(w=se[H],C=w.fontFamily,!(w.type.indexOf("text")===-1||g[C]||!ee[C])&&(g[C]=!0,!!w.styles)){P=w.styles;for(L in P){M=P[L];for(D in M)B=M[D],C=B.fontFamily,!g[C]&&ee[C]&&(g[C]=!0)}}for(var ie in g)f+=[`		@font-face {
`,"			font-family: '",ie,`';
`,"			src: url('",ee[ie],`');
`,`		}
`].join("");return f&&(f=['	<style type="text/css">',`<![CDATA[
`,f,"]]>",`</style>
`].join("")),f},_setSVGObjects:function(f,g){var w,C,P,M=this._objects;for(C=0,P=M.length;C<P;C++)w=M[C],!w.excludeFromExport&&this._setSVGObject(f,w,g)},_setSVGObject:function(f,g,w){f.push(g.toSVG(w))},_setSVGBgOverlayImage:function(f,g,w){this[g]&&!this[g].excludeFromExport&&this[g].toSVG&&f.push(this[g].toSVG(w))},_setSVGBgOverlayColor:function(f,g){var w=this[g+"Color"],C=this.viewportTransform,P=this.width,M=this.height;if(w)if(w.toLive){var L=w.repeat,B=e.util.invertTransform(C),D=this[g+"Vpt"],H=D?e.util.matrixToSVG(B):"";f.push('<rect transform="'+H+" translate(",P/2,",",M/2,')"',' x="',w.offsetX-P/2,'" y="',w.offsetY-M/2,'" ','width="',L==="repeat-y"||L==="no-repeat"?w.source.width:P,'" height="',L==="repeat-x"||L==="no-repeat"?w.source.height:M,'" fill="url(#SVGID_'+w.id+')"',`></rect>
`)}else f.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',w,'"',`></rect>
`)},sendToBack:function(f){if(!f)return this;var g=this._activeObject,w,C,P;if(f===g&&f.type==="activeSelection")for(P=g._objects,w=P.length;w--;)C=P[w],c(this._objects,C),this._objects.unshift(C);else c(this._objects,f),this._objects.unshift(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(f){if(!f)return this;var g=this._activeObject,w,C,P;if(f===g&&f.type==="activeSelection")for(P=g._objects,w=0;w<P.length;w++)C=P[w],c(this._objects,C),this._objects.push(C);else c(this._objects,f),this._objects.push(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(f,g){if(!f)return this;var w=this._activeObject,C,P,M,L,B,D=0;if(f===w&&f.type==="activeSelection")for(B=w._objects,C=0;C<B.length;C++)P=B[C],M=this._objects.indexOf(P),M>0+D&&(L=M-1,c(this._objects,P),this._objects.splice(L,0,P)),D++;else M=this._objects.indexOf(f),M!==0&&(L=this._findNewLowerIndex(f,M,g),c(this._objects,f),this._objects.splice(L,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(f,g,w){var C,P;if(w)for(C=g,P=g-1;P>=0;--P){var M=f.intersectsWithObject(this._objects[P])||f.isContainedWithinObject(this._objects[P])||this._objects[P].isContainedWithinObject(f);if(M){C=P;break}}else C=g-1;return C},bringForward:function(f,g){if(!f)return this;var w=this._activeObject,C,P,M,L,B,D=0;if(f===w&&f.type==="activeSelection")for(B=w._objects,C=B.length;C--;)P=B[C],M=this._objects.indexOf(P),M<this._objects.length-1-D&&(L=M+1,c(this._objects,P),this._objects.splice(L,0,P)),D++;else M=this._objects.indexOf(f),M!==this._objects.length-1&&(L=this._findNewUpperIndex(f,M,g),c(this._objects,f),this._objects.splice(L,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(f,g,w){var C,P,M;if(w)for(C=g,P=g+1,M=this._objects.length;P<M;++P){var L=f.intersectsWithObject(this._objects[P])||f.isContainedWithinObject(this._objects[P])||this._objects[P].isContainedWithinObject(f);if(L){C=P;break}}else C=g+1;return C},moveTo:function(f,g){return c(this._objects,f),this._objects.splice(g,0,f),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(f){f.dispose&&f.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),d(e.StaticCanvas.prototype,e.Observable),d(e.StaticCanvas.prototype,e.Collection),d(e.StaticCanvas.prototype,e.DataURLExporter),d(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(f){var g=a();if(!g||!g.getContext)return null;var w=g.getContext("2d");if(!w)return null;switch(f){case"setLineDash":return typeof w.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var f=o(this.lowerCanvasEl);return f&&f.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(f){var g=o(this.lowerCanvasEl);return g&&g.createJPEGStream(f)})})(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var d=this.canvas.contextTop;d.strokeStyle=this.color,d.lineWidth=this.width,d.lineCap=this.strokeLineCap,d.miterLimit=this.strokeMiterLimit,d.lineJoin=this.strokeLineJoin,e.StaticCanvas.supports("setLineDash")&&d.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(d){var r=this.canvas.viewportTransform;d.save(),d.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(this.shadow){var d=this.canvas,r=this.shadow,c=d.contextTop,l=d.getZoom();d&&d._isRetinaScaling()&&(l*=e.devicePixelRatio),c.shadowColor=r.color,c.shadowBlur=r.blur*l,c.shadowOffsetX=r.offsetX*l,c.shadowOffsetY=r.offsetY*l}},needsFullRender:function(){var d=new e.Color(this.color);return d.getAlpha()<1||!!this.shadow},_resetShadow:function(){var d=this.canvas.contextTop;d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0},_isOutSideCanvas:function(d){return d.x<0||d.x>this.canvas.getWidth()||d.y<0||d.y>this.canvas.getHeight()}}),(function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,initialize:function(d){this.canvas=d,this._points=[]},_drawSegment:function(d,r,c){var l=r.midPointFrom(c);return d.quadraticCurveTo(r.x,r.y,l.x,l.y),l},onMouseDown:function(d,r){this.canvas._isMainEvent(r.e)&&(this._prepareForDrawing(d),this._captureDrawingPath(d),this._render())},onMouseMove:function(d,r){if(this.canvas._isMainEvent(r.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d))&&this._captureDrawingPath(d)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,l=c.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,c[l-2],c[l-1],!0),i.stroke(),i.restore()}},onMouseUp:function(d){return this.canvas._isMainEvent(d.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(d){var r=new e.Point(d.x,d.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(d){return this._points.length>1&&d.eq(this._points[this._points.length-1])?!1:(this._points.push(d),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(d){var r=new e.Point(d.x,d.y);return this._addPoint(r)},_render:function(){var d=this.canvas.contextTop,r,c,l=this._points[0],i=this._points[1];if(this._saveAndTransform(d),d.beginPath(),this._points.length===2&&l.x===i.x&&l.y===i.y){var s=this.width/1e3;l=new e.Point(l.x,l.y),i=new e.Point(i.x,i.y),l.x-=s,i.x+=s}for(d.moveTo(l.x,l.y),r=1,c=this._points.length;r<c;r++)this._drawSegment(d,l,i),l=this._points[r],i=this._points[r+1];d.lineTo(l.x,l.y),d.stroke(),d.restore()},convertPointsToSVGPath:function(d){var r=[],c,l=this.width/1e3,i=new e.Point(d[0].x,d[0].y),s=new e.Point(d[1].x,d[1].y),o=d.length,a=1,m=0,f=o>2;for(f&&(a=d[2].x<s.x?-1:d[2].x===s.x?0:1,m=d[2].y<s.y?-1:d[2].y===s.y?0:1),r.push("M ",i.x-a*l," ",i.y-m*l," "),c=1;c<o;c++){if(!i.eq(s)){var g=i.midPointFrom(s);r.push("Q ",i.x," ",i.y," ",g.x," ",g.y," ")}i=d[c],c+1<d.length&&(s=d[c+1])}return f&&(a=i.x>d[c-2].x?1:i.x===d[c-2].x?0:-1,m=i.y>d[c-2].y?1:i.y===d[c-2].y?0:-1),r.push("L ",i.x+a*l," ",i.y+m*l),r},createPath:function(d){var r=new e.Path(d,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new e.Shadow(this.shadow)),r},decimatePoints:function(d,r){if(d.length<=2)return d;var c=this.canvas.getZoom(),l=Math.pow(r/c,2),i,s=d.length-1,o=d[0],a=[o],m;for(i=1;i<s-1;i++)m=Math.pow(o.x-d[i].x,2)+Math.pow(o.y-d[i].y,2),m>=l&&(o=d[i],a.push(o));return a.push(d[s]),a},_finalizeAndAddPath:function(){var d=this.canvas.contextTop;d.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points).join("");if(r==="M 0 0 Q 0 0 0 0 L 0 0"){this.canvas.requestRenderAll();return}var c=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})})(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(d){this.canvas=d,this.points=[]},drawDot:function(d){var r=this.addPoint(d),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,r),c.restore()},dot:function(d,r){d.fillStyle=r.fill,d.beginPath(),d.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),d.closePath(),d.fill()},onMouseDown:function(d){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(d)},_render:function(){var d=this.canvas.contextTop,r,c,l=this.points;for(this._saveAndTransform(d),r=0,c=l.length;r<c;r++)this.dot(d,l[r]);d.restore()},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(d),this._render()):this.drawDot(d))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove,r,c;this.canvas.renderOnAddRemove=!1;var l=[];for(r=0,c=this.points.length;r<c;r++){var i=this.points[r],s=new e.Circle({radius:i.radius,left:i.x,top:i.y,originX:"center",originY:"center",fill:i.fill});this.shadow&&(s.shadow=new e.Shadow(this.shadow)),l.push(s)}var o=new e.Group(l);o.canvas=this.canvas,this.canvas.fire("before:path:created",{path:o}),this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},addPoint:function(d){var r=new e.Point(d.x,d.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,l=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return r.radius=c,r.fill=l,this.points.push(r),r}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(d){this.canvas=d,this.sprayChunks=[]},onMouseDown:function(d){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(d),this.render(this.sprayChunkPoints)},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.addSprayChunk(d),this.render(this.sprayChunkPoints))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],c=0,l=this.sprayChunks.length;c<l;c++)for(var i=this.sprayChunks[c],s=0,o=i.length;s<o;s++){var a=new e.Rect({width:i[s].width,height:i[s].width,left:i[s].x+1,top:i[s].y+1,originX:"center",originY:"center",fill:this.color});r.push(a)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var m=new e.Group(r);this.shadow&&m.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},_getOptimizedRects:function(d){var r={},c,l,i;for(l=0,i=d.length;l<i;l++)c=d[l].left+""+d[l].top,r[c]||(r[c]=d[l]);var s=[];for(c in r)s.push(r[c]);return s},render:function(d){var r=this.canvas.contextTop,c,l;for(r.fillStyle=this.color,this._saveAndTransform(r),c=0,l=d.length;c<l;c++){var i=d[c];typeof i.opacity<"u"&&(r.globalAlpha=i.opacity),r.fillRect(i.x,i.y,i.width,i.width)}r.restore()},_render:function(){var d=this.canvas.contextTop,r,c;for(d.fillStyle=this.color,this._saveAndTransform(d),r=0,c=this.sprayChunks.length;r<c;r++)this.render(this.sprayChunks[r]);d.restore()},addSprayChunk:function(d){this.sprayChunkPoints=[];var r,c,l,i=this.width/2,s;for(s=0;s<this.density;s++){r=e.util.getRandomInt(d.x-i,d.x+i),c=e.util.getRandomInt(d.y-i,d.y+i),this.dotWidthVariance?l=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):l=this.dotWidth;var o=new e.Point(r,c);o.width=l,this.randomOpacity&&(o.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var d=20,r=5,c=e.util.createCanvasElement(),l=c.getContext("2d");return c.width=c.height=d+r,l.fillStyle=this.color,l.beginPath(),l.arc(d/2,d/2,d/2,0,Math.PI*2,!1),l.closePath(),l.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(d){var r=this.callSuper("createPath",d),c=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),r}}),(function(){var d=e.util.getPointer,r=e.util.degreesToRadians,c=Math.abs,l=e.StaticCanvas.supports("setLineDash"),i=e.util.isTouchEvent,s=.5;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(a,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,m),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a=this.getActiveObjects(),m,f,g;if(a.length>0&&!this.preserveObjectStacking){f=[],g=[];for(var w=0,C=this._objects.length;w<C;w++)m=this._objects[w],a.indexOf(m)===-1?f.push(m):g.push(m);a.length>1&&(this._activeObject._objects=g),f.push.apply(f,g)}else f=this._objects;return f},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,m){var f=a.calcTransformMatrix(),g=e.util.invertTransform(f),w=this.restorePointerVpt(m);return e.util.transformPoint(w,g)},isTargetTransparent:function(a,m,f){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var g=this._normalizePointer(a,{x:m,y:f}),w=Math.max(a.cacheTranslationX+g.x*a.zoomX,0),C=Math.max(a.cacheTranslationY+g.y*a.zoomY,0),B=e.util.isTransparent(a._cacheContext,Math.round(w),Math.round(C),this.targetFindTolerance);return B}var P=this.contextCache,M=a.selectionBackgroundColor,L=this.viewportTransform;a.selectionBackgroundColor="",this.clearContext(P),P.save(),P.transform(L[0],L[1],L[2],L[3],L[4],L[5]),a.render(P),P.restore(),a.selectionBackgroundColor=M;var B=e.util.isTransparent(P,m,f,this.targetFindTolerance);return B},_isSelectionKeyPressed:function(a){var m=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?m=!!this.selectionKey.find(function(f){return a[f]===!0}):m=a[this.selectionKey],m},_shouldClearSelection:function(a,m){var f=this.getActiveObjects(),g=this._activeObject;return!m||m&&g&&f.length>1&&f.indexOf(m)===-1&&g!==m&&!this._isSelectionKeyPressed(a)||m&&!m.evented||m&&!m.selectable&&g&&g!==m},_shouldCenterTransform:function(a,m,f){if(a){var g;return m==="scale"||m==="scaleX"||m==="scaleY"||m==="resizing"?g=this.centeredScaling||a.centeredScaling:m==="rotate"&&(g=this.centeredRotation||a.centeredRotation),g?!f:f}},_getOriginFromCorner:function(a,m){var f={x:a.originX,y:a.originY};return m==="ml"||m==="tl"||m==="bl"?f.x="right":(m==="mr"||m==="tr"||m==="br")&&(f.x="left"),m==="tl"||m==="mt"||m==="tr"?f.y="bottom":(m==="bl"||m==="mb"||m==="br")&&(f.y="top"),f},_getActionFromCorner:function(a,m,f,g){if(!m||!a)return"drag";var w=g.controls[m];return w.getActionName(f,w,g)},_setupCurrentTransform:function(a,m,f){if(m){var g=this.getPointer(a),w=m.__corner,C=m.controls[w],P=f&&w?C.getActionHandler(a,m,C):e.controlsUtils.dragHandler,M=this._getActionFromCorner(f,w,a,m),L=this._getOriginFromCorner(m,w),B=a[this.centeredKey],D={target:m,action:M,actionHandler:P,corner:w,scaleX:m.scaleX,scaleY:m.scaleY,skewX:m.skewX,skewY:m.skewY,offsetX:g.x-m.left,offsetY:g.y-m.top,originX:L.x,originY:L.y,ex:g.x,ey:g.y,lastX:g.x,lastY:g.y,theta:r(m.angle),width:m.width*m.scaleX,shiftKey:a.shiftKey,altKey:B,original:e.util.saveObjectTransform(m)};this._shouldCenterTransform(m,M,B)&&(D.originX="center",D.originY="center"),D.original.originX=L.x,D.original.originY=L.y,this._currentTransform=D,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var m=this._groupSelector,f=m.left,g=m.top,w=c(f),C=c(g);if(this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(m.ex-(f>0?0:-f),m.ey-(g>0?0:-g),w,C)),!(!this.selectionLineWidth||!this.selectionBorderColor))if(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!l){var P=m.ex+s-(f>0?0:w),M=m.ey+s-(g>0?0:C);a.beginPath(),e.util.drawDashedLine(a,P,M,P+w,M,this.selectionDashArray),e.util.drawDashedLine(a,P,M+C-1,P+w,M+C-1,this.selectionDashArray),e.util.drawDashedLine(a,P,M,P,M+C,this.selectionDashArray),e.util.drawDashedLine(a,P+w-1,M,P+w-1,M+C,this.selectionDashArray),a.closePath(),a.stroke()}else e.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(m.ex+s-(f>0?0:w),m.ey+s-(g>0?0:C),w,C)},findTarget:function(a,m){if(!this.skipTargetFind){var f=!0,g=this.getPointer(a,f),w=this._activeObject,C=this.getActiveObjects(),P,M,L=i(a),B=C.length>1&&!m||C.length===1;if(this.targets=[],B&&w._findTargetCorner(g,L)||C.length>1&&!m&&w===this._searchPossibleTargets([w],g))return w;if(C.length===1&&w===this._searchPossibleTargets([w],g))if(this.preserveObjectStacking)P=w,M=this.targets,this.targets=[];else return w;var D=this._searchPossibleTargets(this._objects,g);return a[this.altSelectionKey]&&D&&P&&D!==P&&(D=P,this.targets=M),D}},_checkTarget:function(a,m,f){if(m&&m.visible&&m.evented&&m.containsPoint(a))if((this.perPixelTargetFind||m.perPixelTargetFind)&&!m.isEditing){var g=this.isTargetTransparent(m,f.x,f.y);if(!g)return!0}else return!0},_searchPossibleTargets:function(a,m){for(var f,g=a.length,w;g--;){var C=a[g],P=C.group?this._normalizePointer(C.group,m):m;if(this._checkTarget(P,C,m)){f=a[g],f.subTargetCheck&&f instanceof e.Group&&(w=this._searchPossibleTargets(f._objects,m),w&&this.targets.push(w));break}}return f},restorePointerVpt:function(a){return e.util.transformPoint(a,e.util.invertTransform(this.viewportTransform))},getPointer:function(a,m){if(this._absolutePointer&&!m)return this._absolutePointer;if(this._pointer&&m)return this._pointer;var f=d(a),g=this.upperCanvasEl,w=g.getBoundingClientRect(),C=w.width||0,P=w.height||0,M;(!C||!P)&&("top"in w&&"bottom"in w&&(P=Math.abs(w.top-w.bottom)),"right"in w&&"left"in w&&(C=Math.abs(w.right-w.left))),this.calcOffset(),f.x=f.x-this._offset.left,f.y=f.y-this._offset.top,m||(f=this.restorePointerVpt(f));var L=this.getRetinaScaling();return L!==1&&(f.x/=L,f.y/=L),C===0||P===0?M={width:1,height:1}:M={width:g.width/C,height:g.height/P},{x:f.x*M.width,y:f.y*M.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),m=this.lowerCanvasEl,f=this.upperCanvasEl;f?f.className="":(f=this._createCanvasElement(),this.upperCanvasEl=f),e.util.addClass(f,"upper-canvas "+a),this.wrapperEl.appendChild(f),this._copyCanvasStyle(m,f),this._applyCanvasStyle(f),this.contextTop=f.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var m=this.width||a.width,f=this.height||a.height;e.util.setStyle(a,{position:"absolute",width:m+"px",height:f+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=m,a.height=f,e.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,m){m.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,m){var f=!1,g=this.getActiveObjects(),w=[],C=[];a.forEach(function(P){g.indexOf(P)===-1&&(f=!0,P.fire("deselected",{e:m,target:P}),C.push(P))}),g.forEach(function(P){a.indexOf(P)===-1&&(f=!0,P.fire("selected",{e:m,target:P}),w.push(P))}),a.length>0&&g.length>0?f&&this.fire("selection:updated",{e:m,selected:w,deselected:C,updated:w[0]||C[0],target:this._activeObject}):g.length>0?this.fire("selection:created",{e:m,selected:w,target:this._activeObject}):a.length>0&&this.fire("selection:cleared",{e:m,deselected:C})},setActiveObject:function(a,m){var f=this.getActiveObjects();return this._setActiveObject(a,m),this._fireSelectionEvents(f,m),this},_setActiveObject:function(a,m){return this._activeObject===a||!this._discardActiveObject(m,a)||a.onSelect({e:m})?!1:(this._activeObject=a,!0)},_discardActiveObject:function(a,m){var f=this._activeObject;if(f){if(f.onDeselect({e:a,object:m}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var m=this.getActiveObjects(),f=this.getActiveObject();return m.length&&this.fire("before:selection:cleared",{target:f,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(m,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(m){e.util.cleanUpJsdomNode(this[m]),this[m]=void 0}).bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var m=this._activeObject;m&&m._renderControls(a)},_toObject:function(a,m,f){var g=this._realizeGroupTransformOnObject(a),w=this.callSuper("_toObject",a,m,f);return this._unwindGroupTransformOnObject(a,g),w},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var m=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],f={};return m.forEach(function(g){f[g]=a[g]}),e.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),f}else return null},_unwindGroupTransformOnObject:function(a,m){m&&a.set(m)},_setSVGObject:function(a,m,f){var g=this._realizeGroupTransformOnObject(m);this.callSuper("_setSVGObject",a,m,f),this._unwindGroupTransformOnObject(m,g)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var o in e.StaticCanvas)o!=="prototype"&&(e.Canvas[o]=e.StaticCanvas[o])})(),(function(){var d=e.util.addListener,r=e.util.removeListener,c=3,l=2,i=1,s={passive:!1};function o(a,m){return a.button&&a.button===m-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(d,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(a,m){var f=this.upperCanvasEl,g=this._getEventPrefix();a(e.window,"resize",this._onResize),a(f,g+"down",this._onMouseDown),a(f,g+"move",this._onMouseMove,s),a(f,g+"out",this._onMouseOut),a(f,g+"enter",this._onMouseEnter),a(f,"wheel",this._onMouseWheel),a(f,"contextmenu",this._onContextMenu),a(f,"dblclick",this._onDoubleClick),a(f,"dragover",this._onDragOver),a(f,"dragenter",this._onDragEnter),a(f,"dragleave",this._onDragLeave),a(f,"drop",this._onDrop),this.enablePointerEvents||a(f,"touchstart",this._onTouchStart,s),typeof v<"u"&&m in v&&(v[m](f,"gesture",this._onGesture),v[m](f,"drag",this._onDrag),v[m](f,"orientation",this._onOrientationChange),v[m](f,"shake",this._onShake),v[m](f,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var a=this._getEventPrefix();r(e.document,a+"up",this._onMouseUp),r(e.document,"touchend",this._onTouchEnd,s),r(e.document,a+"move",this._onMouseMove,s),r(e.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(a,m){this.__onTransformGesture&&this.__onTransformGesture(a,m)},_onDrag:function(a,m){this.__onDrag&&this.__onDrag(a,m)},_onMouseWheel:function(a){this.__onMouseWheel(a)},_onMouseOut:function(a){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:a}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:a});var f=this;this._hoveredTargets.forEach(function(g){f.fire("mouse:out",{target:m,e:a}),g&&m.fire("mouseout",{e:a})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(g){g.isEditing&&g.hiddenTextarea.focus()})},_onMouseEnter:function(a){!this._currentTransform&&!this.findTarget(a)&&(this.fire("mouse:over",{target:null,e:a}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(a,m){this.__onOrientationChange&&this.__onOrientationChange(a,m)},_onShake:function(a,m){this.__onShake&&this.__onShake(a,m)},_onLongPress:function(a,m){this.__onLongPress&&this.__onLongPress(a,m)},_onDragOver:function(a){a.preventDefault();var m=this._simpleEventHandler("dragover",a);this._fireEnterLeaveEvents(m,a)},_onContextMenu:function(a){return this.stopContextMenu&&(a.stopPropagation(),a.preventDefault()),!1},_onDoubleClick:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"dblclick"),this._resetTransformEventData(a)},getPointerId:function(a){var m=a.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?a.pointerId:-1},_isMainEvent:function(a){return a.isPrimary===!0?!0:a.isPrimary===!1?!1:a.type==="touchend"&&a.touches.length===0?!0:a.changedTouches?a.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(a){a.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(a)),this.__onMouseDown(a),this._resetTransformEventData();var m=this.upperCanvasEl,f=this._getEventPrefix();d(e.document,"touchend",this._onTouchEnd,s),d(e.document,"touchmove",this._onMouseMove,s),r(m,f+"down",this._onMouseDown)},_onMouseDown:function(a){this.__onMouseDown(a),this._resetTransformEventData();var m=this.upperCanvasEl,f=this._getEventPrefix();r(m,f+"move",this._onMouseMove,s),d(e.document,f+"up",this._onMouseUp),d(e.document,f+"move",this._onMouseMove,s)},_onTouchEnd:function(a){if(!(a.touches.length>0)){this.__onMouseUp(a),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();r(e.document,"touchend",this._onTouchEnd,s),r(e.document,"touchmove",this._onMouseMove,s);var f=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){d(f.upperCanvasEl,m+"down",f._onMouseDown),f._willAddMouseDown=0},400)}},_onMouseUp:function(a){this.__onMouseUp(a),this._resetTransformEventData();var m=this.upperCanvasEl,f=this._getEventPrefix();this._isMainEvent(a)&&(r(e.document,f+"up",this._onMouseUp),r(e.document,f+"move",this._onMouseMove,s),d(m,f+"move",this._onMouseMove,s))},_onMouseMove:function(a){!this.allowTouchScrolling&&a.preventDefault&&a.preventDefault(),this.__onMouseMove(a)},_onResize:function(){this.calcOffset()},_shouldRender:function(a){var m=this._activeObject;return!!m!=!!a||m&&a&&m!==a?!0:(m&&m.isEditing,!1)},__onMouseUp:function(a){var m,f=this._currentTransform,g=this._groupSelector,w=!1,C=!g||g.left===0&&g.top===0;if(this._cacheTransformEventData(a),m=this._target,this._handleEvent(a,"up:before"),o(a,c)){this.fireRightClick&&this._handleEvent(a,"up",c,C);return}if(o(a,l)){this.fireMiddleClick&&this._handleEvent(a,"up",l,C),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(a);return}if(this._isMainEvent(a)){if(f&&(this._finalizeCurrentTransform(a),w=f.actionPerformed),!C){var P=m===this._activeObject;this._maybeGroupObjects(a),w||(w=this._shouldRender(m)||!P&&m===this._activeObject)}if(m){if(m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,a),w=!0;else{var M=m._findTargetCorner(this.getPointer(a,!0),e.util.isTouchEvent(a)),L=m.controls[M],B=L&&L.getMouseUpHandler(a,m,L);if(B){var D=this.getPointer(a);B(a,f,D.x,D.y)}}m.isMoving=!1}this._setCursorFromEvent(a,m),this._handleEvent(a,"up",i,C),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),w?this.requestRenderAll():C||this.renderTop()}},_simpleEventHandler:function(a,m){var f=this.findTarget(m),g=this.targets,w={e:m,target:f,subTargets:g};if(this.fire(a,w),f&&f.fire(a,w),!g)return f;for(var C=0;C<g.length;C++)g[C].fire(a,w);return f},_handleEvent:function(a,m,f,g){var w=this._target,C=this.targets||[],P={e:a,target:w,subTargets:C,button:f||i,isClick:g||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(P.currentTarget=this.findTarget(a),P.currentSubTargets=this.targets),this.fire("mouse:"+m,P),w&&w.fire("mouse"+m,P);for(var M=0;M<C.length;M++)C[M].fire("mouse"+m,P)},_finalizeCurrentTransform:function(a){var m=this._currentTransform,f=m.target,g,w={e:a,target:f,transform:m,action:m.action};f._scaling&&(f._scaling=!1),f.setCoords(),(m.actionPerformed||this.stateful&&f.hasStateChanged())&&(m.actionPerformed&&(g=this._addEventOptions(w,m),this._fire(g,w)),this._fire("modified",w))},_addEventOptions:function(a,m){var f,g;switch(m.action){case"scaleX":f="scaled",g="x";break;case"scaleY":f="scaled",g="y";break;case"skewX":f="skewed",g="x";break;case"skewY":f="skewed",g="y";break;case"scale":f="scaled",g="equally";break;case"rotate":f="rotated";break;case"drag":f="moved";break}return a.by=g,f},_onMouseDownInDrawingMode:function(a){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(a).requestRenderAll();var m=this.getPointer(a);this.freeDrawingBrush.onMouseDown(m,{e:a,pointer:m}),this._handleEvent(a,"down")},_onMouseMoveInDrawingMode:function(a){if(this._isCurrentlyDrawing){var m=this.getPointer(a);this.freeDrawingBrush.onMouseMove(m,{e:a,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(a,"move")},_onMouseUpInDrawingMode:function(a){var m=this.getPointer(a);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:a,pointer:m}),this._handleEvent(a,"up")},__onMouseDown:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"down:before");var m=this._target;if(o(a,c)){this.fireRightClick&&this._handleEvent(a,"down",c);return}if(o(a,l)){this.fireMiddleClick&&this._handleEvent(a,"down",l);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(a);return}if(this._isMainEvent(a)&&!this._currentTransform){var f=this._pointer;this._previousPointer=f;var g=this._shouldRender(m),w=this._shouldGroup(a,m);if(this._shouldClearSelection(a,m)?this.discardActiveObject(a):w&&(this._handleGrouping(a,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:f.x,ey:f.y,top:0,left:0}),m){var C=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,a);var P=m._findTargetCorner(this.getPointer(a,!0),e.util.isTouchEvent(a));if(m.__corner=P,m===this._activeObject&&(P||!w)){this._setupCurrentTransform(a,m,C);var M=m.controls[P],f=this.getPointer(a),L=M&&M.getMouseDownHandler(a,m,M);L&&L(a,this._currentTransform,f.x,f.y)}}this._handleEvent(a,"down"),(g||w)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(a){this._resetTransformEventData(),this._pointer=this.getPointer(a,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(a)||null},_beforeTransform:function(a){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:a,transform:m})},__onMouseMove:function(a){this._handleEvent(a,"move:before"),this._cacheTransformEventData(a);var m,f;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(a);return}if(this._isMainEvent(a)){var g=this._groupSelector;g?(f=this._pointer,g.left=f.x-g.ex,g.top=f.y-g.ey,this.renderTop()):this._currentTransform?this._transformObject(a):(m=this.findTarget(a)||null,this._setCursorFromEvent(a,m),this._fireOverOutEvents(m,a)),this._handleEvent(a,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(a,m){var f=this._hoveredTarget,g=this._hoveredTargets,w=this.targets,C=Math.max(g.length,w.length);this.fireSyntheticInOutEvents(a,m,{oldTarget:f,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var P=0;P<C;P++)this.fireSyntheticInOutEvents(w[P],m,{oldTarget:g[P],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(a,m){var f=this._draggedoverTarget,g=this._hoveredTargets,w=this.targets,C=Math.max(g.length,w.length);this.fireSyntheticInOutEvents(a,m,{oldTarget:f,evtOut:"dragleave",evtIn:"dragenter"});for(var P=0;P<C;P++)this.fireSyntheticInOutEvents(w[P],m,{oldTarget:g[P],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=a},fireSyntheticInOutEvents:function(a,m,f){var g,w,C=f.oldTarget,P,M,L=C!==a,B=f.canvasEvtIn,D=f.canvasEvtOut;L&&(g={e:m,target:a,previousTarget:C},w={e:m,target:C,nextTarget:a}),M=a&&L,P=C&&L,P&&(D&&this.fire(D,w),C.fire(f.evtOut,w)),M&&(B&&this.fire(B,g),a.fire(f.evtIn,g))},__onMouseWheel:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"wheel"),this._resetTransformEventData()},_transformObject:function(a){var m=this.getPointer(a),f=this._currentTransform;f.reset=!1,f.shiftKey=a.shiftKey,f.altKey=a[this.centeredKey],this._performTransformAction(a,f,m),f.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(a,m,f){var g=f.x,w=f.y,C=m.action,P=!1,M=m.actionHandler;M&&(P=M(a,m,g,w)),C==="drag"&&P&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||P},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(a,m){if(!m)return this.setCursor(this.defaultCursor),!1;var f=m.hoverCursor||this.hoverCursor,g=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,w=(!g||!g.contains(m))&&m._findTargetCorner(this.getPointer(a,!0));w?this.setCursor(this.getCornerCursor(w,m,a)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(C){f=C.hoverCursor||f}),this.setCursor(f))},getCornerCursor:function(a,m,f){var g=m.controls[a];return g.cursorStyleHandler(f,g,m)}})})(),(function(){var d=Math.min,r=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,l){var i=this._activeObject;return i&&this._isSelectionKeyPressed(c)&&l&&l.selectable&&this.selection&&(i!==l||i.type==="activeSelection")&&!l.onSelect({e:c})},_handleGrouping:function(c,l){var i=this._activeObject;i.__corner||l===i&&(l=this.findTarget(c,!0),!l||!l.selectable)||(i&&i.type==="activeSelection"?this._updateActiveSelection(l,c):this._createActiveSelection(l,c))},_updateActiveSelection:function(c,l){var i=this._activeObject,s=i._objects.slice(0);i.contains(c)?(i.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),i.size()===1&&this._setActiveObject(i.item(0),l)):(i.addWithUpdate(c),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(s,l)},_createActiveSelection:function(c,l){var i=this.getActiveObjects(),s=this._createGroup(c);this._hoveredTarget=s,this._setActiveObject(s,l),this._fireSelectionEvents(i,l)},_createGroup:function(c){var l=this._objects,i=l.indexOf(this._activeObject)<l.indexOf(c),s=i?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(s,{canvas:this})},_groupSelectedObjects:function(c){var l=this._collectObjects(c),i;l.length===1?this.setActiveObject(l[0],c):l.length>1&&(i=new e.ActiveSelection(l.reverse(),{canvas:this}),this.setActiveObject(i,c))},_collectObjects:function(c){for(var l=[],i,s=this._groupSelector.ex,o=this._groupSelector.ey,a=s+this._groupSelector.left,m=o+this._groupSelector.top,f=new e.Point(d(s,a),d(o,m)),g=new e.Point(r(s,a),r(o,m)),w=!this.selectionFullyContained,C=s===a&&o===m,P=this._objects.length;P--&&(i=this._objects[P],!(!(!i||!i.selectable||!i.visible)&&(w&&i.intersectsWithRect(f,g)||i.isContainedWithinRect(f,g)||w&&i.containsPoint(f)||w&&i.containsPoint(g))&&(l.push(i),C))););return l.length>1&&(l=l.filter(function(M){return!M.onSelect({e:c})})),l},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})})(),(function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(d){d||(d={});var r=d.format||"png",c=d.quality||1,l=(d.multiplier||1)*(d.enableRetinaScaling?this.getRetinaScaling():1),i=this.toCanvasElement(l,d);return e.util.toDataURL(i,r,c)},toCanvasElement:function(d,r){d=d||1,r=r||{};var c=(r.width||this.width)*d,l=(r.height||this.height)*d,i=this.getZoom(),s=this.width,o=this.height,a=i*d,m=this.viewportTransform,f=(m[4]-(r.left||0))*d,g=(m[5]-(r.top||0))*d,w=this.interactive,C=[a,0,0,a,f,g],P=this.enableRetinaScaling,M=e.util.createCanvasElement(),L=this.contextTop;return M.width=c,M.height=l,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=C,this.width=c,this.height=l,this.calcViewportBoundaries(),this.renderCanvas(M.getContext("2d"),this._objects),this.viewportTransform=m,this.width=s,this.height=o,this.calcViewportBoundaries(),this.interactive=w,this.enableRetinaScaling=P,this.contextTop=L,M}})})(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(d,r,c){if(d){var l=typeof d=="string"?JSON.parse(d):e.util.object.clone(d),i=this,s=l.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete l.clipPath,this._enlivenObjects(l.objects,function(a){i.clear(),i._setBgOverlay(l,function(){s?i._enlivenObjects([s],function(m){i.clipPath=m[0],i.__setupCanvas.call(i,l,a,o,r)}):i.__setupCanvas.call(i,l,a,o,r)})},c),this}},__setupCanvas:function(d,r,c,l){var i=this;r.forEach(function(s,o){i.insertAt(s,o)}),this.renderOnAddRemove=c,delete d.objects,delete d.backgroundImage,delete d.overlayImage,delete d.background,delete d.overlay,this._setOptions(d),this.renderAll(),l&&l()},_setBgOverlay:function(d,r){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!d.backgroundImage&&!d.overlayImage&&!d.background&&!d.overlay){r&&r();return}var l=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",d.backgroundImage,c,l),this.__setBgOverlay("overlayImage",d.overlayImage,c,l),this.__setBgOverlay("backgroundColor",d.background,c,l),this.__setBgOverlay("overlayColor",d.overlay,c,l)},__setBgOverlay:function(d,r,c,l){var i=this;if(!r){c[d]=!0,l&&l();return}d==="backgroundImage"||d==="overlayImage"?e.util.enlivenObjects([r],function(s){i[d]=s[0],c[d]=!0,l&&l()}):this["set"+e.util.string.capitalize(d,!0)](r,function(){c[d]=!0,l&&l()})},_enlivenObjects:function(d,r,c){if(!d||d.length===0){r&&r([]);return}e.util.enlivenObjects(d,function(l){r&&r(l)},null,c)},_toDataURL:function(d,r){this.clone(function(c){r(c.toDataURL(d))})},_toDataURLWithMultiplier:function(d,r,c){this.clone(function(l){c(l.toDataURLWithMultiplier(d,r))})},clone:function(d,r){var c=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(l){l.loadFromJSON(c,function(){d&&d(l)})})},cloneWithoutData:function(d){var r=e.util.createCanvasElement();r.width=this.width,r.height=this.height;var c=new e.Canvas(r);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),d&&d(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):d&&d(c)}}),(function(){var d=e.util.degreesToRadians,r=e.util.radiansToDegrees;e.util.object.extend(e.Canvas.prototype,{__onTransformGesture:function(c,l){if(!(this.isDrawingMode||!c.touches||c.touches.length!==2||l.gesture!=="gesture")){var i=this.findTarget(c);typeof i<"u"&&(this.__gesturesParams={e:c,self:l,target:i},this.__gesturesRenderer()),this.fire("touch:gesture",{target:i,e:c,self:l})}},__gesturesParams:null,__gesturesRenderer:function(){if(!(this.__gesturesParams===null||this._currentTransform===null)){var c=this.__gesturesParams.self,l=this._currentTransform,i=this.__gesturesParams.e;l.action="scale",l.originX=l.originY="center",this._scaleObjectBy(c.scale,i),c.rotation!==0&&(l.action="rotate",this._rotateObjectByAngle(c.rotation,i)),this.requestRenderAll(),l.action="drag"}},__onDrag:function(c,l){this.fire("touch:drag",{e:c,self:l})},__onOrientationChange:function(c,l){this.fire("touch:orientation",{e:c,self:l})},__onShake:function(c,l){this.fire("touch:shake",{e:c,self:l})},__onLongPress:function(c,l){this.fire("touch:longpress",{e:c,self:l})},_scaleObjectBy:function(c,l){var i=this._currentTransform,s=i.target;return i.gestureScale=c,s._scaling=!0,e.controlsUtils.scalingEqually(l,i,0,0)},_rotateObjectByAngle:function(c,l){var i=this._currentTransform;i.target.get("lockRotation")||(i.target.rotate(r(d(c)+i.theta)),this._fire("rotating",{target:i.target,e:l,transform:i}))}})})(),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.object.extend,l=r.util.object.clone,i=r.util.toFixed,s=r.util.string.capitalize,o=r.util.degreesToRadians,a=r.StaticCanvas.supports("setLineDash"),m=!r.isLikelyNode,f=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:m,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var w=r.perfLimitSizeTotal,C=g.width,P=g.height,M=r.maxCacheSideLimit,L=r.minCacheSideLimit;if(C<=M&&P<=M&&C*P<=w)return C<L&&(g.width=L),P<L&&(g.height=L),g;var B=C/P,D=r.util.limitDimsByArea(B,w),H=r.util.capValue,Q=H(L,D.x,M),ee=H(L,D.y,M);return C>Q&&(g.zoomX/=C/Q,g.width=Q,g.capped=!0),P>ee&&(g.zoomY/=P/ee,g.height=ee,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),w=this._getTransformedDimensions(0,0),C=w.x*g.scaleX/this.scaleX,P=w.y*g.scaleY/this.scaleY;return{width:C+f,height:P+f,zoomX:g.scaleX,zoomY:g.scaleY,x:C,y:P}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var w=g._currentTransform.target,C=g._currentTransform.action;if(this===w&&C.slice&&C.slice(0,5)==="scale")return!1}var P=this._cacheCanvas,M=this._limitCacheSize(this._getCacheCanvasDimensions()),L=r.minCacheSideLimit,B=M.width,D=M.height,H,Q,ee=M.zoomX,se=M.zoomY,ie=B!==this.cacheWidth||D!==this.cacheHeight,ue=this.zoomX!==ee||this.zoomY!==se,U=ie||ue,X=0,Z=0,$=!1;if(ie){var R=this._cacheCanvas.width,V=this._cacheCanvas.height,W=B>R||D>V,q=(B<R*.9||D<V*.9)&&R>L&&V>L;$=W||q,W&&!M.capped&&(B>L||D>L)&&(X=B*.1,Z=D*.1)}return U?($?(P.width=Math.ceil(B+X),P.height=Math.ceil(D+Z)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,P.width,P.height)),H=M.x/2,Q=M.y/2,this.cacheTranslationX=Math.round(P.width/2-H)+H,this.cacheTranslationY=Math.round(P.height/2-Q)+Q,this.cacheWidth=B,this.cacheHeight=D,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ee,se),this.zoomX=ee,this.zoomY=se,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var w=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,C=this.calcTransformMatrix(!w);g.transform(C[0],C[1],C[2],C[3],C[4],C[5])},toObject:function(g){var w=r.Object.NUM_FRACTION_DIGITS,C={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:i(this.left,w),top:i(this.top,w),width:i(this.width,w),height:i(this.height,w),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,w),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,w),scaleX:i(this.scaleX,w),scaleY:i(this.scaleY,w),angle:i(this.angle,w),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,w),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,w),skewY:i(this.skewY,w)};return this.clipPath&&(C.clipPath=this.clipPath.toObject(g),C.clipPath.inverted=this.clipPath.inverted,C.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,C,g),this.includeDefaultValues||(C=this._removeDefaultValues(C)),C},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var w=r.util.getKlass(g.type).prototype,C=w.stateProperties;return C.forEach(function(P){if(!(P==="left"||P==="top")){g[P]===w[P]&&delete g[P];var M=Object.prototype.toString.call(g[P])==="[object Array]"&&Object.prototype.toString.call(w[P])==="[object Array]";M&&g[P].length===0&&w[P].length===0&&delete g[P]}}),g},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){var g=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),w=g.scaleX,C=g.scaleY;if(this.canvas){var P=this.canvas.getZoom(),M=this.canvas.getRetinaScaling();w*=P*M,C*=P*M}return{scaleX:w,scaleY:C}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,w){var C=g==="scaleX"||g==="scaleY",P=this[g]!==w,M=!1;return C&&(w=this._constrainScale(w)),g==="scaleX"&&w<0?(this.flipX=!this.flipX,w*=-1):g==="scaleY"&&w<0?(this.flipY=!this.flipY,w*=-1):g==="shadow"&&w&&!(w instanceof r.Shadow)?w=new r.Shadow(w):g==="dirty"&&this.group&&this.group.set("dirty",w),this[g]=w,P&&(M=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,M&&this.group.set("dirty",!0)):M&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g){var w=this.clipPath;if(g.save(),w.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",w.absolutePositioned){var C=r.util.invertTransform(this.calcTransformMatrix());g.transform(C[0],C[1],C[2],C[3],C[4],C[5])}w.transform(g),g.scale(1/w.zoomX,1/w.zoomY),g.drawImage(w._cacheCanvas,-w.cacheTranslationX,-w.cacheTranslationY),g.restore()},drawObject:function(g,w){var C=this.fill,P=this.stroke;w?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g),this.fill=C,this.stroke=P},_drawClipPath:function(g){var w=this.clipPath;w&&(w.canvas=this.canvas,w.shouldCache(),w._transformDone=!0,w.renderCache({forClipping:!0}),this.drawClipPathOnCache(g))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!g){var w=this.cacheWidth/this.zoomX,C=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-w/2,-C/2,w,C)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var w=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-w.x/2,-w.y/2,w.x,w.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,w){var C=w.stroke;C&&(g.lineWidth=w.strokeWidth,g.lineCap=w.strokeLineCap,g.lineDashOffset=w.strokeDashOffset,g.lineJoin=w.strokeLineJoin,g.miterLimit=w.strokeMiterLimit,C.toLive?C.gradientUnits==="percentage"||C.gradientTrasnform||C.patternTransform?this._applyPatternForTransformedGradient(g,C):(g.strokeStyle=C.toLive(g,this),this._applyPatternGradientTransform(g,C)):g.strokeStyle=w.stroke)},_setFillStyles:function(g,w){var C=w.fill;C&&(C.toLive?(g.fillStyle=C.toLive(g,this),this._applyPatternGradientTransform(g,w.fill)):g.fillStyle=C)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,w,C){!w||w.length===0||(1&w.length&&w.push.apply(w,w),a?g.setLineDash(w):C&&C(g))},_renderControls:function(g,w){var C=this.getViewportTransform(),P=this.calcTransformMatrix(),M,L,B;w=w||{},L=typeof w.hasBorders<"u"?w.hasBorders:this.hasBorders,B=typeof w.hasControls<"u"?w.hasControls:this.hasControls,P=r.util.multiplyTransformMatrices(C,P),M=r.util.qrDecompose(P),g.save(),g.translate(M.translateX,M.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),w.forActiveSelection?(g.rotate(o(M.angle)),L&&this.drawBordersInGroup(g,M,w)):(g.rotate(o(this.angle)),L&&this.drawBorders(g,w)),B&&this.drawControls(g,w),g.restore()},_setShadow:function(g){if(this.shadow){var w=this.shadow,C=this.canvas,P,M=C&&C.viewportTransform[0]||1,L=C&&C.viewportTransform[3]||1;w.nonScaling?P={scaleX:1,scaleY:1}:P=this.getObjectScaling(),C&&C._isRetinaScaling()&&(M*=r.devicePixelRatio,L*=r.devicePixelRatio),g.shadowColor=w.color,g.shadowBlur=w.blur*r.browserShadowBlurConstant*(M+L)*(P.scaleX+P.scaleY)/4,g.shadowOffsetX=w.offsetX*M*P.scaleX,g.shadowOffsetY=w.offsetY*L*P.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,w){if(!w||!w.toLive)return{offsetX:0,offsetY:0};var C=w.gradientTransform||w.patternTransform,P=-this.width/2+w.offsetX||0,M=-this.height/2+w.offsetY||0;return w.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,P,M):g.transform(1,0,0,1,P,M),C&&g.transform(C[0],C[1],C[2],C[3],C[4],C[5]),{offsetX:P,offsetY:M}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var w=this.getObjectScaling();g.scale(1/w.scaleX,1/w.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray,this._renderDashedStroke),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,w){var C=this._limitCacheSize(this._getCacheCanvasDimensions()),P=r.util.createCanvasElement(),M,L=this.canvas.getRetinaScaling(),B=C.x/this.scaleX/L,D=C.y/this.scaleY/L;P.width=B,P.height=D,M=P.getContext("2d"),M.beginPath(),M.moveTo(0,0),M.lineTo(B,0),M.lineTo(B,D),M.lineTo(0,D),M.closePath(),M.translate(B/2,D/2),M.scale(C.zoomX/this.scaleX/L,C.zoomY/this.scaleY/L),this._applyPatternGradientTransform(M,w),M.fillStyle=w.toLive(g),M.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(L*this.scaleX/C.zoomX,L*this.scaleY/C.zoomY),g.strokeStyle=M.createPattern(P,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var w=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),w=r.util.transformPoint(w,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,w.x+=g.offsetLeft,w.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(w,"center","center")},clone:function(g,w){var C=this.toObject(w);this.constructor.fromObject?this.constructor.fromObject(C,g):r.Object._fromObject("Object",C,g)},cloneAsImage:function(g,w){var C=this.toCanvasElement(w);return g&&g(new r.Image(C)),this},toCanvasElement:function(g){g||(g={});var w=r.util,C=w.saveObjectTransform(this),P=this.group,M=this.shadow,L=Math.abs,B=(g.multiplier||1)*(g.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,g.withoutTransform&&w.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var D=r.util.createCanvasElement(),H=this.getBoundingRect(!0,!0),Q=this.shadow,ee,se={x:0,y:0},ie,ue,U;Q&&(ie=Q.blur,Q.nonScaling?ee={scaleX:1,scaleY:1}:ee=this.getObjectScaling(),se.x=2*Math.round(L(Q.offsetX)+ie)*L(ee.scaleX),se.y=2*Math.round(L(Q.offsetY)+ie)*L(ee.scaleY)),ue=H.width+se.x,U=H.height+se.y,D.width=Math.ceil(ue),D.height=Math.ceil(U);var X=new r.StaticCanvas(D,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(X.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(X.width/2,X.height/2),"center","center");var Z=this.canvas;X.add(this);var $=X.toCanvasElement(B||1,g);return this.shadow=M,this.set("canvas",Z),P&&(this.group=P),this.set(C).setCoords(),X._objects=[],X.dispose(),X=null,$},toDataURL:function(g){return g||(g={}),r.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var w=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return w&&this._setOriginToCenter(),this.set("angle",g),w&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,w){w=w||this.canvas.getPointer(g);var C=new r.Point(w.x,w.y),P=this._getLeftTopCoords();return this.angle&&(C=r.util.rotatePoint(C,P,o(-this.angle))),{x:C.x-P.x,y:C.y-P.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),c(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object._fromObject=function(g,w,C,P){var M=r[g];w=l(w,!0),r.util.enlivenPatterns([w.fill,w.stroke],function(L){typeof L[0]<"u"&&(w.fill=L[0]),typeof L[1]<"u"&&(w.stroke=L[1]),r.util.enlivenObjects([w.clipPath],function(B){w.clipPath=B[0];var D=P?new M(w[P],w):new M(w);C&&C(D)})})},r.Object.__uid=0)})(t),(function(){var d=e.util.degreesToRadians,r={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(l,i,s,o,a){var m=l.x,f=l.y,g,w,C;return typeof i=="string"?i=r[i]:i-=.5,typeof o=="string"?o=r[o]:o-=.5,g=o-i,typeof s=="string"?s=c[s]:s-=.5,typeof a=="string"?a=c[a]:a-=.5,w=a-s,(g||w)&&(C=this._getTransformedDimensions(),m=l.x+g*C.x,f=l.y+w*C.y),new e.Point(m,f)},translateToCenterPoint:function(l,i,s){var o=this.translateToGivenOrigin(l,i,s,"center","center");return this.angle?e.util.rotatePoint(o,l,d(this.angle)):o},translateToOriginPoint:function(l,i,s){var o=this.translateToGivenOrigin(l,"center","center",i,s);return this.angle?e.util.rotatePoint(o,l,d(this.angle)):o},getCenterPoint:function(){var l=new e.Point(this.left,this.top);return this.translateToCenterPoint(l,this.originX,this.originY)},getPointByOrigin:function(l,i){var s=this.getCenterPoint();return this.translateToOriginPoint(s,l,i)},toLocalPoint:function(l,i,s){var o=this.getCenterPoint(),a,m;return typeof i<"u"&&typeof s<"u"?a=this.translateToGivenOrigin(o,"center","center",i,s):a=new e.Point(this.left,this.top),m=new e.Point(l.x,l.y),this.angle&&(m=e.util.rotatePoint(m,o,-d(this.angle))),m.subtractEquals(a)},setPositionByOrigin:function(l,i,s){var o=this.translateToCenterPoint(l,i,s),a=this.translateToOriginPoint(o,this.originX,this.originY);this.set("left",a.x),this.set("top",a.y)},adjustPosition:function(l){var i=d(this.angle),s=this.getScaledWidth(),o=e.util.cos(i)*s,a=e.util.sin(i)*s,m,f;typeof this.originX=="string"?m=r[this.originX]:m=this.originX-.5,typeof l=="string"?f=r[l]:f=l-.5,this.left+=o*(f-m),this.top+=a*(f-m),this.setCoords(),this.originX=l},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var l=this.getCenterPoint();this.originX="center",this.originY="center",this.left=l.x,this.top=l.y},_resetOrigin:function(){var l=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=l.x,this.top=l.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})})(),(function(){function d(s){return[new e.Point(s.tl.x,s.tl.y),new e.Point(s.tr.x,s.tr.y),new e.Point(s.br.x,s.br.y),new e.Point(s.bl.x,s.bl.y)]}var r=e.util,c=r.degreesToRadians,l=r.multiplyTransformMatrices,i=r.transformPoint;r.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(s,o){return o?s?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),s?this.aCoords:this.lineCoords)},getCoords:function(s,o){return d(this._getCoords(s,o))},intersectsWithRect:function(s,o,a,m){var f=this.getCoords(a,m),g=e.Intersection.intersectPolygonRectangle(f,s,o);return g.status==="Intersection"},intersectsWithObject:function(s,o,a){var m=e.Intersection.intersectPolygonPolygon(this.getCoords(o,a),s.getCoords(o,a));return m.status==="Intersection"||s.isContainedWithinObject(this,o,a)||this.isContainedWithinObject(s,o,a)},isContainedWithinObject:function(s,o,a){for(var m=this.getCoords(o,a),f=o?s.aCoords:s.lineCoords,g=0,w=s._getImageLines(f);g<4;g++)if(!s.containsPoint(m[g],w))return!1;return!0},isContainedWithinRect:function(s,o,a,m){var f=this.getBoundingRect(a,m);return f.left>=s.x&&f.left+f.width<=o.x&&f.top>=s.y&&f.top+f.height<=o.y},containsPoint:function(s,g,a,m){var f=this._getCoords(a,m),g=g||this._getImageLines(f),w=this._findCrossPoints(s,g);return w!==0&&w%2===1},isOnScreen:function(s){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br,m=this.getCoords(!0,s);return m.some(function(f){return f.x<=a.x&&f.x>=o.x&&f.y<=a.y&&f.y>=o.y})||this.intersectsWithRect(o,a,!0,s)?!0:this._containsCenterOfCanvas(o,a,s)},_containsCenterOfCanvas:function(s,o,a){var m={x:(s.x+o.x)/2,y:(s.y+o.y)/2};return!!this.containsPoint(m,null,!0,a)},isPartiallyOnScreen:function(s){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br;if(this.intersectsWithRect(o,a,!0,s))return!0;var m=this.getCoords(!0,s).every(function(f){return(f.x>=a.x||f.x<=o.x)&&(f.y>=a.y||f.y<=o.y)});return m&&this._containsCenterOfCanvas(o,a,s)},_getImageLines:function(s){var o={topline:{o:s.tl,d:s.tr},rightline:{o:s.tr,d:s.br},bottomline:{o:s.br,d:s.bl},leftline:{o:s.bl,d:s.tl}};return o},_findCrossPoints:function(s,o){var a,m,f,g,w,C=0,P;for(var M in o)if(P=o[M],!(P.o.y<s.y&&P.d.y<s.y)&&!(P.o.y>=s.y&&P.d.y>=s.y)&&(P.o.x===P.d.x&&P.o.x>=s.x?w=P.o.x:(a=0,m=(P.d.y-P.o.y)/(P.d.x-P.o.x),f=s.y-a*s.x,g=P.o.y-m*P.o.x,w=-(f-g)/(a-m)),w>=s.x&&(C+=1),C===2))break;return C},getBoundingRect:function(s,o){var a=this.getCoords(s,o);return r.makeBoundingBoxFromPoints(a)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(s){return Math.abs(s)<this.minScaleLimit?s<0?-this.minScaleLimit:this.minScaleLimit:s===0?1e-4:s},scale:function(s){return this._set("scaleX",s),this._set("scaleY",s),this.setCoords()},scaleToWidth:function(s,o){var a=this.getBoundingRect(o).width/this.getScaledWidth();return this.scale(s/this.width/a)},scaleToHeight:function(s,o){var a=this.getBoundingRect(o).height/this.getScaledHeight();return this.scale(s/this.height/a)},calcCoords:function(s){return s?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var s=this.getViewportTransform(),o=this.padding,a=c(this.angle),m=r.cos(a),f=r.sin(a),g=m*o,w=f*o,C=g+w,P=g-w,M=this.calcACoords(),L={tl:i(M.tl,s),tr:i(M.tr,s),bl:i(M.bl,s),br:i(M.br,s)};return o&&(L.tl.x-=P,L.tl.y-=C,L.tr.x+=C,L.tr.y-=P,L.bl.x-=C,L.bl.y+=P,L.br.x+=P,L.br.y+=C),L},calcOCoords:function(){var s=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),a=this.getViewportTransform(),m=l(a,o),f=l(m,s),f=l(f,[1/a[0],0,0,1/a[3],0,0]),g=this._calculateCurrentDimensions(),w={};return this.forEachControl(function(C,P,M){w[P]=C.positionHandler(g,f,M)}),w},calcACoords:function(){var s=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),a=l(o,s),m=this._getTransformedDimensions(),f=m.x/2,g=m.y/2;return{tl:i({x:-f,y:-g},a),tr:i({x:f,y:-g},a),bl:i({x:-f,y:g},a),br:i({x:f,y:g},a)}},setCoords:function(s){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),s?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var s=this.getCenterPoint();return[1,0,0,1,s.x,s.y]},transformMatrixKey:function(s){var o="_",a="";return!s&&this.group&&(a=this.group.transformMatrixKey(s)+o),a+this.top+o+this.left+o+this.scaleX+o+this.scaleY+o+this.skewX+o+this.skewY+o+this.angle+o+this.originX+o+this.originY+o+this.width+o+this.height+o+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(s){var o=this.calcOwnMatrix();if(s||!this.group)return o;var a=this.transformMatrixKey(s),m=this.matrixCache||(this.matrixCache={});return m.key===a?m.value:(this.group&&(o=l(this.group.calcTransformMatrix(!1),o)),m.key=a,m.value=o,o)},calcOwnMatrix:function(){var s=this.transformMatrixKey(!0),o=this.ownMatrixCache||(this.ownMatrixCache={});if(o.key===s)return o.value;var a=this._calcTranslateMatrix(),m={angle:this.angle,translateX:a[4],translateY:a[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return o.key=s,o.value=r.composeMatrix(m),o.value},_calcDimensionsTransformMatrix:function(s,o,a){return r.calcDimensionsMatrix({skewX:s,skewY:o,scaleX:this.scaleX*(a&&this.flipX?-1:1),scaleY:this.scaleY*(a&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var s=this.strokeWidth,o=this.width+s,a=this.height+s;return{x:o,y:a}},_getTransformedDimensions:function(s,o){typeof s>"u"&&(s=this.skewX),typeof o>"u"&&(o=this.skewY);var a=this._getNonTransformedDimensions(),m,f,g=s===0&&o===0;if(this.strokeUniform?(m=this.width,f=this.height):(m=a.x,f=a.y),g)return this._finalizeDimensions(m*this.scaleX,f*this.scaleY);var w=r.sizeAfterTransform(m,f,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:s,skewY:o});return this._finalizeDimensions(w.x,w.y)},_finalizeDimensions:function(s,o){return this.strokeUniform?{x:s+this.strokeWidth,y:o+this.strokeWidth}:{x:s,y:o}},_calculateCurrentDimensions:function(){var s=this.getViewportTransform(),o=this._getTransformedDimensions(),a=i(o,s,!0);return a.scalarAdd(2*this.padding)}})})(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(d){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,d):this.canvas&&this.canvas.sendBackwards(this,d),this},bringForward:function(d){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,d):this.canvas&&this.canvas.bringForward(this,d),this},moveTo:function(d){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,d):this.canvas&&this.canvas.moveTo(this,d),this}}),(function(){function d(c,l){if(l){if(l.toLive)return c+": url(#SVGID_"+l.id+"); ";var i=new e.Color(l),s=c+": "+i.toRgb()+"; ",o=i.getAlpha();return o!==1&&(s+=c+"-opacity: "+o.toString()+"; "),s}else return c+": none; "}var r=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var l=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",f=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=typeof this.opacity<"u"?this.opacity:"1",w=this.visible?"":" visibility: hidden;",C=c?"":this.getSvgFilter(),P=d("fill",this.fill),M=d("stroke",this.stroke);return[M,"stroke-width: ",i,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",f,"; ",P,"fill-rule: ",l,"; ","opacity: ",g,";",C,w].join("")},getSvgSpanStyles:function(c,l){var i="; ",o=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+i:"",s=c.strokeWidth?"stroke-width: "+c.strokeWidth+i:"",o=o,a=c.fontSize?"font-size: "+c.fontSize+"px"+i:"",m=c.fontStyle?"font-style: "+c.fontStyle+i:"",f=c.fontWeight?"font-weight: "+c.fontWeight+i:"",g=c.fill?d("fill",c.fill):"",w=c.stroke?d("stroke",c.stroke):"",C=this.getSvgTextDecoration(c),P=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return C&&(C="text-decoration: "+C+i),[w,s,o,a,m,f,C,g,P,l?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(l){return c[l.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,l){var i=c?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'+e.util.matrixToSVG(i);return s+(l||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var l=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,l),'" y="',r(-this.height/2,l),'" width="',r(this.width,l),'" height="',r(this.height,l),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,l){l=l||{};var i=l.reviver,s=l.additionalTransform||"",o=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),a=c.indexOf("COMMON_PARTS");return c[a]=o,i?i(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,l){l=l||{};var i=l.noStyle,s=l.reviver,o=i?"":'style="'+this.getSvgStyles()+'" ',a=l.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=m&&m.absolutePositioned,w=this.stroke,C=this.fill,P=this.shadow,M,L=[],B,D=c.indexOf("COMMON_PARTS"),H=l.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+e.Object.__uid++,B='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(s)+`</clipPath>
`),g&&L.push("<g ",a,this.getSvgCommons(),` >
`),L.push("<g ",this.getSvgTransform(!1),g?"":a+this.getSvgCommons(),` >
`),M=[o,f,i?"":this.addPaintOrder()," ",H?'transform="'+H+'" ':""].join(""),c[D]=M,C&&C.toLive&&L.push(C.toSVG(this)),w&&w.toLive&&L.push(w.toSVG(this)),P&&L.push(P.toSVG(this)),m&&L.push(B),L.push(c.join("")),L.push(`</g>
`),g&&L.push(`</g>
`),s?s(L.join("")):L.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})})(),(function(){var d=e.util.object.extend,r="stateProperties";function c(i,s,o){var a={},m=!0;o.forEach(function(f){a[f]=i[f]}),d(i[s],a,m)}function l(i,s,o){if(i===s)return!0;if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var a=0,m=i.length;a<m;a++)if(!l(i[a],s[a]))return!1;return!0}else if(i&&typeof i=="object"){var f=Object.keys(i),g;if(!s||typeof s!="object"||!o&&f.length!==Object.keys(s).length)return!1;for(var a=0,m=f.length;a<m;a++)if(g=f[a],!(g==="canvas"||g==="group")&&!l(i[g],s[g]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(i){i=i||r;var s="_"+i;return Object.keys(this[s]).length<this[i].length?!0:!l(this[s],this,!0)},saveState:function(i){var s=i&&i.propertySet||r,o="_"+s;return this[o]?(c(this,o,this[s]),i&&i.stateProperties&&c(this,o,i.stateProperties),this):this.setupState(i)},setupState:function(i){i=i||{};var s=i.propertySet||r;return i.propertySet=s,this["_"+s]={},this.saveState(i),this}})})(),(function(){var d=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(r,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var l=r.x,i=r.y,s,o,a=Object.keys(this.oCoords),m=a.length-1,f;for(this.__corner=0;m>=0;m--)if(f=a[m],!!this.isControlVisible(f)&&(o=this._getImageLines(c?this.oCoords[f].touchCorner:this.oCoords[f].corner),s=this._findCrossPoints({x:l,y:i},o),s!==0&&s%2===1))return this.__corner=f,f;return!1},forEachControl:function(r){for(var c in this.controls)r(this.controls[c],c,this)},_setCornerCoords:function(){var r=this.oCoords;for(var c in r){var l=this.controls[c];r[c].corner=l.calcCornerCoords(this.angle,this.cornerSize,r[c].x,r[c].y,!1),r[c].touchCorner=l.calcCornerCoords(this.angle,this.touchCornerSize,r[c].x,r[c].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var c=this.getCenterPoint(),l=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return r.translate(c.x,c.y),r.scale(1/i[0],1/i[3]),r.rotate(d(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-l.x/2,-l.y/2,l.x,l.y),r.restore(),this},drawBorders:function(r,c){c=c||{};var l=this._calculateCurrentDimensions(),i=this.borderScaleFactor,s=l.x+i,o=l.y+i,a=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return r.save(),r.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(r,c.borderDashArray||this.borderDashArray,null),r.strokeRect(-s/2,-o/2,s,o),a&&(r.beginPath(),this.forEachControl(function(f,g,w){f.withConnection&&f.getVisibility(w,g)&&(m=!0,r.moveTo(f.x*s,f.y*o),r.lineTo(f.x*s+f.offsetX,f.y*o+f.offsetY))}),m&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,c,l){l=l||{};var i=e.util.sizeAfterTransform(this.width,this.height,c),s=this.strokeWidth,o=this.strokeUniform,a=this.borderScaleFactor,m=i.x+s*(o?this.canvas.getZoom():c.scaleX)+a,f=i.y+s*(o?this.canvas.getZoom():c.scaleY)+a;return r.save(),this._setLineDash(r,l.borderDashArray||this.borderDashArray,null),r.strokeStyle=l.borderColor||this.borderColor,r.strokeRect(-m/2,-f/2,m,f),r.restore(),this},drawControls:function(r,c){return c=c||{},r.save(),r.setTransform(this.canvas.getRetinaScaling(),0,0,this.canvas.getRetinaScaling(),0,0),r.strokeStyle=r.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,c.cornerDashArray||this.cornerDashArray,null),this.setCoords(),this.forEachControl(function(l,i,s){l.getVisibility(s,i)&&l.render(r,s.oCoords[i].x,s.oCoords[i].y,c,s)}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=c,this},setControlsVisibility:function(r){r||(r={});for(var c in r)this.setControlVisible(c,r[c]);return this},onDeselect:function(){},onSelect:function(){}})})(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(d,r){r=r||{};var c=function(){},l=r.onComplete||c,i=r.onChange||c,s=this;return e.util.animate({startValue:d.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(o){d.set("left",o),s.requestRenderAll(),i()},onComplete:function(){d.setCoords(),l()}}),this},fxCenterObjectV:function(d,r){r=r||{};var c=function(){},l=r.onComplete||c,i=r.onChange||c,s=this;return e.util.animate({startValue:d.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(o){d.set("top",o),s.requestRenderAll(),i()},onComplete:function(){d.setCoords(),l()}}),this},fxRemove:function(d,r){r=r||{};var c=function(){},l=r.onComplete||c,i=r.onChange||c,s=this;return e.util.animate({startValue:d.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(o){d.set("opacity",o),s.requestRenderAll(),i()},onComplete:function(){s.remove(d),l()}}),this}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var d=[],r,c;for(r in arguments[0])d.push(r);for(var l=0,i=d.length;l<i;l++)r=d[l],c=l!==i-1,this._animate(r,arguments[0][r],arguments[1],c)}else this._animate.apply(this,arguments);return this},_animate:function(d,r,c,l){var i=this,s;r=r.toString(),c?c=e.util.object.clone(c):c={},~d.indexOf(".")&&(s=d.split("."));var o=i.colorProperties.indexOf(d)>-1||s&&i.colorProperties.indexOf(s[1])>-1,a=s?this.get(s[0])[s[1]]:this.get(d);"from"in c||(c.from=a),o||(~r.indexOf("=")?r=a+parseFloat(r.replace("=","")):r=parseFloat(r));var m={startValue:c.from,endValue:r,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(){return c.abort.call(i)},onChange:function(f,g,w){s?i[s[0]][s[1]]=f:i.set(d,f),!l&&c.onChange&&c.onChange(f,g,w)},onComplete:function(f,g,w){l||(i.setCoords(),c.onComplete&&c.onComplete(f,g,w))}};o?e.util.animateColor(m.startValue,m.endValue,m.duration,m):e.util.animate(m)}}),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.object.extend,l=r.util.object.clone,i={x1:1,x2:1,y1:1,y2:1},s=r.StaticCanvas.supports("setLineDash");if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(a,m){a||(a=[0,0,0,0]),this.callSuper("initialize",m),this.set("x1",a[0]),this.set("y1",a[1]),this.set("x2",a[2]),this.set("y2",a[3]),this._setWidthHeight(m)},_setWidthHeight:function(a){a||(a={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in a?a.left:this._getLeftToOriginX(),this.top="top"in a?a.top:this._getTopToOriginY()},_set:function(a,m){return this.callSuper("_set",a,m),typeof i[a]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(a){if(a.beginPath(),!this.strokeDashArray||this.strokeDashArray&&s){var m=this.calcLinePoints();a.moveTo(m.x1,m.y1),a.lineTo(m.x2,m.y2)}a.lineWidth=this.strokeWidth;var f=a.strokeStyle;a.strokeStyle=this.stroke||a.fillStyle,this.stroke&&this._renderStroke(a),a.strokeStyle=f},_renderDashedStroke:function(a){var m=this.calcLinePoints();a.beginPath(),r.util.drawDashedLine(a,m.x1,m.y1,m.x2,m.y2,this.strokeDashArray),a.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(a){return c(this.callSuper("toObject",a),this.calcLinePoints())},_getNonTransformedDimensions:function(){var a=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(a.y-=this.strokeWidth),this.height===0&&(a.x-=this.strokeWidth)),a},calcLinePoints:function(){var a=this.x1<=this.x2?-1:1,m=this.y1<=this.y2?-1:1,f=a*this.width*.5,g=m*this.height*.5,w=a*this.width*-.5,C=m*this.height*-.5;return{x1:f,x2:w,y1:g,y2:C}},_toSVG:function(){var a=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(a,m,f){f=f||{};var g=r.parseAttributes(a,r.Line.ATTRIBUTE_NAMES),w=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];m(new r.Line(w,c(g,f)))},r.Line.fromObject=function(a,m){function f(w){delete w.points,m&&m(w)}var g=l(a,!0);g.points=[a.x1,a.y1,a.x2,a.y2],r.Object._fromObject("Line",g,f,"points")};function o(a,m){var f=a.origin,g=a.axis1,w=a.axis2,C=a.dimension,P=m.nearest,M=m.center,L=m.farthest;return function(){switch(this.get(f)){case P:return Math.min(this.get(g),this.get(w));case M:return Math.min(this.get(g),this.get(w))+.5*this.get(C);case L:return Math.max(this.get(g),this.get(w))}}}})(t),(function(d){var r=d.fabric||(d.fabric={}),c=Math.PI;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:c*2,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(i,s){return this.callSuper("_set",i,s),i==="radius"&&this.setRadius(s),this},toObject:function(i){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(i))},_toSVG:function(){var i,s=0,o=0,a=(this.endAngle-this.startAngle)%(2*c);if(a===0)i=["<circle ","COMMON_PARTS",'cx="'+s+'" cy="'+o+'" ','r="',this.radius,`" />
`];else{var m=r.util.cos(this.startAngle)*this.radius,f=r.util.sin(this.startAngle)*this.radius,g=r.util.cos(this.endAngle)*this.radius,w=r.util.sin(this.endAngle)*this.radius,C=a>c?"1":"0";i=['<path d="M '+m+" "+f," A "+this.radius+" "+this.radius," 0 ",+C+" 1"," "+g+" "+w,'" ',"COMMON_PARTS",` />
`]}return i},_render:function(i){i.beginPath(),i.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(i)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(i){return this.radius=i,this.set("width",i*2).set("height",i*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(i,s){var o=r.parseAttributes(i,r.Circle.ATTRIBUTE_NAMES);if(!l(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=(o.left||0)-o.radius,o.top=(o.top||0)-o.radius,s(new r.Circle(o))};function l(i){return"radius"in i&&i.radius>=0}r.Circle.fromObject=function(i,s){return r.Object._fromObject("Circle",i,s)}})(t),(function(d){var r=d.fabric||(d.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(c){var l=this.width/2,i=this.height/2;c.beginPath(),c.moveTo(-l,i),c.lineTo(0,-i),c.lineTo(l,i),c.closePath(),this._renderPaintInOrder(c)},_renderDashedStroke:function(c){var l=this.width/2,i=this.height/2;c.beginPath(),r.util.drawDashedLine(c,-l,i,0,-i,this.strokeDashArray),r.util.drawDashedLine(c,0,-i,l,i,this.strokeDashArray),r.util.drawDashedLine(c,l,i,-l,i,this.strokeDashArray),c.closePath()},_toSVG:function(){var c=this.width/2,l=this.height/2,i=[-c+" "+l,"0 "+-l,c+" "+l].join(",");return["<polygon ","COMMON_PARTS",'points="',i,'" />']}}),r.Triangle.fromObject=function(c,l){return r.Object._fromObject("Triangle",c,l)}})(t),(function(d){var r=d.fabric||(d.fabric={}),c=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this.set("rx",l&&l.rx||0),this.set("ry",l&&l.ry||0)},_set:function(l,i){switch(this.callSuper("_set",l,i),l){case"rx":this.rx=i,this.set("width",i*2);break;case"ry":this.ry=i,this.set("height",i*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(l){l.beginPath(),l.save(),l.transform(1,0,0,this.ry/this.rx,0,0),l.arc(0,0,this.rx,0,c,!1),l.restore(),this._renderPaintInOrder(l)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(l,i){var s=r.parseAttributes(l,r.Ellipse.ATTRIBUTE_NAMES);s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,i(new r.Ellipse(s))},r.Ellipse.fromObject=function(l,i){return r.Object._fromObject("Ellipse",l,i)}})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(l){var i=this.rx?Math.min(this.rx,this.width/2):0,s=this.ry?Math.min(this.ry,this.height/2):0,o=this.width,a=this.height,m=-this.width/2,f=-this.height/2,g=i!==0||s!==0,w=1-.5522847498;l.beginPath(),l.moveTo(m+i,f),l.lineTo(m+o-i,f),g&&l.bezierCurveTo(m+o-w*i,f,m+o,f+w*s,m+o,f+s),l.lineTo(m+o,f+a-s),g&&l.bezierCurveTo(m+o,f+a-w*s,m+o-w*i,f+a,m+o-i,f+a),l.lineTo(m+i,f+a),g&&l.bezierCurveTo(m+w*i,f+a,m,f+a-w*s,m,f+a-s),l.lineTo(m,f+s),g&&l.bezierCurveTo(m,f+w*s,m+w*i,f,m+i,f),l.closePath(),this._renderPaintInOrder(l)},_renderDashedStroke:function(l){var i=-this.width/2,s=-this.height/2,o=this.width,a=this.height;l.beginPath(),r.util.drawDashedLine(l,i,s,i+o,s,this.strokeDashArray),r.util.drawDashedLine(l,i+o,s,i+o,s+a,this.strokeDashArray),r.util.drawDashedLine(l,i+o,s+a,i,s+a,this.strokeDashArray),r.util.drawDashedLine(l,i,s+a,i,s,this.strokeDashArray),l.closePath()},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){var l=-this.width/2,i=-this.height/2;return["<rect ","COMMON_PARTS",'x="',l,'" y="',i,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(l,i,s){if(!l)return i(null);s=s||{};var o=r.parseAttributes(l,r.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var a=new r.Rect(c(s?r.util.object.clone(s):{},o));a.visible=a.visible&&a.width>0&&a.height>0,i(a)},r.Rect.fromObject=function(l,i){return r.Object._fromObject("Rect",l,i)}})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.object.extend,l=r.util.array.min,i=r.util.array.max,s=r.util.toFixed;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(o,a){a=a||{},this.points=o||[],this.callSuper("initialize",a),this._setPositionDimensions(a)},_setPositionDimensions:function(o){var a=this._calcDimensions(o),m;this.width=a.width,this.height=a.height,o.fromSVG||(m=this.translateToGivenOrigin({x:a.left-this.strokeWidth/2,y:a.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof o.left>"u"&&(this.left=o.fromSVG?a.left:m.x),typeof o.top>"u"&&(this.top=o.fromSVG?a.top:m.y),this.pathOffset={x:a.left+this.width/2,y:a.top+this.height/2}},_calcDimensions:function(){var o=this.points,a=l(o,"x")||0,m=l(o,"y")||0,f=i(o,"x")||0,g=i(o,"y")||0,w=f-a,C=g-m;return{left:a,top:m,width:w,height:C}},toObject:function(o){return c(this.callSuper("toObject",o),{points:this.points.concat()})},_toSVG:function(){for(var o=[],a=this.pathOffset.x,m=this.pathOffset.y,f=r.Object.NUM_FRACTION_DIGITS,g=0,w=this.points.length;g<w;g++)o.push(s(this.points[g].x-a,f),",",s(this.points[g].y-m,f)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',o.join(""),`" />
`]},commonRender:function(o){var a,m=this.points.length,f=this.pathOffset.x,g=this.pathOffset.y;if(!m||isNaN(this.points[m-1].y))return!1;o.beginPath(),o.moveTo(this.points[0].x-f,this.points[0].y-g);for(var w=0;w<m;w++)a=this.points[w],o.lineTo(a.x-f,a.y-g);return!0},_render:function(o){this.commonRender(o)&&this._renderPaintInOrder(o)},_renderDashedStroke:function(o){var a,m;o.beginPath();for(var f=0,g=this.points.length;f<g;f++)a=this.points[f],m=this.points[f+1]||a,r.util.drawDashedLine(o,a.x,a.y,m.x,m.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(o){return function(a,m,f){if(!a)return m(null);f||(f={});var g=r.parsePointsAttribute(a.getAttribute("points")),w=r.parseAttributes(a,r[o].ATTRIBUTE_NAMES);w.fromSVG=!0,m(new r[o](g,c(w,f)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(o,a){return r.Object._fromObject("Polyline",o,a,"points")}})(t),(function(d){var r=d.fabric||(d.fabric={});if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_render:function(c){this.commonRender(c)&&(c.closePath(),this._renderPaintInOrder(c))},_renderDashedStroke:function(c){this.callSuper("_renderDashedStroke",c),c.closePath()}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(c,l){return r.Object._fromObject("Polygon",c,l,"points")}})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.array.min,l=r.util.array.max,i=r.util.object.extend,s=Object.prototype.toString,o=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(a,m){m=m||{},this.callSuper("initialize",m),a||(a=[]);var f=s.call(a)==="[object Array]";this.path=f?r.util.makePathSimpler(a):r.util.makePathSimpler(r.util.parsePath(a)),this.path&&r.Polyline.prototype._setPositionDimensions.call(this,m)},_renderPathCommands:function(a){var m,f=0,g=0,w=0,C=0,P=0,M=0,L=-this.pathOffset.x,B=-this.pathOffset.y;a.beginPath();for(var D=0,H=this.path.length;D<H;++D)switch(m=this.path[D],m[0]){case"L":w=m[1],C=m[2],a.lineTo(w+L,C+B);break;case"M":w=m[1],C=m[2],f=w,g=C,a.moveTo(w+L,C+B);break;case"C":w=m[5],C=m[6],P=m[3],M=m[4],a.bezierCurveTo(m[1]+L,m[2]+B,P+L,M+B,w+L,C+B);break;case"Q":a.quadraticCurveTo(m[1]+L,m[2]+B,m[3]+L,m[4]+B),w=m[3],C=m[4],P=m[1],M=m[2];break;case"z":case"Z":w=f,C=g,a.closePath();break}},_render:function(a){this._renderPathCommands(a),this._renderPaintInOrder(a)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(a){return i(this.callSuper("toObject",a),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(a){var m=this.toObject(["sourcePath"].concat(a));return m.sourcePath&&delete m.path,m},_toSVG:function(){var a=this.path.map(function(m){return m.join(" ")}).join(" ");return["<path ","COMMON_PARTS",'d="',a,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var a=r.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,a)+", "+o(-this.pathOffset.y,a)+")"},toClipPathSVG:function(a){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:m})},toSVG:function(a){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var a=[],m=[],f,g=0,w=0,C=0,P=0,M,L=0,B=this.path.length;L<B;++L){switch(f=this.path[L],f[0]){case"L":C=f[1],P=f[2],M=[];break;case"M":C=f[1],P=f[2],g=C,w=P,M=[];break;case"C":M=r.util.getBoundsOfCurve(C,P,f[1],f[2],f[3],f[4],f[5],f[6]),C=f[5],P=f[6];break;case"Q":M=r.util.getBoundsOfCurve(C,P,f[1],f[2],f[1],f[2],f[3],f[4]),C=f[3],P=f[4];break;case"z":case"Z":C=g,P=w;break}M.forEach(function(ue){a.push(ue.x),m.push(ue.y)}),a.push(C),m.push(P)}var D=c(a)||0,H=c(m)||0,Q=l(a)||0,ee=l(m)||0,se=Q-D,ie=ee-H;return{left:D,top:H,width:se,height:ie}}}),r.Path.fromObject=function(a,m){if(typeof a.sourcePath=="string"){var f=a.sourcePath;r.loadSVGFromURL(f,function(g){var w=g[0];w.setOptions(a),m&&m(w)})}else r.Object._fromObject("Path",a,m,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(a,m,f){var g=r.parseAttributes(a,r.Path.ATTRIBUTE_NAMES);g.fromSVG=!0,m(new r.Path(g.d,i(g,f)))}})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.array.min,l=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(i,s,o){s=s||{},this._objects=[],o&&this.callSuper("initialize",s),this._objects=i||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;if(o)this._updateObjectsACoords();else{var m=s&&s.centerPoint;s.originX!==void 0&&(this.originX=s.originX),s.originY!==void 0&&(this.originY=s.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete s.centerPoint,this.callSuper("initialize",s)}this.setCoords()},_updateObjectsACoords:function(){for(var i=!0,s=this._objects.length;s--;)this._objects[s].setCoords(i)},_updateObjectsCoords:function(s){for(var s=s||this.getCenterPoint(),o=this._objects.length;o--;)this._updateObjectCoords(this._objects[o],s)},_updateObjectCoords:function(i,s){var o=i.left,a=i.top,m=!0;i.set({left:o-s.x,top:a-s.y}),i.group=this,i.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(i){var s=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),i&&(s&&r.util.removeTransformFromObject(i,this.group.calcTransformMatrix()),this._objects.push(i),i.group=this,i._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,s?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(i){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(i),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(i){this.dirty=!0,i.group=this,i._set("canvas",this.canvas)},_onObjectRemoved:function(i){this.dirty=!0,delete i.group},_set:function(i,s){var o=this._objects.length;if(this.useSetOnGroup)for(;o--;)this._objects[o].setOnGroup(i,s);if(i==="canvas")for(;o--;)this._objects[o]._set(i,s);r.Object.prototype._set.call(this,i,s)},toObject:function(i){var s=this.includeDefaultValues,o=this._objects.map(function(m){var f=m.includeDefaultValues;m.includeDefaultValues=s;var g=m.toObject(i);return m.includeDefaultValues=f,g}),a=r.Object.prototype.toObject.call(this,i);return a.objects=o,a},toDatalessObject:function(i){var s,o=this.sourcePath;if(o)s=o;else{var a=this.includeDefaultValues;s=this._objects.map(function(f){var g=f.includeDefaultValues;f.includeDefaultValues=a;var w=f.toDatalessObject(i);return f.includeDefaultValues=g,w})}var m=r.Object.prototype.toDatalessObject.call(this,i);return m.objects=s,m},render:function(i){this._transformDone=!0,this.callSuper("render",i),this._transformDone=!1},shouldCache:function(){var i=r.Object.prototype.shouldCache.call(this);if(i){for(var s=0,o=this._objects.length;s<o;s++)if(this._objects[s].willDrawShadow())return this.ownCaching=!1,!1}return i},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var i=0,s=this._objects.length;i<s;i++)if(this._objects[i].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(i){for(var s=0,o=this._objects.length;s<o;s++)this._objects[s].render(i);this._drawClipPath(i)},isCacheDirty:function(i){if(this.callSuper("isCacheDirty",i))return!0;if(!this.statefullCache)return!1;for(var s=0,o=this._objects.length;s<o;s++)if(this._objects[s].isCacheDirty(!0)){if(this._cacheCanvas){var a=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-a/2,-m/2,a,m)}return!0}return!1},_restoreObjectsState:function(){var i=this.calcOwnMatrix();return this._objects.forEach(function(s){r.util.addTransformToObject(s,i),delete s.group,s.setCoords()}),this},realizeTransform:function(i,s){return r.util.addTransformToObject(i,s),i},destroy:function(){return this._objects.forEach(function(i){i.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var i=this._objects,s=this.canvas;this._objects=[];var o=this.toObject();delete o.objects;var a=new r.ActiveSelection([]);return a.set(o),a.type="activeSelection",s.remove(this),i.forEach(function(m){m.group=a,m.dirty=!0,s.add(m)}),a.canvas=s,a._objects=i,s._activeObject=a,a.setCoords(),a}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var i=!0;return this.forEachObject(function(s){s.setCoords(i)}),this},_calcBounds:function(i){for(var s=[],o=[],a,m,f,g=["tr","br","bl","tl"],w=0,C=this._objects.length,P,M=g.length;w<C;++w){for(a=this._objects[w],f=a.calcACoords(),P=0;P<M;P++)m=g[P],s.push(f[m].x),o.push(f[m].y);a.aCoords=f}this._getBounds(s,o,i)},_getBounds:function(i,s,o){var a=new r.Point(c(i),c(s)),m=new r.Point(l(i),l(s)),f=a.y||0,g=a.x||0,w=m.x-a.x||0,C=m.y-a.y||0;this.width=w,this.height=C,o||this.setPositionByOrigin({x:g,y:f},"left","top")},_toSVG:function(i){for(var s=["<g ","COMMON_PARTS",` >
`],o=0,a=this._objects.length;o<a;o++)s.push("		",this._objects[o].toSVG(i));return s.push(`</g>
`),s},getSvgStyles:function(){var i=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",s=this.visible?"":" visibility: hidden;";return[i,this.getSvgFilter(),s].join("")},toClipPathSVG:function(i){for(var s=[],o=0,a=this._objects.length;o<a;o++)s.push("	",this._objects[o].toClipPathSVG(i));return this._createBaseClipPathSVGMarkup(s,{reviver:i})}}),r.Group.fromObject=function(i,s){var o=i.objects,a=r.util.object.clone(i,!0);if(delete a.objects,typeof o=="string"){r.loadSVGFromURL(o,function(m){var f=r.util.groupSVGElements(m,i,o);f.set(a),s&&s(f)});return}r.util.enlivenObjects(o,function(m){r.util.enlivenObjects([i.clipPath],function(f){var g=r.util.object.clone(i,!0);g.clipPath=f[0],delete g.objects,s&&s(new r.Group(m,g,!0))})})})})(t),(function(d){var r=d.fabric||(d.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(c,l){l=l||{},this._objects=c||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;l.originX&&(this.originX=l.originX),l.originY&&(this.originY=l.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,l),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var l=r.Object.prototype.toObject.call(this),i=new r.Group([]);if(delete l.type,i.set(l),c.forEach(function(o){o.canvas.remove(o),o.group=i}),i._objects=c,!this.canvas)return i;var s=this.canvas;return s.add(i),s._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,l,i){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,l),i=i||{},typeof i.hasControls>"u"&&(i.hasControls=!1),i.forActiveSelection=!0;for(var s=0,o=this._objects.length;s<o;s++)this._objects[s]._renderControls(c,i);c.restore()}}),r.ActiveSelection.fromObject=function(c,l){r.util.enlivenObjects(c.objects,function(i){delete c.objects,l&&l(new r.ActiveSelection(i,c,!0))})})})(t),(function(d){var r=e.util.object.extend;if(d.fabric||(d.fabric={}),d.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,l){l||(l={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",l),this._initElement(c,l)},getElement:function(){return this._element||{}},setElement:function(c,l){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(l),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var l=e.filterBackend;l&&l.evictCachesForKey&&l.evictCachesForKey(c)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var l=this.width/2,i=this.height/2;c.beginPath(),c.moveTo(-l,-i),c.lineTo(l,-i),c.lineTo(l,i),c.lineTo(-l,i),c.lineTo(-l,-i),c.closePath()}},_renderDashedStroke:function(c){var l=-this.width/2,i=-this.height/2,s=this.width,o=this.height;c.save(),this._setStrokeStyles(c,this),c.beginPath(),e.util.drawDashedLine(c,l,i,l+s,i,this.strokeDashArray),e.util.drawDashedLine(c,l+s,i,l+s,i+o,this.strokeDashArray),e.util.drawDashedLine(c,l+s,i+o,l,i+o,this.strokeDashArray),e.util.drawDashedLine(c,l,i+o,l,i,this.strokeDashArray),c.closePath(),c.restore()},toObject:function(c){var l=[];this.filters.forEach(function(s){s&&l.push(s.toObject())});var i=r(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:l});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],l=[],i,s=this._element,o=-this.width/2,a=-this.height/2,m="",f="";if(!s)return[];if(this.hasCrop()){var g=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+o+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(f='" image-rendering="optimizeSpeed'),l.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',a-this.cropY,'" width="',s.width||s.naturalWidth,'" height="',s.height||s.height,f,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var w=this.fill;this.fill=null,i=["	<rect ",'x="',o,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=w}return this.paintFirst!=="fill"?c=c.concat(i,l):c=c.concat(l,i),c},getSrc:function(c){var l=c?this._element:this._originalElement;return l?l.toDataURL?l.toDataURL():this.srcFromAttribute?l.getAttribute("src"):l.src:this.src||""},setSrc:function(c,l,i){return e.util.loadImage(c,function(s,o){this.setElement(s,i),this._setWidthHeight(),l&&l(this,o)},this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,l=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),s=i.scaleX,o=i.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||s>l&&o>l){this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,this._lastScaleY=o;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var m=e.util.createCanvasElement(),f=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,g=a.width,w=a.height;m.width=g,m.height=w,this._element=m,this._lastScaleX=c.scaleX=s,this._lastScaleY=c.scaleY=o,e.filterBackend.applyFilters([c],a,g,w,this._element,f),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(a){return a&&!a.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var l=this._originalElement,i=l.naturalWidth||l.width,s=l.naturalHeight||l.height;if(this._element===this._originalElement){var o=e.util.createCanvasElement();o.width=i,o.height=s,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,s),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,i,s,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var l=this._element;if(l){var i=this._filterScalingX,s=this._filterScalingY,o=this.width,a=this.height,m=Math.min,f=Math.max,g=f(this.cropX,0),w=f(this.cropY,0),C=l.naturalWidth||l.width,P=l.naturalHeight||l.height,M=g*i,L=w*s,B=m(o*i,C-M),D=m(a*s,P-L),H=-o/2,Q=-a/2,ee=m(o,C/i-g),se=m(a,P/s-w);l&&c.drawImage(l,M,L,B,D,H,Q,ee,se)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,l){this.setElement(e.util.getById(c),l),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,l){c&&c.length?e.util.enlivenObjects(c,function(i){l&&l(i)},"fabric.Image.filters"):l&&l()},_setWidthHeight:function(c){c||(c={});var l=this.getElement();this.width=c.width||l.naturalWidth||l.width||0,this.height=c.height||l.naturalHeight||l.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),l=this._element.width,i=this._element.height,s=1,o=1,a=0,m=0,f=0,g=0,w,C=this.width,P=this.height,M={width:C,height:P};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(s=o=e.util.findScaleToFit(this._element,M),w=(C-l*s)/2,c.alignX==="Min"&&(a=-w),c.alignX==="Max"&&(a=w),w=(P-i*o)/2,c.alignY==="Min"&&(m=-w),c.alignY==="Max"&&(m=w)),c.meetOrSlice==="slice"&&(s=o=e.util.findScaleToCover(this._element,M),w=l-C/s,c.alignX==="Mid"&&(f=w/2),c.alignX==="Max"&&(f=w),w=i-P/o,c.alignY==="Mid"&&(g=w/2),c.alignY==="Max"&&(g=w),l=C/s,i=P/o)):(s=C/l,o=P/i),{width:l,height:i,scaleX:s,scaleY:o,offsetLeft:a,offsetTop:m,cropX:f,cropY:g}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,l){var i=e.util.object.clone(c);e.util.loadImage(i.src,function(s,o){if(o){l&&l(null,!0);return}e.Image.prototype._initFilters.call(i,i.filters,function(a){i.filters=a||[],e.Image.prototype._initFilters.call(i,[i.resizeFilter],function(m){i.resizeFilter=m[0],e.util.enlivenObjects([i.clipPath],function(f){i.clipPath=f[0];var g=new e.Image(s,i);l(g,!1)})})})},null,i.crossOrigin)},e.Image.fromURL=function(c,l,i){e.util.loadImage(c,function(s,o){l&&l(new e.Image(s,i),o)},null,i&&i.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(c,l,i){var s=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(s["xlink:href"],l,r(i?e.util.object.clone(i):{},s))}})(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var d=this.angle%360;return d>0?Math.round((d-1)/90)*90:Math.round(d/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(d){d=d||{};var r=function(){},c=d.onComplete||r,l=d.onChange||r,i=this;return e.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(s){i.rotate(s),l()},onComplete:function(){i.setCoords(),c()}}),this}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(d){return d.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(d){return d.fxStraighten({onChange:this.requestRenderAllBound}),this}}),(function(){function d(c,l){var i="precision "+l+` float;
void main(){}`,s=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(s,i),c.compileShader(s),!!c.getShaderParameter(s,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var l=document.createElement("canvas"),i=l.getContext("webgl")||l.getContext("experimental-webgl"),s=!1;if(i){e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),s=e.maxTextureSize>=c;for(var o=["highp","mediump","lowp"],a=0;a<3;a++)if(d(i,o[a])){e.webGlPrecision=o[a];break}}return this.isSupported=s,s},e.WebglFilterBackend=r;function r(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(c,l){this.dispose(),this.createWebGLCanvas(c,l),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,l)},chooseFastestCopyGLTo2DMethod:function(c,l){var i=typeof window.performance<"u",s;try{new ImageData(1,1),s=!0}catch{s=!1}var o=typeof ArrayBuffer<"u",a=typeof Uint8ClampedArray<"u";if(i&&s&&o&&a){var m=e.util.createCanvasElement(),f=new ArrayBuffer(c*l*4);if(e.forceGLPutImageData){this.imageBuffer=f,this.copyGLTo2D=E;return}var g={imageBuffer:f,destinationWidth:c,destinationHeight:l,targetCanvas:m},w,C,P;m.width=c,m.height=l,w=window.performance.now(),T.call(g,this.gl,g),C=window.performance.now()-w,w=window.performance.now(),E.call(g,this.gl,g),P=window.performance.now()-w,C>P?(this.imageBuffer=f,this.copyGLTo2D=E):this.copyGLTo2D=T}},createWebGLCanvas:function(c,l){var i=e.util.createCanvasElement();i.width=c,i.height=l;var s={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=i.getContext("webgl",s);o||(o=i.getContext("experimental-webgl",s)),o&&(o.clearColor(0,0,0,0),this.canvas=i,this.gl=o)},applyFilters:function(c,l,i,s,o,a){var m=this.gl,f;a&&(f=this.getCachedTexture(a,l));var g={originalWidth:l.width||l.originalWidth,originalHeight:l.height||l.originalHeight,sourceWidth:i,sourceHeight:s,destinationWidth:i,destinationHeight:s,context:m,sourceTexture:this.createTexture(m,i,s,!f&&l),targetTexture:this.createTexture(m,i,s),originalTexture:f||this.createTexture(m,i,s,!f&&l),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},w=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,w),c.forEach(function(C){C&&C.applyTo(g)}),_(g),this.copyGLTo2D(m,g),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(g.sourceTexture),m.deleteTexture(g.targetTexture),m.deleteFramebuffer(w),o.getContext("2d").setTransform(1,0,0,1,0,0),g},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,l,i,s){var o=c.createTexture();return c.bindTexture(c.TEXTURE_2D,o),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),s?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,s):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,l,i,0,c.RGBA,c.UNSIGNED_BYTE,null),o},getCachedTexture:function(c,l){if(this.textureCache[c])return this.textureCache[c];var i=this.createTexture(this.gl,l.width,l.height,l);return this.textureCache[c]=i,i},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:T,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,l={renderer:"",vendor:""};if(!c)return l;var i=c.getExtension("WEBGL_debug_renderer_info");if(i){var s=c.getParameter(i.UNMASKED_RENDERER_WEBGL),o=c.getParameter(i.UNMASKED_VENDOR_WEBGL);s&&(l.renderer=s.toLowerCase()),o&&(l.vendor=o.toLowerCase())}return this.gpuInfo=l,l}}})();function _(d){var r=d.targetCanvas,c=r.width,l=r.height,i=d.destinationWidth,s=d.destinationHeight;(c!==i||l!==s)&&(r.width=i,r.height=s)}function T(d,r){var c=d.canvas,l=r.targetCanvas,i=l.getContext("2d");i.translate(0,l.height),i.scale(1,-1);var s=c.height-l.height;i.drawImage(c,0,s,l.width,l.height,0,0,l.width,l.height)}function E(d,r){var c=r.targetCanvas,l=c.getContext("2d"),i=r.destinationWidth,s=r.destinationHeight,o=i*s*4,a=new Uint8Array(this.imageBuffer,0,o),m=new Uint8ClampedArray(this.imageBuffer,0,o);d.readPixels(0,0,i,s,d.RGBA,d.UNSIGNED_BYTE,a);var f=new ImageData(m,i,s);l.putImageData(f,0,0)}(function(){var d=function(){};e.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:d,dispose:d,clearWebGLCaches:d,resources:{},applyFilters:function(c,l,i,s,o){var a=o.getContext("2d");a.drawImage(l,0,0,i,s);var m=a.getImageData(0,0,i,s),f=a.getImageData(0,0,i,s),g={sourceWidth:i,sourceHeight:s,imageData:m,originalEl:l,originalImageData:f,canvasEl:o,ctx:a,filterBackend:this};return c.forEach(function(w){w.applyTo(g)}),(g.imageData.width!==i||g.imageData.height!==s)&&(o.width=g.imageData.width,o.height=g.imageData.height),a.putImageData(g.imageData,0,0),g}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(d){d&&this.setOptions(d)},setOptions:function(d){for(var r in d)this[r]=d[r]},createProgram:function(d,r,c){r=r||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var l=d.createShader(d.VERTEX_SHADER);if(d.shaderSource(l,c),d.compileShader(l),!d.getShaderParameter(l,d.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+d.getShaderInfoLog(l));var i=d.createShader(d.FRAGMENT_SHADER);if(d.shaderSource(i,r),d.compileShader(i),!d.getShaderParameter(i,d.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+d.getShaderInfoLog(i));var s=d.createProgram();if(d.attachShader(s,l),d.attachShader(s,i),d.linkProgram(s),!d.getProgramParameter(s,d.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+d.getProgramInfoLog(s));var o=this.getAttributeLocations(d,s),a=this.getUniformLocations(d,s)||{};return a.uStepW=d.getUniformLocation(s,"uStepW"),a.uStepH=d.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:o,uniformLocations:a}},getAttributeLocations:function(d,r){return{aPosition:d.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(d,r,c){var l=r.aPosition,i=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,i),d.enableVertexAttribArray(l),d.vertexAttribPointer(l,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,c,d.STATIC_DRAW)},_setupFrameBuffer:function(d){var r=d.context,c,l;d.passes>1?(c=d.destinationWidth,l=d.destinationHeight,(d.sourceWidth!==c||d.sourceHeight!==l)&&(r.deleteTexture(d.targetTexture),d.targetTexture=d.filterBackend.createTexture(r,c,l)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,d.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(d){d.passes--,d.pass++;var r=d.targetTexture;d.targetTexture=d.sourceTexture,d.sourceTexture=r},isNeutralState:function(){var d=this.mainParameter,r=e.Image.filters[this.type].prototype;if(d)if(Array.isArray(r[d])){for(var c=r[d].length;c--;)if(this[d][c]!==r[d][c])return!1;return!0}else return r[d]===this[d];else return!1},applyTo:function(d){d.webgl?(this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d)):this.applyTo2d(d)},retrieveShader:function(d){return d.programCache.hasOwnProperty(this.type)||(d.programCache[this.type]=this.createProgram(d.context)),d.programCache[this.type]},applyToWebGL:function(d){var r=d.context,c=this.retrieveShader(d);d.pass===0&&d.originalTexture?r.bindTexture(r.TEXTURE_2D,d.originalTexture):r.bindTexture(r.TEXTURE_2D,d.sourceTexture),r.useProgram(c.program),this.sendAttributeData(r,c.attributeLocations,d.aPosition),r.uniform1f(c.uniformLocations.uStepW,1/d.sourceWidth),r.uniform1f(c.uniformLocations.uStepH,1/d.sourceHeight),this.sendUniformData(r,c.uniformLocations),r.viewport(0,0,d.destinationWidth,d.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(d,r,c){d.activeTexture(c),d.bindTexture(d.TEXTURE_2D,r),d.activeTexture(d.TEXTURE0)},unbindAdditionalTexture:function(d,r){d.activeTexture(r),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(d){this[this.mainParameter]=d},sendUniformData:function(){},createHelpLayer:function(d){if(!d.helpLayer){var r=document.createElement("canvas");r.width=d.sourceWidth,r.height=d.sourceHeight,d.helpLayer=r}},toObject:function(){var d={type:this.type},r=this.mainParameter;return r&&(d[r]=this[r]),d},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(d,r){var c=new e.Image.filters[d.type](d);return r&&r(c),c},(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.ColorMatrix=l(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(i){this.callSuper("initialize",i),this.matrix=this.matrix.slice(0)},applyTo2d:function(i){var s=i.imageData,o=s.data,a=o.length,m=this.matrix,f,g,w,C,P,M=this.colorsOnly;for(P=0;P<a;P+=4)f=o[P],g=o[P+1],w=o[P+2],M?(o[P]=f*m[0]+g*m[1]+w*m[2]+m[4]*255,o[P+1]=f*m[5]+g*m[6]+w*m[7]+m[9]*255,o[P+2]=f*m[10]+g*m[11]+w*m[12]+m[14]*255):(C=o[P+3],o[P]=f*m[0]+g*m[1]+w*m[2]+C*m[3]+m[4]*255,o[P+1]=f*m[5]+g*m[6]+w*m[7]+C*m[8]+m[9]*255,o[P+2]=f*m[10]+g*m[11]+w*m[12]+C*m[13]+m[14]*255,o[P+3]=f*m[15]+g*m[16]+w*m[17]+C*m[18]+m[19]*255)},getUniformLocations:function(i,s){return{uColorMatrix:i.getUniformLocation(s,"uColorMatrix"),uConstants:i.getUniformLocation(s,"uConstants")}},sendUniformData:function(i,s){var o=this.matrix,a=[o[0],o[1],o[2],o[3],o[5],o[6],o[7],o[8],o[10],o[11],o[12],o[13],o[15],o[16],o[17],o[18]],m=[o[4],o[9],o[14],o[19]];i.uniformMatrix4fv(s.uColorMatrix,!1,a),i.uniform4fv(s.uConstants,m)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.Brightness=l(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(i){if(this.brightness!==0){var s=i.imageData,o=s.data,a,m=o.length,f=Math.round(this.brightness*255);for(a=0;a<m;a+=4)o[a]=o[a]+f,o[a+1]=o[a+1]+f,o[a+2]=o[a+2]+f}},getUniformLocations:function(i,s){return{uBrightness:i.getUniformLocation(s,"uBrightness")}},sendUniformData:function(i,s){i.uniform1f(s.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.object.extend,l=r.Image.filters,i=r.util.createClass;l.Convolute=i(l.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(s){var o=Math.sqrt(this.matrix.length),a=this.type+"_"+o+"_"+(this.opaque?1:0),m=this.fragmentSource[a];return s.programCache.hasOwnProperty(a)||(s.programCache[a]=this.createProgram(s.context,m)),s.programCache[a]},applyTo2d:function(s){var o=s.imageData,a=o.data,m=this.matrix,f=Math.round(Math.sqrt(m.length)),g=Math.floor(f/2),w=o.width,C=o.height,P=s.ctx.createImageData(w,C),M=P.data,L=this.opaque?1:0,B,D,H,Q,ee,se,ie,ue,U,X,Z,$,R;for(Z=0;Z<C;Z++)for(X=0;X<w;X++){for(ee=(Z*w+X)*4,B=0,D=0,H=0,Q=0,R=0;R<f;R++)for($=0;$<f;$++)ie=Z+R-g,se=X+$-g,!(ie<0||ie>=C||se<0||se>=w)&&(ue=(ie*w+se)*4,U=m[R*f+$],B+=a[ue]*U,D+=a[ue+1]*U,H+=a[ue+2]*U,L||(Q+=a[ue+3]*U));M[ee]=B,M[ee+1]=D,M[ee+2]=H,L?M[ee+3]=a[ee+3]:M[ee+3]=Q}s.imageData=P},getUniformLocations:function(s,o){return{uMatrix:s.getUniformLocation(o,"uMatrix"),uOpaque:s.getUniformLocation(o,"uOpaque"),uHalfSize:s.getUniformLocation(o,"uHalfSize"),uSize:s.getUniformLocation(o,"uSize")}},sendUniformData:function(s,o){s.uniform1fv(o.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.Grayscale=l(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(i){var s=i.imageData,o=s.data,a,m=o.length,f,g=this.mode;for(a=0;a<m;a+=4)g==="average"?f=(o[a]+o[a+1]+o[a+2])/3:g==="lightness"?f=(Math.min(o[a],o[a+1],o[a+2])+Math.max(o[a],o[a+1],o[a+2]))/2:g==="luminosity"&&(f=.21*o[a]+.72*o[a+1]+.07*o[a+2]),o[a]=f,o[a+1]=f,o[a+2]=f},retrieveShader:function(i){var s=this.type+"_"+this.mode;if(!i.programCache.hasOwnProperty(s)){var o=this.fragmentSource[this.mode];i.programCache[s]=this.createProgram(i.context,o)}return i.programCache[s]},getUniformLocations:function(i,s){return{uMode:i.getUniformLocation(s,"uMode")}},sendUniformData:function(i,s){var o=1;i.uniform1i(s.uMode,o)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.Invert=l(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(i){var s=i.imageData,o=s.data,a,m=o.length;for(a=0;a<m;a+=4)o[a]=255-o[a],o[a+1]=255-o[a+1],o[a+2]=255-o[a+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(i,s){return{uInvert:i.getUniformLocation(s,"uInvert")}},sendUniformData:function(i,s){i.uniform1i(s.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.object.extend,l=r.Image.filters,i=r.util.createClass;l.Noise=i(l.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(s){if(this.noise!==0){var o=s.imageData,a=o.data,m,f=a.length,g=this.noise,w;for(m=0,f=a.length;m<f;m+=4)w=(.5-Math.random())*g,a[m]+=w,a[m+1]+=w,a[m+2]+=w}},getUniformLocations:function(s,o){return{uNoise:s.getUniformLocation(o,"uNoise"),uSeed:s.getUniformLocation(o,"uSeed")}},sendUniformData:function(s,o){s.uniform1f(o.uNoise,this.noise/255),s.uniform1f(o.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.Pixelate=l(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(i){var s=i.imageData,o=s.data,a=s.height,m=s.width,f,g,w,C,P,M,L,B,D,H,Q;for(g=0;g<a;g+=this.blocksize)for(w=0;w<m;w+=this.blocksize)for(f=g*4*m+w*4,C=o[f],P=o[f+1],M=o[f+2],L=o[f+3],H=Math.min(g+this.blocksize,a),Q=Math.min(w+this.blocksize,m),B=g;B<H;B++)for(D=w;D<Q;D++)f=B*4*m+D*4,o[f]=C,o[f+1]=P,o[f+2]=M,o[f+3]=L},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(i,s){return{uBlocksize:i.getUniformLocation(s,"uBlocksize"),uStepW:i.getUniformLocation(s,"uStepW"),uStepH:i.getUniformLocation(s,"uStepH")}},sendUniformData:function(i,s){i.uniform1f(s.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.object.extend,l=r.Image.filters,i=r.util.createClass;l.RemoveColor=i(l.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(s){var o=s.imageData,a=o.data,m,f=this.distance*255,g,w,C,P=new r.Color(this.color).getSource(),M=[P[0]-f,P[1]-f,P[2]-f],L=[P[0]+f,P[1]+f,P[2]+f];for(m=0;m<a.length;m+=4)g=a[m],w=a[m+1],C=a[m+2],g>M[0]&&w>M[1]&&C>M[2]&&g<L[0]&&w<L[1]&&C<L[2]&&(a[m+3]=0)},getUniformLocations:function(s,o){return{uLow:s.getUniformLocation(o,"uLow"),uHigh:s.getUniformLocation(o,"uHigh")}},sendUniformData:function(s,o){var a=new r.Color(this.color).getSource(),m=parseFloat(this.distance),f=[0+a[0]/255-m,0+a[1]/255-m,0+a[2]/255-m,1],g=[a[0]/255+m,a[1]/255+m,a[2]/255+m,1];s.uniform4fv(o.uLow,f),s.uniform4fv(o.uHigh,g)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass,i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var s in i)c[s]=l(c.ColorMatrix,{type:s,matrix:i[s],mainParameter:!1,colorsOnly:!0}),r.Image.filters[s].fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric,c=r.Image.filters,l=r.util.createClass;c.BlendColor=l(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(i){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[i]+`}
}`},retrieveShader:function(i){var s=this.type+"_"+this.mode,o;return i.programCache.hasOwnProperty(s)||(o=this.buildSource(this.mode),i.programCache[s]=this.createProgram(i.context,o)),i.programCache[s]},applyTo2d:function(i){var s=i.imageData,o=s.data,a=o.length,m,f,g,w,C,P,M,L=1-this.alpha;M=new r.Color(this.color).getSource(),m=M[0]*this.alpha,f=M[1]*this.alpha,g=M[2]*this.alpha;for(var B=0;B<a;B+=4)switch(w=o[B],C=o[B+1],P=o[B+2],this.mode){case"multiply":o[B]=w*m/255,o[B+1]=C*f/255,o[B+2]=P*g/255;break;case"screen":o[B]=255-(255-w)*(255-m)/255,o[B+1]=255-(255-C)*(255-f)/255,o[B+2]=255-(255-P)*(255-g)/255;break;case"add":o[B]=w+m,o[B+1]=C+f,o[B+2]=P+g;break;case"diff":case"difference":o[B]=Math.abs(w-m),o[B+1]=Math.abs(C-f),o[B+2]=Math.abs(P-g);break;case"subtract":o[B]=w-m,o[B+1]=C-f,o[B+2]=P-g;break;case"darken":o[B]=Math.min(w,m),o[B+1]=Math.min(C,f),o[B+2]=Math.min(P,g);break;case"lighten":o[B]=Math.max(w,m),o[B+1]=Math.max(C,f),o[B+2]=Math.max(P,g);break;case"overlay":o[B]=m<128?2*w*m/255:255-2*(255-w)*(255-m)/255,o[B+1]=f<128?2*C*f/255:255-2*(255-C)*(255-f)/255,o[B+2]=g<128?2*P*g/255:255-2*(255-P)*(255-g)/255;break;case"exclusion":o[B]=m+w-2*m*w/255,o[B+1]=f+C-2*f*C/255,o[B+2]=g+P-2*g*P/255;break;case"tint":o[B]=m+w*L,o[B+1]=f+C*L,o[B+2]=g+P*L}},getUniformLocations:function(i,s){return{uColor:i.getUniformLocation(s,"uColor")}},sendUniformData:function(i,s){var o=new r.Color(this.color).getSource();o[0]=this.alpha*o[0]/255,o[1]=this.alpha*o[1]/255,o[2]=this.alpha*o[2]/255,o[3]=this.alpha,i.uniform4fv(s.uColor,o)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric,c=r.Image.filters,l=r.util.createClass;c.BlendImage=l(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(i){var s=this.type+"_"+this.mode,o=this.fragmentSource[this.mode];return i.programCache.hasOwnProperty(s)||(i.programCache[s]=this.createProgram(i.context,o)),i.programCache[s]},applyToWebGL:function(i){var s=i.context,o=this.createTexture(i.filterBackend,this.image);this.bindAdditionalTexture(s,o,s.TEXTURE1),this.callSuper("applyToWebGL",i),this.unbindAdditionalTexture(s,s.TEXTURE1)},createTexture:function(i,s){return i.getCachedTexture(s.cacheKey,s._element)},calculateMatrix:function(){var i=this.image,s=i._element.width,o=i._element.height;return[1/i.scaleX,0,0,0,1/i.scaleY,0,-i.left/s,-i.top/o,1]},applyTo2d:function(i){var s=i.imageData,o=i.filterBackend.resources,a=s.data,m=a.length,f=s.width,g=s.height,w,C,P,M,L,B,D,H,Q,ee,se=this.image,ie;o.blendImage||(o.blendImage=r.util.createCanvasElement()),Q=o.blendImage,ee=Q.getContext("2d"),Q.width!==f||Q.height!==g?(Q.width=f,Q.height=g):ee.clearRect(0,0,f,g),ee.setTransform(se.scaleX,0,0,se.scaleY,se.left,se.top),ee.drawImage(se._element,0,0,f,g),ie=ee.getImageData(0,0,f,g).data;for(var ue=0;ue<m;ue+=4)switch(L=a[ue],B=a[ue+1],D=a[ue+2],H=a[ue+3],w=ie[ue],C=ie[ue+1],P=ie[ue+2],M=ie[ue+3],this.mode){case"multiply":a[ue]=L*w/255,a[ue+1]=B*C/255,a[ue+2]=D*P/255,a[ue+3]=H*M/255;break;case"mask":a[ue+3]=M;break}},getUniformLocations:function(i,s){return{uTransformMatrix:i.getUniformLocation(s,"uTransformMatrix"),uImage:i.getUniformLocation(s,"uImage")}},sendUniformData:function(i,s){var o=this.calculateMatrix();i.uniform1i(s.uImage,1),i.uniformMatrix3fv(s.uTransformMatrix,!1,o)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(i,s){r.Image.fromObject(i.image,function(o){var a=r.util.object.clone(i);a.image=o,s(new r.Image.filters.BlendImage(a))})}})(t),(function(d){var r=d.fabric||(d.fabric={}),c=Math.pow,l=Math.floor,i=Math.sqrt,s=Math.abs,o=Math.round,a=Math.sin,m=Math.ceil,f=r.Image.filters,g=r.util.createClass;f.Resize=g(f.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(w,C){return{uDelta:w.getUniformLocation(C,"uDelta"),uTaps:w.getUniformLocation(C,"uTaps")}},sendUniformData:function(w,C){w.uniform2fv(C.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),w.uniform1fv(C.uTaps,this.taps)},retrieveShader:function(w){var C=this.getFilterWindow(),P=this.type+"_"+C;if(!w.programCache.hasOwnProperty(P)){var M=this.generateShader(C);w.programCache[P]=this.createProgram(w.context,M)}return w.programCache[P]},getFilterWindow:function(){var w=this.tempScale;return Math.ceil(this.lanczosLobes/w)},getTaps:function(){for(var w=this.lanczosCreate(this.lanczosLobes),C=this.tempScale,P=this.getFilterWindow(),M=new Array(P),L=1;L<=P;L++)M[L-1]=w(L*C);return M},generateShader:function(M){for(var C=new Array(M),P=this.fragmentSourceTOP,M,L=1;L<=M;L++)C[L-1]=L+".0 * uDelta";return P+="uniform float uTaps["+M+`];
`,P+=`void main() {
`,P+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,P+=`  float sum = 1.0;
`,C.forEach(function(B,D){P+="  color += texture2D(uTexture, vTexCoord + "+B+") * uTaps["+D+`];
`,P+="  color += texture2D(uTexture, vTexCoord - "+B+") * uTaps["+D+`];
`,P+="  sum += 2.0 * uTaps["+D+`];
`}),P+=`  gl_FragColor = color / sum;
`,P+="}",P},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(w){w.webgl?(w.passes++,this.width=w.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=w.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),w.destinationWidth=this.dW,this._setupFrameBuffer(w),this.applyToWebGL(w),this._swapTextures(w),w.sourceWidth=w.destinationWidth,this.height=w.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),w.destinationHeight=this.dH,this._setupFrameBuffer(w),this.applyToWebGL(w),this._swapTextures(w),w.sourceHeight=w.destinationHeight):this.applyTo2d(w)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(w){return function(C){if(C>=w||C<=-w)return 0;if(C<11920929e-14&&C>-11920929e-14)return 1;C*=Math.PI;var P=C/w;return a(C)/C*a(P)/P}},applyTo2d:function(w){var C=w.imageData,P=this.scaleX,M=this.scaleY;this.rcpScaleX=1/P,this.rcpScaleY=1/M;var L=C.width,B=C.height,D=o(L*P),H=o(B*M),Q;this.resizeType==="sliceHack"?Q=this.sliceByTwo(w,L,B,D,H):this.resizeType==="hermite"?Q=this.hermiteFastResize(w,L,B,D,H):this.resizeType==="bilinear"?Q=this.bilinearFiltering(w,L,B,D,H):this.resizeType==="lanczos"&&(Q=this.lanczosResize(w,L,B,D,H)),w.imageData=Q},sliceByTwo:function(w,C,P,M,L){var B=w.imageData,D=.5,H=!1,Q=!1,ee=C*D,se=P*D,ie=r.filterBackend.resources,ue,U,X=0,Z=0,$=C,R=0;for(ie.sliceByTwo||(ie.sliceByTwo=document.createElement("canvas")),ue=ie.sliceByTwo,(ue.width<C*1.5||ue.height<P)&&(ue.width=C*1.5,ue.height=P),U=ue.getContext("2d"),U.clearRect(0,0,C*1.5,P),U.putImageData(B,0,0),M=l(M),L=l(L);!H||!Q;)C=ee,P=se,M<l(ee*D)?ee=l(ee*D):(ee=M,H=!0),L<l(se*D)?se=l(se*D):(se=L,Q=!0),U.drawImage(ue,X,Z,C,P,$,R,ee,se),X=$,Z=R,R+=se;return U.getImageData(X,Z,M,L)},lanczosResize:function(w,C,P,M,L){function B(W){var q,oe,Y,I,K,ne,le,he,ve,ye,Oe;for(R.x=(W+.5)*se,V.x=l(R.x),q=0;q<L;q++){for(R.y=(q+.5)*ie,V.y=l(R.y),K=0,ne=0,le=0,he=0,ve=0,oe=V.x-X;oe<=V.x+X;oe++)if(!(oe<0||oe>=C)){ye=l(1e3*s(oe-R.x)),$[ye]||($[ye]={});for(var pe=V.y-Z;pe<=V.y+Z;pe++)pe<0||pe>=P||(Oe=l(1e3*s(pe-R.y)),$[ye][Oe]||($[ye][Oe]=ee(i(c(ye*ue,2)+c(Oe*U,2))/1e3)),Y=$[ye][Oe],Y>0&&(I=(pe*C+oe)*4,K+=Y,ne+=Y*D[I],le+=Y*D[I+1],he+=Y*D[I+2],ve+=Y*D[I+3]))}I=(q*M+W)*4,Q[I]=ne/K,Q[I+1]=le/K,Q[I+2]=he/K,Q[I+3]=ve/K}return++W<M?B(W):H}var D=w.imageData.data,H=w.ctx.createImageData(M,L),Q=H.data,ee=this.lanczosCreate(this.lanczosLobes),se=this.rcpScaleX,ie=this.rcpScaleY,ue=2/this.rcpScaleX,U=2/this.rcpScaleY,X=m(se*this.lanczosLobes/2),Z=m(ie*this.lanczosLobes/2),$={},R={},V={};return B(0)},bilinearFiltering:function(w,C,P,M,L){var B,D,H,Q,ee,se,ie,ue,U,X,Z,$,R=0,V,W=this.rcpScaleX,q=this.rcpScaleY,oe=4*(C-1),Y=w.imageData,I=Y.data,K=w.ctx.createImageData(M,L),ne=K.data;for(ie=0;ie<L;ie++)for(ue=0;ue<M;ue++)for(ee=l(W*ue),se=l(q*ie),U=W*ue-ee,X=q*ie-se,V=4*(se*C+ee),Z=0;Z<4;Z++)B=I[V+Z],D=I[V+4+Z],H=I[V+oe+Z],Q=I[V+oe+4+Z],$=B*(1-U)*(1-X)+D*U*(1-X)+H*X*(1-U)+Q*U*X,ne[R++]=$;return K},hermiteFastResize:function(w,C,P,M,L){for(var B=this.rcpScaleX,D=this.rcpScaleY,H=m(B/2),Q=m(D/2),ee=w.imageData,se=ee.data,ie=w.ctx.createImageData(M,L),ue=ie.data,U=0;U<L;U++)for(var X=0;X<M;X++){for(var Z=(X+U*M)*4,$=0,R=0,V=0,W=0,q=0,oe=0,Y=0,I=(U+.5)*D,K=l(U*D);K<(U+1)*D;K++)for(var ne=s(I-(K+.5))/Q,le=(X+.5)*B,he=ne*ne,ve=l(X*B);ve<(X+1)*B;ve++){var ye=s(le-(ve+.5))/H,Oe=i(he+ye*ye);Oe>1&&Oe<-1||($=2*Oe*Oe*Oe-3*Oe*Oe+1,$>0&&(ye=4*(ve+K*C),Y+=$*se[ye+3],V+=$,se[ye+3]<255&&($=$*se[ye+3]/250),W+=$*se[ye],q+=$*se[ye+1],oe+=$*se[ye+2],R+=$))}ue[Z]=W/R,ue[Z+1]=q/R,ue[Z+2]=oe/R,ue[Z+3]=Y/V}return ie},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.Contrast=l(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(i){if(this.contrast!==0){var s=i.imageData,o,m,a=s.data,m=a.length,f=Math.floor(this.contrast*255),g=259*(f+255)/(255*(259-f));for(o=0;o<m;o+=4)a[o]=g*(a[o]-128)+128,a[o+1]=g*(a[o+1]-128)+128,a[o+2]=g*(a[o+2]-128)+128}},getUniformLocations:function(i,s){return{uContrast:i.getUniformLocation(s,"uContrast")}},sendUniformData:function(i,s){i.uniform1f(s.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.Saturation=l(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(i){if(this.saturation!==0){var s=i.imageData,o=s.data,a=o.length,m=-this.saturation,f,g;for(f=0;f<a;f+=4)g=Math.max(o[f],o[f+1],o[f+2]),o[f]+=g!==o[f]?(g-o[f])*m:0,o[f+1]+=g!==o[f+1]?(g-o[f+1])*m:0,o[f+2]+=g!==o[f+2]?(g-o[f+2])*m:0}},getUniformLocations:function(i,s){return{uSaturation:i.getUniformLocation(s,"uSaturation")}},sendUniformData:function(i,s){i.uniform1f(s.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.Blur=l(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(i){i.webgl?(this.aspectRatio=i.sourceWidth/i.sourceHeight,i.passes++,this._setupFrameBuffer(i),this.horizontal=!0,this.applyToWebGL(i),this._swapTextures(i),this._setupFrameBuffer(i),this.horizontal=!1,this.applyToWebGL(i),this._swapTextures(i)):this.applyTo2d(i)},applyTo2d:function(i){i.imageData=this.simpleBlur(i)},simpleBlur:function(i){var s=i.filterBackend.resources,o,a,m=i.imageData.width,f=i.imageData.height;s.blurLayer1||(s.blurLayer1=r.util.createCanvasElement(),s.blurLayer2=r.util.createCanvasElement()),o=s.blurLayer1,a=s.blurLayer2,(o.width!==m||o.height!==f)&&(a.width=o.width=m,a.height=o.height=f);var g=o.getContext("2d"),w=a.getContext("2d"),C=15,P,M,L,B,D=this.blur*.06*.5;for(g.putImageData(i.imageData,0,0),w.clearRect(0,0,m,f),B=-C;B<=C;B++)P=(Math.random()-.5)/4,M=B/C,L=D*M*m+P,w.globalAlpha=1-Math.abs(M),w.drawImage(o,L,P),g.drawImage(a,0,0),w.globalAlpha=1,w.clearRect(0,0,a.width,a.height);for(B=-C;B<=C;B++)P=(Math.random()-.5)/4,M=B/C,L=D*M*f+P,w.globalAlpha=1-Math.abs(M),w.drawImage(o,P,L),g.drawImage(a,0,0),w.globalAlpha=1,w.clearRect(0,0,a.width,a.height);i.ctx.drawImage(o,0,0);var H=i.ctx.getImageData(0,0,o.width,o.height);return g.globalAlpha=1,g.clearRect(0,0,o.width,o.height),H},getUniformLocations:function(i,s){return{delta:i.getUniformLocation(s,"uDelta")}},sendUniformData:function(i,s){var o=this.chooseRightDelta();i.uniform2fv(s.delta,o)},chooseRightDelta:function(){var i=1,s=[0,0],o;return this.horizontal?this.aspectRatio>1&&(i=1/this.aspectRatio):this.aspectRatio<1&&(i=this.aspectRatio),o=i*this.blur*.12,this.horizontal?s[0]=o:s[1]=o,s}}),c.Blur.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.Gamma=l(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(i){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,i)},applyTo2d:function(i){var s=i.imageData,o=s.data,a=this.gamma,m=o.length,f=1/a[0],g=1/a[1],w=1/a[2],C;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),C=0,m=256;C<m;C++)this.rVals[C]=Math.pow(C/255,f)*255,this.gVals[C]=Math.pow(C/255,g)*255,this.bVals[C]=Math.pow(C/255,w)*255;for(C=0,m=o.length;C<m;C+=4)o[C]=this.rVals[o[C]],o[C+1]=this.gVals[o[C+1]],o[C+2]=this.bVals[o[C+2]]},getUniformLocations:function(i,s){return{uGamma:i.getUniformLocation(s,"uGamma")}},sendUniformData:function(i,s){i.uniform3fv(s.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.Composed=l(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(i){this.callSuper("initialize",i),this.subFilters=this.subFilters.slice(0)},applyTo:function(i){i.passes+=this.subFilters.length-1,this.subFilters.forEach(function(s){s.applyTo(i)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(i){return i.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(i){return!i.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(i,s){var o=i.subFilters||[],a=o.map(function(f){return new r.Image.filters[f.type](f)}),m=new r.Image.filters.Composed({subFilters:a});return s&&s(m),m}})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.Image.filters,l=r.util.createClass;c.HueRotation=l(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var i=this.rotation*Math.PI,s=r.util.cos(i),o=r.util.sin(i),a=1/3,m=Math.sqrt(a)*o,f=1-s;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=s+f/3,this.matrix[1]=a*f-m,this.matrix[2]=a*f+m,this.matrix[5]=a*f+m,this.matrix[6]=s+a*f,this.matrix[7]=a*f-m,this.matrix[10]=a*f-m,this.matrix[11]=a*f+m,this.matrix[12]=s+a*f},isNeutralState:function(i){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,i)},applyTo:function(i){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,i)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject})(t),(function(d){var r=d.fabric||(d.fabric={}),c=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var l="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles path".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(l),cacheProperties:r.Object.prototype.cacheProperties.concat(l),stroke:null,shadow:null,path:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(i,s){this.styles=s?s.styles||{}:{},this.text=i,this.__skipDimension=!0,this.callSuper("initialize",s),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var i=this.path;i&&(i.segmentsInfo=r.util.getPathSegmentsInfo(i.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var i=this._splitTextIntoLines(this.text);return this.textLines=i.lines,this._textLines=i.graphemeLines,this._unwrappedTextLines=i._unwrappedLines,this._text=i.graphemeText,i},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var i,s,o,a,m,f,g,w=0,C=this._textLines.length;w<C;w++)if(!(this.textAlign!=="justify"&&(w===C-1||this.isEndOfWrapping(w)))&&(a=0,m=this._textLines[w],s=this.getLineWidth(w),s<this.width&&(g=this.textLines[w].match(this._reSpacesAndTabs)))){o=g.length,i=(this.width-s)/o;for(var P=0,M=m.length;P<=M;P++)f=this.__charBounds[w][P],this._reSpaceAndTab.test(m[P])?(f.width+=i,f.kernedWidth+=i,f.left+=a,a+=i):f.left+=a}},isEndOfWrapping:function(i){return i===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var i=this.callSuper("_getCacheCanvasDimensions"),s=this.fontSize;return i.width+=s*i.zoomX,i.height+=s*i.zoomY,i},_render:function(i){this._setTextStyles(i),this._renderTextLinesBackground(i),this._renderTextDecoration(i,"underline"),this._renderText(i),this._renderTextDecoration(i,"overline"),this._renderTextDecoration(i,"linethrough")},_renderText:function(i){this.paintFirst==="stroke"?(this._renderTextStroke(i),this._renderTextFill(i)):(this._renderTextFill(i),this._renderTextStroke(i))},_setTextStyles:function(i,s,o){i.textBaseline="alphabetic",i.font=this._getFontDeclaration(s,o)},calcTextWidth:function(){for(var i=this.getLineWidth(0),s=1,o=this._textLines.length;s<o;s++){var a=this.getLineWidth(s);a>i&&(i=a)}return i},_renderTextLine:function(i,s,o,a,m,f){this._renderChars(i,s,o,a,m,f)},_renderTextLinesBackground:function(i){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var s,o,a=i.fillStyle,m,f,g=this._getLeftOffset(),w=this._getTopOffset(),C=0,P=0,M,L,B=this.path,D,H=0,Q=this._textLines.length;H<Q;H++){if(s=this.getHeightOfLine(H),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",H)){w+=s;continue}m=this._textLines[H],o=this._getLineLeftOffset(H),P=0,C=0,f=this.getValueOfPropertyAt(H,0,"textBackgroundColor");for(var ee=0,se=m.length;ee<se;ee++)M=this.__charBounds[H][ee],L=this.getValueOfPropertyAt(H,ee,"textBackgroundColor"),B?(i.save(),i.translate(M.renderLeft,M.renderTop),i.rotate(M.angle),i.fillStyle=L,L&&i.fillRect(-M.width/2,-s/this.lineHeight*(1-this._fontSizeFraction),M.width,s/this.lineHeight),i.restore()):L!==f?(D=g+o+C,this.direction==="rtl"&&(D=this.width-D-P),i.fillStyle=f,f&&i.fillRect(D,w,P,s/this.lineHeight),C=M.left,P=M.width,f=L):P+=M.kernedWidth;L&&!B&&(D=g+o+C,this.direction==="rtl"&&(D=this.width-D-P),i.fillStyle=L,i.fillRect(D,w,P,s/this.lineHeight)),w+=s}i.fillStyle=a,this._removeShadow(i)}},getFontCache:function(i){var s=i.fontFamily.toLowerCase();r.charWidthsCache[s]||(r.charWidthsCache[s]={});var o=r.charWidthsCache[s],a=i.fontStyle.toLowerCase()+"_"+(i.fontWeight+"").toLowerCase();return o[a]||(o[a]={}),o[a]},_measureChar:function(i,s,o,a){var m=this.getFontCache(s),f=this._getFontDeclaration(s),g=this._getFontDeclaration(a),w=o+i,C=f===g,P,M,L,B=s.fontSize/this.CACHE_FONT_SIZE,D;if(o&&m[o]!==void 0&&(L=m[o]),m[i]!==void 0&&(D=P=m[i]),C&&m[w]!==void 0&&(M=m[w],D=M-L),P===void 0||L===void 0||M===void 0){var H=this.getMeasuringContext();this._setTextStyles(H,s,!0)}return P===void 0&&(D=P=H.measureText(i).width,m[i]=P),L===void 0&&C&&o&&(L=H.measureText(o).width,m[o]=L),C&&M===void 0&&(M=H.measureText(w).width,m[w]=M,D=M-L),{width:P*B,kernedWidth:D*B}},getHeightOfChar:function(i,s){return this.getValueOfPropertyAt(i,s,"fontSize")},measureLine:function(i){var s=this._measureLine(i);return this.charSpacing!==0&&(s.width-=this._getWidthOfCharSpacing()),s.width<0&&(s.width=0),s},_measureLine:function(i){var s=0,o,a,m=this._textLines[i],f,g,w=0,C=new Array(m.length),P=0,M,L,B=this.path;for(this.__charBounds[i]=C,B&&(M=r.util.getPointOnPath(B.path,0,B.segmentsInfo),L=B.segmentsInfo[B.segmentsInfo.length-1].length,M.x+=B.pathOffset.x,M.y+=B.pathOffset.y),o=0;o<m.length;o++)a=m[o],g=this._getGraphemeBox(a,i,o,f),B&&(P>L&&(P%=L),this._setGraphemeOnPath(P,g,M)),C[o]=g,s+=g.kernedWidth,P+=g.kernedWidth,f=a;return C[o]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:s,numOfSpaces:w}},_setGraphemeOnPath:function(i,s,o){var a=i+s.kernedWidth/2,m=this.path,f=r.util.getPointOnPath(m.path,a,m.segmentsInfo);s.renderLeft=f.x-o.x,s.renderTop=f.y-o.y,s.angle=f.angle},_getGraphemeBox:function(i,s,o,a,m){var f=this.getCompleteStyleDeclaration(s,o),g=a?this.getCompleteStyleDeclaration(s,o-1):{},w=this._measureChar(i,f,a,g),C=w.kernedWidth,P=w.width,M;this.charSpacing!==0&&(M=this._getWidthOfCharSpacing(),P+=M,C+=M);var L={width:P,left:0,height:f.fontSize,kernedWidth:C,deltaY:f.deltaY};if(o>0&&!m){var B=this.__charBounds[s][o-1];L.left=B.left+B.width+w.kernedWidth-w.width}return L},getHeightOfLine:function(i){if(this.__lineHeights[i])return this.__lineHeights[i];for(var s=this._textLines[i],o=this.getHeightOfChar(i,0),a=1,m=s.length;a<m;a++)o=Math.max(this.getHeightOfChar(i,a),o);return this.__lineHeights[i]=o*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var i,s=0,o=0,a=this._textLines.length;o<a;o++)i=this.getHeightOfLine(o),s+=o===a-1?i/this.lineHeight:i;return s},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(i,s){i.save();for(var o=0,a=this._getLeftOffset(),m=this._getTopOffset(),f=0,g=this._textLines.length;f<g;f++){var w=this.getHeightOfLine(f),C=w/this.lineHeight,P=this._getLineLeftOffset(f);this._renderTextLine(s,i,this._textLines[f],a+P,m+o+C,f),o+=w}i.restore()},_renderTextFill:function(i){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(i,"fillText")},_renderTextStroke:function(i){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(i),i.save(),this._setLineDash(i,this.strokeDashArray),i.beginPath(),this._renderTextCommon(i,"strokeText"),i.closePath(),i.restore())},_renderChars:function(i,s,o,a,m,f){var g=this.getHeightOfLine(f),w=this.textAlign.indexOf("justify")!==-1,C,P,M="",L,B=0,D,H=this.path,Q=!w&&this.charSpacing===0&&this.isEmptyStyles(f)&&!H,ee=this.direction==="ltr",se=this.direction==="ltr"?1:-1,ie;if(s.save(),m-=g*this._fontSizeFraction/this.lineHeight,Q){s.canvas.setAttribute("dir",ee?"ltr":"rtl"),s.direction=ee?"ltr":"rtl",this._renderChar(i,s,f,0,o.join(""),a,m,g),s.restore();return}for(var ue=0,U=o.length-1;ue<=U;ue++)D=ue===U||this.charSpacing||H,M+=o[ue],L=this.__charBounds[f][ue],B===0?(a+=se*(L.kernedWidth-L.width),B+=L.width):B+=L.kernedWidth,w&&!D&&this._reSpaceAndTab.test(o[ue])&&(D=!0),D||(C=C||this.getCompleteStyleDeclaration(f,ue),P=this.getCompleteStyleDeclaration(f,ue+1),D=this._hasStyleChanged(C,P)),D&&(H?(s.save(),s.translate(L.renderLeft,L.renderTop),s.rotate(L.angle),this._renderChar(i,s,f,ue,M,-B/2,0,g),s.restore()):(ie=a,s.canvas.setAttribute("dir",ee?"ltr":"rtl"),s.direction=ee?"ltr":"rtl",this._renderChar(i,s,f,ue,M,ie,m,g)),M="",C=P,a+=se*B,B=0);s.restore()},_applyPatternGradientTransformText:function(i){var s=r.util.createCanvasElement(),o,a=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return s.width=a,s.height=m,o=s.getContext("2d"),o.beginPath(),o.moveTo(0,0),o.lineTo(a,0),o.lineTo(a,m),o.lineTo(0,m),o.closePath(),o.translate(a/2,m/2),o.fillStyle=i.toLive(o),this._applyPatternGradientTransform(o,i),o.fill(),o.createPattern(s,"no-repeat")},handleFiller:function(i,s,o){var a,m;return o.toLive?o.gradientUnits==="percentage"||o.gradientTrasnform||o.patternTransform?(a=-this.width/2,m=-this.height/2,i.translate(a,m),i[s]=this._applyPatternGradientTransformText(o),{offsetX:a,offsetY:m}):(i[s]=o.toLive(i,this),this._applyPatternGradientTransform(i,o)):(i[s]=o,{offsetX:0,offsetY:0})},_setStrokeStyles:function(i,s){return i.lineWidth=s.strokeWidth,i.lineCap=this.strokeLineCap,i.lineDashOffset=this.strokeDashOffset,i.lineJoin=this.strokeLineJoin,i.miterLimit=this.strokeMiterLimit,this.handleFiller(i,"strokeStyle",s.stroke)},_setFillStyles:function(i,s){return this.handleFiller(i,"fillStyle",s.fill)},_renderChar:function(i,s,o,a,m,f,g){var w=this._getStyleDeclaration(o,a),C=this.getCompleteStyleDeclaration(o,a),P=i==="fillText"&&C.fill,M=i==="strokeText"&&C.stroke&&C.strokeWidth,L,B;!M&&!P||(s.save(),P&&(L=this._setFillStyles(s,C)),M&&(B=this._setStrokeStyles(s,C)),s.font=this._getFontDeclaration(C),w&&w.textBackgroundColor&&this._removeShadow(s),w&&w.deltaY&&(g+=w.deltaY),P&&s.fillText(m,f-L.offsetX,g-L.offsetY),M&&s.strokeText(m,f-B.offsetX,g-B.offsetY),s.restore())},setSuperscript:function(i,s){return this._setScript(i,s,this.superscript)},setSubscript:function(i,s){return this._setScript(i,s,this.subscript)},_setScript:function(i,s,o){var a=this.get2DCursorLocation(i,!0),m=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),f=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),g={fontSize:m*o.size,deltaY:f+m*o.baseline};return this.setSelectionStyles(g,i,s),this},_hasStyleChanged:function(i,s){return i.fill!==s.fill||i.stroke!==s.stroke||i.strokeWidth!==s.strokeWidth||i.fontSize!==s.fontSize||i.fontFamily!==s.fontFamily||i.fontWeight!==s.fontWeight||i.fontStyle!==s.fontStyle||i.deltaY!==s.deltaY},_hasStyleChangedForSvg:function(i,s){return this._hasStyleChanged(i,s)||i.overline!==s.overline||i.underline!==s.underline||i.linethrough!==s.linethrough},_getLineLeftOffset:function(i){var s=this.getLineWidth(i),o=this.width-s,a=this.textAlign,m=this.direction,g,f=0,g=this.isEndOfWrapping(i);return a==="justify"||a==="justify-center"&&!g||a==="justify-right"&&!g||a==="justify-left"&&!g?0:(a==="center"&&(f=o/2),a==="right"&&(f=o),a==="justify-center"&&(f=o/2),a==="justify-right"&&(f=o),m==="rtl"&&(f-=o),f)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var i=this._forceClearCache;return i||(i=this.hasStateChanged("_dimensionAffectingProps")),i&&(this.dirty=!0,this._forceClearCache=!1),i},getLineWidth:function(i){if(this.__lineWidths[i])return this.__lineWidths[i];var s,o=this._textLines[i],a;return o===""?s=0:(a=this.measureLine(i),s=a.width),this.__lineWidths[i]=s,s},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(i,s,o){var a=this._getStyleDeclaration(i,s);return a&&typeof a[o]<"u"?a[o]:this[o]},_renderTextDecoration:function(i,s){if(!(!this[s]&&!this.styleHas(s))){for(var o,a,m,f,g,w,C,P,M=this._getLeftOffset(),L=this._getTopOffset(),B,D,H,Q,ee,se,ie,ue,U=this.path,X=this._getWidthOfCharSpacing(),Z=0,$=this._textLines.length;Z<$;Z++){if(o=this.getHeightOfLine(Z),!this[s]&&!this.styleHas(s,Z)){L+=o;continue}C=this._textLines[Z],se=o/this.lineHeight,f=this._getLineLeftOffset(Z),D=0,H=0,P=this.getValueOfPropertyAt(Z,0,s),ue=this.getValueOfPropertyAt(Z,0,"fill"),B=L+se*(1-this._fontSizeFraction),a=this.getHeightOfChar(Z,0),g=this.getValueOfPropertyAt(Z,0,"deltaY");for(var R=0,V=C.length;R<V;R++)if(Q=this.__charBounds[Z][R],ee=this.getValueOfPropertyAt(Z,R,s),ie=this.getValueOfPropertyAt(Z,R,"fill"),m=this.getHeightOfChar(Z,R),w=this.getValueOfPropertyAt(Z,R,"deltaY"),U&&ee&&ie)i.save(),i.fillStyle=ue,i.translate(Q.renderLeft,Q.renderTop),i.rotate(Q.angle),i.fillRect(-Q.kernedWidth/2,this.offsets[s]*m+w,Q.kernedWidth,this.fontSize/15),i.restore();else if((ee!==P||ie!==ue||m!==a||w!==g)&&H>0){var W=M+f+D;this.direction==="rtl"&&(W=this.width-W-H),P&&ue&&(i.fillStyle=ue,i.fillRect(W,B+this.offsets[s]*a+g,H,this.fontSize/15)),D=Q.left,H=Q.width,P=ee,ue=ie,a=m,g=w}else H+=Q.kernedWidth;i.fillStyle=ie,ee&&ie&&i.fillRect(M+f+D,B+this.offsets[s]*a+g,H-X,this.fontSize/15),L+=o}this._removeShadow(i)}},_getFontDeclaration:function(i,s){var o=i||this,a=this.fontFamily,m=r.Text.genericFonts.indexOf(a.toLowerCase())>-1,f=a===void 0||a.indexOf("'")>-1||a.indexOf(",")>-1||a.indexOf('"')>-1||m?o.fontFamily:'"'+o.fontFamily+'"';return[r.isLikelyNode?o.fontWeight:o.fontStyle,r.isLikelyNode?o.fontStyle:o.fontWeight,s?this.CACHE_FONT_SIZE+"px":o.fontSize+"px",f].join(" ")},render:function(i){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",i)))},_splitTextIntoLines:function(i){for(var s=i.split(this._reNewline),o=new Array(s.length),a=[`
`],m=[],f=0;f<s.length;f++)o[f]=r.util.string.graphemeSplit(s[f]),m=m.concat(o[f],a);return m.pop(),{_unwrappedLines:o,lines:s,graphemeText:m,graphemeLines:o}},toObject:function(i){var s=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing","path","direction"].concat(i),o=this.callSuper("toObject",s);return o.styles=c(this.styles,!0),o.path=this.path&&this.path.toObject(),o},set:function(i,s){this.callSuper("set",i,s);var o=!1,a=!1;if(typeof i=="object")for(var m in i)m==="path"&&this.setPathInfo(),o=o||this._dimensionAffectingProps.indexOf(m)!==-1,a=a||m==="path";else o=this._dimensionAffectingProps.indexOf(i)!==-1,a=i==="path";return a&&this.setPathInfo(),o&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(i,s,o){if(!i)return s(null);var a=r.parseAttributes(i,r.Text.ATTRIBUTE_NAMES),m=a.textAnchor||"left";if(o=r.util.object.extend(o?c(o):{},a),o.top=o.top||0,o.left=o.left||0,a.textDecoration){var f=a.textDecoration;f.indexOf("underline")!==-1&&(o.underline=!0),f.indexOf("overline")!==-1&&(o.overline=!0),f.indexOf("line-through")!==-1&&(o.linethrough=!0),delete o.textDecoration}"dx"in a&&(o.left+=a.dx),"dy"in a&&(o.top+=a.dy),"fontSize"in o||(o.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var g="";"textContent"in i?g=i.textContent:"firstChild"in i&&i.firstChild!==null&&"data"in i.firstChild&&i.firstChild.data!==null&&(g=i.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var w=o.strokeWidth;o.strokeWidth=0;var C=new r.Text(g,o),P=C.getScaledHeight()/C.height,M=(C.height+C.strokeWidth)*C.lineHeight-C.height,L=M*P,B=C.getScaledHeight()+L,D=0;m==="center"&&(D=C.getScaledWidth()/2),m==="right"&&(D=C.getScaledWidth()),C.set({left:C.left-D,top:C.top-(B-C.fontSize*(.07+C._fontSizeFraction))/C.lineHeight,strokeWidth:typeof w<"u"?w:1}),s(C)},r.Text.fromObject=function(i,s){var o=c(i),a=i.path;return delete o.path,r.Object._fromObject("Text",o,function(m){a?r.Object._fromObject("Path",a,function(f){m.set("path",f),s(m)},"path"):s(m)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)})(t),(function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(d){if(!this.styles||typeof d<"u"&&!this.styles[d])return!0;var r=typeof d>"u"?this.styles:{line:this.styles[d]};for(var c in r)for(var l in r[c])for(var i in r[c][l])return!1;return!0},styleHas:function(d,r){if(!this.styles||!d||d===""||typeof r<"u"&&!this.styles[r])return!1;var c=typeof r>"u"?this.styles:{0:this.styles[r]};for(var l in c)for(var i in c[l])if(typeof c[l][i][d]<"u")return!0;return!1},cleanStyle:function(d){if(!this.styles||!d||d==="")return!1;var r=this.styles,c=0,l,i,s=!0,o=0,a;for(var m in r){l=0;for(var f in r[m]){var a=r[m][f],g=a.hasOwnProperty(d);c++,g?(i?a[d]!==i&&(s=!1):i=a[d],a[d]===this[d]&&delete a[d]):s=!1,Object.keys(a).length!==0?l++:delete r[m][f]}l===0&&delete r[m]}for(var w=0;w<this._textLines.length;w++)o+=this._textLines[w].length;s&&c===o&&(this[d]=i,this.removeStyle(d))},removeStyle:function(d){if(!(!this.styles||!d||d==="")){var r=this.styles,c,l,i;for(l in r){c=r[l];for(i in c)delete c[i][d],Object.keys(c[i]).length===0&&delete c[i];Object.keys(c).length===0&&delete r[l]}}},_extendStyles:function(d,r){var c=this.get2DCursorLocation(d);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),r)},get2DCursorLocation:function(d,r){typeof d>"u"&&(d=this.selectionStart);for(var c=r?this._unwrappedTextLines:this._textLines,l=c.length,i=0;i<l;i++){if(d<=c[i].length)return{lineIndex:i,charIndex:d};d-=c[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:c[i-1].length<d?c[i-1].length:d}},getSelectionStyles:function(d,r,c){typeof d>"u"&&(d=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||d);for(var l=[],i=d;i<r;i++)l.push(this.getStyleAtPosition(i,c));return l},getStyleAtPosition:function(d,r){var c=this.get2DCursorLocation(d),l=r?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return l||{}},setSelectionStyles:function(d,r,c){typeof r>"u"&&(r=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||r);for(var l=r;l<c;l++)this._extendStyles(l,d);return this._forceClearCache=!0,this},_getStyleDeclaration:function(d,r){var c=this.styles&&this.styles[d];return c?c[r]:null},getCompleteStyleDeclaration:function(d,r){for(var c=this._getStyleDeclaration(d,r)||{},l={},i,s=0;s<this._styleProperties.length;s++)i=this._styleProperties[s],l[i]=typeof c[i]>"u"?this[i]:c[i];return l},_setStyleDeclaration:function(d,r,c){this.styles[d][r]=c},_deleteStyleDeclaration:function(d,r){delete this.styles[d][r]},_getLineStyle:function(d){return!!this.styles[d]},_setLineStyle:function(d){this.styles[d]={}},_deleteLineStyle:function(d){delete this.styles[d]}})})(),(function(){function d(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,c){this.callSuper("initialize",r,c),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,c){this[r]!==c&&(this._fireSelectionChanged(),this[r]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,l=this.canvas.viewportTransform;c.save(),c.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this.transform(c),this._clearTextArea(c),r||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,c):this.renderSelection(r,c),c.restore()}},_clearTextArea:function(r){var c=this.width+4,l=this.height+4;r.clearRect(-c/2,-l/2,c,l)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var c=this._getLeftOffset(),l=this._getTopOffset(),i=this._getCursorBoundariesOffsets(r);return{left:c,top:l,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,l,i,s=0,o=0,a,m=this.get2DCursorLocation(r);i=m.charIndex,l=m.lineIndex;for(var f=0;f<l;f++)s+=this.getHeightOfLine(f);c=this._getLineLeftOffset(l);var g=this.__charBounds[l][i];return g&&(o=g.left),this.charSpacing!==0&&i===this._textLines[l].length&&(o-=this._getWidthOfCharSpacing()),a={top:s,left:c+(o>0?o:0)},this.direction==="rtl"&&(a.left*=-1),this.cursorOffsetCache=a,this.cursorOffsetCache},renderCursor:function(r,c){var l=this.get2DCursorLocation(),i=l.lineIndex,s=l.charIndex>0?l.charIndex-1:0,o=this.getValueOfPropertyAt(i,s,"fontSize"),a=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/a,f=r.topOffset,g=this.getValueOfPropertyAt(i,s,"deltaY");f+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(r.left+r.leftOffset-m/2,f+r.top+g,m,o)},renderSelection:function(r,c){for(var l=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,s=this.textAlign.indexOf("justify")!==-1,o=this.get2DCursorLocation(l),a=this.get2DCursorLocation(i),m=o.lineIndex,f=a.lineIndex,g=o.charIndex<0?0:o.charIndex,w=a.charIndex<0?0:a.charIndex,C=m;C<=f;C++){var P=this._getLineLeftOffset(C)||0,M=this.getHeightOfLine(C),L=0,B=0,D=0;if(C===m&&(B=this.__charBounds[m][g].left),C>=m&&C<f)D=s&&!this.isEndOfWrapping(C)?this.width:this.getLineWidth(C)||5;else if(C===f)if(w===0)D=this.__charBounds[f][w].left;else{var H=this._getWidthOfCharSpacing();D=this.__charBounds[f][w-1].left+this.__charBounds[f][w-1].width-H}L=M,(this.lineHeight<1||C===f&&this.lineHeight>1)&&(M/=this.lineHeight);var Q=r.left+P+B,ee=D-B,se=M,ie=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",se=1,ie=M):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(Q=this.width-Q-ee),c.fillRect(Q,r.top+r.topOffset+ie,ee,se),r.topOffset+=L}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),c=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c}}}),e.IText.fromObject=function(r,c){if(d(r),r.styles)for(var l in r.styles)for(var i in r.styles[l])d(r.styles[l][i]);e.Object._fromObject("IText",r,c,"text")}})(),(function(){var d=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var c=r.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,r._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var c=r.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,r),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,r._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(c){c.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,c,l,i){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",c,{duration:l,onComplete:function(){s.isAborted||r[i]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var c=this,l=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},l)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var c=0,l=r-1;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)c++,l--;for(;/\S/.test(this._text[l])&&l>-1;)c++,l--;return r-c},findWordBoundaryRight:function(r){var c=0,l=r;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)c++,l++;for(;/\S/.test(this._text[l])&&l<this._text.length;)c++,l++;return r+c},findLineBoundaryLeft:function(r){for(var c=0,l=r-1;!/\n/.test(this._text[l])&&l>-1;)c++,l--;return r-c},findLineBoundaryRight:function(r){for(var c=0,l=r;!/\n/.test(this._text[l])&&l<this._text.length;)c++,l++;return r+c},searchWordBoundary:function(r,c){for(var l=this._text,i=this._reSpace.test(l[r])?r-1:r,s=l[i],o=e.reNonWord;!o.test(s)&&i>0&&i<l.length;)i+=c,s=l[i];return o.test(s)&&(i+=c===1?0:1),i},selectWord:function(r){r=r||this.selectionStart;var c=this.searchWordBoundary(r,-1),l=this.searchWordBoundary(r,1);this.selectionStart=c,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var c=this.findLineBoundaryLeft(r),l=this.findLineBoundaryRight(r);return this.selectionStart=c,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){var c=this.getSelectionStartFromPointer(r.e),l=this.selectionStart,i=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||l===i)&&(l===c||i===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==l||this.selectionEnd!==i)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,c,l){var i=l.slice(0,r),s=e.util.string.graphemeSplit(i).length;if(r===c)return{selectionStart:s,selectionEnd:s};var o=l.slice(r,c),a=e.util.string.graphemeSplit(o).length;return{selectionStart:s,selectionEnd:s+a}},fromGraphemeToStringSelection:function(r,c,l){var i=l.slice(0,r),s=i.join("").length;if(r===c)return{selectionStart:s,selectionEnd:s};var o=l.slice(r,c),a=o.join("").length;return{selectionStart:s,selectionEnd:s+a}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(r),l=this.get2DCursorLocation(r),i=l.lineIndex,s=l.charIndex,o=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,a=c.leftOffset,m=this.calcTransformMatrix(),f={x:c.left+a,y:c.top+c.topOffset+o},g=this.canvas.getRetinaScaling(),w=this.canvas.upperCanvasEl,C=w.width/g,P=w.height/g,M=C-o,L=P-o,B=w.clientWidth/C,D=w.clientHeight/P;return f=e.util.transformPoint(f,m),f=e.util.transformPoint(f,this.canvas.viewportTransform),f.x*=B,f.y*=D,f.x<0&&(f.x=0),f.x>M&&(f.x=M),f.y<0&&(f.y=0),f.y>L&&(f.y=L),f.x+=this.canvas._offset.left,f.y+=this.canvas._offset.top,{left:f.x+"px",top:f.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,c){var l=this.get2DCursorLocation(r,!0),i=this.get2DCursorLocation(c,!0),s=l.lineIndex,o=l.charIndex,a=i.lineIndex,m=i.charIndex,f,g;if(s!==a){if(this.styles[s])for(f=o;f<this._unwrappedTextLines[s].length;f++)delete this.styles[s][f];if(this.styles[a])for(f=m;f<this._unwrappedTextLines[a].length;f++)g=this.styles[a][f],g&&(this.styles[s]||(this.styles[s]={}),this.styles[s][o+f-m]=g);for(f=s+1;f<=a;f++)delete this.styles[f];this.shiftLineStyles(a,s-a)}else if(this.styles[s]){g=this.styles[s];var w=m-o,C,P;for(f=o;f<m;f++)delete g[f];for(P in this.styles[s])C=parseInt(P,10),C>=m&&(g[C-w]=g[P],delete g[P])}},shiftLineStyles:function(r,c){var l=d(this.styles);for(var i in this.styles){var s=parseInt(i,10);s>r&&(this.styles[s+c]=l[s],l[s-c]||delete this.styles[s])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,c,l,i){var s,o={},a=!1,m=this._unwrappedTextLines[r].length===c;l||(l=1),this.shiftLineStyles(r,l),this.styles[r]&&(s=this.styles[r][c===0?c:c-1]);for(var f in this.styles[r]){var g=parseInt(f,10);g>=c&&(a=!0,o[g-c]=this.styles[r][f],m&&c===0||delete this.styles[r][f])}var w=!1;for(a&&!m&&(this.styles[r+l]=o,w=!0),w&&l--;l>0;)i&&i[l-1]?this.styles[r+l]={0:d(i[l-1])}:s?this.styles[r+l]={0:d(s)}:delete this.styles[r+l],l--;this._forceClearCache=!0},insertCharStyleObject:function(r,c,l,i){this.styles||(this.styles={});var s=this.styles[r],o=s?d(s):{};l||(l=1);for(var a in o){var m=parseInt(a,10);m>=c&&(s[m+l]=o[m],o[m-l]||delete s[m])}if(this._forceClearCache=!0,i){for(;l--;)Object.keys(i[l]).length&&(this.styles[r]||(this.styles[r]={}),this.styles[r][c+l]=d(i[l]));return}if(s)for(var f=s[c?c-1:1];f&&l--;)this.styles[r][c+l]=d(f)},insertNewStyleBlock:function(r,c,l){for(var i=this.get2DCursorLocation(c,!0),s=[0],o=0,a=0;a<r.length;a++)r[a]===`
`?(o++,s[o]=0):s[o]++;s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],l),l=l&&l.slice(s[0]+1)),o&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],o);for(var a=1;a<o;a++)s[a]>0?this.insertCharStyleObject(i.lineIndex+a,0,s[a],l):l&&(this.styles[i.lineIndex+a][0]=l[0]),l=l&&l.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(i.lineIndex+a,0,s[a],l)},setSelectionStartEndWithShift:function(r,c,l){l<=r?(c===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=l):l>r&&l<c?this._selectionDirection==="right"?this.selectionEnd=l:this.selectionStart=l:(c===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=l)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})})(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(d){if(this.canvas){this.__newClickTime=+new Date;var r=d.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",d),this._stopEvent(d.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(d){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===d.x&&this.__lastPointer.y===d.y},_stopEvent:function(d){d.preventDefault&&d.preventDefault(),d.stopPropagation&&d.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(d){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(d.e))},tripleClickHandler:function(d){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(d.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(d.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(d){if(this.__isMousedown=!1,!(!this.editable||this.group||d.transform&&d.transform.actionPerformed||d.e.button&&d.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(d.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(d){var r=this.getSelectionStartFromPointer(d),c=this.selectionStart,l=this.selectionEnd;d.shiftKey?this.setSelectionStartEndWithShift(c,l,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(d){for(var r=this.getLocalPointer(d),c=0,l=0,i=0,s=0,o=0,a,m,f=0,g=this._textLines.length;f<g&&i<=r.y;f++)i+=this.getHeightOfLine(f)*this.scaleY,o=f,f>0&&(s+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));a=this._getLineLeftOffset(o),l=a*this.scaleX,m=this._textLines[o],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+l);for(var w=0,C=m.length;w<C&&(c=l,l+=this.__charBounds[o][w].kernedWidth*this.scaleX,l<=r.x);w++)s++;return this._getNewSelectionStartFromOffset(r,c,l,s,C)},_getNewSelectionStartFromOffset:function(d,r,c,l,i){var s=d.x-r,o=c-d.x,a=o>s||o<0?0:1,m=l+a;return this.flipX&&(m=i-m),m>this._text.length&&(m=this._text.length),m}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var d=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+d.top+"; left: "+d.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+d.fontSize+";",e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(d){if(this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(d.keyCode in r)this[r[d.keyCode]](d);else if(d.keyCode in this.ctrlKeysMapDown&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapDown[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),d.keyCode>=33&&d.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(d){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(d.keyCode in this.ctrlKeysMapUp&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapUp[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(d){var r=this.fromPaste;if(this.fromPaste=!1,d&&d.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,l=this._text.length,i=c.length,s,o,a=i-l,m=this.selectionStart,f=this.selectionEnd,g=m!==f,w,C,P;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var M=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),L=m>M.selectionStart;g?(s=this._text.slice(m,f),a+=f-m):i<l&&(L?s=this._text.slice(f+a,f):s=this._text.slice(m,m-a)),o=c.slice(M.selectionEnd-a,M.selectionEnd),s&&s.length&&(o.length&&(w=this.getSelectionStyles(m,m+1,!1),w=o.map(function(){return w[0]})),g?(C=m,P=f):L?(C=f-s.length,P=f):(C=f,P=f+s.length),this.removeStyleFromTo(C,P)),o.length&&(r&&o.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(w=e.copiedTextStyle),this.insertNewStyleBlock(o,m,w)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(d){this.compositionStart=d.target.selectionStart,this.compositionEnd=d.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(d){return d&&d.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(d,r){var c=this._getLineLeftOffset(d),l;return r>0&&(l=this.__charBounds[d][r-1],c+=l.left+l.width),c},getDownCursorOffset:function(d,r){var c=this._getSelectionForOffset(d,r),l=this.get2DCursorLocation(c),i=l.lineIndex;if(i===this._textLines.length-1||d.metaKey||d.keyCode===34)return this._text.length-c;var s=l.charIndex,o=this._getWidthBeforeCursor(i,s),a=this._getIndexOnLine(i+1,o),m=this._textLines[i].slice(s);return m.length+a+1+this.missingNewlineOffset(i)},_getSelectionForOffset:function(d,r){return d.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(d,r){var c=this._getSelectionForOffset(d,r),l=this.get2DCursorLocation(c),i=l.lineIndex;if(i===0||d.metaKey||d.keyCode===33)return-c;var s=l.charIndex,o=this._getWidthBeforeCursor(i,s),a=this._getIndexOnLine(i-1,o),m=this._textLines[i].slice(0,s),f=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+a-m.length+(1-f)},_getIndexOnLine:function(d,r){for(var c=this._textLines[d],l=this._getLineLeftOffset(d),i=l,s=0,o,a,m=0,f=c.length;m<f;m++)if(o=this.__charBounds[d][m].width,i+=o,i>r){a=!0;var g=i-o,w=i,C=Math.abs(g-r),P=Math.abs(w-r);s=P<C?m:m-1;break}return a||(s=c.length-1),s},moveCursorDown:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",d)},moveCursorUp:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",d)},_moveCursorUpOrDown:function(d,r){var c="get"+d+"CursorOffset",l=this[c](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(l):this.moveCursorWithoutShift(l),l!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(d){var r=this._selectionDirection==="left"?this.selectionStart+d:this.selectionEnd+d;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),d!==0},moveCursorWithoutShift:function(d){return d<0?(this.selectionStart+=d,this.selectionEnd=this.selectionStart):(this.selectionEnd+=d,this.selectionStart=this.selectionEnd),d!==0},moveCursorLeft:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",d)},_move:function(d,r,c){var l;if(d.altKey)l=this["findWordBoundary"+c](this[r]);else if(d.metaKey||d.keyCode===35||d.keyCode===36)l=this["findLineBoundary"+c](this[r]);else return this[r]+=c==="Left"?-1:1,!0;if(typeof l!==void 0&&this[r]!==l)return this[r]=l,!0},_moveLeft:function(d,r){return this._move(d,r,"Left")},_moveRight:function(d,r){return this._move(d,r,"Right")},moveCursorLeftWithoutShift:function(d){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(d,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(d){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(d,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(d,"selectionStart")},moveCursorRight:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",d)},_moveCursorLeftOrRight:function(d,r){var c="moveCursor"+d+"With";this._currentCursorOpacity=1,r.shiftKey?c+="Shift":c+="outShift",this[c](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(d){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(d,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(d,"selectionEnd")},moveCursorRightWithoutShift:function(d){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(d,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(d,r){typeof r>"u"&&(r=d+1),this.removeStyleFromTo(d,r),this._text.splice(d,r-d),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(d,r,c,l){typeof l>"u"&&(l=c),l>c&&this.removeStyleFromTo(c,l);var i=e.util.string.graphemeSplit(d);this.insertNewStyleBlock(i,c,r),this._text=[].concat(this._text.slice(0,c),i,this._text.slice(l)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),(function(){var d=e.util.toFixed,r=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),l=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(l)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var l=!0,i=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",i?'text-decoration="'+i+'" ':"",'style="',this.getSvgStyles(l),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,l){var i=[],s=[],o=c,a;this._setSVGBg(s);for(var m=0,f=this._textLines.length;m<f;m++)a=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(s,m,l+a,o),this._setSVGTextLineText(i,m,l+a,o),o+=this.getHeightOfLine(m);return{textSpans:i,textBgRects:s}},_createTextCharSpan:function(c,l,i,s){var o=c!==c.trim()||c.match(r),a=this.getSvgSpanStyles(l,o),m=a?'style="'+a+'"':"",f=l.deltaY,g="",w=e.Object.NUM_FRACTION_DIGITS;return f&&(g=' dy="'+d(f,w)+'" '),['<tspan x="',d(i,w),'" y="',d(s,w),'" ',g,m,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,l,i,s){var o=this.getHeightOfLine(l),a=this.textAlign.indexOf("justify")!==-1,m,f,g="",w,C,P=0,M=this._textLines[l],L;s+=o*(1-this._fontSizeFraction)/this.lineHeight;for(var B=0,D=M.length-1;B<=D;B++)L=B===D||this.charSpacing,g+=M[B],w=this.__charBounds[l][B],P===0?(i+=w.kernedWidth-w.width,P+=w.width):P+=w.kernedWidth,a&&!L&&this._reSpaceAndTab.test(M[B])&&(L=!0),L||(m=m||this.getCompleteStyleDeclaration(l,B),f=this.getCompleteStyleDeclaration(l,B+1),L=this._hasStyleChangedForSvg(m,f)),L&&(C=this._getStyleDeclaration(l,B)||{},c.push(this._createTextCharSpan(g,C,i,s)),g="",m=f,i+=P,P=0)},_pushTextBgRect:function(c,l,i,s,o,a){var m=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(l),' x="',d(i,m),'" y="',d(s,m),'" width="',d(o,m),'" height="',d(a,m),`"></rect>
`)},_setSVGTextLineBg:function(c,l,i,s){for(var o=this._textLines[l],a=this.getHeightOfLine(l)/this.lineHeight,m=0,f=0,g,w,C=this.getValueOfPropertyAt(l,0,"textBackgroundColor"),P=0,M=o.length;P<M;P++)g=this.__charBounds[l][P],w=this.getValueOfPropertyAt(l,P,"textBackgroundColor"),w!==C?(C&&this._pushTextBgRect(c,C,i+f,s,m,a),f=g.left,m=g.width,C=w):m+=g.kernedWidth;w&&this._pushTextBgRect(c,w,i+f,s,m,a)},_getFillAttributes:function(c){var l=c&&typeof c=="string"?new e.Color(c):"";return!l||!l.getSource()||l.getAlpha()===1?'fill="'+c+'"':'opacity="'+l.getAlpha()+'" fill="'+l.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var l=0,i=0,s=0;s<c;s++)l+=this.getHeightOfLine(s);return i=this.getHeightOfLine(s),{lineTop:l,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var l=e.Object.prototype.getSvgStyles.call(this,c);return l+" white-space: pre;"}})})(),(function(d){var r=d.fabric||(d.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var l=0,i=0,s=0,o={},a=0;a<c.graphemeLines.length;a++)c.graphemeText[s]===`
`&&a>0?(i=0,s++,l++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[s])&&a>0&&(i++,s++),o[a]={line:l,offset:i},s+=c.graphemeLines[a].length,i+=c.graphemeLines[a].length;return o},styleHas:function(c,l){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[l];i&&(l=i.line)}return r.Text.prototype.styleHas.call(this,c,l)},isEmptyStyles:function(c){if(!this.styles)return!0;var l=0,i=c+1,s,o,a=!1,m=this._styleMap[c],f=this._styleMap[c+1];m&&(c=m.line,l=m.offset),f&&(i=f.line,a=i===c,s=f.offset),o=typeof c>"u"?this.styles:{line:this.styles[c]};for(var g in o)for(var w in o[g])if(w>=l&&(!a||w<s))for(var C in o[g][w])return!1;return!0},_getStyleDeclaration:function(c,l){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[c];if(!i)return null;c=i.line,l=i.offset+l}return this.callSuper("_getStyleDeclaration",c,l)},_setStyleDeclaration:function(c,l,i){var s=this._styleMap[c];c=s.line,l=s.offset+l,this.styles[c][l]=i},_deleteStyleDeclaration:function(c,l){var i=this._styleMap[c];c=i.line,l=i.offset+l,delete this.styles[c][l]},_getLineStyle:function(c){var l=this._styleMap[c];return!!this.styles[l.line]},_setLineStyle:function(c){var l=this._styleMap[c];this.styles[l.line]={}},_wrapText:function(c,l){var i=[],s;for(this.isWrapping=!0,s=0;s<c.length;s++)i=i.concat(this._wrapLine(c[s],s,l));return this.isWrapping=!1,i},_measureWord:function(c,l,i){var s=0,o,a=!0;i=i||0;for(var m=0,f=c.length;m<f;m++){var g=this._getGraphemeBox(c[m],l,m+i,o,a);s+=g.kernedWidth,o=c[m]}return s},_wrapLine:function(c,l,i,Q){var o=0,a=this.splitByGrapheme,m=[],f=[],g=a?r.util.string.graphemeSplit(c):c.split(this._wordJoiners),w="",C=0,P=a?"":" ",M=0,L=0,B=0,D=!0,H=this._getWidthOfCharSpacing(),Q=Q||0;g.length===0&&g.push([]),i-=Q;for(var ee=0;ee<g.length;ee++)w=a?g[ee]:r.util.string.graphemeSplit(g[ee]),M=this._measureWord(w,l,C),C+=w.length,o+=L+M-H,o>i&&!D?(m.push(f),f=[],o=M,D=!0):o+=H,!D&&!a&&f.push(P),f=f.concat(w),L=a?0:this._measureWord([P],l,C),C++,D=!1,M>B&&(B=M);return ee&&m.push(f),B+Q>this.dynamicMinWidth&&(this.dynamicMinWidth=B-H+Q),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var l=r.Text.prototype._splitTextIntoLines.call(this,c),i=this._wrapText(l.lines,this.width),s=new Array(i.length),o=0;o<i.length;o++)s[o]=i[o].join("");return l.lines=s,l.graphemeLines=i,l},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var l in this._styleMap)this._textLines[l]&&(c[this._styleMap[l].line]=1);for(var l in this.styles)c[l]||delete this.styles[l]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),r.Textbox.fromObject=function(c,l){return r.Object._fromObject("Textbox",c,l,"text")}})(t),(function(){var d=e.controlsUtils,r=d.scaleSkewCursorStyleHandler,c=d.scaleCursorStyleHandler,l=d.scalingEqually,i=d.scalingYOrSkewingX,s=d.scalingXOrSkewingY,o=d.scaleOrSkewActionName,a=e.Object.prototype.controls;if(a.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:s,getActionName:o}),a.mr=new e.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:s,getActionName:o}),a.mb=new e.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:i,getActionName:o}),a.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:i,getActionName:o}),a.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:l}),a.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:l}),a.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:l}),a.br=new e.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:l}),a.mtr=new e.Control({x:0,y:-.5,actionHandler:d.rotationWithSnapping,cursorStyleHandler:d.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var m=e.Textbox.prototype.controls={};m.mtr=a.mtr,m.tr=a.tr,m.br=a.br,m.tl=a.tl,m.bl=a.bl,m.mt=a.mt,m.mb=a.mb,m.mr=new e.Control({x:.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),m.ml=new e.Control({x:-.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}})(),(function(){var d=e.StaticCanvas.prototype.__setBgOverlayColor,r=e.StaticCanvas.prototype.__setBgOverlay,c=e.StaticCanvas.prototype._setSVGBgOverlayColor;e.util.object.extend(e.StaticCanvas.prototype,{backgroundColor:void 0,overlayColor:void 0,__setBgOverlayColor:function(o,a,m,f){if(a&&a.isType&&a.isType("rect"))this[o]=a,a.set(f),m&&m(this[o]);else{var g=this,w=function(){g[o]=new e.Rect(e.util.object.extend({width:g.width,height:g.height,fill:g[o]},f)),m&&m(g[o])};d.call(this,o,a,w),a&&a.colorStops&&!(a instanceof e.Gradient)&&w()}return this},setBackgroundColor:function(o,a,m){return this.__setBgOverlayColor("backgroundColor",o,a,m)},setOverlayColor:function(o,a,m){return this.__setBgOverlayColor("overlayColor",o,a,m)},__setBgOverlay:function(o,a,m,f){var g=this;(o==="backgroundColor"||o==="overlayColor")&&a&&typeof a=="object"&&a.type==="rect"?e.util.enlivenObjects([a],function(w){g[o]=w[0],m[o]=!0,f&&f()}):r.call(this,o,a,m,f)},_setSVGBgOverlayColor:function(o,a,m){var f=this[a+"Color"];if(f&&f.isType&&f.isType("rect")){var g=f.excludeFromExport||this[a]&&this[a].excludeFromExport;f&&!g&&f.toSVG&&o.push(f.toSVG(m))}else c.call(this,o,a,m)},_renderBackgroundOrOverlay:function(o,a){var m=this[a+"Color"],f=this[a+"Image"],g=this.viewportTransform,w=this[a+"Vpt"];!m&&!f||(m||f)&&(o.save(),w&&o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),m&&m.render(o),f&&f.render(o),o.restore())}});var l=e.Object.prototype.toObject,i=e.Object.prototype._createBaseSVGMarkup;e.util.object.extend(e.Object.prototype,{erasable:!0,getEraser:function(){return this.clipPath&&this.clipPath.eraser?this.clipPath:null},toObject:function(o){return l.call(this,["erasable"].concat(o))},eraserToSVG:function(o){var a=this.getEraser();if(a){var m=a._objects[0].fill;a._objects[0].fill="white",a.clipPathId="CLIPPATH_"+e.Object.__uid++;var f=['id="'+a.clipPathId+'"'].join(" "),g=["<defs>","<mask "+f+" >",a.toSVG(o.reviver),"</mask>","</defs>"];return a._objects[0].fill=m,g.join(`
`)}return""},_createBaseSVGMarkup:function(o,a){var m=this.getEraser();if(m){var f=this.eraserToSVG(a);this.clipPath=null;var g=i.call(this,o,a);return this.clipPath=m,[f,g.replace(">",'mask="url(#'+m.clipPathId+')" >')].join(`
`)}else return i.call(this,o,a)}});var s=e.Group.prototype.toObject;e.util.object.extend(e.Group.prototype,{toObject:function(o){return s.call(this,["eraser"].concat(o))}}),e.util.object.extend(e.Canvas.prototype,{isErasing:function(){return this.isDrawingMode&&this.freeDrawingBrush&&this.freeDrawingBrush.type==="eraser"&&this.freeDrawingBrush._isErasing},renderAll:function(){if(this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.isErasing()){this.freeDrawingBrush._render();return}this.hasLostContext&&this.renderTopLayer(this.contextTop);var o=this.contextContainer;return this.renderCanvas(o,this._chooseObjectsToRender()),this}}),e.EraserBrush=e.util.createClass(e.PencilBrush,{type:"eraser",_ready:!1,_drawOverlayOnTop:!1,_isErasing:!1,initialize:function(o){this.callSuper("initialize",o),this._renderBound=this._render.bind(this),this.render=this.render.bind(this)},hideObject:function(o){o&&(o._originalOpacity=o.opacity,o.set({opacity:0}))},restoreObjectVisibility:function(o){o&&o._originalOpacity&&(o.set({opacity:o._originalOpacity}),o._originalOpacity=void 0)},prepareCanvasBackgroundForLayer:function(o){if(o!=="overlay"){var a=this.canvas,m=a.get("backgroundImage"),f=a.get("backgroundColor"),g=o==="top";m&&m.erasable===!g&&this.hideObject(m),f&&f.erasable===!g&&this.hideObject(f)}},prepareCanvasOverlayForLayer:function(o){var a=this.canvas,m=a.get("overlayImage"),f=a.get("overlayColor");if(o==="bottom")return this.hideObject(m),this.hideObject(f),!1;var g=o==="top",w=m&&!m.erasable||f&&!f.erasable;return m&&m.erasable===!g&&this.hideObject(m),f&&f.erasable===!g&&this.hideObject(f),w},restoreCanvasDrawables:function(){var o=this.canvas;this.restoreObjectVisibility(o.get("backgroundImage")),this.restoreObjectVisibility(o.get("backgroundColor")),this.restoreObjectVisibility(o.get("overlayImage")),this.restoreObjectVisibility(o.get("overlayColor"))},prepareCollectionTraversal:function(o){var a=this;o.forEachObject(function(m){m.forEachObject?a.prepareCollectionTraversal(m):m.erasable&&a.hideObject(m)})},restoreCollectionTraversal:function(o){var a=this;o.forEachObject(function(m){m.forEachObject?a.restoreCollectionTraversal(m):a.restoreObjectVisibility(m)})},prepareCanvasObjectsForLayer:function(o){o==="bottom"&&this.prepareCollectionTraversal(this.canvas)},restoreCanvasObjectsFromLayer:function(o){o==="bottom"&&this.restoreCollectionTraversal(this.canvas)},prepareCanvasForLayer:function(o){return this.prepareCanvasBackgroundForLayer(o),this.prepareCanvasObjectsForLayer(o),this.prepareCanvasOverlayForLayer(o)},restoreCanvasFromLayer:function(o){this.restoreCanvasDrawables(),this.restoreCanvasObjectsFromLayer(o)},renderBottomLayer:function(){var o=this.canvas;this.prepareCanvasForLayer("bottom"),o.renderCanvas(o.getContext(),o.getObjects().filter(function(a){return!a.erasable||a.isType("group")})),this.restoreCanvasFromLayer("bottom")},renderTopLayer:function(){var o=this.canvas;this._drawOverlayOnTop=this.prepareCanvasForLayer("top"),o.renderCanvas(o.contextTop,o.getObjects()),this.callSuper("_render"),this.restoreCanvasFromLayer("top")},renderOverlay:function(){this.prepareCanvasForLayer("overlay");var o=this.canvas,a=o.contextTop;this._saveAndTransform(a),o._renderOverlay(a),a.restore(),this.restoreCanvasFromLayer("overlay")},_saveAndTransform:function(o){this.callSuper("_saveAndTransform",o),o.globalCompositeOperation="destination-out"},needsFullRender:function(){return this.callSuper("needsFullRender")||this._drawOverlayOnTop},onMouseDown:function(o,a){this.canvas._isMainEvent(a.e)&&(this._prepareForDrawing(o),this._captureDrawingPath(o),this._isErasing=!0,this.canvas.fire("erasing:start"),this._ready=!0,this._render())},_render:function(){this._ready&&(this.isRendering=1,this.renderBottomLayer(),this.renderTopLayer(),this.renderOverlay(),this.isRendering=0)},render:function(){return this._isErasing?(this.isRendering?this.isRendering=e.util.requestAnimFrame(this._renderBound):this._render(),!0):!1},_addPathToObjectEraser:function(o,a){var m,f=this;if(o.forEachObject){o.forEachObject(function(C){C.erasable&&f._addPathToObjectEraser(C,a)});return}if(o.getEraser())m=o.clipPath;else{var g=o._getNonTransformedDimensions(),w=new e.Rect({width:g.x,height:g.y,clipPath:o.clipPath,originX:"center",originY:"center"});m=new e.Group([w],{eraser:!0})}a.clone(function(C){C.globalCompositeOperation="destination-out";var P=e.util.multiplyTransformMatrices(e.util.invertTransform(o.calcTransformMatrix()),C.calcTransformMatrix());e.util.applyTransformToObject(C,P),m.addWithUpdate(C),o.set({clipPath:m,dirty:!0})})},applyEraserToCanvas:function(o){var a=this.canvas,m={};return["backgroundImage","backgroundColor","overlayImage","overlayColor"].forEach(function(f){var g=a[f];g&&g.erasable&&(this._addPathToObjectEraser(g,o),m[f]=g)},this),m},_finalizeAndAddPath:function(){var o=this.canvas.contextTop,a=this.canvas;o.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate)),a.clearContext(a.contextTop),this._isErasing=!1;var m=this._points&&this._points.length>1?this.convertPointsToSVGPath(this._points).join(""):"M 0 0 Q 0 0 0 0 L 0 0";if(m==="M 0 0 Q 0 0 0 0 L 0 0"){a.fire("erasing:end"),a.requestRenderAll();return}var f=this.createPath(m);a.fire("before:path:created",{path:f});var g=this.applyEraserToCanvas(f),w=this,C=[];a.forEachObject(function(P){P.erasable&&P.intersectsWithObject(f)&&(w._addPathToObjectEraser(P,f),C.push(P))}),a.fire("erasing:end",{path:f,targets:C,drawables:g}),a.requestRenderAll(),f.setCoords(),this._resetShadow(),a.fire("path:created",{path:f})}})})()})(Vg)),Vg}var Rl=qT();const Hg="https://my-backend-production-3416.up.railway.app",Bd={toothBoxes:{w:2128,h:356},shoeSponge:{w:876,h:596},cosmeticKit:{w:972,h:632},comb:{w:1560,h:448},showerCap:{w:980,h:632},sewingKit:{w:892,h:652},shavingKit:{w:1420,h:557},slippers:{w:1200,h:700},robes:{w:1800,h:1200}},KT=["Arial","Roboto","Montserrat","Playfair Display","Georgia","Verdana"],zd=24,A1=28;function $T(){const{t}=cn(),e=ae.useRef(null),[h,x]=ae.useState(null),[v,S]=ae.useState(null),[_,T]=ae.useState(t("logoEditor.defaultText")),[E,d]=ae.useState(""),[r,c]=ae.useState(!1),[l,i]=ae.useState("#000000"),[s,o]=ae.useState("Arial"),[a,m]=ae.useState(36),[f,g]=ae.useState("toothBoxes"),[w,C]=ae.useState("#ffffff"),[P,M]=ae.useState(A1),{addToCart:L}=Ls(),B=()=>({left:h.getWidth()/2,top:h.getHeight()/2,originX:"center",originY:"center"}),D=I=>{if(!h||!I)return;const K=h.getWidth()-zd*2,ne=h.getHeight()-zd*2;I.set({scaleX:I.scaleX||1,scaleY:I.scaleY||1}),I.setCoords();const le=I.getBoundingRect(!0);if(le.width>K||le.height>ne){const he=K/le.width,ve=ne/le.height,ye=Math.min(he,ve);I.scaleX=(I.scaleX||1)*ye,I.scaleY=(I.scaleY||1)*ye}I.setCoords()},H=I=>{I.set(B()),D(I),h.add(I).setActiveObject(I),h.requestRenderAll()},Q=(I,K=A1)=>new Promise(ne=>{try{const le=new Image;le.crossOrigin="anonymous",le.onload=()=>{const he=document.createElement("canvas");he.width=le.width,he.height=le.height;const ve=he.getContext("2d");ve.drawImage(le,0,0);const{data:ye,width:Oe,height:pe}=ve.getImageData(0,0,he.width,he.height),de=(Le,_e)=>{const Ie=(_e*Oe+Le)*4;return[ye[Ie],ye[Ie+1],ye[Ie+2]]},Ce=[de(0,0),de(Oe-1,0),de(0,pe-1),de(Oe-1,pe-1)],te=Ce.reduce((Le,_e)=>[Le[0]+_e[0],Le[1]+_e[1],Le[2]+_e[2]],[0,0,0]).map(Le=>Le/Ce.length),fe=(Le,_e,Ie,He,Je,nt)=>Math.sqrt((Le-He)**2+(_e-Je)**2+(Ie-nt)**2),Se=Math.max(4,Math.min(441,K*4.41)),je=ve.getImageData(0,0,he.width,he.height),Me=je.data;for(let Le=0;Le<pe;Le++)for(let _e=0;_e<Oe;_e++){const Ie=(Le*Oe+_e)*4,He=Me[Ie],Je=Me[Ie+1],nt=Me[Ie+2];fe(He,Je,nt,te[0],te[1],te[2])<Se&&(Me[Ie+3]=0)}ve.putImageData(je,0,0),ne(he.toDataURL("image/png"))},le.onerror=()=>ne(I),le.src=I}catch{ne(I)}}),ee=I=>new Promise(K=>{const ne=I.getElement?.()||I._originalElement||I._element;if(!ne){try{K(I.toDataURL({format:"png"}))}catch{K(null)}return}const le=document.createElement("canvas"),he=ne.naturalWidth||ne.videoWidth||ne.width,ve=ne.naturalHeight||ne.videoHeight||ne.height;if(!he||!ve)return K(null);le.width=he,le.height=ve,le.getContext("2d").drawImage(ne,0,0),K(le.toDataURL("image/png"))});ae.useEffect(()=>{const{w:I,h:K}=Bd[f],ne=new Rl.fabric.Canvas(e.current,{width:I/3,height:K/3,backgroundColor:w,selection:!0,preserveObjectStacking:!0});return ne.on("selection:created",le=>S(le.selected[0])),ne.on("selection:updated",le=>S(le.selected[0])),ne.on("selection:cleared",()=>S(null)),x(ne),()=>ne.dispose()},[]),ae.useEffect(()=>{h&&h.setBackgroundColor(w,h.requestRenderAll.bind(h))},[w,h]),ae.useEffect(()=>{if(!h)return;const I=h.getWidth(),K=h.getHeight(),ne=Bd[f].w/3,le=Bd[f].h/3;if(I===0||K===0){h.setWidth(ne),h.setHeight(le),h.requestRenderAll();return}const he=ne/I,ve=le/K;h.getObjects().forEach(ye=>{ye.left*=he,ye.top*=ve,ye.scaleX=(ye.scaleX||1)*he,ye.scaleY=(ye.scaleY||1)*ve,ye.setCoords()}),h.setWidth(ne),h.setHeight(le),h.requestRenderAll()},[f,h]),ae.useEffect(()=>{if(!h)return;const I=new MutationObserver(()=>h.renderAll());return I.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>I.disconnect()},[h]);const se=()=>{if(!h)return;const I=h.getWidth()-zd*2,K=new Rl.fabric.Textbox(_,{fontSize:a,fill:l,fontFamily:s,textAlign:"center",width:Math.max(60,I),...B()});H(K)},ie=I=>{!v||v.type!=="textbox"||(v.toObject(),I(v),v.setCoords(),h.requestRenderAll())},ue=I=>{if(v&&v.type==="textbox"){if(v.set({...I,originX:"center",originY:"center"}),I.fontSize||I.textAlign||I.fontFamily){const K=h.getWidth()-zd*2;v.set({width:Math.max(60,Math.min(v.width??K,K))})}v.set(B()),h.renderAll()}},U=()=>ie(I=>I.set({fontWeight:I.fontWeight==="bold"?"normal":"bold"})),X=()=>ie(I=>I.set({fontStyle:I.fontStyle==="italic"?"normal":"italic"})),Z=()=>ie(I=>I.set({underline:!I.underline})),$=()=>{h&&v&&(h.remove(v),S(null),h.renderAll())},R=I=>{if(!h||!I)return;const K=new FileReader;K.onload=async ne=>{let le=ne.target.result;Rl.fabric.Image.fromURL(le,he=>{he.set({crossOrigin:"anonymous"}),he._originalSrc=ne.target.result,H(he)},{crossOrigin:"anonymous"})},K.readAsDataURL(I)},V=async()=>{if(!h||!v||v.type!=="image"){alert(t("logoEditor.alerts.selectImage"));return}try{const I={left:v.left,top:v.top,originX:v.originX,originY:v.originY,angle:v.angle,scaleX:v.scaleX,scaleY:v.scaleY,flipX:v.flipX,flipY:v.flipY},K=v._originalSrc||await ee(v);if(!K)return alert(t("logoEditor.alerts.readError"));const ne=await Q(K,P);Rl.fabric.Image.fromURL(ne,le=>{le.set({crossOrigin:"anonymous",...I}),le._originalSrc=v._originalSrc||K,h.remove(v),h.add(le).setActiveObject(le),h.requestRenderAll()},{crossOrigin:"anonymous"})}catch(I){console.error(I),alert(t("logoEditor.errors.bgRemoveFailed"))}},W=()=>{if(!h||!v||v.type!=="image"||!v._originalSrc)return;const I={left:v.left,top:v.top,originX:v.originX,originY:v.originY,angle:v.angle,scaleX:v.scaleX,scaleY:v.scaleY,flipX:v.flipX,flipY:v.flipY};Rl.fabric.Image.fromURL(v._originalSrc,K=>{K.set({crossOrigin:"anonymous",...I}),K._originalSrc=v._originalSrc,h.remove(v),h.add(K).setActiveObject(K),h.requestRenderAll()},{crossOrigin:"anonymous"})},q=async()=>{if(!E.trim())return alert(t("logoEditor.alerts.enterPrompt"));try{c(!0);const K=await(await fetch(`${Hg}/api/designs/temp/ai-generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:E})})).json();if(!K?.success)throw new Error(K.error||"AI error");const ne=K.url||K.imageUrl;Rl.fabric.Image.fromURL(ne,le=>{le.set({crossOrigin:"anonymous"}),le._originalSrc=ne,H(le)},{crossOrigin:"anonymous"})}catch(I){console.error("AI error:",I),alert(t("logoEditor.errors.aiFailed"))}finally{c(!1)}},oe=async()=>{if(!h)return;const I=h.toDataURL({format:"png",quality:.95});try{const ne=await(await fetch(`${Hg}/api/designs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productType:f,sceneJson:JSON.stringify({image:I}),printColor:w})})).json();if(!ne?.success)throw new Error(ne.error||t("logoEditor.errors.saveFailed"));const le=ne.design.id,ve=await(await fetch(`${Hg}/api/designs/${le}/render`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({printPngBase64:I,mockupPngBase64:I,width:h.getWidth(),height:h.getHeight()})})).json();if(!ve?.success)throw new Error(ve.error||t("logoEditor.errors.renderFailed"));L({id:"design-"+le,name:`${f} (${t("logoEditor.cartDesign")})`,price:"0",quantity:1,image:ve.design.thumbUrl||I}),alert(t("logoEditor.success.addedToCart"))}catch(K){console.error("Save design error:",K),alert(t("logoEditor.errors.saveFailed"))}},Y=()=>{if(!h)return;const I=h.toDataURL({format:"png",quality:1}),K=document.createElement("a");K.href=I,K.download=`${f}-design.png`,K.click()};return k.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white flex flex-col items-center py-8 px-4 transition-colors",children:[k.jsx("h1",{className:"text-3xl font-bold mb-4",children:t("logoEditor.title")}),k.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 justify-center items-center",children:[k.jsxs("label",{children:[k.jsxs("span",{className:"mr-2",children:[t("logoEditor.productType"),":"]}),k.jsx("select",{value:f,onChange:I=>g(I.target.value),className:"rounded px-2 py-1 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800",children:Object.keys(Bd).map(I=>k.jsx("option",{value:I,children:t(`logoEditor.productTypes.${I}`)},I))})]}),k.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[k.jsx(bS,{className:"text-blue-500"}),k.jsxs("span",{children:[t("logoEditor.boxColor"),":"]}),k.jsx("input",{type:"color",value:w,onChange:I=>C(I.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-300 dark:border-gray-700"})]})]}),v?.type==="textbox"&&k.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg mb-4 flex flex-wrap gap-3 justify-center items-center shadow-sm",children:[k.jsx("input",{type:"color",value:l,onChange:I=>{i(I.target.value),ue({fill:I.target.value})}}),k.jsx("select",{value:s,onChange:I=>{o(I.target.value),ue({fontFamily:I.target.value})},className:"rounded px-2 py-1 bg-white dark:bg-gray-700",children:KT.map(I=>k.jsx("option",{children:I},I))}),k.jsx("input",{type:"number",min:"8",max:"120",value:a,onChange:I=>{const K=parseInt(I.target.value);m(K),ue({fontSize:K})},className:"rounded px-2 py-1 w-16 bg-white dark:bg-gray-700"}),k.jsx("button",{onClick:U,className:"hover:text-yellow-400",children:k.jsx(vS,{size:18})}),k.jsx("button",{onClick:X,className:"hover:text-yellow-400",children:k.jsx(TS,{size:18})}),k.jsx("button",{onClick:Z,className:"hover:text-yellow-400",children:k.jsx(FS,{size:18})}),k.jsx("button",{onClick:()=>ue({textAlign:"left"}),children:k.jsx(fS,{size:18})}),k.jsx("button",{onClick:()=>ue({textAlign:"center"}),children:k.jsx(dS,{size:18})}),k.jsx("button",{onClick:()=>ue({textAlign:"right"}),children:k.jsx(gS,{size:18})})]}),v?.type==="image"&&k.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg mb-4 flex flex-wrap gap-4 justify-center items-center shadow-sm",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsxs("span",{className:"text-sm",children:[t("logoEditor.bgTolerance"),":"]}),k.jsx("input",{type:"range",min:0,max:100,value:P,onChange:I=>M(parseInt(I.target.value))}),k.jsx("span",{className:"text-xs opacity-70 w-8 text-right",children:P})]}),k.jsx("button",{onClick:V,className:"px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white",children:t("logoEditor.removeBg")}),v?._originalSrc&&k.jsx("button",{onClick:W,className:"px-3 py-2 rounded-lg bg-gray-300 hover:bg-gray-400 text-black",children:t("logoEditor.restoreOriginal")})]}),k.jsxs("div",{className:"flex flex-wrap gap-3 mb-5 justify-center",children:[k.jsx("input",{type:"text",placeholder:t("logoEditor.promptPlaceholder"),value:E,onChange:I=>d(I.target.value),className:"px-3 py-2 rounded-lg w-72 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800"}),k.jsxs("button",{disabled:r,onClick:q,className:`px-4 py-2 rounded-lg flex items-center gap-2 text-white ${r?"bg-gray-600":"bg-purple-600 hover:bg-purple-700 dark:bg-purple-500 dark:hover:bg-purple-600"}`,children:[k.jsx(Ap,{size:18}),t(r?"logoEditor.generating":"logoEditor.aiLogo")]})]}),k.jsxs("div",{className:"flex flex-wrap gap-3 mb-4 justify-center",children:[k.jsxs("button",{onClick:se,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg flex items-center gap-2",children:[k.jsx(DS,{size:18})," ",t("logoEditor.addText")]}),k.jsxs("label",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg flex items-center gap-2 cursor-pointer",children:[k.jsx(rp,{size:18})," ",t("logoEditor.addImage"),k.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:I=>R(I.target.files?.[0])})]}),k.jsxs("button",{onClick:$,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg flex items-center gap-2",children:[k.jsx(hf,{size:18})," ",t("logoEditor.delete")]}),k.jsxs("button",{onClick:Y,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-lg flex items-center gap-2",children:[k.jsx(_S,{size:18})," ",t("logoEditor.download")]}),k.jsxs("button",{onClick:oe,className:"bg-yellow-500 hover:bg-yellow-600 text-black px-3 py-2 rounded-lg flex items-center gap-2",children:[k.jsx($l,{size:18})," ",t("logoEditor.toCart")]})]}),k.jsx("div",{className:"bg-white p-3 rounded-lg shadow-md border border-gray-300 dark:border-gray-700",children:k.jsx("canvas",{ref:e})})]})}function QT(){const t=Ma();return ae.useEffect(()=>{document.body.style.overflow=""},[t]),null}function JT(){const{i18n:t}=cn();return k.jsx(lS,{children:k.jsx(lx,{children:k.jsx(aS,{children:k.jsx(ae.Suspense,{fallback:k.jsx("div",{className:"text-center py-10",children:"Loading..."}),children:k.jsxs(Zb,{children:[k.jsx(VS,{}),k.jsx(QT,{})," ",k.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-300 flex flex-col",children:[k.jsx(zS,{}),k.jsx("main",{className:"flex-grow",children:k.jsxs(Wb,{children:[k.jsx(wi,{path:"/",element:k.jsx(Lk,{})}),k.jsx(wi,{path:"/catalog",element:k.jsx(DT,{})}),k.jsx(wi,{path:"/about",element:k.jsx(FT,{})}),k.jsx(wi,{path:"/contacts",element:k.jsx(IT,{})}),k.jsx(wi,{path:"/checkout",element:k.jsx(BT,{})}),k.jsx(wi,{path:"/profile",element:k.jsx(UT,{})}),k.jsx(wi,{path:"/admin",element:k.jsx(GT,{})}),k.jsx(wi,{path:"/news",element:k.jsx(HT,{})}),k.jsx(wi,{path:"/custom-logo",element:k.jsx(WT,{})}),k.jsx(wi,{path:"/logo-editor",element:k.jsx($T,{})})]})}),k.jsx(US,{}),k.jsx(ip,{}),k.jsx(WS,{})]})]})})})})})}zw.createRoot(document.getElementById("root")).render(k.jsx(Fn.StrictMode,{children:k.jsxs(lx,{children:["   ",k.jsx(JT,{})]})}));export{Qm as c,dh as g};
